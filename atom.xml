<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>cuzz&#39;s blog</title>
  
  <subtitle>填坑之路(Github托管)</subtitle>
  <link href="/atom.xml" rel="self"/>
  
  <link href="http://blog.cuzz.site/"/>
  <updated>2019-11-01T05:22:06.205Z</updated>
  <id>http://blog.cuzz.site/</id>
  
  <author>
    <name>cuzz</name>
    
  </author>
  
  <generator uri="http://hexo.io/">Hexo</generator>
  
  <entry>
    <title>Go语言入门笔记</title>
    <link href="http://blog.cuzz.site/2019/10/11/Go%E8%AF%AD%E8%A8%80%E5%85%A5%E9%97%A8%E7%AC%94%E8%AE%B0/"/>
    <id>http://blog.cuzz.site/2019/10/11/Go语言入门笔记/</id>
    <published>2019-10-11T15:59:59.000Z</published>
    <updated>2019-11-01T05:22:06.205Z</updated>
    
    <content type="html"><![CDATA[<h2 id="&#x8BFE;&#x7A0B;&#x5BFC;&#x8BBA;"><a href="#&#x8BFE;&#x7A0B;&#x5BFC;&#x8BBA;" class="headerlink" title="&#x8BFE;&#x7A0B;&#x5BFC;&#x8BBA;"></a>&#x8BFE;&#x7A0B;&#x5BFC;&#x8BBA;</h2><ul><li>&#x7279;&#x70B9;<ul><li>&#x6CA1;&#x6709;&#x201C;&#x5BF9;&#x8C61;&#x201D;&#xFF0C;&#x6CA1;&#x6709;&#x7EE7;&#x627F;&#xFF0C;&#x6CA1;&#x6709;&#x6CDB;&#x578B;&#xFF0C;&#x6CA1;&#x6709; try/catch</li><li>&#x6709;&#x63A5;&#x53E3;&#xFF0C;&#x51FD;&#x6570;&#x5F0F;&#x7F16;&#x7A0B;&#xFF0C;CSP &#x5E76;&#x53D1;&#x6A21;&#x578B;&#xFF08;goroutine + channel&#xFF09;</li><li>&#x8BED;&#x6CD5;&#x7B80;&#x5355;</li></ul></li><li>&#x57FA;&#x672C;&#x8BED;&#x6CD5;<ul><li>&#x53D8;&#x91CF;</li><li>&#x9009;&#x62E9;&#xFF0C;&#x5FAA;&#x73AF;</li><li>&#x6307;&#x9488;&#xFF0C;&#x6570;&#x7EC4;&#xFF0C;&#x5BB9;&#x5668;</li></ul></li><li>&#x9762;&#x5411;&#x63A5;&#x53E3;<ul><li>&#x7ED3;&#x6784;&#x4F53;</li><li>duck typing &#x7684;&#x6982;&#x5FF5;</li><li>&#x7EC4;&#x5408;&#x7684;&#x601D;&#x60F3;</li></ul></li><li>&#x51FD;&#x6570;&#x5F0F;&#x7F16;&#x7A0B;<ul><li>&#x95ED;&#x5305;&#x7684;&#x6982;&#x5FF5;</li></ul></li><li>&#x5DE5;&#x7A0B;&#x5316;<ul><li>&#x8D44;&#x6E90;&#x7BA1;&#x7406;&#xFF0C;&#x9519;&#x8BEF;&#x5904;&#x7406;</li><li>&#x6D4B;&#x8BD5;&#x548C;&#x6587;&#x6863;</li><li>&#x6027;&#x80FD;&#x8C03;&#x4F18;</li></ul></li><li>&#x5E76;&#x53D1;&#x7F16;&#x7A0B;<ul><li>goroutine &#x548C; channel</li><li>&#x7406;&#x89E3;&#x8C03;&#x5EA6;&#x5668;</li></ul></li></ul><a id="more"></a> <h2 id="&#x57FA;&#x672C;&#x8BED;&#x6CD5;"><a href="#&#x57FA;&#x672C;&#x8BED;&#x6CD5;" class="headerlink" title="&#x57FA;&#x672C;&#x8BED;&#x6CD5;"></a>&#x57FA;&#x672C;&#x8BED;&#x6CD5;</h2><h3 id="HelloWorld"><a href="#HelloWorld" class="headerlink" title="HelloWorld"></a>HelloWorld</h3><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="string">&quot;fmt&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> {</span><br><span class="line">    fmt.Println(<span class="string">&quot;Hello World!&quot;</span>)</span><br><span class="line">}</span><br></pre></td></tr></table></figure><h3 id="&#x53D8;&#x91CF;&#x5B9A;&#x4E49;"><a href="#&#x53D8;&#x91CF;&#x5B9A;&#x4E49;" class="headerlink" title="&#x53D8;&#x91CF;&#x5B9A;&#x4E49;"></a>&#x53D8;&#x91CF;&#x5B9A;&#x4E49;</h3><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="string">&quot;fmt&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// &#x9ED8;&#x8BA4;&#x53D8;&#x91CF;&#x503C;</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">variableZeroValue</span><span class="params">()</span></span> {</span><br><span class="line">    <span class="keyword">var</span> a <span class="keyword">int</span></span><br><span class="line">    <span class="keyword">var</span> s <span class="keyword">string</span></span><br><span class="line">    fmt.Println(a, s)</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="comment">// &#x5B9A;&#x4E49;&#x53D8;&#x91CF;&#x503C;</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">variableInitialValue</span><span class="params">()</span></span> {</span><br><span class="line">    <span class="keyword">var</span> a, b <span class="keyword">int</span> = <span class="number">3</span>, <span class="number">4</span></span><br><span class="line">    <span class="keyword">var</span> s <span class="keyword">string</span> = <span class="string">&quot;abc&quot;</span></span><br><span class="line">    fmt.Println(a, b, s)</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="comment">// &#x53D8;&#x91CF;&#x63A8;&#x65AD;</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">variableTypeDeduction</span><span class="params">()</span></span> {</span><br><span class="line">    <span class="keyword">var</span> a, b, c = <span class="number">1</span>, <span class="string">&quot;abc&quot;</span>, <span class="literal">true</span></span><br><span class="line">    fmt.Println(a, b, c)</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="comment">// &#x53D8;&#x91CF;&#x63A8;&#x65AD;&#x7B80;&#x5199;</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">variableShorter</span><span class="params">()</span></span> {</span><br><span class="line">    a, b, c := <span class="number">1</span>, <span class="string">&quot;abc&quot;</span>, <span class="literal">true</span></span><br><span class="line">    fmt.Println(a, b, c)</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="comment">// &#x5168;&#x5C40;&#x53D8;&#x91CF;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> a = <span class="number">1</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// &#x5168;&#x5C40;&#x53D8;&#x91CF;&#x5B9A;&#x4E49;&#x4E0D;&#x80FD;&#x4F7F;&#x7528; :=</span></span><br><span class="line"><span class="comment">// b := 2</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// &#x65B9;&#x4FBF;&#x5B9A;&#x4E49;&#x591A;&#x4E2A;</span></span><br><span class="line"><span class="keyword">var</span> (</span><br><span class="line">    b = <span class="string">&quot;abc&quot;</span></span><br><span class="line">    c = <span class="number">1</span></span><br><span class="line">    d = <span class="literal">true</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> {</span><br><span class="line">    variableZeroValue()</span><br><span class="line">    variableInitialValue()</span><br><span class="line">    variableTypeDeduction()</span><br><span class="line">    variableShorter()</span><br><span class="line">}</span><br></pre></td></tr></table></figure><h3 id="&#x5185;&#x5EFA;&#x53D8;&#x91CF;&#x7C7B;&#x578B;"><a href="#&#x5185;&#x5EFA;&#x53D8;&#x91CF;&#x7C7B;&#x578B;" class="headerlink" title="&#x5185;&#x5EFA;&#x53D8;&#x91CF;&#x7C7B;&#x578B;"></a>&#x5185;&#x5EFA;&#x53D8;&#x91CF;&#x7C7B;&#x578B;</h3><ul><li>bool, stiring</li><li>(u)int, (u)int8, (u)int16, (u)int32, (u)int64, uintptr</li><li>byte, rune</li><li>float32, float64, complex64, complex128</li></ul><h3 id="&#x5E38;&#x91CF;&#x4E0E;&#x679A;&#x4E3E;"><a href="#&#x5E38;&#x91CF;&#x4E0E;&#x679A;&#x4E3E;" class="headerlink" title="&#x5E38;&#x91CF;&#x4E0E;&#x679A;&#x4E3E;"></a>&#x5E38;&#x91CF;&#x4E0E;&#x679A;&#x4E3E;</h3><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> (</span><br><span class="line">    <span class="string">&quot;fmt&quot;</span></span><br><span class="line">    <span class="string">&quot;math&quot;</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">tri</span><span class="params">()</span></span> {</span><br><span class="line">    a, b := <span class="number">3</span>, <span class="number">4</span></span><br><span class="line">    <span class="keyword">var</span> c <span class="keyword">int</span></span><br><span class="line">    <span class="comment">// &#x5148;&#x628A; int &#x8F6C; float64 &#x518D;&#x8F6C;&#x56DE; int</span></span><br><span class="line">    c = <span class="keyword">int</span>(math.Sqrt(<span class="keyword">float64</span>(a*a + b*b)))</span><br><span class="line">    fmt.Println(c)</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="comment">// &#x5B9A;&#x4E49;&#x5E38;&#x91CF;</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">consts</span><span class="params">()</span></span> {</span><br><span class="line"></span><br><span class="line">    <span class="keyword">var</span> c <span class="keyword">int</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// &#x6307;&#x5B9A;&#x7C7B;&#x578B;, &#x4E0B;&#x9762;&#x9700;&#x8981;&#x5F3A;&#x8F6C;&#x4E3A; float64</span></span><br><span class="line">    <span class="comment">// const a, b int = 3, 4</span></span><br><span class="line">    <span class="comment">// c = int(math.Sqrt(float64(a*a + b*b)))</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// &#x4E0D;&#x6307;&#x5B9A;&#x7C7B;&#x578B;, &#x4E0D;&#x9700;&#x8981;&#x5F3A;&#x8F6C;&#x4E3A; float64</span></span><br><span class="line">    <span class="keyword">const</span> a, b = <span class="number">3</span>, <span class="number">4</span></span><br><span class="line">    c = <span class="keyword">int</span>(math.Sqrt(a*a + b*b))</span><br><span class="line">    fmt.Println(c)</span><br><span class="line"></span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="comment">// &#x5B9A;&#x4E49;&#x679A;&#x4E3E;</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">enums</span><span class="params">()</span></span> {</span><br><span class="line"></span><br><span class="line">    <span class="comment">//const (</span></span><br><span class="line">    <span class="comment">//cpp = 0</span></span><br><span class="line">    <span class="comment">//java = 1</span></span><br><span class="line">    <span class="comment">//python = 2</span></span><br><span class="line">    <span class="comment">//golang = 3</span></span><br><span class="line">    <span class="comment">//)</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// &#x4F7F;&#x7528; iota &#x81EA;&#x589E;&#x52A0;&#xFF0C;&#x4E0E;&#x4E0A;&#x9762;&#x4E00;&#x6837;</span></span><br><span class="line">    <span class="keyword">const</span> (</span><br><span class="line">        cpp = <span class="literal">iota</span></span><br><span class="line">        java</span><br><span class="line">        python</span><br><span class="line">        golang</span><br><span class="line">        _ <span class="comment">// &#x8DF3;&#x5F00; 4</span></span><br><span class="line">        javascript</span><br><span class="line">    )</span><br><span class="line"></span><br><span class="line">    fmt.Println(cpp, java, python, golang, javascript) <span class="comment">// 0 1 2 3 5</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// b, kb, mb, gb, tb, pb</span></span><br><span class="line">    <span class="keyword">const</span> (</span><br><span class="line">        b = <span class="number">1</span> &lt;&lt; (<span class="number">10</span> * <span class="literal">iota</span>)</span><br><span class="line">        kb</span><br><span class="line">        mb</span><br><span class="line">        gb</span><br><span class="line">        tb</span><br><span class="line">        pb</span><br><span class="line">    )</span><br><span class="line"></span><br><span class="line">    fmt.Println(b, kb, mb, gb, tb, pb) <span class="comment">// 1 1024 1048576 1073741824 1099511627776 1125899906842624</span></span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> {</span><br><span class="line">    tri()</span><br><span class="line">    consts()</span><br><span class="line">    enums()</span><br><span class="line">}</span><br></pre></td></tr></table></figure><h3 id="&#x6761;&#x4EF6;&#x8BED;&#x53E5;"><a href="#&#x6761;&#x4EF6;&#x8BED;&#x53E5;" class="headerlink" title="&#x6761;&#x4EF6;&#x8BED;&#x53E5;"></a>&#x6761;&#x4EF6;&#x8BED;&#x53E5;</h3><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> (</span><br><span class="line">    <span class="string">&quot;fmt&quot;</span></span><br><span class="line">    <span class="string">&quot;io/ioutil&quot;</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="comment">// if</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">read</span><span class="params">()</span></span> {</span><br><span class="line">    <span class="keyword">const</span> filename = <span class="string">&quot;abc.txt&quot;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// &#x8BFB;&#x53D6;&#x6587;&#x4EF6;</span></span><br><span class="line">    contents, err := ioutil.ReadFile(filename)</span><br><span class="line">    <span class="keyword">if</span> err != <span class="literal">nil</span> {</span><br><span class="line">        fmt.Println(err)</span><br><span class="line">    } <span class="keyword">else</span> {</span><br><span class="line">        fmt.Printf(<span class="string">&quot;%s\n&quot;</span>, contents)</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="comment">// &#x4E5F;&#x53EF;&#x4EE5;&#x8FD9;&#x6837;&#x5199;</span></span><br><span class="line">    <span class="keyword">if</span> contents, err := ioutil.ReadFile(filename); err != <span class="literal">nil</span> {</span><br><span class="line">        fmt.Println(err)</span><br><span class="line">    } <span class="keyword">else</span> {</span><br><span class="line">        fmt.Printf(<span class="string">&quot;%s\n&quot;</span>, contents)</span><br><span class="line">    }</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="comment">// switch</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">eval</span><span class="params">(a, b <span class="keyword">int</span>, op <span class="keyword">string</span>)</span> <span class="title">int</span></span> {</span><br><span class="line">    <span class="keyword">var</span> result <span class="keyword">int</span></span><br><span class="line">    <span class="comment">// switch &#x4F1A;&#x81EA;&#x52A8; break, &#x9664;&#x975E;&#x4F7F;&#x7528; fallthrough</span></span><br><span class="line">    <span class="keyword">switch</span> op {</span><br><span class="line">    <span class="keyword">case</span> <span class="string">&quot;+&quot;</span>:</span><br><span class="line">        result = a + b</span><br><span class="line">    <span class="keyword">case</span> <span class="string">&quot;-&quot;</span>:</span><br><span class="line">        result = a - b</span><br><span class="line">    <span class="keyword">case</span> <span class="string">&quot;*&quot;</span>:</span><br><span class="line">        result = a * b</span><br><span class="line">    <span class="keyword">case</span> <span class="string">&quot;/&quot;</span>:</span><br><span class="line">        result = a / b</span><br><span class="line">    <span class="keyword">default</span>:</span><br><span class="line">        <span class="built_in">panic</span>(<span class="string">&quot;unsupported operator: &quot;</span> + op)</span><br><span class="line">    }</span><br><span class="line">    <span class="keyword">return</span> result</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="comment">// switch</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">grade</span><span class="params">(score <span class="keyword">int</span>)</span> <span class="title">string</span></span> {</span><br><span class="line"></span><br><span class="line">    <span class="comment">// switch &#x540E;&#x9762;&#x6CA1;&#x6709;&#x8868;&#x8FBE;&#x5F0F;</span></span><br><span class="line">    <span class="keyword">switch</span> {</span><br><span class="line">    <span class="keyword">case</span> score &lt; <span class="number">0</span> || score &gt; <span class="number">100</span>:</span><br><span class="line">        <span class="built_in">panic</span>(<span class="string">&quot;wrong score&quot;</span>)</span><br><span class="line">    <span class="keyword">case</span> score &lt; <span class="number">60</span>:</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;E&quot;</span></span><br><span class="line">    <span class="keyword">case</span> score &lt; <span class="number">70</span>:</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;D&quot;</span></span><br><span class="line">    <span class="keyword">case</span> score &lt; <span class="number">80</span>:</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;C&quot;</span></span><br><span class="line">    <span class="keyword">case</span> score &lt; <span class="number">90</span>:</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;B&quot;</span></span><br><span class="line">    <span class="keyword">case</span> score &lt;= <span class="number">100</span>:</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;A&quot;</span></span><br><span class="line">    }</span><br><span class="line">    <span class="keyword">return</span> <span class="string">&quot;&quot;</span></span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> {</span><br><span class="line">    read()</span><br><span class="line">    fmt.Println(eval(<span class="number">1</span>, <span class="number">2</span>, <span class="string">&quot;+&quot;</span>)) <span class="comment">// 3</span></span><br><span class="line">    grade(<span class="number">100</span>)</span><br><span class="line">}</span><br></pre></td></tr></table></figure><h3 id="&#x5FAA;&#x73AF;"><a href="#&#x5FAA;&#x73AF;" class="headerlink" title="&#x5FAA;&#x73AF;"></a>&#x5FAA;&#x73AF;</h3><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> (</span><br><span class="line">    <span class="string">&quot;bufio&quot;</span></span><br><span class="line">    <span class="string">&quot;fmt&quot;</span></span><br><span class="line">    <span class="string">&quot;os&quot;</span></span><br><span class="line">    <span class="string">&quot;strconv&quot;</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="comment">// &#x8F6C;&#x4E3A;&#x4E8C;&#x8FDB;&#x5236;</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">convertToBin</span><span class="params">(n <span class="keyword">int</span>)</span> <span class="title">string</span></span> {</span><br><span class="line">    res := <span class="string">&quot;&quot;</span></span><br><span class="line">    <span class="keyword">for</span> ; n &gt; <span class="number">0</span>; n /= <span class="number">2</span> {</span><br><span class="line">        lsb := n % <span class="number">2</span></span><br><span class="line">        res = strconv.Itoa(lsb) + res</span><br><span class="line">    }</span><br><span class="line">    <span class="keyword">return</span> res</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="comment">// &#x6253;&#x5370;&#x6587;&#x4EF6;</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">printFile</span><span class="params">(fileName <span class="keyword">string</span>)</span></span> {</span><br><span class="line">    file, err := os.Open(fileName)</span><br><span class="line">    <span class="keyword">if</span> err != <span class="literal">nil</span> {</span><br><span class="line">        <span class="built_in">panic</span>(err)</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    scanner := bufio.NewScanner(file)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span> scanner.Scan() {</span><br><span class="line">        fmt.Println(scanner.Text())</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="comment">// &#x6B7B;&#x5FAA;&#x73AF;</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">forever</span><span class="params">()</span></span> {</span><br><span class="line">    <span class="keyword">for</span> {</span><br><span class="line">        fmt.Println(<span class="string">&quot;forever&quot;</span>)</span><br><span class="line">    }</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> {</span><br><span class="line">    fmt.Println(</span><br><span class="line">        convertToBin(<span class="number">5</span>),</span><br><span class="line">        convertToBin(<span class="number">13</span>),</span><br><span class="line">    )</span><br><span class="line"></span><br><span class="line">    printFile(<span class="string">&quot;abc.txt&quot;</span>);</span><br><span class="line">    forever()</span><br><span class="line">}</span><br></pre></td></tr></table></figure><h3 id="&#x51FD;&#x6570;"><a href="#&#x51FD;&#x6570;" class="headerlink" title="&#x51FD;&#x6570;"></a>&#x51FD;&#x6570;</h3><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> (</span><br><span class="line">    <span class="string">&quot;fmt&quot;</span></span><br><span class="line">    <span class="string">&quot;math&quot;</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="comment">// &#x8FD4;&#x56DE;&#x591A;&#x4E2A;&#x503C;</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">div</span><span class="params">(a, b <span class="keyword">int</span>)</span> <span class="params">(<span class="keyword">int</span>, <span class="keyword">int</span>)</span></span> {</span><br><span class="line">    <span class="keyword">return</span> a / b, a % b</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="comment">// &#x53EF;&#x4EE5;&#x5BF9;&#x8FD4;&#x56DE;&#x503C;&#x547D;&#x540D;</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">div2</span><span class="params">(a, b <span class="keyword">int</span>)</span> <span class="params">(q, r <span class="keyword">int</span>)</span></span> {</span><br><span class="line">    <span class="keyword">return</span> a / b, a % b</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="comment">// &#x8FD4;&#x56DE; error</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">eval</span><span class="params">(a, b <span class="keyword">int</span>, op <span class="keyword">string</span>)</span> <span class="params">(<span class="keyword">int</span>, error)</span></span> {</span><br><span class="line">    <span class="keyword">switch</span> op {</span><br><span class="line">    <span class="keyword">case</span> <span class="string">&quot;+&quot;</span>:</span><br><span class="line">        <span class="keyword">return</span> a + b, <span class="literal">nil</span></span><br><span class="line">    <span class="keyword">case</span> <span class="string">&quot;-&quot;</span>:</span><br><span class="line">        <span class="keyword">return</span> a - b, <span class="literal">nil</span></span><br><span class="line">    <span class="keyword">case</span> <span class="string">&quot;*&quot;</span>:</span><br><span class="line">        <span class="keyword">return</span> a * b, <span class="literal">nil</span></span><br><span class="line">    <span class="keyword">case</span> <span class="string">&quot;/&quot;</span>:</span><br><span class="line">        <span class="keyword">return</span> a / b, <span class="literal">nil</span></span><br><span class="line">    <span class="keyword">default</span>:</span><br><span class="line">        <span class="keyword">return</span> <span class="number">0</span>, fmt.Errorf(<span class="string">&quot;unsupported opration: %s&quot;</span>, op)</span><br><span class="line">    }</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="comment">// &#x4F7F;&#x7528;&#x51FD;&#x6570;&#x5F0F;&#x7F16;&#x7A0B;</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">apply</span><span class="params">(op <span class="keyword">func</span>(<span class="keyword">int</span>, <span class="keyword">int</span>)</span> <span class="title">int</span>, <span class="title">a</span>, <span class="title">b</span> <span class="title">int</span>) <span class="title">int</span></span> {</span><br><span class="line">    <span class="keyword">return</span> op(a, b)</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="comment">// &#x53EF;&#x53D8;&#x53C2;&#x6570;</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">sum</span><span class="params">(numbers ...<span class="keyword">int</span>)</span> <span class="title">int</span></span> {</span><br><span class="line">    sum := <span class="number">0</span></span><br><span class="line">    <span class="keyword">for</span> i := <span class="keyword">range</span> numbers {</span><br><span class="line">        sum += numbers[i]</span><br><span class="line">    }</span><br><span class="line">    <span class="keyword">return</span> sum</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">pow</span><span class="params">(a, b <span class="keyword">int</span>)</span> <span class="title">int</span></span> {</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">int</span>(math.Pow(<span class="keyword">float64</span>(a), <span class="keyword">float64</span>(b)))</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> {</span><br><span class="line"></span><br><span class="line">    i, i2 := div(<span class="number">5</span>, <span class="number">3</span>)</span><br><span class="line">    fmt.Println(i, i2)</span><br><span class="line"></span><br><span class="line">    q, r := div2(<span class="number">5</span>, <span class="number">3</span>)</span><br><span class="line">    fmt.Println(q, r)</span><br><span class="line"></span><br><span class="line">    res, err := eval(<span class="number">1</span>, <span class="number">2</span>, <span class="string">&quot;&amp;&quot;</span>) <span class="comment">// unsupported opration: &amp;</span></span><br><span class="line">    <span class="keyword">if</span> err != <span class="literal">nil</span> {</span><br><span class="line">        fmt.Println(err)</span><br><span class="line">    } <span class="keyword">else</span> {</span><br><span class="line">        fmt.Println(res)</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    fmt.Println(apply(pow, <span class="number">2</span>, <span class="number">2</span>)) <span class="comment">// 4</span></span><br><span class="line"></span><br><span class="line">    fmt.Println(sum(<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>)) <span class="comment">// 10</span></span><br><span class="line">}</span><br></pre></td></tr></table></figure><h3 id="&#x6307;&#x9488;"><a href="#&#x6307;&#x9488;" class="headerlink" title="&#x6307;&#x9488;"></a>&#x6307;&#x9488;</h3><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="string">&quot;fmt&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// &#x4F7F;&#x7528;&#x6307;&#x9488;</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">swap</span><span class="params">(a *<span class="keyword">int</span>, b *<span class="keyword">int</span>)</span></span>  {</span><br><span class="line">    *b, *a = *a, *b</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">swap2</span><span class="params">(a, b <span class="keyword">int</span>)</span> <span class="params">(<span class="keyword">int</span>, <span class="keyword">int</span>)</span></span> {</span><br><span class="line">    <span class="keyword">return</span> b, a</span><br><span class="line"></span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> {</span><br><span class="line">    a, b := <span class="number">3</span>, <span class="number">4</span></span><br><span class="line">    swap(&amp;a, &amp;b)</span><br><span class="line">    fmt.Println(a, b) <span class="comment">// 4 3</span></span><br><span class="line"></span><br><span class="line">    a, b = <span class="number">3</span>, <span class="number">4</span></span><br><span class="line">    a, b = swap2(a, b)</span><br><span class="line">    fmt.Println(a, b) <span class="comment">// 4 3</span></span><br><span class="line">}</span><br></pre></td></tr></table></figure><h2 id="&#x6570;&#x7EC4;&#x3001;&#x5207;&#x7247;&#x548C;&#x5BB9;&#x5668;"><a href="#&#x6570;&#x7EC4;&#x3001;&#x5207;&#x7247;&#x548C;&#x5BB9;&#x5668;" class="headerlink" title="&#x6570;&#x7EC4;&#x3001;&#x5207;&#x7247;&#x548C;&#x5BB9;&#x5668;"></a>&#x6570;&#x7EC4;&#x3001;&#x5207;&#x7247;&#x548C;&#x5BB9;&#x5668;</h2><h3 id="&#x6570;&#x7EC4;"><a href="#&#x6570;&#x7EC4;" class="headerlink" title="&#x6570;&#x7EC4;"></a>&#x6570;&#x7EC4;</h3><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="string">&quot;fmt&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// &#x6570;&#x7EC4;&#x5B9A;&#x4E49;</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">defineArray</span><span class="params">()</span></span> {</span><br><span class="line"></span><br><span class="line">    <span class="comment">// &#x5B9A;&#x4E49;&#x6570;&#x7EC4;&#x7684;&#x65B9;&#x6CD5;</span></span><br><span class="line">    <span class="keyword">var</span> arr1 [<span class="number">5</span>]<span class="keyword">int</span></span><br><span class="line">    arr2 := [<span class="number">3</span>]<span class="keyword">int</span>{<span class="number">1</span>, <span class="number">3</span>, <span class="number">5</span>}</span><br><span class="line">    arr3 := [...]<span class="keyword">int</span>{<span class="number">2</span>, <span class="number">4</span>, <span class="number">6</span>, <span class="number">8</span>}</span><br><span class="line"></span><br><span class="line">    fmt.Println(arr1, arr2, arr3) <span class="comment">// [0 0 0 0 0] [1 3 5] [2 4 6 8]</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// &#x5B9A;&#x4E49;&#x4E8C;&#x7EF4;&#x6570;&#x7EC4;</span></span><br><span class="line">    <span class="keyword">var</span> grid [<span class="number">2</span>][<span class="number">3</span>]<span class="keyword">int</span></span><br><span class="line">    fmt.Println(grid) <span class="comment">// [[0 0 0] [0 0 0]]</span></span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="comment">// &#x904D;&#x5386;&#x6570;&#x7EC4;</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">printArray</span><span class="params">()</span></span> {</span><br><span class="line">    arr := [...]<span class="keyword">int</span>{<span class="number">2</span>, <span class="number">4</span>, <span class="number">6</span>, <span class="number">8</span>}</span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span> i := <span class="number">0</span>; i &lt; <span class="built_in">len</span>(arr); i++ {</span><br><span class="line">        fmt.Println(arr[i])</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="comment">// &#x901A;&#x8FC7; range &#x53EF;&#x4EE5;&#x83B7;&#x53D6;&#x4E0B;&#x6807;</span></span><br><span class="line">    <span class="keyword">for</span> i := <span class="keyword">range</span> arr {</span><br><span class="line">        fmt.Println(arr[i])</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="comment">// &#x83B7;&#x53D6;&#x4E0B;&#x6807;&#x548C;&#x503C;</span></span><br><span class="line">    <span class="keyword">for</span> i, v := <span class="keyword">range</span> arr {</span><br><span class="line">        fmt.Println(i, v)</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="comment">// &#x53EA;&#x83B7;&#x53D6;&#x503C;, &#x53EF;&#x4EE5;&#x4F7F;&#x7528; _ &#x6765;&#x7701;&#x7565;&#x53D8;&#x91CF;</span></span><br><span class="line">    <span class="keyword">for</span> _, v := <span class="keyword">range</span> arr {</span><br><span class="line">        fmt.Println(v)</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="comment">// [3]int &#x548C; [5]int &#x662F;&#x4E0D;&#x540C;&#x7684;&#x7C7B;&#x578B;</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">printArray2</span><span class="params">(arr [5]<span class="keyword">int</span>)</span></span> {</span><br><span class="line">    fmt.Println(arr)</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="comment">// &#x6570;&#x7EC4;&#x662F;&#x503C;&#x7C7B;&#x578B;</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">printArray3</span><span class="params">(arr [5]<span class="keyword">int</span>)</span></span> {</span><br><span class="line">    arr[<span class="number">0</span>] = <span class="number">100</span></span><br><span class="line">    fmt.Println(arr) <span class="comment">// [100, 0, 0, 0, 0]</span></span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="comment">// &#x4F20;&#x9012;&#x6307;&#x9488;</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">printArray4</span><span class="params">(arr *[5]<span class="keyword">int</span>)</span></span> {</span><br><span class="line">    arr[<span class="number">0</span>] = <span class="number">100</span></span><br><span class="line">    fmt.Println(*arr) <span class="comment">// [100, 0, 0, 0, 0]</span></span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> {</span><br><span class="line">    defineArray()</span><br><span class="line">    printArray()</span><br><span class="line"></span><br><span class="line">    <span class="keyword">var</span> arr1 [<span class="number">5</span>]<span class="keyword">int</span></span><br><span class="line">    <span class="comment">// arr2 := [3]int{1, 3, 5}</span></span><br><span class="line">    <span class="comment">// arr3 := [...]int{2, 4, 6, 8, 10}</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// [3]int &#x548C; [5]int &#x662F;&#x4E0D;&#x540C;&#x7684;&#x7C7B;&#x578B;</span></span><br><span class="line">    printArray2(arr1) <span class="comment">// &#x5728;&#x51FD;&#x6570;&#x91CC;&#x9762;&#x6539;&#x53D8;&#x6570;&#x7EC4;&#x7684;&#x503C;</span></span><br><span class="line">    <span class="comment">// printArray2(arr2) //  cannot use arr2 (type [3]int) as type [5]int in argument to printArray2</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// &#x5728;&#x51FD;&#x6570;&#x91CC;&#x6539;&#x53D8;&#x4E86;&#x6570;&#x7EC4;&#x7B2C;&#x4E00;&#x4E2A;&#x503C;, &#x540E;&#x9762;&#x6253;&#x5370;&#x8FD8;&#x662F;&#x4E0D;&#x53D8;&#xFF0C;&#x6BCF;&#x6B21;&#x4F20;&#x9012;&#x6570;&#x7EC4;&#x90FD;&#x662F;&#x4E00;&#x4E2A;&#x526F;&#x672C;</span></span><br><span class="line">    printArray3(arr1)</span><br><span class="line">    fmt.Println(arr1) <span class="comment">// [0, 0, 0, 0, 0]</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// &#x4F20;&#x9012;&#x5730;&#x5740;&#x8FC7;&#x53BB;&#x5C31;&#x4F1A;&#x6539;&#x53D8;</span></span><br><span class="line">    printArray4(&amp;arr1)</span><br><span class="line">    fmt.Println(arr1) <span class="comment">// [100, 0, 0, 0, 0]</span></span><br><span class="line"></span><br><span class="line">}</span><br></pre></td></tr></table></figure><h3 id="&#x5207;&#x7247;"><a href="#&#x5207;&#x7247;" class="headerlink" title="&#x5207;&#x7247;"></a>&#x5207;&#x7247;</h3><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="string">&quot;fmt&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// &#x5207;&#x7247;</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">mySlice</span><span class="params">()</span></span> {</span><br><span class="line">arr := [...]<span class="keyword">int</span>{<span class="number">0</span>, <span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>, <span class="number">6</span>, <span class="number">7</span>}</span><br><span class="line">fmt.Println(<span class="string">&quot;arr[2:6] = &quot;</span>, arr[<span class="number">2</span>:<span class="number">6</span>]) <span class="comment">// arr[2:6] =  [2 3 4 5]</span></span><br><span class="line">fmt.Println(<span class="string">&quot;arr[:6] = &quot;</span>, arr[:<span class="number">6</span>])   <span class="comment">// arr[2:6] =  [2 3 4 5]</span></span><br><span class="line">fmt.Println(<span class="string">&quot;arr[2:] = &quot;</span>, arr[<span class="number">2</span>:])   <span class="comment">// arr[2:] =  [2 3 4 5 6 7]</span></span><br><span class="line">fmt.Println(<span class="string">&quot;arr[:] = &quot;</span>, arr[:])     <span class="comment">// arr[:] =  [0 1 2 3 4 5 6 7]</span></span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="comment">// &#x66F4;&#x65B0;</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">updateSlice</span><span class="params">(slice []<span class="keyword">int</span>)</span></span> {</span><br><span class="line">slice[<span class="number">0</span>] = <span class="number">2019</span></span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="comment">// &#x6269;&#x5C55;</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">extendSlice</span><span class="params">()</span></span> {</span><br><span class="line">arr := [...]<span class="keyword">int</span>{<span class="number">0</span>, <span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>, <span class="number">6</span>, <span class="number">7</span>}</span><br><span class="line"><span class="comment">// &#x6211;&#x4EEC;&#x77E5;&#x9053; s1 &#x53EA;&#x6709; 4 &#x4E2A;&#x5143;&#x7D20;, &#x4F46;&#x662F; s2 &#x8FD8;&#x662F;&#x80FD;</span></span><br><span class="line">s1 := arr[<span class="number">2</span>:<span class="number">6</span>]</span><br><span class="line">s2 := s1[<span class="number">3</span>:<span class="number">5</span>]</span><br><span class="line">fmt.Println(s1)                                <span class="comment">// [2 3 4 5]</span></span><br><span class="line">fmt.Println(s2)                                <span class="comment">// [5 6]</span></span><br><span class="line">fmt.Printf(<span class="string">&quot;len=%d, cap=%d&quot;</span>, <span class="built_in">len</span>(s1), <span class="built_in">cap</span>(s1)) <span class="comment">// len=4, cap=6</span></span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="comment">// &#x6DFB;&#x52A0;</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">appendSlice</span><span class="params">()</span></span> {</span><br><span class="line">arr := [...]<span class="keyword">int</span>{<span class="number">0</span>, <span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>, <span class="number">6</span>, <span class="number">7</span>}</span><br><span class="line"></span><br><span class="line"><span class="comment">// &#x6DFB;&#x52A0;&#x5143;&#x7D20;&#x5982;&#x679C;&#x8D85;&#x8FC7;&#x4E86; cap, &#x7CFB;&#x7EDF;&#x4F1A;&#x91CD;&#x65B0;&#x5206;&#x914D;&#x66F4;&#x5927;&#x7684;&#x5E95;&#x5C42;&#x6570;&#x7EC4;</span></span><br><span class="line"><span class="comment">// &#x7531;&#x4E8E;&#x503C;&#x7684;&#x4F20;&#x9012;&#x5173;&#x7CFB;, &#x5FC5;&#x987B;&#x63A5;&#x53D7; append &#x7684;&#x8FD4;&#x56DE;&#x503C;</span></span><br><span class="line">s1 := arr[<span class="number">2</span>:<span class="number">6</span>]</span><br><span class="line">s2 := <span class="built_in">append</span>(s1, <span class="number">100</span>)</span><br><span class="line">s3 := <span class="built_in">append</span>(s2, <span class="number">100</span>)</span><br><span class="line">s4 := <span class="built_in">append</span>(s3, <span class="number">100</span>)</span><br><span class="line">s5 := <span class="built_in">append</span>(s4, <span class="number">100</span>)</span><br><span class="line">fmt.Println(s1, s2, s3, s4, s5) <span class="comment">// [2 3 4 5] [2 3 4 5 100] [2 3 4 5 100 100] [2 3 4 5 100 100 100] [2 3 4 5 100 100 100 100]</span></span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="comment">// &#x521B;&#x5EFA; slice</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">createSlice</span><span class="params">()</span></span> {</span><br><span class="line"></span><br><span class="line"><span class="comment">// 0. &#x521B;&#x5EFA;&#x4E00;&#x4E2A;&#x7A7A;&#x7684; slice</span></span><br><span class="line"><span class="keyword">var</span> s []<span class="keyword">int</span></span><br><span class="line"><span class="comment">// &#x53D1;&#x73B0; cap &#x662F;&#x4ECE; 1 2 4 8 16 32... &#x6269;&#x5927;</span></span><br><span class="line"><span class="keyword">for</span> i := <span class="number">0</span>; i &lt; <span class="number">100</span>; i++ {</span><br><span class="line">s = <span class="built_in">append</span>(s, <span class="number">1</span>+<span class="number">2</span>*i)</span><br><span class="line">printSlice(s)</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="comment">// 1. &#x521B;&#x5EFA;&#x4E00;&#x4E2A;&#x5E26;&#x6709;&#x503C;&#x7684; slice</span></span><br><span class="line">s1 := []<span class="keyword">int</span>{<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>}</span><br><span class="line">printSlice(s1) <span class="comment">// len=5, cap=5, slice=[1 2 3 4 5]</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 2. &#x521B;&#x5EFA;&#x4E00;&#x4E2A; cap = 16</span></span><br><span class="line">s2 := <span class="built_in">make</span>([]<span class="keyword">int</span>, <span class="number">16</span>)</span><br><span class="line">printSlice(s2) <span class="comment">// len=16, cap=16, slice=[0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0]</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 3. &#x521B;&#x5EFA;&#x4E00;&#x4E2A; len = 10, cap = 32</span></span><br><span class="line">s3 := <span class="built_in">make</span>([]<span class="keyword">int</span>, <span class="number">10</span>, <span class="number">32</span>) <span class="comment">// len=10, cap=32, slice=[0 0 0 0 0 0 0 0 0 0]</span></span><br><span class="line">printSlice(s3)</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="comment">// &#x590D;&#x5236;</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">copySlice</span><span class="params">()</span></span> {</span><br><span class="line">src := []<span class="keyword">int</span>{<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>}</span><br><span class="line">dst := <span class="built_in">make</span>([]<span class="keyword">int</span>, <span class="number">16</span>)</span><br><span class="line">fmt.Println(dst) <span class="comment">// [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0]</span></span><br><span class="line"><span class="built_in">copy</span>(dst, src)</span><br><span class="line">fmt.Println(dst) <span class="comment">// [1 2 3 0 0 0 0 0 0 0 0 0 0 0 0 0]</span></span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="comment">// &#x5220;&#x9664;</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">deleteSlice</span><span class="params">()</span></span> {</span><br><span class="line">    <span class="comment">// &#x5220;&#x9664;&#x4E0B;&#x6807;&#x4E3A;3&#x7684;&#x5143;&#x7D20;</span></span><br><span class="line">s := []<span class="keyword">int</span>{<span class="number">0</span>, <span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>, <span class="number">6</span>, <span class="number">7</span>, <span class="number">8</span>}</span><br><span class="line">s = <span class="built_in">append</span>(s[:<span class="number">3</span>], s[<span class="number">4</span>:]...) <span class="comment">// s[4:]... &#x8F6C;&#x6362;&#x4E3A;&#x53EF;&#x53D8;&#x53C2;&#x6570;</span></span><br><span class="line">fmt.Println(s) <span class="comment">// [0 1 2 4 5 6 7 8]</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// &#x5220;&#x9664;&#x7B2C;&#x4E00;&#x4E2A;</span></span><br><span class="line">s1 := []<span class="keyword">int</span>{<span class="number">0</span>, <span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>, <span class="number">6</span>, <span class="number">7</span>, <span class="number">8</span>}</span><br><span class="line">s1 = s1[<span class="number">1</span>:]</span><br><span class="line">fmt.Println(s1) <span class="comment">// [1 2 3 4 5 6 7 8]</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// &#x5220;&#x9664;&#x6700;&#x540E;&#x4E00;&#x4E2A;</span></span><br><span class="line">s2 := []<span class="keyword">int</span>{<span class="number">0</span>, <span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>, <span class="number">6</span>, <span class="number">7</span>, <span class="number">8</span>}</span><br><span class="line">s2 = s2[:<span class="built_in">len</span>(s2) - <span class="number">1</span>]</span><br><span class="line">fmt.Println(s2) <span class="comment">// [0 1 2 3 4 5 6 7]</span></span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">printSlice</span><span class="params">(s []<span class="keyword">int</span>)</span></span> {</span><br><span class="line">fmt.Printf(<span class="string">&quot;len=%d, cap=%d, slice=%v \n&quot;</span>, <span class="built_in">len</span>(s), <span class="built_in">cap</span>(s), s)</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> {</span><br><span class="line">mySlice()</span><br><span class="line"></span><br><span class="line">arr := [...]<span class="keyword">int</span>{<span class="number">0</span>, <span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>, <span class="number">6</span>, <span class="number">7</span>}</span><br><span class="line">slice1 := arr[:]</span><br><span class="line">fmt.Println(<span class="string">&quot;Before update: &quot;</span>, slice1) <span class="comment">// Before update: [0 1 2 3 4 5 6 7]</span></span><br><span class="line">updateSlice(slice1)</span><br><span class="line">fmt.Println(<span class="string">&quot;After update: &quot;</span>, slice1) <span class="comment">// After update: [2019 1 2 3 4 5 6 7]</span></span><br><span class="line"></span><br><span class="line">extendSlice()</span><br><span class="line"></span><br><span class="line">appendSlice()</span><br><span class="line"></span><br><span class="line">createSlice()</span><br><span class="line"></span><br><span class="line">copySlice()</span><br><span class="line"></span><br><span class="line">deleteSlice()</span><br><span class="line">}</span><br></pre></td></tr></table></figure><h3 id="Map"><a href="#Map" class="headerlink" title="Map"></a>Map</h3><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="string">&quot;fmt&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// &#x5B9A;&#x4E49; map</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">defineMap</span><span class="params">()</span></span> {</span><br><span class="line"></span><br><span class="line">    <span class="comment">// &#x5B9A;&#x4E49;&#x4E00;&#x4E2A;&#x5E26;&#x9ED8;&#x8BA4;&#x503C;&#x7684; map</span></span><br><span class="line">    m1 := <span class="keyword">map</span>[<span class="keyword">string</span>]<span class="keyword">string</span>{</span><br><span class="line">        <span class="string">&quot;a&quot;</span>: <span class="string">&quot;A&quot;</span>,</span><br><span class="line">        <span class="string">&quot;b&quot;</span>: <span class="string">&quot;B&quot;</span>,</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="comment">// &#x5B9A;&#x4E49;&#x4E00;&#x4E2A; empty map</span></span><br><span class="line">    m2 := <span class="built_in">make</span>(<span class="keyword">map</span>[<span class="keyword">string</span>]<span class="keyword">string</span>)</span><br><span class="line"></span><br><span class="line">    <span class="comment">// &#x5B9A;&#x4E49;&#x4E00;&#x4E2A; nil map</span></span><br><span class="line">    <span class="keyword">var</span> m3 <span class="keyword">map</span>[<span class="keyword">string</span>]<span class="keyword">string</span></span><br><span class="line"></span><br><span class="line">    fmt.Println(m1, m2, m3) <span class="comment">// map[a:A b:B] map[] map[]</span></span><br><span class="line"></span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="comment">// &#x904D;&#x5386; map</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">traversingMap</span><span class="params">()</span></span> {</span><br><span class="line">    m := <span class="keyword">map</span>[<span class="keyword">string</span>]<span class="keyword">string</span>{</span><br><span class="line">        <span class="string">&quot;a&quot;</span>: <span class="string">&quot;A&quot;</span>,</span><br><span class="line">        <span class="string">&quot;b&quot;</span>: <span class="string">&quot;B&quot;</span>,</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="comment">// &#x6253;&#x5370; key value</span></span><br><span class="line">    <span class="keyword">for</span> k, v := <span class="keyword">range</span> m {</span><br><span class="line">        fmt.Println(k, v)</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="comment">// &#x53EA;&#x6253;&#x5370; key</span></span><br><span class="line">    <span class="keyword">for</span> k := <span class="keyword">range</span> m {</span><br><span class="line">        fmt.Println(k)</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="comment">// &#x53EA;&#x6253;&#x5370; value</span></span><br><span class="line">    <span class="keyword">for</span> _, v := <span class="keyword">range</span> m {</span><br><span class="line">        fmt.Println(v)</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="comment">// &#x5224;&#x65AD;&#x662F;&#x5426;&#x5B58;&#x5728;</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">containMap</span><span class="params">()</span></span> {</span><br><span class="line">    m := <span class="keyword">map</span>[<span class="keyword">string</span>]<span class="keyword">string</span>{</span><br><span class="line">        <span class="string">&quot;a&quot;</span>: <span class="string">&quot;A&quot;</span>,</span><br><span class="line">        <span class="string">&quot;b&quot;</span>: <span class="string">&quot;B&quot;</span>,</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    value, ok := m[<span class="string">&quot;c&quot;</span>]</span><br><span class="line">    <span class="keyword">if</span> ok {</span><br><span class="line">        fmt.Println(value)</span><br><span class="line">    } <span class="keyword">else</span> {</span><br><span class="line">        fmt.Println(<span class="string">&quot;&#x4E0D;&#x5B58;&#x5728;&quot;</span>)</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> value, ok := m[<span class="string">&quot;b&quot;</span>]; ok {</span><br><span class="line">        fmt.Println(value)</span><br><span class="line">    } <span class="keyword">else</span> {</span><br><span class="line">        fmt.Println(<span class="string">&quot;&#x4E0D;&#x5B58;&#x5728;&quot;</span>)</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="comment">// &#x5220;&#x9664;&#x5143;&#x7D20;</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">deleteMap</span><span class="params">()</span></span>  {</span><br><span class="line">    m := <span class="keyword">map</span>[<span class="keyword">string</span>]<span class="keyword">string</span>{</span><br><span class="line">        <span class="string">&quot;a&quot;</span>: <span class="string">&quot;A&quot;</span>,</span><br><span class="line">        <span class="string">&quot;b&quot;</span>: <span class="string">&quot;B&quot;</span>,</span><br><span class="line">    }</span><br><span class="line">    fmt.Println(m) <span class="comment">// map[a:A b:B]</span></span><br><span class="line">    <span class="built_in">delete</span>(m, <span class="string">&quot;a&quot;</span>)</span><br><span class="line">    fmt.Println(m) <span class="comment">// map[b:B]</span></span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> {</span><br><span class="line">    defineMap()</span><br><span class="line">    traversingMap()</span><br><span class="line">    containMap()</span><br><span class="line">    deleteMap()</span><br><span class="line">}</span><br></pre></td></tr></table></figure><p><strong>&#x4F8B;&#x9898;&#xFF1A;&#x67E5;&#x627E;&#x6700;&#x957F;&#x4E0D;&#x91CD;&#x590D;&#x5B50;&#x4E32;</strong></p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="string">&quot;fmt&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// &#x67E5;&#x65E9;&#x6700;&#x957F;&#x4E0D;&#x91CD;&#x590D;&#x5B50;&#x4E32;</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">lengthOfSubString</span><span class="params">(s <span class="keyword">string</span>)</span> <span class="title">int</span></span> {</span><br><span class="line">    start := <span class="number">0</span></span><br><span class="line">    maxLength := <span class="number">0</span></span><br><span class="line">    lastOccuredMap := <span class="built_in">make</span>(<span class="keyword">map</span>[<span class="keyword">rune</span>]<span class="keyword">int</span>)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span> i, ru := <span class="keyword">range</span> []<span class="keyword">rune</span>(s) {</span><br><span class="line">        <span class="keyword">if</span> lastI, ok := lastOccuredMap[ru]; ok &amp;&amp; lastI &gt;= start {</span><br><span class="line">                start = lastI + <span class="number">1</span></span><br><span class="line">        }</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> i-start+<span class="number">1</span> &gt; maxLength {</span><br><span class="line">            maxLength = i - start + <span class="number">1</span></span><br><span class="line">        }</span><br><span class="line">        lastOccuredMap[ru] = i</span><br><span class="line">    }</span><br><span class="line">    <span class="keyword">return</span> maxLength</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> {</span><br><span class="line">    fmt.Println(lengthOfSubString(<span class="string">&quot;aaa&quot;</span>))</span><br><span class="line">    fmt.Println(lengthOfSubString(<span class="string">&quot;abab&quot;</span>))</span><br><span class="line">    fmt.Println(lengthOfSubString(<span class="string">&quot;abc&quot;</span>))</span><br><span class="line">    fmt.Println(lengthOfSubString(<span class="string">&quot;abcabc&quot;</span>))</span><br><span class="line">}</span><br></pre></td></tr></table></figure><h3 id="&#x5B57;&#x7B26;&#x548C;&#x5B57;&#x7B26;&#x4E32;&#x5904;&#x7406;"><a href="#&#x5B57;&#x7B26;&#x548C;&#x5B57;&#x7B26;&#x4E32;&#x5904;&#x7406;" class="headerlink" title="&#x5B57;&#x7B26;&#x548C;&#x5B57;&#x7B26;&#x4E32;&#x5904;&#x7406;"></a>&#x5B57;&#x7B26;&#x548C;&#x5B57;&#x7B26;&#x4E32;&#x5904;&#x7406;</h3><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="string">&quot;fmt&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">runeTest</span><span class="params">()</span></span>  {</span><br><span class="line">    s := <span class="string">&quot;cuzz&#x662F;&#x6211;!&quot;</span></span><br><span class="line">    <span class="keyword">for</span> i, b := <span class="keyword">range</span> []<span class="keyword">byte</span>(s) {</span><br><span class="line">        fmt.Printf(<span class="string">&quot;(%d %X %c) &quot;</span>, i, b, b)</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    fmt.Println()</span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span> i, u := <span class="keyword">range</span> s {</span><br><span class="line">        fmt.Printf(<span class="string">&quot;(%d %X %c) &quot;</span>, i, u, u)</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    fmt.Println()</span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span> i, r := <span class="keyword">range</span> []<span class="keyword">rune</span>(s) {</span><br><span class="line">        fmt.Printf(<span class="string">&quot;(%d %X %c) &quot;</span>, i, r, r)</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="comment">// &#x8F93;&#x51FA;</span></span><br><span class="line">    <span class="comment">// (0 63 c) (1 75 u) (2 7A z) (3 7A z) (4 E6 &#xE6;) (5 98  ) (6 AF &#xAF;) (7 E6 &#xE6;) (8 88  ) (9 91  ) (10 21 !)</span></span><br><span class="line">    <span class="comment">// (0 63 c) (1 75 u) (2 7A z) (3 7A z) (4 662F &#x662F;) (7 6211 &#x6211;) (10 21 !)</span></span><br><span class="line">    <span class="comment">// (0 63 c) (1 75 u) (2 7A z) (3 7A z) (4 662F &#x662F;) (5 6211 &#x6211;) (6 21 !)</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// &#x8BF4;&#x660E; range s &#x4F7F;&#x7528;&#x7684; utf-8 &#x904D;&#x5386;, &#x4F46;&#x662F;&#x89C2;&#x5BDF;&#x4E0B;&#x6807;&#x53D1;&#x73B0;&#x4E0D;&#x662F;&#x8FDE;&#x7EED;&#x7684;</span></span><br><span class="line">    <span class="comment">// ascii &#x8F6C;&#x4E3A; utf-8 &#x5982;:(4 E6) (5 98) (6 AF) -&gt; (4 662F)</span></span><br><span class="line">    <span class="comment">// &#x4F7F;&#x7528; []rune() &#x8F6C;&#x6362;&#x53EF;&#x4EE5;&#x4F7F;&#x4E0B;&#x6807;&#x8FDE;&#x7EED;&#x8F93;&#x51FA;</span></span><br><span class="line"></span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> {</span><br><span class="line">    runeTest()</span><br><span class="line">}</span><br></pre></td></tr></table></figure><h2 id="&#x9762;&#x5411;&#x5BF9;&#x8C61;"><a href="#&#x9762;&#x5411;&#x5BF9;&#x8C61;" class="headerlink" title="&#x9762;&#x5411;&#x5BF9;&#x8C61;"></a>&#x9762;&#x5411;&#x5BF9;&#x8C61;</h2><ul><li>go &#x8BED;&#x8A00;&#x4EC5;&#x652F;&#x6301;&#x5C01;&#x88C5;&#xFF0C;&#x4E0D;&#x652F;&#x6301;&#x7EE7;&#x627F;&#x548C;&#x591A;&#x6001;</li><li>go &#x8BED;&#x8A00;&#x6CA1;&#x6709; class&#xFF0C;&#x53EA;&#x6709; struct</li></ul><h3 id="&#x7ED3;&#x6784;&#x4F53;&#x548C;&#x65B9;&#x6CD5;"><a href="#&#x7ED3;&#x6784;&#x4F53;&#x548C;&#x65B9;&#x6CD5;" class="headerlink" title="&#x7ED3;&#x6784;&#x4F53;&#x548C;&#x65B9;&#x6CD5;"></a>&#x7ED3;&#x6784;&#x4F53;&#x548C;&#x65B9;&#x6CD5;</h3><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> (</span><br><span class="line">    <span class="string">&quot;fmt&quot;</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="comment">// &#x5B9A;&#x4E49;&#x7ED3;&#x6784;&#x4F53;, &#x5C0F;&#x5199;&#x5BF9;&#x5916;&#x4E0D;&#x53EF;&#x89C1;</span></span><br><span class="line"><span class="keyword">type</span> treeNode <span class="keyword">struct</span> {</span><br><span class="line">    value       <span class="keyword">int</span></span><br><span class="line">    left, right *treeNode</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="comment">// setter, &#x9519;&#x8BEF;, &#x7531;&#x4E8E; go &#x662F;&#x4F20;&#x503C;, &#x4E0D;&#x4F1A;&#x6539;&#x53D8;</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(node treeNode)</span> <span class="title">setVal</span><span class="params">(value <span class="keyword">int</span>)</span></span> {</span><br><span class="line">    node.value = value</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(node *treeNode)</span> <span class="title">setValue</span><span class="params">(value <span class="keyword">int</span>)</span></span> {</span><br><span class="line">    node.value = value</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="comment">// &#x7ED9;&#x7ED3;&#x6784;&#x4F53;&#x5B9A;&#x4E49;&#x65B9;&#x6CD5; node.print()</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(node treeNode)</span> <span class="title">print</span><span class="params">()</span></span> {</span><br><span class="line">    fmt.Println(node.value)</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="comment">// &#x666E;&#x901A;&#x7684;&#x65B9;&#x6CD5; print(node)</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">print</span><span class="params">(node treeNode)</span></span> {</span><br><span class="line">    fmt.Println(node.value)</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="comment">// &#x5B9A;&#x4E49;&#x4E00;&#x4E2A;&#x5DE5;&#x5382;&#x65B9;&#x6CD5;</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">createNode</span><span class="params">(value <span class="keyword">int</span>)</span> *<span class="title">treeNode</span></span> {</span><br><span class="line">    <span class="keyword">return</span> &amp;treeNode{value: value}</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="comment">// &#x904D;&#x5386;</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(node *treeNode)</span> <span class="title">traverse</span><span class="params">()</span></span> {</span><br><span class="line">    <span class="keyword">if</span> node == <span class="literal">nil</span> {</span><br><span class="line">        <span class="keyword">return</span></span><br><span class="line">    }</span><br><span class="line">    node.left.traverse()</span><br><span class="line">    node.<span class="built_in">print</span>()</span><br><span class="line">    node.right.traverse()</span><br><span class="line"></span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> {</span><br><span class="line">    <span class="comment">// &#x5B9A;&#x4E49;&#x4E00;&#x4E2A;&#x7A7A;&#x7684;&#x7ED3;&#x6784;&#x4F53;</span></span><br><span class="line">    <span class="keyword">var</span> node treeNode</span><br><span class="line">    fmt.Println(node) <span class="comment">// {0 &lt;nil&gt; &lt;nil&gt;}</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// &#x4F7F;&#x7528;&#x6784;&#x9020;&#x5668;&#x5B9A;&#x4E49;&#x4E00;&#x4E2A;&#x7ED3;&#x6784;&#x4F53;</span></span><br><span class="line">    node2 := treeNode{</span><br><span class="line">        value: <span class="number">1</span>,</span><br><span class="line">        left:  &amp;treeNode{},   <span class="comment">// &#x53D6;&#x5730;&#x5740;</span></span><br><span class="line">        right: <span class="built_in">new</span>(treeNode), <span class="comment">// new() &#x83B7;&#x53D6;&#x7684;&#x662F;&#x5730;&#x5740;</span></span><br><span class="line">    }</span><br><span class="line">    fmt.Println(node2) <span class="comment">// {1 0xc00000c0c0 0xc00000c0a0}</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// &#x4F7F;&#x7528;&#x5DE5;&#x5382;&#x65B9;&#x6CD5;&#x521B;&#x5EFA;</span></span><br><span class="line">    node3 := treeNode{</span><br><span class="line">        value: <span class="number">0</span>,</span><br><span class="line">    }</span><br><span class="line">    node3.left = createNode(<span class="number">1</span>)</span><br><span class="line">    node3.right = createNode(<span class="number">2</span>)</span><br><span class="line">    fmt.Println(node3) <span class="comment">// {0 0xc00008e0a0 0xc00008e0c0}</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// &#x533A;&#x522B;</span></span><br><span class="line">    node.<span class="built_in">print</span>() <span class="comment">// 0</span></span><br><span class="line">    <span class="built_in">print</span>(node)  <span class="comment">// 0</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// &#x4E0D;&#x4F1A;&#x6539;&#x53D8;, go &#x662F;&#x4F20;&#x503C;</span></span><br><span class="line">    node.setVal(<span class="number">1</span>)</span><br><span class="line">    node.<span class="built_in">print</span>() <span class="comment">// 0</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// &#x4F1A;&#x6539;&#x53D8;</span></span><br><span class="line">    node.setValue(<span class="number">1</span>)</span><br><span class="line">    node.<span class="built_in">print</span>() <span class="comment">// 1</span></span><br><span class="line"></span><br><span class="line">    fmt.Println()</span><br><span class="line"></span><br><span class="line">    <span class="comment">// &#x4E2D;&#x987A;&#x904D;&#x5386;   0</span></span><br><span class="line">    <span class="comment">//         1   2</span></span><br><span class="line">    node3.traverse() <span class="comment">// 1 0 2</span></span><br><span class="line">}</span><br></pre></td></tr></table></figure><h3 id="&#x5305;&#x548C;&#x5C01;&#x88C5;"><a href="#&#x5305;&#x548C;&#x5C01;&#x88C5;" class="headerlink" title="&#x5305;&#x548C;&#x5C01;&#x88C5;"></a>&#x5305;&#x548C;&#x5C01;&#x88C5;</h3><ul><li>&#x5305;<ul><li>&#x6BCF;&#x4E2A;&#x76EE;&#x5F55;&#x4E00;&#x4E2A;&#x5305;</li><li>main &#x5305;&#x5305;&#x542B;&#x53EF;&#x6267;&#x884C;&#x5165;&#x53E3;</li><li>&#x4E3A;&#x7ED3;&#x6784;&#x5B9A;&#x4E49;&#x7684;&#x65B9;&#x6CD5;&#x5FC5;&#x987B;&#x653E;&#x5728;&#x540C;&#x4E00;&#x5305;&#x5185;</li><li>&#x53EF;&#x4EE5;&#x662F;&#x4E0D;&#x540C;&#x7684;&#x6587;&#x4EF6;</li></ul></li><li>&#x5C01;&#x88C5;<ul><li>&#x4E00;&#x822C;&#x4F7F;&#x7528;&#x9A7C;&#x5CF0;&#x547D;&#x540D;</li><li>&#x9996;&#x5B57;&#x6BCD;&#x5927;&#x5199;&#x8868;&#x793A; public</li><li>&#x9996;&#x5B57;&#x6BCD;&#x5C0F;&#x5199;&#x8868;&#x793A; private</li></ul></li></ul><p>Queue.go</p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> queue</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="string">&quot;fmt&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">type</span> Queue []<span class="keyword">int</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(q *Queue)</span> <span class="title">Push</span><span class="params">(v <span class="keyword">int</span>)</span></span> {</span><br><span class="line">    *q = <span class="built_in">append</span>(*q, v)</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(q *Queue)</span> <span class="title">Pop</span><span class="params">()</span> <span class="title">int</span></span> {</span><br><span class="line">    head := (*q)[<span class="number">0</span>]</span><br><span class="line">    *q = (*q)[<span class="number">1</span>:]</span><br><span class="line">    <span class="keyword">return</span> head</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(q *Queue)</span> <span class="title">Head</span><span class="params">()</span> <span class="title">int</span></span> {</span><br><span class="line">    <span class="keyword">return</span> (*q)[<span class="number">0</span>]</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(q *Queue)</span> <span class="title">IsEmpty</span><span class="params">()</span> <span class="title">bool</span></span> {</span><br><span class="line">    <span class="keyword">return</span> <span class="built_in">len</span>(*q) == <span class="number">0</span></span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(q *Queue)</span> <span class="title">Print</span><span class="params">()</span></span> {</span><br><span class="line">    <span class="keyword">for</span> _, v := <span class="keyword">range</span> *q {</span><br><span class="line">        fmt.Print(v, <span class="string">&quot; &quot;</span>)</span><br><span class="line">    }</span><br><span class="line">    fmt.Println()</span><br><span class="line">}</span><br></pre></td></tr></table></figure><p>test.go</p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> (</span><br><span class="line">    <span class="string">&quot;awesomeProject/queue&quot;</span></span><br><span class="line">    <span class="string">&quot;fmt&quot;</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> {</span><br><span class="line"></span><br><span class="line">    <span class="comment">// &#x5B9A;&#x4E49;&#x4E00;&#x4E2A;&#x6709;&#x9ED8;&#x8BA4;&#x503C;&#x7684;&#x961F;&#x5217;</span></span><br><span class="line">    q := queue.Queue{<span class="number">1</span>}</span><br><span class="line">    q.Push(<span class="number">2</span>)</span><br><span class="line">    q.Push(<span class="number">3</span>)</span><br><span class="line">    q.Push(<span class="number">4</span>)</span><br><span class="line">    q.Print() <span class="comment">// 1 2 3 4</span></span><br><span class="line"></span><br><span class="line">    fmt.Println(q.Pop()) <span class="comment">// 1</span></span><br><span class="line">    q.Print()  <span class="comment">// 2 3 4</span></span><br><span class="line"></span><br><span class="line">    q.Pop()</span><br><span class="line">    q.Pop()</span><br><span class="line">    q.Pop()</span><br><span class="line"></span><br><span class="line">    fmt.Println(q.IsEmpty()) <span class="comment">// true</span></span><br><span class="line">}</span><br></pre></td></tr></table></figure><h3 id="&#x9879;&#x76EE;&#x7ED3;&#x6784;"><a href="#&#x9879;&#x76EE;&#x7ED3;&#x6784;" class="headerlink" title="&#x9879;&#x76EE;&#x7ED3;&#x6784;"></a>&#x9879;&#x76EE;&#x7ED3;&#x6784;</h3><p>&#x73AF;&#x5883;&#x53D8;&#x91CF;&#xFF1A;</p><ul><li>GOROOT&#xFF1A;go&#x8BED;&#x8A00;&#x81EA;&#x5E26;&#x7684;&#x7C7B;&#x5E93;</li><li>GOPATH&#xFF1A;&#x7528;&#x6237;&#x6E90;&#x4EE3;&#x7801;&#x76EE;&#x5F55;<ul><li>src&#xFF1A;&#x6E90;&#x6587;&#x4EF6;</li><li>pkg&#xFF1A;build &#x7684;&#x4E4B;&#x540E;&#x7684;&#x4E2D;&#x95F4;&#x6587;&#x4EF6;</li><li>bin&#xFF1A;&#x53EF;&#x6267;&#x884C;&#x6587;&#x4EF6;</li></ul></li></ul><h2 id="&#x63A5;&#x53E3;"><a href="#&#x63A5;&#x53E3;" class="headerlink" title="&#x63A5;&#x53E3;"></a>&#x63A5;&#x53E3;</h2><h3 id="duck-typing"><a href="#duck-typing" class="headerlink" title="duck typing"></a>duck typing</h3><ul><li>&#x201C;&#x50CF;&#x9E2D;&#x5B50;&#x8D70;&#x8DEF;&#xFF0C;&#x50CF;&#x9E2D;&#x5B50;&#x53EB;&#x2026;&#x201D;&#xFF0C;&#x90A3;&#x4E48;&#x5C31;&#x662F;&#x9E2D;&#x5B50;</li><li>&#x63CF;&#x8FF0;&#x4E8B;&#x7269;&#x7684;&#x5916;&#x90E8;&#x884C;&#x4E3A;&#x800C;&#x975E;&#x5185;&#x90E8;&#x7ED3;&#x6784;</li><li>&#x4E25;&#x683C;&#x8BF4; go &#x5C5E;&#x4E8E;&#x7ED3;&#x6784;&#x5316;&#x7C7B;&#x578B;&#x7CFB;&#x7EDF;&#xFF0C;&#x7C7B;&#x4F3C; duck typing</li></ul><h3 id="&#x63A5;&#x53E3;&#x5B9A;&#x4E49;&#x548C;&#x5B9E;&#x73B0;"><a href="#&#x63A5;&#x53E3;&#x5B9A;&#x4E49;&#x548C;&#x5B9E;&#x73B0;" class="headerlink" title="&#x63A5;&#x53E3;&#x5B9A;&#x4E49;&#x548C;&#x5B9E;&#x73B0;"></a>&#x63A5;&#x53E3;&#x5B9A;&#x4E49;&#x548C;&#x5B9E;&#x73B0;</h3><p>&#x5B9A;&#x4E49;&#x4E00;&#x4E2A;&#x5047;&#x7684;&#x53D1;&#x9001;&#x8BF7;&#x6C42;&#xFF0C;&#x6709;&#x4E00;&#x4E2A; Get &#x65B9;&#x6CD5;</p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> mock</span><br><span class="line"></span><br><span class="line"><span class="keyword">type</span> Retriever <span class="keyword">struct</span> {</span><br><span class="line">    Contents <span class="keyword">string</span></span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(r Retriever)</span> <span class="title">Get</span><span class="params">(url <span class="keyword">string</span>)</span> <span class="title">string</span></span> {</span><br><span class="line">    <span class="keyword">return</span> url + <span class="string">&quot;hi, cuzz...&quot;</span></span><br><span class="line">}</span><br></pre></td></tr></table></figure><p>&#x5B9A;&#x4E49;&#x4E00;&#x4E2A;&#x771F;&#x6B63;&#x53D1;&#x9001;&#x8BF7;&#x6C42;&#xFF0C;&#x6709;&#x4E00;&#x4E2A; Get &#x65B9;&#x6CD5;</p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> work</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> (</span><br><span class="line">    <span class="string">&quot;net/http&quot;</span></span><br><span class="line">    <span class="string">&quot;net/http/httputil&quot;</span></span><br><span class="line">    <span class="string">&quot;time&quot;</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="keyword">type</span> Retriever <span class="keyword">struct</span> {</span><br><span class="line">    UserAgent <span class="keyword">string</span></span><br><span class="line">    TimeOut time.Duration</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(r Retriever)</span> <span class="title">Get</span><span class="params">(url <span class="keyword">string</span>)</span> <span class="title">string</span></span> {</span><br><span class="line">    resp, err := http.Get(url)</span><br><span class="line">    <span class="keyword">if</span> err != <span class="literal">nil</span> {</span><br><span class="line">        <span class="built_in">panic</span>(err)</span><br><span class="line">    }</span><br><span class="line">    result, err := httputil.DumpResponse(resp, <span class="literal">true</span>)</span><br><span class="line"></span><br><span class="line">    resp.Body.Close()</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> err != <span class="literal">nil</span> {</span><br><span class="line">        <span class="built_in">panic</span>(err)</span><br><span class="line">    }</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">string</span>(result)</span><br><span class="line">}</span><br></pre></td></tr></table></figure><p>&#x6D4B;&#x8BD5;</p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> (</span><br><span class="line">    <span class="string">&quot;awesomego/retriever/mock&quot;</span></span><br><span class="line">    <span class="string">&quot;awesomego/retriever/work&quot;</span></span><br><span class="line">    <span class="string">&quot;fmt&quot;</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="comment">// &#x5B9A;&#x4E49;&#x4E00;&#x4E2A;&#x63A5;&#x53E3;</span></span><br><span class="line"><span class="keyword">type</span> Retriever <span class="keyword">interface</span> {</span><br><span class="line">    Get(url <span class="keyword">string</span>) <span class="keyword">string</span></span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="comment">// &#x4F20;&#x5165;&#x63A5;&#x53E3;</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">download</span><span class="params">(r Retriever)</span> <span class="title">string</span></span> {</span><br><span class="line">    <span class="keyword">return</span> r.Get(<span class="string">&quot;http://blog.cuzz.site&quot;</span>)</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> {</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// &#x63A5;&#x53E3;&#x5B9A;&#x4E49;</span></span><br><span class="line">    <span class="comment">// var mockRetriever Retriever</span></span><br><span class="line">    <span class="comment">// mockRetriever = mock.Retriever{}</span></span><br><span class="line">    </span><br><span class="line">    </span><br><span class="line">    mockRetriever := mock.Retriever{}</span><br><span class="line">    fmt.Println(download(mockRetriever))</span><br><span class="line"></span><br><span class="line">    workRetriever := work.Retriever{}</span><br><span class="line">    fmt.Println(download(workRetriever))</span><br><span class="line">}</span><br></pre></td></tr></table></figure><p>&#x6211;&#x4EEC;&#x53D1;&#x73B0;&#x5728;&#x63A5;&#x53E3;&#x662F;&#x8C03;&#x7528;&#x653E;&#x5B9A;&#x4E49;&#x7684;&#xFF0C;&#x7ED3;&#x6784;&#x4F53;&#x4E2D;&#x7684;&#x63A5;&#x53E3;&#x4E5F;&#x662F;&#x9690;&#x5F0F;&#x7684;&#xFF0C;&#x7ED3;&#x6784;&#x4F53;&#x6EE1;&#x8DB3;&#x63A5;&#x53E3;&#x4E2D;&#x7684;&#x65B9;&#x6CD5;&#xFF0C;&#x5C31;&#x53EF;&#x4EE5;&#x8BF4;&#x8FD9;&#x4E2A;&#x7ED3;&#x6784;&#x4F53;&#x5B9E;&#x73B0;&#x4E86;&#x8FD9;&#x4E2A;&#x63A5;&#x53E3;&#x3002;</p><h3 id="&#x63A5;&#x53E3;&#x7684;&#x503C;&#x7C7B;&#x578B;"><a href="#&#x63A5;&#x53E3;&#x7684;&#x503C;&#x7C7B;&#x578B;" class="headerlink" title="&#x63A5;&#x53E3;&#x7684;&#x503C;&#x7C7B;&#x578B;"></a>&#x63A5;&#x53E3;&#x7684;&#x503C;&#x7C7B;&#x578B;</h3><p>&#x5728;<code>golang</code>&#x4E2D;&#xFF0C;&#x63A5;&#x53E3;&#x503C;&#x662F;&#x7531;&#x4E24;&#x90E8;&#x5206;&#x7EC4;&#x6210;&#x7684;&#xFF0C;&#x4E00;&#x90E8;&#x5206;&#x662F;&#x63A5;&#x53E3;&#x7684;&#x7C7B;&#x578B;&#xFF0C;&#x53E6;&#x4E00;&#x90E8;&#x5206;&#x662F;&#x8BE5;&#x7C7B;&#x578B;&#x5BF9;&#x5E94;&#x7684;&#x503C;&#xFF0C;&#x6211;&#x4EEC;&#x79F0;&#x5176;&#x4E3A;&#x52A8;&#x6001;&#x7C7B;&#x578B;&#x548C;&#x52A8;&#x6001;&#x503C;&#x3002;</p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> {</span><br><span class="line"></span><br><span class="line">    mockRetriever := mock.Retriever{}</span><br><span class="line">    fmt.Printf(<span class="string">&quot;%T, %v\n&quot;</span>, mockRetriever, mockRetriever) <span class="comment">// mock.Retriever, {}</span></span><br><span class="line"></span><br><span class="line">    workRetriever := work.Retriever{}</span><br><span class="line">    fmt.Printf(<span class="string">&quot;%T, %v\n&quot;</span>, workRetriever, workRetriever) <span class="comment">// work.Retriever, { 0s}</span></span><br><span class="line">}</span><br></pre></td></tr></table></figure><h3 id="&#x63A5;&#x53E3;&#x7EC4;&#x5408;"><a href="#&#x63A5;&#x53E3;&#x7EC4;&#x5408;" class="headerlink" title="&#x63A5;&#x53E3;&#x7EC4;&#x5408;"></a>&#x63A5;&#x53E3;&#x7EC4;&#x5408;</h3><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="comment">// &#x5B9A;&#x4E49;&#x4E00;&#x4E2A;&#x63A5;&#x53E3;</span></span><br><span class="line"><span class="keyword">type</span> Retriever <span class="keyword">interface</span> {</span><br><span class="line">    Get(url <span class="keyword">string</span>) <span class="keyword">string</span></span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="comment">// &#x5B9A;&#x4E49;&#x53E6;&#x4E00;&#x4E2A;&#x63A5;&#x53E3;</span></span><br><span class="line"><span class="keyword">type</span> Poster <span class="keyword">interface</span> {</span><br><span class="line">    Post(url <span class="keyword">string</span>, params <span class="keyword">map</span>[<span class="keyword">string</span>]<span class="keyword">string</span>)</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="comment">// &#x63A5;&#x53E3;&#x7EC4;&#x5408;</span></span><br><span class="line"><span class="keyword">type</span> RetrieverAndPoster <span class="keyword">interface</span> {</span><br><span class="line">    Retriever</span><br><span class="line">    Poster</span><br><span class="line">    <span class="comment">// &#x4E5F;&#x53EF;&#x4EE5;&#x5B9A;&#x4E49;&#x5176;&#x4ED6;&#x65B9;&#x6CD5;</span></span><br><span class="line">    AnotherMethod()</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> {</span><br><span class="line">}</span><br></pre></td></tr></table></figure><h3 id="&#x5E38;&#x7528;&#x7CFB;&#x7EDF;&#x63A5;&#x53E3;"><a href="#&#x5E38;&#x7528;&#x7CFB;&#x7EDF;&#x63A5;&#x53E3;" class="headerlink" title="&#x5E38;&#x7528;&#x7CFB;&#x7EDF;&#x63A5;&#x53E3;"></a>&#x5E38;&#x7528;&#x7CFB;&#x7EDF;&#x63A5;&#x53E3;</h3><p><strong>1&#x3001;Stringer</strong></p><p><code>Stringer</code>&#x63A5;&#x53E3;&#x4E2D;&#x7684; <code>string</code> &#x76F8;&#x5F53;&#x4E0E; Java <code>#toString</code> &#x65B9;&#x6CD5;</p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> work</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> (</span><br><span class="line">    <span class="string">&quot;fmt&quot;</span></span><br><span class="line">    <span class="string">&quot;time&quot;</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="keyword">type</span> Retriever <span class="keyword">struct</span> {</span><br><span class="line">    UserAgent <span class="keyword">string</span></span><br><span class="line">    TimeOut time.Duration</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(r Retriever)</span> <span class="title">String</span><span class="params">()</span> <span class="title">string</span></span> {</span><br><span class="line">    <span class="keyword">return</span> fmt.Sprintf(<span class="string">&quot;UserAgent: %v, TimeOut: %v&quot;</span>, r.UserAgent, r.TimeOut)</span><br><span class="line">}</span><br></pre></td></tr></table></figure><p>&#x6D4B;&#x8BD5;</p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> (</span><br><span class="line">    <span class="string">&quot;awesomego/retriever/work&quot;</span></span><br><span class="line">    <span class="string">&quot;fmt&quot;</span></span><br><span class="line">    <span class="string">&quot;time&quot;</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> {</span><br><span class="line">    workRetriever := work.Retriever{<span class="string">&quot;Mozilla/5.0&quot;</span>, time.Minute}</span><br><span class="line">    fmt.Println(workRetriever) <span class="comment">// UserAgent: Mozilla/5.0, TimeOut: 1m0s</span></span><br><span class="line">}</span><br></pre></td></tr></table></figure><p><strong>2&#x3001;Reader</strong></p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">type</span> Reader <span class="keyword">interface</span> {</span><br><span class="line">    Read(p []<span class="keyword">byte</span>) (n <span class="keyword">int</span>, err error)</span><br><span class="line">}</span><br></pre></td></tr></table></figure><p><strong>3&#x3001;Writer</strong></p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">type</span> Writer <span class="keyword">interface</span> {</span><br><span class="line">    Write(p []<span class="keyword">byte</span>) (n <span class="keyword">int</span>, err error)</span><br><span class="line">}</span><br></pre></td></tr></table></figure><h2 id="&#x51FD;&#x6570;&#x5F0F;&#x7F16;&#x7A0B;"><a href="#&#x51FD;&#x6570;&#x5F0F;&#x7F16;&#x7A0B;" class="headerlink" title="&#x51FD;&#x6570;&#x5F0F;&#x7F16;&#x7A0B;"></a>&#x51FD;&#x6570;&#x5F0F;&#x7F16;&#x7A0B;</h2><ul><li>&#x51FD;&#x6570;&#x662F;&#x4E00;&#x7B49;&#x516C;&#x6C11;&#xFF1A;&#x53C2;&#x6570;&#xFF0C;&#x53D8;&#x91CF;&#xFF0C;&#x8FD4;&#x56DE;&#x503C;&#x90FD;&#x53EF;&#x4EE5;&#x662F;&#x51FD;&#x6570;</li><li>&#x9AD8;&#x7EA7;&#x51FD;&#x6570;</li><li>&#x95ED;&#x5305;</li></ul><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="string">&quot;fmt&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// &#x5B9A;&#x4E49;&#x4E00;&#x4E2A; adder &#x51FD;&#x6570;, &#x6CA1;&#x6709;&#x53C2;&#x6570;, &#x8FD4;&#x56DE;&#x503C;&#x662F;&#x4E00;&#x4E2A;&#x51FD;&#x6570;</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">adder</span><span class="params">()</span> <span class="title">func</span><span class="params">(<span class="keyword">int</span>)</span> <span class="title">int</span></span> {</span><br><span class="line">    sum := <span class="number">0</span></span><br><span class="line">    <span class="keyword">return</span> <span class="function"><span class="keyword">func</span><span class="params">(v <span class="keyword">int</span>)</span> <span class="title">int</span></span> {</span><br><span class="line">        sum += v</span><br><span class="line">        <span class="keyword">return</span> sum</span><br><span class="line">    }</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="comment">// &#x5B9A;&#x4E49;&#x6590;&#x6CE2;&#x90A3;&#x5951;&#x6570;&#x5217;</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">fibonacci</span><span class="params">()</span> <span class="title">func</span><span class="params">()</span> <span class="title">int</span></span>{</span><br><span class="line">    a, b := <span class="number">0</span>, <span class="number">1</span></span><br><span class="line">    <span class="keyword">return</span> <span class="function"><span class="keyword">func</span><span class="params">()</span> <span class="title">int</span></span> {</span><br><span class="line">        a, b = b, a + b</span><br><span class="line">        fmt.Println(a)</span><br><span class="line">        <span class="keyword">return</span> a</span><br><span class="line">    }</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> {</span><br><span class="line">    a := adder()</span><br><span class="line">    <span class="keyword">for</span> i := <span class="number">0</span>; i &lt; <span class="number">10</span>; i++ {</span><br><span class="line">        fmt.Printf(<span class="string">&quot;0 + 1 + ... + %d = %d\n&quot;</span>, i, a(i))</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    f := fibonacci()</span><br><span class="line">    f() <span class="comment">// 1</span></span><br><span class="line">    f() <span class="comment">// 1</span></span><br><span class="line">    f() <span class="comment">// 2</span></span><br><span class="line">    f() <span class="comment">// 3</span></span><br><span class="line">    f() <span class="comment">// 5</span></span><br><span class="line">}</span><br></pre></td></tr></table></figure><h2 id="&#x8D44;&#x6E90;&#x7BA1;&#x7406;&#x4E0E;&#x51FA;&#x9519;&#x5904;&#x7406;"><a href="#&#x8D44;&#x6E90;&#x7BA1;&#x7406;&#x4E0E;&#x51FA;&#x9519;&#x5904;&#x7406;" class="headerlink" title="&#x8D44;&#x6E90;&#x7BA1;&#x7406;&#x4E0E;&#x51FA;&#x9519;&#x5904;&#x7406;"></a>&#x8D44;&#x6E90;&#x7BA1;&#x7406;&#x4E0E;&#x51FA;&#x9519;&#x5904;&#x7406;</h2><h3 id="defer-&#x8C03;&#x7528;"><a href="#defer-&#x8C03;&#x7528;" class="headerlink" title="defer &#x8C03;&#x7528;"></a>defer &#x8C03;&#x7528;</h3><p>&#x4F60;&#x53EF;&#x4EE5;&#x5728; Go &#x51FD;&#x6570;&#x4E2D;&#x6DFB;&#x52A0;&#x591A;&#x4E2A;<code>defer</code>&#x8BED;&#x53E5;&#xFF0C;&#x5F53;&#x51FD;&#x6570;&#x6267;&#x884C;&#x5230;&#x6700;&#x540E;&#x65F6;&#xFF0C;&#x8FD9;&#x4E9B; defer &#x8BED;&#x53E5;&#x4F1A;&#x6309;&#x7167;&#x9006;&#x5E8F;&#x6267;&#x884C;&#xFF08;&#x5373;&#x6700;&#x540E;&#x4E00;&#x4E2A;<code>defer</code>&#x8BED;&#x53E5;&#x5C06;&#x6700;&#x5148;&#x6267;&#x884C;&#xFF09;&#xFF0C;&#x6700;&#x540E;&#x8BE5;&#x51FD;&#x6570;&#x8FD4;&#x56DE;&#x3002;&#x7279;&#x522B;&#x662F;&#x5F53;&#x4F60;&#x5728;&#x8FDB;&#x884C;&#x4E00;&#x4E9B;&#x6253;&#x5F00;&#x8D44;&#x6E90;&#x7684;&#x64CD;&#x4F5C;&#x65F6;&#xFF0C;&#x9047;&#x5230;&#x9519;&#x8BEF;&#x9700;&#x8981;&#x63D0;&#x524D;&#x8FD4;&#x56DE;&#xFF0C;&#x5728;&#x8FD4;&#x56DE;&#x524D;&#x4F60;&#x9700;&#x8981;&#x5173;&#x95ED;&#x76F8;&#x5E94;&#x7684;&#x8D44;&#x6E90;&#xFF0C;&#x4E0D;&#x7136;&#x5F88;&#x5BB9;&#x6613;&#x9020;&#x6210;&#x8D44;&#x6E90;&#x6CC4;&#x9732;&#x7B49;&#x95EE;&#x9898;&#x3002;&#x5982;&#x4E0B;&#x4EE3;&#x7801;&#x6240;&#x793A;&#xFF0C;&#x6211;&#x4EEC;&#x4E00;&#x822C;&#x5199;&#x6253;&#x5F00;&#x4E00;&#x4E2A;&#x8D44;&#x6E90;&#x662F;&#x8FD9;&#x6837;&#x64CD;&#x4F5C;&#x7684;&#xFF1A;</p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">CopyFile</span><span class="params">(dst, src <span class="keyword">string</span>)</span> <span class="params">(w <span class="keyword">int64</span>, err error)</span></span> {</span><br><span class="line">    srcFile, err := os.Open(src)</span><br><span class="line">    <span class="keyword">if</span> err != <span class="literal">nil</span> {</span><br><span class="line">        <span class="keyword">return</span> </span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="keyword">defer</span> srcFile.Close()</span><br><span class="line"></span><br><span class="line">    dstFile, err := os.Create(dst)</span><br><span class="line">    <span class="keyword">if</span> err != <span class="literal">nil</span> {</span><br><span class="line">        <span class="keyword">return</span> </span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="keyword">defer</span> dstFile.Close()</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> io.Copy(dstFile, srcFile)</span><br><span class="line">}</span><br></pre></td></tr></table></figure><h3 id="&#x9519;&#x8BEF;&#x5904;&#x7406;"><a href="#&#x9519;&#x8BEF;&#x5904;&#x7406;" class="headerlink" title="&#x9519;&#x8BEF;&#x5904;&#x7406;"></a>&#x9519;&#x8BEF;&#x5904;&#x7406;</h3><p>&#x9519;&#x8BEF;&#x5904;&#x7406;&#x662F;&#x4EFB;&#x4F55;&#x8BED;&#x8A00;&#x90FD;&#x9700;&#x8981;&#x8003;&#x8651;&#x5230;&#x7684;&#x95EE;&#x9898;&#xFF0C;&#x800C; Go &#x8BED;&#x8A00;&#x5728;&#x9519;&#x8BEF;&#x5904;&#x7406;&#x4E0A;&#x89E3;&#x51B3;&#x5F97;&#x66F4;&#x4E3A;&#x5B8C;&#x5584;&#xFF0C;&#x4F18;&#x96C5;&#x7684;&#x9519;&#x8BEF;&#x5904;&#x7406;&#x673A;&#x5236;&#x662F; Go &#x8BED;&#x8A00;&#x7684;&#x4E00;&#x5927;&#x7279;&#x70B9;&#x3002;</p><p><strong>1&#x3001;error</strong></p><p>Go &#x8BED;&#x8A00;&#x5F15;&#x5165;&#x4E86;&#x4E00;&#x4E2A;&#x9519;&#x8BEF;&#x5904;&#x7406;&#x7684;&#x6807;&#x51C6;&#x6A21;&#x5F0F;&#xFF0C;&#x5373;<code>error</code>&#x63A5;&#x53E3;&#xFF0C;&#x8BE5;&#x63A5;&#x53E3;&#x5B9A;&#x4E49;&#x5982;&#x4E0B;&#xFF1A;</p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">type</span> error <span class="keyword">interface</span> {</span><br><span class="line">    Error() <span class="keyword">string</span></span><br><span class="line">}</span><br></pre></td></tr></table></figure><p>&#x5BF9;&#x4E8E;&#x5927;&#x591A;&#x6570;&#x51FD;&#x6570;&#xFF0C;&#x5982;&#x679C;&#x8981;&#x8FD4;&#x56DE;&#x9519;&#x8BEF;&#xFF0C;&#x53EF;&#x4EE5;&#x5C06;<code>error</code>&#x4F5C;&#x4E3A;&#x591A;&#x8FD4;&#x56DE;&#x503C;&#x7684;&#x6700;&#x540E;&#x4E00;&#x4E2A;&#xFF1A;</p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">foo</span><span class="params">(param <span class="keyword">int</span>)</span><span class="params">(ret <span class="keyword">int</span>, err error)</span></span> {</span><br><span class="line">  ...  </span><br><span class="line">}</span><br></pre></td></tr></table></figure><p>&#x8C03;&#x7528;&#x65F6;&#x7684;&#x4EE3;&#x7801;&#xFF1A;</p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">n, err := foo(<span class="number">0</span>)</span><br><span class="line"><span class="keyword">if</span> err != <span class="literal">nil</span> {</span><br><span class="line">    <span class="comment">//  &#x9519;&#x8BEF;&#x5904;&#x7406;</span></span><br><span class="line">} <span class="keyword">else</span> {</span><br><span class="line">    <span class="comment">// &#x4F7F;&#x7528;&#x8FD4;&#x56DE;&#x503C;n</span></span><br><span class="line">}</span><br></pre></td></tr></table></figure><p><strong>2&#x3001;panic</strong></p><ul><li>&#x505C;&#x6B62;&#x5F53;&#x524D;&#x51FD;&#x6570;&#x6267;&#x884C;</li><li>&#x4E00;&#x76F4;&#x5411;&#x4E0A;&#x8FD4;&#x56DE;&#xFF0C;&#x6267;&#x884C;&#x6BCF;&#x4E00;&#x5C42;&#x7684; defer</li><li>&#x5982;&#x679C;&#x6CA1;&#x6709;&#x9047;&#x89C1; recover&#xFF0C;&#x7A0B;&#x5E8F;&#x9000;&#x51FA;</li></ul><p><strong>3&#x3001;recover</strong></p><ul><li>&#x4EC5;&#x5728; defer &#x4E2D;&#x8C03;&#x7528;</li><li>&#x83B7;&#x53D6; panic &#x7684;&#x503C;</li><li>&#x5982;&#x679C;&#x65E0;&#x6CD5;&#x5904;&#x7406;&#xFF0C;&#x53EF;&#x4EE5;&#x91CD;&#x65B0; panic</li></ul><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> (</span><br><span class="line">    <span class="string">&quot;fmt&quot;</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">tryRecover</span><span class="params">()</span></span>  {</span><br><span class="line"></span><br><span class="line">    <span class="comment">// &#x533F;&#x540D;&#x51FD;&#x6570;&#x91CC;</span></span><br><span class="line">    <span class="keyword">defer</span> <span class="function"><span class="keyword">func</span><span class="params">()</span></span> {</span><br><span class="line">        r := <span class="built_in">recover</span>()</span><br><span class="line">        <span class="keyword">if</span> err, ok := r.(error); ok {</span><br><span class="line">            fmt.Println(<span class="string">&quot;Error occurred: &quot;</span>, err)</span><br><span class="line">        } <span class="keyword">else</span> {</span><br><span class="line">            <span class="built_in">panic</span>(fmt.Sprintf(<span class="string">&quot;I don&apos;t know what to do: %v&quot;</span>, r))</span><br><span class="line">        }</span><br><span class="line">    }()</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    a := <span class="number">1</span></span><br><span class="line">    b := <span class="number">0</span></span><br><span class="line">    fmt.Println(a / b) <span class="comment">// runtime error: integer divide by zero</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// panic(errors.New(&quot;this is an error&quot;))</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// panic(123) // &#x5982;&#x679C;&#x4E0D;&#x662F;&#x4E00;&#x4E2A;&#x9519;&#x8BEF;&#x7684;&#x8BDD;&#x5C31;, &#x518D;&#x6B21; panic &#x51FA;&#x53BB;</span></span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> {</span><br><span class="line"></span><br><span class="line">    tryRecover()</span><br><span class="line">    </span><br><span class="line">}</span><br></pre></td></tr></table></figure><h2 id="&#x5E76;&#x53D1;&#x7F16;&#x7A0B;"><a href="#&#x5E76;&#x53D1;&#x7F16;&#x7A0B;" class="headerlink" title="&#x5E76;&#x53D1;&#x7F16;&#x7A0B;"></a>&#x5E76;&#x53D1;&#x7F16;&#x7A0B;</h2><h3 id="goroutine"><a href="#goroutine" class="headerlink" title="goroutine"></a>goroutine</h3><p><strong>1&#x3001;&#x534F;&#x7A0B;</strong></p><ul><li>&#x8F7B;&#x91CF;&#x7EA7;&#x201C;&#x7EBF;&#x7A0B;&#x201D;</li><li>&#x975E;&#x62A2;&#x5360;&#x5F0F;&#x591A;&#x4EFB;&#x52A1;&#x5904;&#x7406;&#xFF0C;&#x7531;&#x534F;&#x7A0B;&#x4E3B;&#x52A8;&#x4EA4;&#x51FA;&#x63A7;&#x5236;&#x6743;</li><li>&#x7F16;&#x8BD1;&#x5668;/&#x89E3;&#x91CA;&#x5668;/&#x865A;&#x62DF;&#x5668;&#x5C42;&#x9762;&#x7684;&#x591A;&#x4EFB;&#x52A1;</li><li>&#x591A;&#x4E2A;&#x534F;&#x7A0B;&#x53EF;&#x80FD;&#x5728;&#x4E00;&#x4E2A;&#x6216;&#x8005;&#x591A;&#x4E2A;&#x7EBF;&#x7A0B;&#x4E0A;&#x8FD0;&#x884C;</li></ul><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> (</span><br><span class="line">    <span class="string">&quot;fmt&quot;</span></span><br><span class="line">    <span class="string">&quot;time&quot;</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">test</span><span class="params">()</span></span> {</span><br><span class="line">    <span class="comment">// &#x6B64;&#x65F6;, &#x4E0D;&#x4F1A;&#x8F93;&#x51FA;, main &#x5148;&#x9000;&#x51FA;&#x4E86;, &#x5FC5;&#x987B;&#x8BA9; main sleep</span></span><br><span class="line">    <span class="keyword">for</span> i := <span class="number">0</span>; i &lt; <span class="number">1000</span>; i++ {</span><br><span class="line">        <span class="comment">// &#x533F;&#x540D;&#x51FD;&#x6570;</span></span><br><span class="line">        <span class="keyword">go</span> <span class="function"><span class="keyword">func</span><span class="params">(i <span class="keyword">int</span>)</span></span> {</span><br><span class="line">            <span class="keyword">for</span> {</span><br><span class="line">                fmt.Printf(<span class="string">&quot;From %d\n&quot;</span>, i)</span><br><span class="line">            }</span><br><span class="line">        }(i)</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    time.Sleep(time.Millisecond)</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">test2</span><span class="params">()</span></span> {</span><br><span class="line"></span><br><span class="line">    <span class="comment">// &#x6B64;&#x65F6;&#x4E0D;&#x4F1A;&#x9000;&#x51FA;, &#x56E0;&#x4E3A;&#x4E0D;&#x80FD;&#x4EA4;&#x51FA;&#x63A7;&#x5236;&#x6743;</span></span><br><span class="line">    <span class="keyword">var</span> arr [<span class="number">10</span>]<span class="keyword">int</span></span><br><span class="line">    <span class="keyword">for</span> i := <span class="number">0</span>; i &lt; <span class="number">10</span>; i++ {</span><br><span class="line">        <span class="comment">// &#x533F;&#x540D;&#x51FD;&#x6570;</span></span><br><span class="line">        <span class="keyword">go</span> <span class="function"><span class="keyword">func</span><span class="params">(i <span class="keyword">int</span>)</span></span> {</span><br><span class="line">            arr[i]++</span><br><span class="line">        }(i)</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    time.Sleep(time.Millisecond)</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> {</span><br><span class="line">    test()</span><br><span class="line">    test2()</span><br><span class="line">}</span><br></pre></td></tr></table></figure><p><strong>2&#x3001;go &#x8BED;&#x8A00;&#x4E2D;&#x7684;&#x8C03;&#x5EA6;&#x5668;</strong></p><p>&#x534F;&#x7A0B;&#x53EF;&#x4EE5;&#x76F8;&#x4E92;&#x901A;&#x4FE1;</p><h3 id="channel"><a href="#channel" class="headerlink" title="channel"></a>channel</h3><p><code>channel</code>&#x662F;<code>goroutine</code>&#x4E4B;&#x95F4;&#x4E92;&#x76F8;&#x901A;&#x8BAF;&#x7684;&#x4E1C;&#x897F;&#x3002;&#x7C7B;&#x4F3C;&#x6211;&#x4EEC; Unix &#x4E0A;&#x7684;&#x7BA1;&#x9053;&#xFF08;&#x53EF;&#x4EE5;&#x5728;&#x8FDB;&#x7A0B;&#x95F4;&#x4F20;&#x9012;&#x6D88;&#x606F;&#xFF09;&#xFF0C;&#x7528;&#x6765;<code>goroutine</code>&#x4E4B;&#x95F4;&#x53D1;&#x6D88;&#x606F;&#x548C;&#x63A5;&#x6536;&#x6D88;&#x606F;&#x3002;&#x5176;&#x5B9E;&#xFF0C;&#x5C31;&#x662F;&#x5728;&#x505A;<code>goroutine</code>&#x4E4B;&#x95F4;&#x7684;&#x5185;&#x5B58;&#x5171;&#x4EAB;&#x3002;<code>channel</code>&#x662F;&#x7C7B;&#x578B;&#x76F8;&#x5173;&#x7684;&#xFF0C;&#x4E5F;&#x5C31;&#x662F;&#x8BF4;&#x4E00;&#x4E2A;<code>channel</code>&#x53EA;&#x80FD;&#x4F20;&#x9012;&#x4E00;&#x79CD;&#x7C7B;&#x578B;&#x7684;&#x503C;&#xFF0C;&#x8FD9;&#x4E2A;&#x7C7B;&#x578B;&#x9700;&#x8981;&#x5728;<code>channel</code>&#x58F0;&#x660E;&#x65F6;&#x6307;&#x5B9A;&#x3002;</p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> (</span><br><span class="line">    <span class="string">&quot;fmt&quot;</span></span><br><span class="line">    <span class="string">&quot;time&quot;</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="comment">// &#x5B9A;&#x4E49;chan</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">defineChan</span><span class="params">()</span></span> {</span><br><span class="line">    <span class="comment">// &#x58F0;&#x540D;&#x4E00;&#x4E2A;&#x4F20;&#x9012;int&#x578B;&#x7684;channel</span></span><br><span class="line">    <span class="comment">// var a chan int</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// &#x521D;&#x59CB;&#x5316;&#x4E00;&#x4E2A;int&#x578B;channel</span></span><br><span class="line">    a := <span class="built_in">make</span>(<span class="keyword">chan</span> <span class="keyword">int</span>)</span><br><span class="line"></span><br><span class="line">    <span class="comment">// &#x4ECE;channel&#x4E2D;&#x83B7;&#x53D6;</span></span><br><span class="line">    <span class="keyword">go</span> <span class="function"><span class="keyword">func</span><span class="params">()</span></span> {</span><br><span class="line">        <span class="keyword">for</span> {</span><br><span class="line">            z := &lt;-a</span><br><span class="line">            fmt.Println(z)</span><br><span class="line">        }</span><br><span class="line"></span><br><span class="line">    }()</span><br><span class="line"></span><br><span class="line">    a &lt;- <span class="number">1</span></span><br><span class="line">    time.Sleep(time.Millisecond)</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="comment">// &#x5B9A;&#x4E49;&#x5E26;&#x7F13;&#x5B58;chan</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">bufChan</span><span class="params">()</span></span> {</span><br><span class="line"></span><br><span class="line">    <span class="comment">// &#x521D;&#x59CB;&#x5316;&#x4E00;&#x4E2A;int&#x578B;channel</span></span><br><span class="line">    a := <span class="built_in">make</span>(<span class="keyword">chan</span> <span class="keyword">int</span>, <span class="number">3</span>)</span><br><span class="line"></span><br><span class="line">    <span class="comment">// &#x4ECE;channel&#x4E2D;&#x83B7;&#x53D6;</span></span><br><span class="line">    <span class="keyword">go</span> <span class="function"><span class="keyword">func</span><span class="params">()</span></span> {</span><br><span class="line">        <span class="keyword">for</span> {</span><br><span class="line">            <span class="comment">//z, ok := &lt;-a</span></span><br><span class="line">            <span class="comment">//if !ok {</span></span><br><span class="line">            <span class="comment">//    break</span></span><br><span class="line">            <span class="comment">//}</span></span><br><span class="line">            <span class="comment">//fmt.Println(z)</span></span><br><span class="line"></span><br><span class="line">            <span class="comment">// &#x6216;&#x8005;&#x4F7F;&#x7528;&#x8FD9;&#x79CD;, &#x786E;&#x4FDD;&#x53D1;&#x9001;&#x5B8C;&#x6210;</span></span><br><span class="line">            <span class="keyword">for</span> z := <span class="keyword">range</span> a {</span><br><span class="line">                fmt.Println(z)</span><br><span class="line">            }</span><br><span class="line">        }</span><br><span class="line"></span><br><span class="line">    }()</span><br><span class="line"></span><br><span class="line">    a &lt;- <span class="number">1</span></span><br><span class="line">    a &lt;- <span class="number">2</span></span><br><span class="line">    a &lt;- <span class="number">3</span></span><br><span class="line">    a &lt;- <span class="number">4</span></span><br><span class="line">    <span class="built_in">close</span>(a) <span class="comment">// &#x5173;&#x95ED;&#x4E86;&#x7684;&#x8BDD;, &#x5C31;&#x4E00;&#x76F4;&#x53D1;&#x9001;0</span></span><br><span class="line">    time.Sleep(time.Millisecond)</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="comment">// &#x5982;&#x4F55;&#x4F7F;&#x7528;</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">chanDemo</span><span class="params">()</span></span> {</span><br><span class="line">    <span class="comment">// &#x5B9A;&#x4E49;&#x4E00;&#x4E2A;&#x53EA;&#x80FD;&#x6536;&#x6570;&#x636E;&#x7684;channel, &#x628A;&#x6570;&#x636E;&#x653E;&#x5230;channel&#x4E2D;</span></span><br><span class="line">    <span class="keyword">var</span> channels [<span class="number">10</span>]<span class="keyword">chan</span>&lt;- <span class="keyword">int</span></span><br><span class="line">    <span class="keyword">for</span> i := <span class="number">0</span>; i &lt; <span class="built_in">len</span>(channels); i++ {</span><br><span class="line">        channels[i] = createWorker(i)</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="comment">// &#x5411;channel&#x4E2D;&#x5199;&#x6570;&#x636E;</span></span><br><span class="line">    <span class="keyword">for</span> i := <span class="number">0</span>; i &lt; <span class="built_in">len</span>(channels); i++ {</span><br><span class="line">        channels[i] &lt;- <span class="string">&apos;a&apos;</span> + i</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    time.Sleep(time.Millisecond)</span><br><span class="line"></span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">createWorker</span><span class="params">(i <span class="keyword">int</span>)</span> <span class="title">chan</span>&lt;- <span class="title">int</span></span> {</span><br><span class="line">    c := <span class="built_in">make</span>(<span class="keyword">chan</span> <span class="keyword">int</span>)</span><br><span class="line">    <span class="keyword">go</span> <span class="function"><span class="keyword">func</span><span class="params">()</span></span> {</span><br><span class="line">        <span class="keyword">for</span> {</span><br><span class="line">            fmt.Printf(<span class="string">&quot;Worker %d received %c\n&quot;</span>, i, &lt;-c)</span><br><span class="line">        }</span><br><span class="line">    }()</span><br><span class="line">    <span class="keyword">return</span> c</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> {</span><br><span class="line">    defineChan()</span><br><span class="line">    bufChan()</span><br><span class="line">    chanDemo()</span><br><span class="line">}</span><br></pre></td></tr></table></figure><h3 id="&#x4F7F;&#x7528;-Channel-&#x7B49;&#x5F85;&#x4EFB;&#x52A1;&#x7ED3;&#x675F;"><a href="#&#x4F7F;&#x7528;-Channel-&#x7B49;&#x5F85;&#x4EFB;&#x52A1;&#x7ED3;&#x675F;" class="headerlink" title="&#x4F7F;&#x7528; Channel &#x7B49;&#x5F85;&#x4EFB;&#x52A1;&#x7ED3;&#x675F;"></a>&#x4F7F;&#x7528; Channel &#x7B49;&#x5F85;&#x4EFB;&#x52A1;&#x7ED3;&#x675F;</h3><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> (</span><br><span class="line">    <span class="string">&quot;fmt&quot;</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="keyword">type</span> worker <span class="keyword">struct</span> {</span><br><span class="line">    in   <span class="keyword">chan</span> <span class="keyword">int</span></span><br><span class="line">    done <span class="keyword">chan</span> <span class="keyword">bool</span> <span class="comment">// &#x4F7F;&#x7528;done&#x6765;&#x901A;&#x4FE1;&#x786E;&#x5B9A;&#x5B8C;&#x6210;</span></span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">chanDemo</span><span class="params">()</span></span> {</span><br><span class="line">    <span class="keyword">var</span> channels [<span class="number">10</span>]worker</span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span> i := <span class="number">0</span>; i &lt; <span class="built_in">len</span>(channels); i++ {</span><br><span class="line">        channels[i] = createWorker(i)</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="comment">// &#x5411;channel&#x4E2D;&#x5199;&#x6570;&#x636E;</span></span><br><span class="line">    <span class="keyword">for</span> i := <span class="number">0</span>; i &lt; <span class="built_in">len</span>(channels); i++ {</span><br><span class="line">        channels[i].in &lt;- <span class="string">&apos;a&apos;</span> + i</span><br><span class="line">        &lt;-channels[i].done <span class="comment">// &#x7B49;&#x5F85;channel&#x5B8C;&#x6210;</span></span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">createWorker</span><span class="params">(i <span class="keyword">int</span>)</span> <span class="title">worker</span></span> {</span><br><span class="line">    w := worker{</span><br><span class="line">        in:   <span class="built_in">make</span>(<span class="keyword">chan</span> <span class="keyword">int</span>),</span><br><span class="line">        done: <span class="built_in">make</span>(<span class="keyword">chan</span> <span class="keyword">bool</span>),</span><br><span class="line">    }</span><br><span class="line">    <span class="keyword">go</span> <span class="function"><span class="keyword">func</span><span class="params">()</span></span> {</span><br><span class="line">        <span class="keyword">for</span> in := <span class="keyword">range</span> w.in {</span><br><span class="line">            fmt.Printf(<span class="string">&quot;Worker %d received %c\n&quot;</span>, i, in)</span><br><span class="line">            w.done &lt;- <span class="literal">true</span></span><br><span class="line">        }</span><br><span class="line">    }()</span><br><span class="line">    <span class="keyword">return</span> w</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> {</span><br><span class="line">    chanDemo()</span><br><span class="line">}</span><br></pre></td></tr></table></figure><h3 id="&#x4F7F;&#x7528;-select-&#x8FDB;&#x884C;&#x8C03;&#x5EA6;"><a href="#&#x4F7F;&#x7528;-select-&#x8FDB;&#x884C;&#x8C03;&#x5EA6;" class="headerlink" title="&#x4F7F;&#x7528; select &#x8FDB;&#x884C;&#x8C03;&#x5EA6;"></a>&#x4F7F;&#x7528; select &#x8FDB;&#x884C;&#x8C03;&#x5EA6;</h3><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> (</span><br><span class="line">    <span class="string">&quot;fmt&quot;</span></span><br><span class="line">    <span class="string">&quot;math/rand&quot;</span></span><br><span class="line">    <span class="string">&quot;time&quot;</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">selectDemo</span><span class="params">()</span></span> {</span><br><span class="line">    <span class="keyword">var</span> c1, c2 <span class="keyword">chan</span> <span class="keyword">int</span></span><br><span class="line">    c1, c2 = createChan(), createChan()</span><br><span class="line">    <span class="keyword">for</span> {</span><br><span class="line">        <span class="keyword">select</span> {</span><br><span class="line">        <span class="keyword">case</span> n := &lt;-c1:</span><br><span class="line">            fmt.Printf(<span class="string">&quot;from c1, val: %d\n&quot;</span>, n)</span><br><span class="line">        <span class="keyword">case</span> n := &lt;-c2:</span><br><span class="line">            fmt.Printf(<span class="string">&quot;from c2, val: %d\n&quot;</span>, n)</span><br><span class="line">        }</span><br><span class="line">    }</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">createChan</span><span class="params">()</span> <span class="title">chan</span> <span class="title">int</span></span> {</span><br><span class="line">    out := <span class="built_in">make</span>(<span class="keyword">chan</span> <span class="keyword">int</span>)</span><br><span class="line">    <span class="keyword">go</span> <span class="function"><span class="keyword">func</span><span class="params">()</span></span> {</span><br><span class="line">        i := <span class="number">0</span></span><br><span class="line">        <span class="keyword">for</span> {</span><br><span class="line">            time.Sleep(time.Duration(rand.Intn(<span class="number">1000</span>)) * time.Millisecond)</span><br><span class="line">            i++</span><br><span class="line">            out &lt;- i</span><br><span class="line">        }</span><br><span class="line">    }()</span><br><span class="line">    <span class="keyword">return</span> out</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> {</span><br><span class="line">    selectDemo()</span><br><span class="line">}</span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      &lt;h2 id=&quot;&amp;#x8BFE;&amp;#x7A0B;&amp;#x5BFC;&amp;#x8BBA;&quot;&gt;&lt;a href=&quot;#&amp;#x8BFE;&amp;#x7A0B;&amp;#x5BFC;&amp;#x8BBA;&quot; class=&quot;headerlink&quot; title=&quot;&amp;#x8BFE;&amp;#x7A0B;&amp;#x5BFC;&amp;#x8BBA;&quot;&gt;&lt;/a&gt;&amp;#x8BFE;&amp;#x7A0B;&amp;#x5BFC;&amp;#x8BBA;&lt;/h2&gt;&lt;ul&gt;
&lt;li&gt;&amp;#x7279;&amp;#x70B9;&lt;ul&gt;
&lt;li&gt;&amp;#x6CA1;&amp;#x6709;&amp;#x201C;&amp;#x5BF9;&amp;#x8C61;&amp;#x201D;&amp;#xFF0C;&amp;#x6CA1;&amp;#x6709;&amp;#x7EE7;&amp;#x627F;&amp;#xFF0C;&amp;#x6CA1;&amp;#x6709;&amp;#x6CDB;&amp;#x578B;&amp;#xFF0C;&amp;#x6CA1;&amp;#x6709; try/catch&lt;/li&gt;
&lt;li&gt;&amp;#x6709;&amp;#x63A5;&amp;#x53E3;&amp;#xFF0C;&amp;#x51FD;&amp;#x6570;&amp;#x5F0F;&amp;#x7F16;&amp;#x7A0B;&amp;#xFF0C;CSP &amp;#x5E76;&amp;#x53D1;&amp;#x6A21;&amp;#x578B;&amp;#xFF08;goroutine + channel&amp;#xFF09;&lt;/li&gt;
&lt;li&gt;&amp;#x8BED;&amp;#x6CD5;&amp;#x7B80;&amp;#x5355;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&amp;#x57FA;&amp;#x672C;&amp;#x8BED;&amp;#x6CD5;&lt;ul&gt;
&lt;li&gt;&amp;#x53D8;&amp;#x91CF;&lt;/li&gt;
&lt;li&gt;&amp;#x9009;&amp;#x62E9;&amp;#xFF0C;&amp;#x5FAA;&amp;#x73AF;&lt;/li&gt;
&lt;li&gt;&amp;#x6307;&amp;#x9488;&amp;#xFF0C;&amp;#x6570;&amp;#x7EC4;&amp;#xFF0C;&amp;#x5BB9;&amp;#x5668;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&amp;#x9762;&amp;#x5411;&amp;#x63A5;&amp;#x53E3;&lt;ul&gt;
&lt;li&gt;&amp;#x7ED3;&amp;#x6784;&amp;#x4F53;&lt;/li&gt;
&lt;li&gt;duck typing &amp;#x7684;&amp;#x6982;&amp;#x5FF5;&lt;/li&gt;
&lt;li&gt;&amp;#x7EC4;&amp;#x5408;&amp;#x7684;&amp;#x601D;&amp;#x60F3;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&amp;#x51FD;&amp;#x6570;&amp;#x5F0F;&amp;#x7F16;&amp;#x7A0B;&lt;ul&gt;
&lt;li&gt;&amp;#x95ED;&amp;#x5305;&amp;#x7684;&amp;#x6982;&amp;#x5FF5;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&amp;#x5DE5;&amp;#x7A0B;&amp;#x5316;&lt;ul&gt;
&lt;li&gt;&amp;#x8D44;&amp;#x6E90;&amp;#x7BA1;&amp;#x7406;&amp;#xFF0C;&amp;#x9519;&amp;#x8BEF;&amp;#x5904;&amp;#x7406;&lt;/li&gt;
&lt;li&gt;&amp;#x6D4B;&amp;#x8BD5;&amp;#x548C;&amp;#x6587;&amp;#x6863;&lt;/li&gt;
&lt;li&gt;&amp;#x6027;&amp;#x80FD;&amp;#x8C03;&amp;#x4F18;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&amp;#x5E76;&amp;#x53D1;&amp;#x7F16;&amp;#x7A0B;&lt;ul&gt;
&lt;li&gt;goroutine &amp;#x548C; channel&lt;/li&gt;
&lt;li&gt;&amp;#x7406;&amp;#x89E3;&amp;#x8C03;&amp;#x5EA6;&amp;#x5668;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
    
    </summary>
    
      <category term="Go" scheme="http://blog.cuzz.site/categories/Go/"/>
    
    
      <category term="Go" scheme="http://blog.cuzz.site/tags/Go/"/>
    
  </entry>
  
  <entry>
    <title>Java8的深入与实战</title>
    <link href="http://blog.cuzz.site/2019/08/11/Java8%E7%9A%84%E6%B7%B1%E5%85%A5%E4%B8%8E%E5%AE%9E%E6%88%98/"/>
    <id>http://blog.cuzz.site/2019/08/11/Java8的深入与实战/</id>
    <published>2019-08-11T15:59:59.000Z</published>
    <updated>2019-10-15T05:24:29.866Z</updated>
    
    <content type="html"><![CDATA[<h2 id="Lambda-&#x8868;&#x8FBE;&#x5F0F;&#x548C;&#x51FD;&#x6570;&#x5F0F;&#x63A5;&#x53E3;"><a href="#Lambda-&#x8868;&#x8FBE;&#x5F0F;&#x548C;&#x51FD;&#x6570;&#x5F0F;&#x63A5;&#x53E3;" class="headerlink" title="Lambda &#x8868;&#x8FBE;&#x5F0F;&#x548C;&#x51FD;&#x6570;&#x5F0F;&#x63A5;&#x53E3;"></a>Lambda &#x8868;&#x8FBE;&#x5F0F;&#x548C;&#x51FD;&#x6570;&#x5F0F;&#x63A5;&#x53E3;</h2><p>Lambda &#x8868;&#x8FBE;&#x5F0F;&#x5B9A;&#x4E49;&#xFF1A;</p><blockquote><p>Lambda: In programming languages such as Lisp, Python and Ruby lambda is an operator used to denote <strong>anonymous functions</strong> or <strong>closures</strong>, following the usage of lambda calculus.</p></blockquote><p>&#x4E3A;&#x4F55;&#x9700;&#x8981;&#x4F7F;&#x7528; Lambda &#x8868;&#x8FBE;&#x5F0F;&#xFF1A;</p><ul><li>&#x5728; Java &#x4E2D;&#xFF0C;&#x6211;&#x4EEC;&#x65E0;&#x6CD5;&#x5C06;&#x51FD;&#x6570;&#x4F5C;&#x4E3A;&#x4E00;&#x4E2A;&#x53C2;&#x6570;&#x4F20;&#x9012;&#x7ED9;&#x4E00;&#x4E2A;&#x65B9;&#x6CD5;&#xFF0C;&#x4E5F;&#x65E0;&#x6CD5;&#x58F0;&#x660E;&#x4E00;&#x4E2A;&#x8FD4;&#x56DE;&#x4E00;&#x4E2A;&#x51FD;&#x6570;&#x7684;&#x65B9;&#x6CD5;&#x3002;</li><li>&#x5728; JavaScript &#x4E2D;&#xFF0C;&#x51FD;&#x6570;&#x7684;&#x53C2;&#x6570;&#x662F;&#x4E00;&#x4E2A;&#x51FD;&#x6570;&#xFF0C;&#x8FD4;&#x56DE;&#x503C;&#x662F;&#x53E6;&#x4E00;&#x4E2A;&#x51FD;&#x6570;&#x7684;&#x60C5;&#x51B5;&#x662F;&#x975E;&#x5E38;&#x5E38;&#x89C1;&#x7684;&#xFF0C;JavaScript &#x662F;&#x4E00;&#x95E8;&#x5178;&#x578B;&#x7684;&#x51FD;&#x6570;&#x5F0F;&#x8BED;&#x8A00;&#x3002;</li></ul><a id="more"></a><p>&#x6211;&#x4EEC;&#x901A;&#x8FC7;&#x4E00;&#x4E2A;&#x4F8B;&#x5B50;&#x6765;&#x5F15;&#x5165;&#xFF1A;</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Author</span>: cuzz</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Date</span>: 2019/8/11 14:55</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Description</span>:</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Test1</span> </span>{</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>{</span><br><span class="line">        List&lt;Integer&gt; list = Arrays.asList(<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>, <span class="number">6</span>);</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; list.size(); i++) {</span><br><span class="line">            System.out.println(list.get(i));</span><br><span class="line">        }</span><br><span class="line">        System.out.println(<span class="string">&quot;-----------------&quot;</span>);</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> val : list) {</span><br><span class="line">            System.out.println(val);</span><br><span class="line">        }</span><br><span class="line"></span><br><span class="line">        System.out.println(<span class="string">&quot;-----------------&quot;</span>);</span><br><span class="line">        list.forEach(<span class="keyword">new</span> Consumer&lt;Integer&gt;() {</span><br><span class="line">            <span class="meta">@Override</span></span><br><span class="line">            <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">accept</span><span class="params">(Integer integer)</span> </span>{</span><br><span class="line">                System.out.println(integer);</span><br><span class="line">            }</span><br><span class="line">        });</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></table></figure><p>&#x8FD9;&#x662F; 3 &#x79CD;&#x904D;&#x5386;&#x96C6;&#x5408;&#x7684;&#x65B9;&#x5F0F;&#xFF0C;&#x7B2C;&#x4E00;&#x5C31;&#x662F;&#x7B80;&#x5355;&#x7684;&#x904D;&#x5386;&#xFF0C;&#x7B2C;&#x4E8C;&#x79CD;&#x662F;&#x6211;&#x4EEC;&#x662F;&#x5E38;&#x8BF4;&#x7684;&#x589E;&#x5F3A; for &#x5FAA;&#x73AF;&#x904D;&#x5386;&#x3002;&#x7B2C;&#x4E09;&#x79CD;&#x5C31;&#x662F; Java 8 &#x65B0;&#x589E;&#x7684;&#x65B9;&#x6CD5;&#xFF0C;&#x5148;&#x770B;&#x770B; Consumer &#x8FD9;&#x4E2A;&#x63A5;&#x53E3;&#x3002;</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> java.util.function;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util.Objects;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="meta">@FunctionalInterface</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">Consumer</span>&lt;<span class="title">T</span>&gt; </span>{</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">accept</span><span class="params">(T t)</span></span>;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">default</span> Consumer&lt;T&gt; <span class="title">andThen</span><span class="params">(Consumer&lt;? <span class="keyword">super</span> T&gt; after)</span> </span>{</span><br><span class="line">        Objects.requireNonNull(after);</span><br><span class="line">        <span class="keyword">return</span> (T t) -&gt; { accept(t); after.accept(t); };</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></table></figure><p>&#x6CE8;&#x89E3;&#x4E0A;&#x662F;&#x4E00;&#x4E2A;&#x51FD;&#x6570;&#x5F0F;&#x63A5;&#x53E3;&#xFF0C;&#x6211;&#x4EEC;&#x770B;&#x770B;&#x8FD9;&#x4E2A;&#x63A5;&#x53E3;&#x7684;&#x4F5C;&#x7528;&#x3002;</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> java.lang;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.lang.annotation.*;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * An informative annotation type used to indicate that an interface</span></span><br><span class="line"><span class="comment"> * type declaration is intended to be a &lt;i&gt;functional interface&lt;/i&gt; as</span></span><br><span class="line"><span class="comment"> * defined by the Java Language Specification.</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * Conceptually, a functional interface has exactly one abstract</span></span><br><span class="line"><span class="comment"> * method.  Since {<span class="doctag">@linkplain</span> java.lang.reflect.Method#isDefault()</span></span><br><span class="line"><span class="comment"> * default methods} have an implementation, they are not abstract.  If</span></span><br><span class="line"><span class="comment"> * an interface declares an abstract method overriding one of the</span></span><br><span class="line"><span class="comment"> * public methods of {<span class="doctag">@code</span> java.lang.Object}, that also does</span></span><br><span class="line"><span class="comment"> * &lt;em&gt;not&lt;/em&gt; count toward the interface&apos;s abstract method count</span></span><br><span class="line"><span class="comment"> * since any implementation of the interface will have an</span></span><br><span class="line"><span class="comment"> * implementation from {<span class="doctag">@code</span> java.lang.Object} or elsewhere.</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * &#x6709;&#x4E14;&#x53EA;&#x6709;&#x4E00;&#x4E2A;&#x62BD;&#x8C61;&#x65B9;&#x6CD5;&#x7684;&#x63A5;&#x53E3;&#xFF0C;&#x5982;&#x679C;&#x6709;&#x91CD;&#x5199; Object &#x4E2D;&#x7684;&#x65B9;&#x6CD5;&#xFF0C;&#x90A3;&#x4E5F;&#x662F;&#x53EF;&#x4EE5;&#x7684;&#x3002;</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * &lt;p&gt;Note that instances of functional interfaces can be created with</span></span><br><span class="line"><span class="comment"> * lambda expressions, method references, or constructor references.</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * &#x51FD;&#x6570;&#x5F0F;&#x63A5;&#x53E3;&#x53EF;&#x4EE5;&#x901A;&#x8FC7; lambda &#x8868;&#x8FBE;&#x5F0F;&#x3001;&#x65B9;&#x6CD5;&#x5F15;&#x7528;&#x548C;&#x6784;&#x9020;&#x65B9;&#x6CD5;&#x5F15;&#x7528;&#x6765;&#x521B;&#x5EFA;&#x3002;</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * &lt;p&gt;If a type is annotated with this annotation type, compilers are</span></span><br><span class="line"><span class="comment"> * required to generate an error message unless:</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * &lt;ul&gt;</span></span><br><span class="line"><span class="comment"> * &lt;li&gt; The type is an interface type and not an annotation type, enum, or class.</span></span><br><span class="line"><span class="comment"> * &lt;li&gt; The annotated type satisfies the requirements of a functional interface.</span></span><br><span class="line"><span class="comment"> * &lt;/ul&gt;</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * &lt;p&gt;However, the compiler will treat any interface meeting the</span></span><br><span class="line"><span class="comment"> * definition of a functional interface as a functional interface</span></span><br><span class="line"><span class="comment"> * regardless of whether or not a {<span class="doctag">@code</span> FunctionalInterface}</span></span><br><span class="line"><span class="comment"> * annotation is present on the interface declaration.</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * &#x7F16;&#x8BD1;&#x5668;&#x4F1A;&#x5BF9;&#x6EE1;&#x8DB3;&#x5B9A;&#x4E49;&#x51FD;&#x6570;&#x5F0F;&#x63A5;&#x53E3;&#x7684;&#x63A5;&#x53E3;&#x5F53;&#x505A;&#x51FD;&#x6570;&#x5F0F;&#x63A5;&#x53E3;&#xFF0C;&#x4E0D;&#x7BA1;&#x5B83;&#x6709;&#x6CA1;&#x6709; <span class="doctag">@FunctionalInterface</span> &#x6CE8;&#x89E3;&#x58F0;&#x660E;&#x3002;</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@jls</span> 4.3.2. The Class Object</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@jls</span> 9.8 Functional Interfaces</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@jls</span> 9.4.3 Interface Method Body</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@since</span> 1.8</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@Documented</span></span><br><span class="line"><span class="meta">@Retention</span>(RetentionPolicy.RUNTIME)</span><br><span class="line"><span class="meta">@Target</span>(ElementType.TYPE)</span><br><span class="line"><span class="keyword">public</span> <span class="meta">@interface</span> FunctionalInterface {}</span><br></pre></td></tr></table></figure><p>&#x51FD;&#x6570;&#x5F0F;&#x63A5;&#x53E3;&#x53EF;&#x4EE5;&#x901A;&#x8FC7; lambda &#x8868;&#x8FBE;&#x5F0F;&#x3001;&#x65B9;&#x6CD5;&#x5F15;&#x7528;&#x548C;&#x6784;&#x9020;&#x65B9;&#x6CD5;&#x5F15;&#x7528;&#x6765;&#x521B;&#x5EFA;&#x3002;</p><ul><li>lambda &#x8868;&#x8FBE;&#x5F0F;&#xFF1A;() -&gt; System.out.println(i)</li><li>&#x65B9;&#x6CD5;&#x5F15;&#x7528;&#xFF1A;System.out::print</li><li>&#x6784;&#x9020;&#x65B9;&#x6CD5;&#x5F15;&#x7528;&#xFF1A;new::ArrayList</li></ul><p>&#x7528;&#x4E00;&#x4E2A;&#x4F8B;&#x5B50;&#x6765;&#x8BF4;&#x660E;&#x4EC0;&#x4E48;&#x662F;&#x51FD;&#x6570;&#x5F0F;&#x63A5;&#x53E3;&#x3002;</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@FunctionalInterface</span></span><br><span class="line"><span class="class"><span class="keyword">interface</span> <span class="title">Cons</span> </span>{</span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">print</span><span class="params">()</span></span>;</span><br><span class="line">    <span class="function">String <span class="title">toString</span><span class="params">()</span></span>;</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Author</span>: cuzz</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Date</span>: 2019/8/11 16:13</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Description</span>:</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Test2</span> </span>{</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">test</span><span class="params">(Cons func)</span> </span>{</span><br><span class="line">        func.print();</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>{</span><br><span class="line">        Test2 test2 = <span class="keyword">new</span> Test2();</span><br><span class="line">        test2.test(() -&gt; System.out.println(<span class="string">&quot;xxx&quot;</span>));</span><br><span class="line"></span><br><span class="line">        Cons func = () -&gt; System.out.println(<span class="string">&quot;yyy&quot;</span>);</span><br><span class="line">        test2.test(func);</span><br><span class="line">        System.out.println(func.getClass());                 <span class="comment">// &#x8F93;&#x51FA; class com.cuzz.Test2$$Lambda$2/2074407503</span></span><br><span class="line">        System.out.println(func.getClass().getSuperclass()); <span class="comment">// &#x8F93;&#x51FA; class java.lang.Object</span></span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></table></figure><p>&#x53EF;&#x4EE5;&#x8BF4;&#x660E;3&#x70B9;&#xFF1A;</p><ul><li>&#x51FD;&#x6570;&#x5F0F;&#x63A5;&#x53E3;&#x53EA;&#x6709;&#x4E00;&#x4E2A;&#x975E;&#x91CD;&#x5199; Object &#x7684;&#x62BD;&#x8C61;&#x65B9;&#x6CD5;</li><li>lambda &#x8868;&#x8FBE;&#x5F0F;&#x5C31;&#x662F;&#x4E00;&#x4E2A;&#x533F;&#x540D;&#x7C7B;</li><li>&#x5BF9;&#x4E8E;&#x4E00;&#x4E2A;&#x51FD;&#x6570;&#x5F0F;&#x63A5;&#x53E3;&#xFF0C;&#x6211;&#x4EEC;&#x5E76;&#x4E0D;&#x5173;&#x5FC3;&#x8FD9;&#x4E2A;&#x62BD;&#x8C61;&#x65B9;&#x6CD5;&#x7684;&#x540D;&#x79F0;&#x3002;</li></ul><h2 id="&#x4ECE;Consumer&#x6DF1;&#x5165;&#x7406;&#x89E3;&#x51FD;&#x6570;&#x5F0F;&#x63A5;&#x53E3;&#x548C;&#x65B9;&#x6CD5;&#x5F15;&#x7528;"><a href="#&#x4ECE;Consumer&#x6DF1;&#x5165;&#x7406;&#x89E3;&#x51FD;&#x6570;&#x5F0F;&#x63A5;&#x53E3;&#x548C;&#x65B9;&#x6CD5;&#x5F15;&#x7528;" class="headerlink" title="&#x4ECE;Consumer&#x6DF1;&#x5165;&#x7406;&#x89E3;&#x51FD;&#x6570;&#x5F0F;&#x63A5;&#x53E3;&#x548C;&#x65B9;&#x6CD5;&#x5F15;&#x7528;"></a>&#x4ECE;Consumer&#x6DF1;&#x5165;&#x7406;&#x89E3;&#x51FD;&#x6570;&#x5F0F;&#x63A5;&#x53E3;&#x548C;&#x65B9;&#x6CD5;&#x5F15;&#x7528;</h2><p>&#x6211;&#x4EEC;&#x56DE;&#x5230;&#x8FD9;&#x4E2A;&#x4F8B;&#x5B50;&#x5F53;&#x4E2D;</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Test1</span> </span>{</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>{</span><br><span class="line">        list.forEach(<span class="keyword">new</span> Consumer&lt;Integer&gt;() {</span><br><span class="line">            <span class="meta">@Override</span></span><br><span class="line">            <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">accept</span><span class="params">(Integer integer)</span> </span>{</span><br><span class="line">                System.out.println(integer);</span><br><span class="line">            }</span><br><span class="line">        });</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></table></figure><p>&#x5148;&#x770B;&#x770B; Iterable#forEach &#x8FD9;&#x4E2A;&#x65B9;&#x6CD5;&#xFF0C;&#x662F; Iterable &#x8FD9;&#x4E2A;&#x63A5;&#x53E3;&#x8FD9;&#x7684;&#x9ED8;&#x8BA4;&#x65B9;&#x6CD5;&#xFF0C;&#x5728; Java 8 &#x4E2D;&#x63A5;&#x53E3;&#x4E2D;&#x662F;&#x5141;&#x8BB8;&#x9ED8;&#x8BA4;&#x65B9;&#x6CD5;&#x3002;&#x5BF9;&#x4E8E; Iterable#forEach &#x662F;&#x5BF9;&#x6BCF;&#x4E2A;&#x5143;&#x7D20;&#x6267;&#x884C;&#x7ED9;&#x5B9A;&#x7684;&#x52A8;&#x4F5C;&#x3002;</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">Iterable</span>&lt;<span class="title">T</span>&gt; </span>{</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * Returns an iterator over elements of type {<span class="doctag">@code</span> T}.</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> an Iterator.</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function">Iterator&lt;T&gt; <span class="title">iterator</span><span class="params">()</span></span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * Performs the given action for each element of the {<span class="doctag">@code</span> Iterable}</span></span><br><span class="line"><span class="comment">     * until all elements have been processed or the action throws an</span></span><br><span class="line"><span class="comment">     * exception.  Unless otherwise specified by the implementing class,</span></span><br><span class="line"><span class="comment">     * actions are performed in the order of iteration (if an iteration order</span></span><br><span class="line"><span class="comment">     * is specified).  Exceptions thrown by the action are relayed to the</span></span><br><span class="line"><span class="comment">     * caller.</span></span><br><span class="line"><span class="comment">     * </span></span><br><span class="line"><span class="comment">     * &#x5BF9;&#x6BCF;&#x4E2A;&#x5143;&#x7D20;&#x6267;&#x884C;&#x7ED9;&#x5B9A;&#x7684;&#x52A8;&#x4F5C;&#x3002;</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@implSpec</span></span></span><br><span class="line"><span class="comment">     * &lt;p&gt;The default implementation behaves as if:</span></span><br><span class="line"><span class="comment">     * &lt;pre&gt;{<span class="doctag">@code</span></span></span><br><span class="line"><span class="comment">     *     for (T t : this)</span></span><br><span class="line"><span class="comment">     *         action.accept(t);</span></span><br><span class="line"><span class="comment">     * }&lt;/pre&gt;</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> action The action to be performed for each element</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@throws</span> NullPointerException if the specified action is null</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@since</span> 1.8</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">default</span> <span class="keyword">void</span> <span class="title">forEach</span><span class="params">(Consumer&lt;? <span class="keyword">super</span> T&gt; action)</span> </span>{</span><br><span class="line">        Objects.requireNonNull(action);</span><br><span class="line">        <span class="keyword">for</span> (T t : <span class="keyword">this</span>) {</span><br><span class="line">            action.accept(t);</span><br><span class="line">        }</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">default</span> Spliterator&lt;T&gt; <span class="title">spliterator</span><span class="params">()</span> </span>{</span><br><span class="line">        <span class="keyword">return</span> Spliterators.spliteratorUnknownSize(iterator(), <span class="number">0</span>);</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></table></figure><p>&#x770B;&#x770B; Consumer &#x662F;&#x4EC0;&#x4E48;</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> java.util.function;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util.Objects;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * Represents an operation that accepts a single input argument and returns no</span></span><br><span class="line"><span class="comment"> * result. Unlike most other functional interfaces, {<span class="doctag">@code</span> Consumer} is expected</span></span><br><span class="line"><span class="comment"> * to operate via side-effects.</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * &#x8868;&#x793A;&#x4E00;&#x4E2A;&#x64CD;&#x4F5C;&#x63A5;&#x53D7;&#x5355;&#x4E00;&#x8F93;&#x5165;&#x53C2;&#x6570;&#xFF0C;&#x65E0;&#x8FD4;&#x56DE;&#x7ED3;&#x679C;&#x3002;</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * &lt;p&gt;This is a &lt;a href=&quot;package-summary.html&quot;&gt;functional interface&lt;/a&gt;</span></span><br><span class="line"><span class="comment"> * whose functional method is {<span class="doctag">@link</span> #accept(Object)}.</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> &lt;T&gt; the type of the input to the operation</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@since</span> 1.8</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@FunctionalInterface</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">Consumer</span>&lt;<span class="title">T</span>&gt; </span>{</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * Performs this operation on the given argument.</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> t the input argument</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">accept</span><span class="params">(T t)</span></span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * Returns a composed {<span class="doctag">@code</span> Consumer} that performs, in sequence, this</span></span><br><span class="line"><span class="comment">     * operation followed by the {<span class="doctag">@code</span> after} operation. If performing either</span></span><br><span class="line"><span class="comment">     * operation throws an exception, it is relayed to the caller of the</span></span><br><span class="line"><span class="comment">     * composed operation.  If performing this operation throws an exception,</span></span><br><span class="line"><span class="comment">     * the {<span class="doctag">@code</span> after} operation will not be performed.</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> after the operation to perform after this operation</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> a composed {<span class="doctag">@code</span> Consumer} that performs in sequence this</span></span><br><span class="line"><span class="comment">     * operation followed by the {<span class="doctag">@code</span> after} operation</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@throws</span> NullPointerException if {<span class="doctag">@code</span> after} is null</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">default</span> Consumer&lt;T&gt; <span class="title">andThen</span><span class="params">(Consumer&lt;? <span class="keyword">super</span> T&gt; after)</span> </span>{</span><br><span class="line">        Objects.requireNonNull(after);</span><br><span class="line">        <span class="keyword">return</span> (T t) -&gt; { accept(t); after.accept(t); };</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></table></figure><p><strong>lambda &#x8868;&#x8FBE;&#x5F0F;&#x7684;&#x4F5C;&#x7528;&#xFF1A;</strong></p><ul><li>lambda &#x8868;&#x8FBE;&#x5F0F;&#x4E3A; Java &#x6DFB;&#x52A0;&#x4E86;&#x7F3A;&#x5931;&#x7684;&#x51FD;&#x6570;&#x5F0F;&#x7F16;&#x7A0B;&#x7279;&#x6027;&#xFF0C;&#x4F7F;&#x6211;&#x4EEC;&#x80FD;&#x5C06;&#x51FD;&#x6570;&#x5F53;&#x505A;&#x4E00;&#x7B49;&#x516C;&#x6C11;&#x770B;&#x5F85;&#x3002;</li><li>&#x5728;&#x5C06;&#x51FD;&#x6570;&#x4F5C;&#x4E3A;&#x4E00;&#x7B49;&#x516C;&#x6C11;&#x7684;&#x8BED;&#x8A00;&#x4E2D;&#xFF0C;lambda &#x8868;&#x8FBE;&#x5F0F;&#x7684;&#x7C7B;&#x578B;&#x662F;&#x51FD;&#x6570;&#x3002;&#x4F46;&#x5728; Java &#x4E2D;&#xFF0C;lambda &#x8868;&#x8FBE;&#x5F0F;&#x662F;&#x5BF9;&#x8C61;&#xFF0C;&#x5B83;&#x4EEC;&#x5FC5;&#x987B;&#x4F9D;&#x9644;&#x4E8E;&#x4E00;&#x7C7B;&#x7279;&#x522B;&#x7684;&#x5BF9;&#x8C61;&#xFF08;&#x51FD;&#x6570;&#x5F0F;&#x63A5;&#x53E3;&#xFF09;&#xFF1B;</li></ul><h2 id="Lambda-&#x8868;&#x8FBE;&#x5F0F;&#x7684;&#x6DF1;&#x5165;"><a href="#Lambda-&#x8868;&#x8FBE;&#x5F0F;&#x7684;&#x6DF1;&#x5165;" class="headerlink" title="Lambda &#x8868;&#x8FBE;&#x5F0F;&#x7684;&#x6DF1;&#x5165;"></a>Lambda &#x8868;&#x8FBE;&#x5F0F;&#x7684;&#x6DF1;&#x5165;</h2><p>&#x5BF9;&#x4E8E; lambda &#x8868;&#x8FBE;&#x5F0F;&#x9700;&#x8981;&#x6839;&#x636E;&#x4E0A;&#x4E0B;&#x6587;&#x6765;&#x63A8;&#x65AD;&#xFF0C;&#x6211;&#x4EEC;&#x5E76;&#x4E0D;&#x77E5;&#x9053;<code>() -&gt; {}</code> &#x662F;&#x4EC0;&#x4E48;&#xFF0C;&#x4E0D;&#x77E5;&#x9053;&#x5BF9;&#x5E94;&#x7684;&#x53C2;&#x6570;&#xFF0C;&#x65B9;&#x6CD5;&#x662F;&#x4EC0;&#x4E48;&#xFF0C;&#x53EA;&#x7528;&#x901A;&#x8FC7;&#x524D;&#x9762;&#x7684; Cons &#x5B9A;&#x4E49;&#x624D;&#x77E5;&#x9053;&#x3002;</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@FunctionalInterface</span></span><br><span class="line"><span class="class"><span class="keyword">interface</span> <span class="title">Cons1</span> </span>{</span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">print1</span><span class="params">()</span></span>;</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="meta">@FunctionalInterface</span></span><br><span class="line"><span class="class"><span class="keyword">interface</span> <span class="title">Cons2</span> </span>{</span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">print2</span><span class="params">()</span></span>;</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Author</span>: cuzz</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Date</span>: 2019/8/11 16:13</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Description</span>:</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Test2</span> </span>{</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>{</span><br><span class="line">        Cons1 cons1 = () -&gt; {};</span><br><span class="line">        Cons2 cons2 = () -&gt; {};</span><br><span class="line">        System.out.println(cons1.getClass().getInterfaces()[<span class="number">0</span>]);  <span class="comment">// interface com.cuzz.Cons1</span></span><br><span class="line">        System.out.println(cons2.getClass().getInterfaces()[<span class="number">0</span>]);  <span class="comment">// interface com.cuzz.Cons2</span></span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></table></figure><p>&#x6211;&#x4EEC;&#x5148;&#x770B;&#x4E00;&#x4E2A;&#x6392;&#x5E8F;&#x7684;&#x4F8B;&#x5B50;&#xFF1A;</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Author</span>: cuzz</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Date</span>: 2019/8/12 23:09</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Description</span>: &#x6392;&#x5E8F;</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Test4</span> </span>{</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>{</span><br><span class="line">        List&lt;String&gt; list = Arrays.asList(<span class="string">&quot;cuzz&quot;</span>, <span class="string">&quot;faker&quot;</span>, <span class="string">&quot;mlxg&quot;</span>);</span><br><span class="line">        </span><br><span class="line">        Collections.sort(list, (String s1, String s2) -&gt; {</span><br><span class="line">            <span class="keyword">return</span> s2.compareTo(s1);</span><br><span class="line">        });  <span class="comment">// 1</span></span><br><span class="line">        </span><br><span class="line">        Collections.sort(list, (s1, s2) -&gt; s2.compareTo(s1)); <span class="comment">// 2</span></span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></table></figure><p>&#x4ECE; 1 &#x5230; 2 &#x7B80;&#x5316;&#x4E86;&#x5F88;&#x591A;&#xFF0C;&#x4FEE;&#x9970;&#x7B26; String &#x548C; return &#x90FD;&#x53EF;&#x4EE5;&#x7701;&#x7565;&#x3002;<strong>Java Lambda &#x8868;&#x8FBE;&#x5F0F;&#x662F;&#x4E00;&#x79CD;&#x533F;&#x540D;&#x51FD;&#x6570;&#xFF0C;&#x5B83;&#x6CA1;&#x6709;&#x58F0;&#x660E;&#x65B9;&#x6CD5;&#xFF0C;&#x4E5F;&#x6CA1;&#x6709;&#x8BBF;&#x95EE;&#x4FEE;&#x9970;&#x7B26;&#x3001;&#x8FD4;&#x56DE;&#x503C;&#x548C;&#x540D;&#x5B57;&#x3002;</strong></p><p><strong>Lambda &#x8868;&#x8FBE;&#x5F0F;&#x4F5C;&#x7528;&#xFF1A;</strong></p><ul><li>&#x4F20;&#x9012;&#x884C;&#x4E3A;&#xFF0C;&#x800C;&#x4E0D;&#x4EC5;&#x4EC5;&#x662F;&#x503C;</li><li>&#x63D0;&#x5347;&#x62BD;&#x8C61;&#x5C42;&#x6B21;</li><li>API &#x91CD;&#x7528;&#x6027;&#x597D;</li><li>&#x66F4;&#x52A0;&#x7075;&#x6D3B;</li></ul><p><strong>Lambda &#x57FA;&#x672C;&#x8BED;&#x6CD5;&#xFF1A;</strong></p><ul><li>Java &#x4E2D;&#x7684; Lambda &#x8868;&#x8FBE;&#x5F0F;&#x57FA;&#x672C;&#x8BED;&#x6CD5;<ul><li>&#x5982;&#xFF1A;<code>(argument) -&gt; {body}</code></li><li>&#x7701;&#x7565;&#x7C7B;&#x578B;&#xFF1A;<code>(arg1, arg2, ...) -&gt; {body}</code></li><li>&#x6709;&#x7C7B;&#x578B;&#xFF1A;<code>(type1 arg1, type2 arg2, ...) -&gt; {body}</code></li></ul></li><li>Lambda &#x793A;&#x4F8B;&#x8BF4;&#x660E;<ul><li><code>(int a, int b) -&gt; {return a + b;}</code></li><li><code>() -&gt; System.out.println(&quot;hello world&quot;)</code></li><li><code>(String s) -&gt; {System.out.println(s);}</code></li><li><code>() -&gt; 42</code></li><li><code>() -&gt; {return &quot;cuzz&quot;};</code></li></ul></li><li>Lambda&#x7ED3;&#x6784;<ul><li>&#x4E00;&#x4E2A; Lambda &#x8868;&#x8FBE;&#x5F0F;&#x53EF;&#x4EE5;&#x6709;&#x96F6;&#x4E2A;&#x6216;&#x591A;&#x4E2A;&#x53C2;&#x6570;</li><li>&#x53C2;&#x6570;&#x7684;&#x7C7B;&#x578B;&#x65E2;&#x53EF;&#x4EE5;&#x660E;&#x786E;&#x58F0;&#x660E;&#xFF0C;&#x4E5F;&#x53EF;&#x4EE5;&#x6839;&#x636E;&#x4E0A;&#x4E0B;&#x6587;&#x6765;&#x63A8;&#x65AD;&#xFF0C;&#x5982;&#xFF1A;<code>(int a)</code> &#x4E0E; <code>(a)</code> &#x6548;&#x679C;&#x76F8;&#x540C;</li><li>&#x6240;&#x6709;&#x7684;&#x53C2;&#x6570;&#x9700;&#x5305;&#x542B;&#x5728;&#x5706;&#x62EC;&#x53F7;&#x5185;&#xFF0C;&#x53C2;&#x6570;&#x4E4B;&#x95F4;&#x7528;&#x9017;&#x53F7;&#x76F8;&#x9694;&#x3002;&#x5982;&#xFF1A;<code>(a, b)</code> &#x6216; <code>(String a, int b float c)</code></li><li>&#x7A7A;&#x5706;&#x62EC;&#x53F7;&#x8868;&#x793A;&#x53C2;&#x6570;&#x96C6;&#x4E3A;&#x7A7A;&#xFF0C;&#x5982;&#xFF1A;<code>() -&gt; 42</code></li><li>&#x5F53;&#x53EA;&#x6709;&#x4E00;&#x4E2A;&#x53C2;&#x6570;&#xFF0C;&#x4E14;&#x5176;&#x7C7B;&#x578B;&#x53EF;&#x63A8;&#x5BFC;&#x65F6;&#xFF0C;&#x5706;&#x62EC;&#x53F7;&#x53EF;&#x4EE5;&#x7701;&#x7565;&#xFF0C;&#x5982;&#xFF1A;<code>a -&gt; return a * a</code></li><li>Lambda &#x8868;&#x8FBE;&#x5F0F;&#x7684;&#x4E3B;&#x9898;&#x53EF;&#x4EE5;&#x5305;&#x542B;&#x96F6;&#x6761;&#x6216;&#x591A;&#x6761;&#x8BED;&#x53E5;</li><li>&#x5982;&#x679C; Lambda &#x8868;&#x8FBE;&#x5F0F;&#x7684;&#x4E3B;&#x4F53;&#x53EA;&#x6709;&#x4E00;&#x6761;&#x8BED;&#x53E5;&#xFF0C;&#x82B1;&#x62EC;&#x53F7;&#x53EF;&#x4EE5;&#x7701;&#x7565;&#xFF0C;&#x533F;&#x540D;&#x51FD;&#x6570;&#x7684;&#x8FD4;&#x56DE;&#x7C7B;&#x578B;&#x4E0E;&#x8BE5;&#x4E3B;&#x4F53;&#x8868;&#x8FBE;&#x5F0F;&#x4E00;&#x81F4;</li><li>&#x5982;&#x679C; Lambda &#x8868;&#x8FBE;&#x5F0F;&#x7684;&#x4E3B;&#x4F53;&#x5305;&#x542B;&#x4E00;&#x6761;&#x4EE5;&#x4E0A;&#x8BED;&#x53E5;&#xFF0C;&#x8868;&#x8FBE;&#x5F0F;&#x5FC5;&#x987B;&#x4F7F;&#x7528;&#x82B1;&#x62EC;&#x53F7;</li></ul></li></ul><h2 id="Function"><a href="#Function" class="headerlink" title="Function"></a>Function</h2><p>&#x76F4;&#x63A5;&#x5148;&#x770B;&#x6E90;&#x7801;</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * Represents a function that accepts one argument and produces a result.</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * &lt;p&gt;This is a &lt;a href=&quot;package-summary.html&quot;&gt;functional interface&lt;/a&gt;</span></span><br><span class="line"><span class="comment"> * whose functional method is {<span class="doctag">@link</span> #apply(Object)}.</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> &lt;T&gt; the type of the input to the function</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> &lt;R&gt; the type of the result of the function</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@since</span> 1.8</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@FunctionalInterface</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">Function</span>&lt;<span class="title">T</span>, <span class="title">R</span>&gt; </span>{</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * Applies this function to the given argument.</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> t the function argument</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> the function result</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function">R <span class="title">apply</span><span class="params">(T t)</span></span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">default</span> &lt;V&gt; <span class="function">Function&lt;V, R&gt; <span class="title">compose</span><span class="params">(Function&lt;? <span class="keyword">super</span> V, ? extends T&gt; before)</span> </span>{</span><br><span class="line">        Objects.requireNonNull(before);</span><br><span class="line">        <span class="keyword">return</span> (V v) -&gt; apply(before.apply(v));</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="keyword">default</span> &lt;V&gt; <span class="function">Function&lt;T, V&gt; <span class="title">andThen</span><span class="params">(Function&lt;? <span class="keyword">super</span> R, ? extends V&gt; after)</span> </span>{</span><br><span class="line">        Objects.requireNonNull(after);</span><br><span class="line">        <span class="keyword">return</span> (T t) -&gt; after.apply(apply(t));</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * Returns a function that always returns its input argument.</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> &lt;T&gt; the type of the input and output objects to the function</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> a function that always returns its input argument</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">static</span> &lt;T&gt; <span class="function">Function&lt;T, T&gt; <span class="title">identity</span><span class="params">()</span> </span>{</span><br><span class="line">        <span class="keyword">return</span> t -&gt; t;</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></table></figure><p>&#x53EF;&#x4EE5;&#x770B;&#x51FA; Function &#x6709;&#x4E00;&#x4E2A;&#x62BD;&#x8C61;&#x65B9;&#x6CD5;&#x548C;&#x4E24;&#x4E2A;&#x9ED8;&#x8BA4;&#x65B9;&#x6CD5;&#x4EE5;&#x53CA;&#x4E00;&#x4E2A;&#x9759;&#x6001;&#x65B9;&#x6CD5;&#x3002;</p><p><strong>&#xFF08;1&#xFF09; Function#apply</strong></p><p>Stream#map &#x91CC;&#x5C31;&#x662F;&#x63A5;&#x53D7;&#x4E00;&#x4E2A; Function&#xFF0C;&#x5BF9;&#x4E8E; Function &#x610F;&#x601D;&#x5C31;&#x662F;&#x4ECE;&#x4E00;&#x4E2A;&#x6620;&#x5C04;&#x5230;&#x53E6;&#x4E00;&#x4E2A;&#x3002;&#x4E0B;&#x9762;&#x4F8B;&#x5B50;&#x5C31;&#x662F;&#x628A;&#x5B57;&#x7B26;&#x4E32;&#x6620;&#x5C04;&#x5230;&#x5927;&#x5199;&#x3002;&#x5BF9;&#x4E8E; String::toUpperCase &#x4F7F;&#x7528;&#x7684;&#x662F;&#x65B9;&#x6CD5;&#x5F15;&#x7528;&#x3002;</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Author</span>: cuzz</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Date</span>: 2019/8/11 23:13</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Description</span>:</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Test3</span> </span>{</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>{</span><br><span class="line">        List&lt;String&gt; list = Arrays.asList(<span class="string">&quot;cuzz&quot;</span>, <span class="string">&quot;faker&quot;</span>, <span class="string">&quot;mlxg&quot;</span>);</span><br><span class="line"></span><br><span class="line">        list.stream().map(item -&gt; item.toUpperCase()).forEach(item -&gt; System.out.println(item));</span><br><span class="line">        list.stream().map(String::toUpperCase).forEach(System.out::println);</span><br><span class="line">        Function&lt;String, String&gt; function = String::toUpperCase;</span><br><span class="line">        System.out.println(function.getClass());</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></table></figure><p>&#x6211;&#x4EEC;&#x770B;&#x4E00;&#x4E2A;&#x4F8B;&#x5B50;&#xFF1A;</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Author</span>: cuzz</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Date</span>: 2019/8/13 0:08</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Description</span>:</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">FunctionTest</span> </span>{</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>{</span><br><span class="line">        FunctionTest function= <span class="keyword">new</span> FunctionTest();</span><br><span class="line">        <span class="keyword">int</span> res1 = function.compute(<span class="number">100</span>, target -&gt; target * target);</span><br><span class="line">        <span class="keyword">int</span> res2 = function.compute(<span class="number">100</span>, target -&gt; target + <span class="number">1</span>);</span><br><span class="line">        System.out.println(res1); <span class="comment">// 10000</span></span><br><span class="line">        System.out.println(res2); <span class="comment">// 101</span></span><br><span class="line"></span><br><span class="line">        <span class="keyword">int</span> res3 = function.pow(<span class="number">100</span>);</span><br><span class="line">        <span class="keyword">int</span> res4 = function.addOne(<span class="number">100</span>);</span><br><span class="line">        System.out.println(res3); <span class="comment">// 10000</span></span><br><span class="line">        System.out.println(res4); <span class="comment">// 101</span></span><br><span class="line"></span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">compute</span><span class="params">(<span class="keyword">int</span> a, Function&lt;Integer, Integer&gt; function)</span> </span>{</span><br><span class="line">        <span class="keyword">return</span> function.apply(a);</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">pow</span><span class="params">(<span class="keyword">int</span> a)</span> </span>{</span><br><span class="line">        <span class="keyword">return</span> a * a;</span><br><span class="line">    }</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">addOne</span><span class="params">(<span class="keyword">int</span> a)</span> </span>{</span><br><span class="line">        <span class="keyword">return</span> a + <span class="number">1</span>;</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></table></figure><p><strong>&#x770B;&#x770B; #compute &#x8FD9;&#x4E2A;&#x65B9;&#x6CD5;&#xFF0C;&#x7B2C;&#x4E8C;&#x4E2A;&#x53C2;&#x6570;&#x4F20;&#x9012;&#x7684;&#x662F;&#x884C;&#x4E3A;&#xFF0C;&#x800C;&#x4E0D;&#x662F;&#x5177;&#x4F53;&#x7684;&#x503C;&#x3002;</strong> &#x6211;&#x4EEC;&#x672C;&#x6765;&#x8981;&#x5B9A;&#x4E49;&#x4E24;&#x4E2A;&#x65B9;&#x6CD5;&#xFF0C;pow &#x548C; addOne &#x73B0;&#x5728;&#x628A;&#x8FD9;&#x79CD;&#x884C;&#x4E3A;&#x4F20;&#x9012;&#x8FDB;&#x6765;&#x3002;</p><p><strong>&#xFF08;2&#xFF09;Function#compose &#x548C; Function#andThen</strong> </p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * Returns a composed function that first applies the {<span class="doctag">@code</span> before}</span></span><br><span class="line"><span class="comment"> * function to its input, and then applies this function to the result.</span></span><br><span class="line"><span class="comment"> * If evaluation of either function throws an exception, it is relayed to</span></span><br><span class="line"><span class="comment"> * the caller of the composed function.</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> &lt;V&gt; the type of input to the {<span class="doctag">@code</span> before} function, and to the</span></span><br><span class="line"><span class="comment"> *           composed function</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> before the function to apply before this function is applied</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@return</span> a composed function that first applies the {<span class="doctag">@code</span> before}</span></span><br><span class="line"><span class="comment"> * function and then applies this function</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@throws</span> NullPointerException if before is null</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@see</span> #andThen(Function)</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">default</span> &lt;V&gt; <span class="function">Function&lt;V, R&gt; <span class="title">compose</span><span class="params">(Function&lt;? <span class="keyword">super</span> V, ? extends T&gt; before)</span> </span>{</span><br><span class="line">    Objects.requireNonNull(before);</span><br><span class="line">    <span class="keyword">return</span> (V v) -&gt; apply(before.apply(v));</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * Returns a composed function that first applies this function to</span></span><br><span class="line"><span class="comment"> * its input, and then applies the {<span class="doctag">@code</span> after} function to the result.</span></span><br><span class="line"><span class="comment"> * If evaluation of either function throws an exception, it is relayed to</span></span><br><span class="line"><span class="comment"> * the caller of the composed function.</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> &lt;V&gt; the type of output of the {<span class="doctag">@code</span> after} function, and of the</span></span><br><span class="line"><span class="comment"> *           composed function</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> after the function to apply after this function is applied</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@return</span> a composed function that first applies this function and then</span></span><br><span class="line"><span class="comment"> * applies the {<span class="doctag">@code</span> after} function</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@throws</span> NullPointerException if after is null</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@see</span> #compose(Function)</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">default</span> &lt;V&gt; <span class="function">Function&lt;T, V&gt; <span class="title">andThen</span><span class="params">(Function&lt;? <span class="keyword">super</span> R, ? extends V&gt; after)</span> </span>{</span><br><span class="line">    Objects.requireNonNull(after);</span><br><span class="line">    <span class="keyword">return</span> (T t) -&gt; after.apply(apply(t));</span><br><span class="line">}</span><br></pre></td></tr></table></figure><ul><li>compose&#x65B9;&#x6CD5;&#x662F;&#x4E00;&#x4E2A;&#x9ED8;&#x8BA4;&#x65B9;&#x6CD5;&#xFF0C;&#x8FD9;&#x4E2A;&#x65B9;&#x6CD5;&#x63A5;&#x6536;&#x4E00;&#x4E2A; function &#x4F5C;&#x4E3A;&#x53C2;&#x6570;&#xFF0C;&#x5C06;&#x53C2;&#x6570; function &#x6267;&#x884C;&#x7684;&#x7ED3;&#x679C;&#x4F5C;&#x4E3A;&#x53C2;&#x6570;&#x7ED9;&#x8C03;&#x7528;&#x7684; function&#xFF0C;&#x4EE5;&#x6B64;&#x6765;&#x5B9E;&#x73B0;&#x4E24;&#x4E2A;function&#x7EC4;&#x5408;&#x7684;&#x529F;&#x80FD;&#x3002; </li><li>andThen &#x65B9;&#x6CD5;&#x4E5F;&#x662F;&#x63A5;&#x6536;&#x4E00;&#x4E2A; function &#x4F5C;&#x4E3A;&#x53C2;&#x6570;&#xFF0C;&#x4E0E; compse  &#x4E0D;&#x540C;&#x7684;&#x662F;&#xFF0C;&#x5148;&#x6267;&#x884C;&#x672C;&#x8EAB;&#x7684; apply &#x65B9;&#x6CD5;&#xFF0C;&#x5C06;&#x6267;&#x884C;&#x7684;&#x7ED3;&#x679C;&#x4F5C;&#x4E3A;&#x53C2;&#x6570;&#x7ED9;&#x53C2;&#x6570;&#x4E2D;&#x7684; function&#x3002; </li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Author</span>: cuzz</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Date</span>: 2019/8/20 23:59</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Description</span>: #compose and #andThen test</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">FunctionTest2</span> </span>{</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>{</span><br><span class="line">        FunctionTest2 test = <span class="keyword">new</span> FunctionTest2();</span><br><span class="line">        System.out.println(test.compute1(<span class="number">2</span>, value -&gt; value * <span class="number">2</span>, value -&gt; value * value)); <span class="comment">// 8</span></span><br><span class="line">        System.out.println(test.compute2(<span class="number">2</span>, value -&gt; value * <span class="number">2</span>, value -&gt; value * value)); <span class="comment">// 16</span></span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">compute1</span><span class="params">(<span class="keyword">int</span> a, Function&lt;Integer, Integer&gt; function1, Function&lt;Integer, Integer&gt; function2)</span> </span>{</span><br><span class="line">        <span class="keyword">return</span> function1.compose(function2).apply(a);</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">compute2</span><span class="params">(<span class="keyword">int</span> a, Function&lt;Integer, Integer&gt; function1, Function&lt;Integer, Integer&gt; function2)</span> </span>{</span><br><span class="line">        <span class="keyword">return</span> function1.andThen(function2).apply(a);</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></table></figure><p>&#x53D1;&#x73B0; compute1 &#x662F;&#x5148;&#x6267;&#x884C;&#x7B2C;&#x4E8C;&#x4E2A; Function &#x518D;&#x6267;&#x884C;&#x7B2C;&#x4E00;&#xFF0C;compute2 &#x76F8;&#x53CD;&#x3002;</p><h2 id="BiFunction"><a href="#BiFunction" class="headerlink" title="BiFunction"></a>BiFunction</h2><p>&#x5148;&#x770B;&#x6E90;&#x7801;</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * Represents a function that accepts two arguments and produces a result.</span></span><br><span class="line"><span class="comment"> * This is the two-arity specialization of {<span class="doctag">@link</span> Function}.</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * &lt;p&gt;This is a &lt;a href=&quot;package-summary.html&quot;&gt;functional interface&lt;/a&gt;</span></span><br><span class="line"><span class="comment"> * whose functional method is {<span class="doctag">@link</span> #apply(Object, Object)}.</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> &lt;T&gt; the type of the first argument to the function</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> &lt;U&gt; the type of the second argument to the function</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> &lt;R&gt; the type of the result of the function</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@see</span> Function</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@since</span> 1.8</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@FunctionalInterface</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">BiFunction</span>&lt;<span class="title">T</span>, <span class="title">U</span>, <span class="title">R</span>&gt; </span>{</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * Applies this function to the given arguments.</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> t the first function argument</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> u the second function argument</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> the function result</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function">R <span class="title">apply</span><span class="params">(T t, U u)</span></span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * Returns a composed function that first applies this function to</span></span><br><span class="line"><span class="comment">     * its input, and then applies the {<span class="doctag">@code</span> after} function to the result.</span></span><br><span class="line"><span class="comment">     * If evaluation of either function throws an exception, it is relayed to</span></span><br><span class="line"><span class="comment">     * the caller of the composed function.</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> &lt;V&gt; the type of output of the {<span class="doctag">@code</span> after} function, and of the</span></span><br><span class="line"><span class="comment">     *           composed function</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> after the function to apply after this function is applied</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> a composed function that first applies this function and then</span></span><br><span class="line"><span class="comment">     * applies the {<span class="doctag">@code</span> after} function</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@throws</span> NullPointerException if after is null</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">default</span> &lt;V&gt; <span class="function">BiFunction&lt;T, U, V&gt; <span class="title">andThen</span><span class="params">(Function&lt;? <span class="keyword">super</span> R, ? extends V&gt; after)</span> </span>{</span><br><span class="line">        Objects.requireNonNull(after);</span><br><span class="line">        <span class="keyword">return</span> (T t, U u) -&gt; after.apply(apply(t, u));</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></table></figure><p>&#x6211;&#x770B;&#x4E00;&#x4E2A;&#x4F8B;&#x5B50;</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Author</span>: cuzz</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Date</span>: 2019/8/21 7:36</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Description</span>:</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">BiFunctionTest</span> </span>{</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>{</span><br><span class="line">        BiFunctionTest test = <span class="keyword">new</span> BiFunctionTest();</span><br><span class="line">        <span class="comment">// &#x52A0;&#x6CD5;</span></span><br><span class="line">        System.out.println(test.add(<span class="number">1</span>, <span class="number">2</span>));</span><br><span class="line">        System.out.println(test.compute(<span class="number">1</span>, <span class="number">2</span>, (a, b) -&gt; a + b));</span><br><span class="line">        </span><br><span class="line">        <span class="comment">// &#x51CF;&#x6CD5;</span></span><br><span class="line">        System.out.println(test.subtract(<span class="number">1</span>, <span class="number">2</span>));</span><br><span class="line">        System.out.println(test.compute(<span class="number">1</span>, <span class="number">2</span>, (a, b) -&gt; a - b));</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">compute</span><span class="params">(<span class="keyword">int</span> a, <span class="keyword">int</span> b, BiFunction&lt;Integer, Integer, Integer&gt; biFunction)</span> </span>{</span><br><span class="line">        <span class="keyword">return</span> biFunction.apply(a, b);</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">add</span><span class="params">(<span class="keyword">int</span> a, <span class="keyword">int</span> b)</span> </span>{</span><br><span class="line">        <span class="keyword">return</span> a + b;</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">subtract</span><span class="params">(<span class="keyword">int</span> a, <span class="keyword">int</span> b)</span> </span>{</span><br><span class="line">        <span class="keyword">return</span> a - b;</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></table></figure><p>&#x4EE5;&#x524D;&#x6211;&#x4EEC;&#x5B9A;&#x4E49;&#x4E00;&#x4E2A;&#x56DB;&#x5219;&#x8FD0;&#x7B97;&#x9700;&#x8981;&#x9700;&#x8981;&#x5148;&#x5B9A;&#x4E49;&#x65B9;&#x6CD5;&#xFF0C;&#x73B0;&#x5728;&#x901A;&#x8FC7; BiFunction &#x53EF;&#x4EE5;&#x628A;&#x8FD9;&#x79CD;&#x884C;&#x4E3A;&#x4F20;&#x9012;&#x8FDB;&#x6765;&#x3002;</p><h2 id="Predicate"><a href="#Predicate" class="headerlink" title="Predicate"></a>Predicate</h2><p><strong>&#xFF08;1&#xFF09;&#x6E90;&#x7801;</strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * Represents a predicate (boolean-valued function) of one argument.</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * &lt;p&gt;This is a &lt;a href=&quot;package-summary.html&quot;&gt;functional interface&lt;/a&gt;</span></span><br><span class="line"><span class="comment"> * whose functional method is {<span class="doctag">@link</span> #test(Object)}.</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> &lt;T&gt; the type of the input to the predicate</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@since</span> 1.8</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@FunctionalInterface</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">Predicate</span>&lt;<span class="title">T</span>&gt; </span>{</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * Evaluates this predicate on the given argument.</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> t the input argument</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> {<span class="doctag">@code</span> true} if the input argument matches the predicate,</span></span><br><span class="line"><span class="comment">     * otherwise {<span class="doctag">@code</span> false}</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">boolean</span> <span class="title">test</span><span class="params">(T t)</span></span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * Returns a composed predicate that represents a short-circuiting logical</span></span><br><span class="line"><span class="comment">     * AND of this predicate and another.  When evaluating the composed</span></span><br><span class="line"><span class="comment">     * predicate, if this predicate is {<span class="doctag">@code</span> false}, then the {<span class="doctag">@code</span> other}</span></span><br><span class="line"><span class="comment">     * predicate is not evaluated.</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * &lt;p&gt;Any exceptions thrown during evaluation of either predicate are relayed</span></span><br><span class="line"><span class="comment">     * to the caller; if evaluation of this predicate throws an exception, the</span></span><br><span class="line"><span class="comment">     * {<span class="doctag">@code</span> other} predicate will not be evaluated.</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> other a predicate that will be logically-ANDed with this</span></span><br><span class="line"><span class="comment">     *              predicate</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> a composed predicate that represents the short-circuiting logical</span></span><br><span class="line"><span class="comment">     * AND of this predicate and the {<span class="doctag">@code</span> other} predicate</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@throws</span> NullPointerException if other is null</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">default</span> Predicate&lt;T&gt; <span class="title">and</span><span class="params">(Predicate&lt;? <span class="keyword">super</span> T&gt; other)</span> </span>{</span><br><span class="line">        Objects.requireNonNull(other);</span><br><span class="line">        <span class="keyword">return</span> (t) -&gt; test(t) &amp;&amp; other.test(t);</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * Returns a predicate that represents the logical negation of this</span></span><br><span class="line"><span class="comment">     * predicate.</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> a predicate that represents the logical negation of this</span></span><br><span class="line"><span class="comment">     * predicate</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">default</span> Predicate&lt;T&gt; <span class="title">negate</span><span class="params">()</span> </span>{</span><br><span class="line">        <span class="keyword">return</span> (t) -&gt; !test(t);</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * Returns a composed predicate that represents a short-circuiting logical</span></span><br><span class="line"><span class="comment">     * OR of this predicate and another.  When evaluating the composed</span></span><br><span class="line"><span class="comment">     * predicate, if this predicate is {<span class="doctag">@code</span> true}, then the {<span class="doctag">@code</span> other}</span></span><br><span class="line"><span class="comment">     * predicate is not evaluated.</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * &lt;p&gt;Any exceptions thrown during evaluation of either predicate are relayed</span></span><br><span class="line"><span class="comment">     * to the caller; if evaluation of this predicate throws an exception, the</span></span><br><span class="line"><span class="comment">     * {<span class="doctag">@code</span> other} predicate will not be evaluated.</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> other a predicate that will be logically-ORed with this</span></span><br><span class="line"><span class="comment">     *              predicate</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> a composed predicate that represents the short-circuiting logical</span></span><br><span class="line"><span class="comment">     * OR of this predicate and the {<span class="doctag">@code</span> other} predicate</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@throws</span> NullPointerException if other is null</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">default</span> Predicate&lt;T&gt; <span class="title">or</span><span class="params">(Predicate&lt;? <span class="keyword">super</span> T&gt; other)</span> </span>{</span><br><span class="line">        Objects.requireNonNull(other);</span><br><span class="line">        <span class="keyword">return</span> (t) -&gt; test(t) || other.test(t);</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * Returns a predicate that tests if two arguments are equal according</span></span><br><span class="line"><span class="comment">     * to {<span class="doctag">@link</span> Objects#equals(Object, Object)}.</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> &lt;T&gt; the type of arguments to the predicate</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> targetRef the object reference with which to compare for equality,</span></span><br><span class="line"><span class="comment">     *               which may be {<span class="doctag">@code</span> null}</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> a predicate that tests if two arguments are equal according</span></span><br><span class="line"><span class="comment">     * to {<span class="doctag">@link</span> Objects#equals(Object, Object)}</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">static</span> &lt;T&gt; <span class="function">Predicate&lt;T&gt; <span class="title">isEqual</span><span class="params">(Object targetRef)</span> </span>{</span><br><span class="line">        <span class="keyword">return</span> (<span class="keyword">null</span> == targetRef)</span><br><span class="line">                ? Objects::isNull</span><br><span class="line">                : object -&gt; targetRef.equals(object);</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></table></figure><!-- more --><p><strong>&#xFF08;2&#xFF09;&#x4F8B;&#x5B50;</strong></p><p>&#x4EE5;&#x524D;&#x6211;&#x4EEC;&#x6839;&#x636E;&#x4E0D;&#x540C;&#x7684;&#x6761;&#x4EF6;&#x7B5B;&#x9009;&#x6570;&#x636E;&#x9700;&#x8981;&#x4E9B;&#x591A;&#x4E2A;&#x65B9;&#x6CD5;&#xFF0C;&#x73B0;&#x5728;&#x53EA;&#x8981;&#x5148;&#x5B9A;&#x4E49;&#x4E00;&#x4E2A;&#x8FD9;&#x79CD;&#x63A5;&#x53D7;&#x884C;&#x4E3A;&#x7684;&#x65B9;&#x6CD5;&#x3002;</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Author</span>: cuzz</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Date</span>: 2019/8/21 23:35</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Description</span>: Predicate test</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">PredicateTest</span> </span>{</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>{</span><br><span class="line">        List&lt;Integer&gt; list = Arrays.asList(<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>, <span class="number">6</span>, <span class="number">7</span>, <span class="number">8</span>, <span class="number">9</span>);</span><br><span class="line">        PredicateTest test = <span class="keyword">new</span> PredicateTest();</span><br><span class="line"></span><br><span class="line">        <span class="comment">// &#x67E5;&#x627E;&#x5947;&#x6570;</span></span><br><span class="line">        test.findOdd(list);</span><br><span class="line">        test.conditionFilter(list, i -&gt; i % <span class="number">2</span> != <span class="number">0</span>);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// &#x67E5;&#x627E;&#x5076;&#x6570;</span></span><br><span class="line">        test.findEven(list);</span><br><span class="line">        test.conditionFilter(list, i -&gt; i % <span class="number">2</span> == <span class="number">0</span>);</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">conditionFilter</span><span class="params">(List&lt;Integer&gt; list, Predicate&lt;Integer&gt; predicate)</span> </span>{</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i : list) {</span><br><span class="line">            <span class="keyword">if</span> (predicate.test(i)) {</span><br><span class="line">                System.out.print(i + <span class="string">&quot; &quot;</span>);</span><br><span class="line">            }</span><br><span class="line">        }</span><br><span class="line">        System.out.println();</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">findOdd</span><span class="params">(List&lt;Integer&gt; list)</span> </span>{</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i : list) {</span><br><span class="line">            <span class="keyword">if</span> (i % <span class="number">2</span> != <span class="number">0</span>) {</span><br><span class="line">                System.out.print(i + <span class="string">&quot; &quot;</span>);</span><br><span class="line">            }</span><br><span class="line">        }</span><br><span class="line">        System.out.println();</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">findEven</span><span class="params">(List&lt;Integer&gt; list)</span> </span>{</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i : list) {</span><br><span class="line">            <span class="keyword">if</span> (i % <span class="number">2</span> == <span class="number">0</span>) {</span><br><span class="line">                System.out.print(i + <span class="string">&quot; &quot;</span>);</span><br><span class="line">            }</span><br><span class="line">        }</span><br><span class="line">        System.out.println();</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></table></figure><p><strong>&#xFF08;3&#xFF09;Predicate#and &#x548C; Predicate#or</strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">PredicateTest</span> </span>{</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>{</span><br><span class="line">        List&lt;Integer&gt; list = Arrays.asList(<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>, <span class="number">6</span>, <span class="number">7</span>, <span class="number">8</span>, <span class="number">9</span>);</span><br><span class="line">        PredicateTest test = <span class="keyword">new</span> PredicateTest();</span><br><span class="line"></span><br><span class="line">        <span class="comment">// &#x67E5;&#x627E; &#x5927;&#x4E8E; 3 &#x7684;&#x5947;&#x6570;</span></span><br><span class="line">        test.conditionFilter2(list, i -&gt; i &gt; <span class="number">3</span>, i -&gt; i % <span class="number">2</span> != <span class="number">0</span>);</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">conditionFilter2</span><span class="params">(List&lt;Integer&gt; list, Predicate&lt;Integer&gt; predicate1, Predicate&lt;Integer&gt; predicate2)</span> </span>{</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i : list) {</span><br><span class="line">            <span class="keyword">if</span> (predicate1.and(predicate2).test(i)) {</span><br><span class="line">                System.out.print(i + <span class="string">&quot; &quot;</span>);</span><br><span class="line">            }</span><br><span class="line">        }</span><br><span class="line">        System.out.println();</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></table></figure><h2 id="Supplier"><a href="#Supplier" class="headerlink" title="Supplier"></a>Supplier</h2><p><strong>&#xFF08;1&#xFF09;&#x4E0D;&#x63A5;&#x53D7;&#x53C2;&#x6570;&#xFF0C;&#x8FD4;&#x56DE;&#x4E00;&#x4E2A;&#x503C;&#x3002;</strong></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">/**</span><br><span class="line"> * Represents a supplier of results.</span><br><span class="line"> *</span><br><span class="line"> * &lt;p&gt;There is no requirement that a new or distinct result be returned each</span><br><span class="line"> * time the supplier is invoked.</span><br><span class="line"> *</span><br><span class="line"> * &lt;p&gt;This is a &lt;a href=&quot;package-summary.html&quot;&gt;functional interface&lt;/a&gt;</span><br><span class="line"> * whose functional method is {@link #get()}.</span><br><span class="line"> *</span><br><span class="line"> * @param &lt;T&gt; the type of results supplied by this supplier</span><br><span class="line"> *</span><br><span class="line"> * @since 1.8</span><br><span class="line"> */</span><br><span class="line">@FunctionalInterface</span><br><span class="line">public interface Supplier&lt;T&gt; {</span><br><span class="line"></span><br><span class="line">    /**</span><br><span class="line">     * Gets a result.</span><br><span class="line">     *</span><br><span class="line">     * @return a result</span><br><span class="line">     */</span><br><span class="line">    T get();</span><br><span class="line">}</span><br></pre></td></tr></table></figure><p><strong>&#xFF08;2&#xFF09;&#x4F8B;&#x5B50;</strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Author</span>: cuzz</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Date</span>: 2019/8/22 23:32</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Description</span>:</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">SupplierTest</span> </span>{</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>{</span><br><span class="line">        Supplier&lt;Student&gt; supplier1 = () -&gt; <span class="keyword">new</span> Student();</span><br><span class="line">        Supplier&lt;Student&gt; supplier2 = Student::<span class="keyword">new</span>;</span><br><span class="line">    }</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="meta">@Data</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Student</span> </span>{</span><br><span class="line">    <span class="keyword">private</span> String name = <span class="string">&quot;cuzz&quot;</span>;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">int</span> age = <span class="number">20</span>;</span><br><span class="line">}</span><br></pre></td></tr></table></figure><h2 id="Optional"><a href="#Optional" class="headerlink" title="Optional"></a>Optional</h2><p>&#x53C2;&#x8003;&#xFF1A;<a href="https://blog.csdn.net/wisgood/article/details/52503052" target="_blank" rel="noopener"> &#x4F7F;&#x7528; Java 8 Optional &#x7684;&#x6B63;&#x786E;&#x59FF;&#x52BF; </a></p>]]></content>
    
    <summary type="html">
    
      &lt;h2 id=&quot;Lambda-&amp;#x8868;&amp;#x8FBE;&amp;#x5F0F;&amp;#x548C;&amp;#x51FD;&amp;#x6570;&amp;#x5F0F;&amp;#x63A5;&amp;#x53E3;&quot;&gt;&lt;a href=&quot;#Lambda-&amp;#x8868;&amp;#x8FBE;&amp;#x5F0F;&amp;#x548C;&amp;#x51FD;&amp;#x6570;&amp;#x5F0F;&amp;#x63A5;&amp;#x53E3;&quot; class=&quot;headerlink&quot; title=&quot;Lambda &amp;#x8868;&amp;#x8FBE;&amp;#x5F0F;&amp;#x548C;&amp;#x51FD;&amp;#x6570;&amp;#x5F0F;&amp;#x63A5;&amp;#x53E3;&quot;&gt;&lt;/a&gt;Lambda &amp;#x8868;&amp;#x8FBE;&amp;#x5F0F;&amp;#x548C;&amp;#x51FD;&amp;#x6570;&amp;#x5F0F;&amp;#x63A5;&amp;#x53E3;&lt;/h2&gt;&lt;p&gt;Lambda &amp;#x8868;&amp;#x8FBE;&amp;#x5F0F;&amp;#x5B9A;&amp;#x4E49;&amp;#xFF1A;&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;Lambda: In programming languages such as Lisp, Python and Ruby lambda is an operator used to denote &lt;strong&gt;anonymous functions&lt;/strong&gt; or &lt;strong&gt;closures&lt;/strong&gt;, following the usage of lambda calculus.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;&amp;#x4E3A;&amp;#x4F55;&amp;#x9700;&amp;#x8981;&amp;#x4F7F;&amp;#x7528; Lambda &amp;#x8868;&amp;#x8FBE;&amp;#x5F0F;&amp;#xFF1A;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&amp;#x5728; Java &amp;#x4E2D;&amp;#xFF0C;&amp;#x6211;&amp;#x4EEC;&amp;#x65E0;&amp;#x6CD5;&amp;#x5C06;&amp;#x51FD;&amp;#x6570;&amp;#x4F5C;&amp;#x4E3A;&amp;#x4E00;&amp;#x4E2A;&amp;#x53C2;&amp;#x6570;&amp;#x4F20;&amp;#x9012;&amp;#x7ED9;&amp;#x4E00;&amp;#x4E2A;&amp;#x65B9;&amp;#x6CD5;&amp;#xFF0C;&amp;#x4E5F;&amp;#x65E0;&amp;#x6CD5;&amp;#x58F0;&amp;#x660E;&amp;#x4E00;&amp;#x4E2A;&amp;#x8FD4;&amp;#x56DE;&amp;#x4E00;&amp;#x4E2A;&amp;#x51FD;&amp;#x6570;&amp;#x7684;&amp;#x65B9;&amp;#x6CD5;&amp;#x3002;&lt;/li&gt;
&lt;li&gt;&amp;#x5728; JavaScript &amp;#x4E2D;&amp;#xFF0C;&amp;#x51FD;&amp;#x6570;&amp;#x7684;&amp;#x53C2;&amp;#x6570;&amp;#x662F;&amp;#x4E00;&amp;#x4E2A;&amp;#x51FD;&amp;#x6570;&amp;#xFF0C;&amp;#x8FD4;&amp;#x56DE;&amp;#x503C;&amp;#x662F;&amp;#x53E6;&amp;#x4E00;&amp;#x4E2A;&amp;#x51FD;&amp;#x6570;&amp;#x7684;&amp;#x60C5;&amp;#x51B5;&amp;#x662F;&amp;#x975E;&amp;#x5E38;&amp;#x5E38;&amp;#x89C1;&amp;#x7684;&amp;#xFF0C;JavaScript &amp;#x662F;&amp;#x4E00;&amp;#x95E8;&amp;#x5178;&amp;#x578B;&amp;#x7684;&amp;#x51FD;&amp;#x6570;&amp;#x5F0F;&amp;#x8BED;&amp;#x8A00;&amp;#x3002;&lt;/li&gt;
&lt;/ul&gt;
    
    </summary>
    
      <category term="Java 基础" scheme="http://blog.cuzz.site/categories/Java-%E5%9F%BA%E7%A1%80/"/>
    
    
      <category term="Java8" scheme="http://blog.cuzz.site/tags/Java8/"/>
    
      <category term="lambda" scheme="http://blog.cuzz.site/tags/lambda/"/>
    
  </entry>
  
  <entry>
    <title>面试高频题</title>
    <link href="http://blog.cuzz.site/2019/07/23/%E9%9D%A2%E8%AF%95%E9%AB%98%E9%A2%91%E9%A2%98/"/>
    <id>http://blog.cuzz.site/2019/07/23/面试高频题/</id>
    <published>2019-07-23T15:59:59.000Z</published>
    <updated>2019-08-12T12:03:26.854Z</updated>
    
    <content type="html"><![CDATA[<h2 id="&#x5982;&#x4F55;&#x63A7;&#x5236;&#x7EBF;&#x7A0B;&#x6253;&#x5370;&#x987A;&#x5E8F;"><a href="#&#x5982;&#x4F55;&#x63A7;&#x5236;&#x7EBF;&#x7A0B;&#x6253;&#x5370;&#x987A;&#x5E8F;" class="headerlink" title="&#x5982;&#x4F55;&#x63A7;&#x5236;&#x7EBF;&#x7A0B;&#x6253;&#x5370;&#x987A;&#x5E8F;"></a>&#x5982;&#x4F55;&#x63A7;&#x5236;&#x7EBF;&#x7A0B;&#x6253;&#x5370;&#x987A;&#x5E8F;</h2><h3 id="&#x4F7F;&#x7528;-join-&#x65B9;&#x6CD5;"><a href="#&#x4F7F;&#x7528;-join-&#x65B9;&#x6CD5;" class="headerlink" title="&#x4F7F;&#x7528; join &#x65B9;&#x6CD5;"></a>&#x4F7F;&#x7528; join &#x65B9;&#x6CD5;</h3><p>&#x5982;&#x4E0B;&#x9762;&#x4EE3;&#x7801;&#x6240;&#x793A;&#xFF1A;</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ThreadDemo</span> </span>{</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> InterruptedException </span>{</span><br><span class="line">        <span class="keyword">final</span> Thread thread1 = <span class="keyword">new</span> Thread(() -&gt; System.out.println(<span class="string">&quot;thread1&quot;</span>));</span><br><span class="line">        <span class="keyword">final</span> Thread thread2 = <span class="keyword">new</span> Thread(() -&gt; System.out.println(<span class="string">&quot;thread2&quot;</span>));</span><br><span class="line">        <span class="keyword">final</span> Thread thread3 = <span class="keyword">new</span> Thread(() -&gt; System.out.println(<span class="string">&quot;thread3&quot;</span>));</span><br><span class="line"></span><br><span class="line">        thread1.start();</span><br><span class="line">        thread1.join();</span><br><span class="line">        thread2.start();</span><br><span class="line">        thread2.join();</span><br><span class="line">        thread3.start();</span><br><span class="line">        thread3.join();</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></table></figure><a id="more"></a> <p>&#x901A;&#x8FC7; join &#x65B9;&#x6CD5;&#x53BB;&#x4FDD;&#x8BC1;&#x591A;&#x7EBF;&#x7A0B;&#x7684;&#x987A;&#x5E8F;&#x7684;&#x7279;&#x6027;&#xFF0C;join &#x4E3B;&#x8981;&#x8BA9;&#x4E3B;&#x7EBF;&#x7A0B;&#x7B49;&#x5F85;&#x5B50;&#x7EBF;&#x7A0B;&#x7ED3;&#x675F;&#x540E;&#x624D;&#x80FD;&#x7EE7;&#x7EED;&#x8FD0;&#x884C;&#x3002;</p><p><img src="/2019/07/23/&#x9762;&#x8BD5;&#x9AD8;&#x9891;&#x9898;/&#x5FAE;&#x4FE1;&#x622A;&#x56FE;_20190717155358.png" alt="&#x5FAE;&#x4FE1;&#x622A;&#x56FE;_20190717155358"></p><h3 id="&#x4F7F;&#x7528;-Executors-new"><a href="#&#x4F7F;&#x7528;-Executors-new" class="headerlink" title="&#x4F7F;&#x7528; Executors.new"></a>&#x4F7F;&#x7528; Executors.new</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ThreadDemo</span> </span>{</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> InterruptedException </span>{</span><br><span class="line">        <span class="keyword">final</span> Thread thread1 = <span class="keyword">new</span> Thread(() -&gt; System.out.println(<span class="string">&quot;thread1&quot;</span>));</span><br><span class="line">        <span class="keyword">final</span> Thread thread2 = <span class="keyword">new</span> Thread(() -&gt; System.out.println(<span class="string">&quot;thread2&quot;</span>));</span><br><span class="line">        <span class="keyword">final</span> Thread thread3 = <span class="keyword">new</span> Thread(() -&gt; System.out.println(<span class="string">&quot;thread3&quot;</span>));</span><br><span class="line"></span><br><span class="line">        ExecutorService executorService = Executors.newSingleThreadExecutor();</span><br><span class="line">        executorService.submit(thread1);</span><br><span class="line">        executorService.submit(thread2);</span><br><span class="line">        executorService.submit(thread3);</span><br><span class="line">        executorService.shutdown();</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></table></figure><p>&#x770B;&#x770B;&#x6E90;&#x7801;&#x5C31;&#x77E5;&#x9053;&#x4E86;&#xFF0C;&#x4F7F;&#x7528;&#x963B;&#x585E;&#x961F;&#x5217;&#x6765;&#x7EF4;&#x62A4;&#x4EFB;&#x52A1;&#xFF0C;&#x662F;&#x4EFB;&#x52A1;&#x6709;&#x5E8F;&#x8FDB;&#x884C;&#x3002;</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * Creates an Executor that uses a single worker thread operating</span></span><br><span class="line"><span class="comment"> * off an unbounded queue. (Note however that if this single</span></span><br><span class="line"><span class="comment"> * thread terminates due to a failure during execution prior to</span></span><br><span class="line"><span class="comment"> * shutdown, a new one will take its place if needed to execute</span></span><br><span class="line"><span class="comment"> * subsequent tasks.)  Tasks are guaranteed to execute</span></span><br><span class="line"><span class="comment"> * sequentially, and no more than one task will be active at any</span></span><br><span class="line"><span class="comment"> * given time. Unlike the otherwise equivalent</span></span><br><span class="line"><span class="comment"> * {<span class="doctag">@code</span> newFixedThreadPool(1)} the returned executor is</span></span><br><span class="line"><span class="comment"> * guaranteed not to be reconfigurable to use additional threads.</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@return</span> the newly created single-threaded Executor</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> ExecutorService <span class="title">newSingleThreadExecutor</span><span class="params">()</span> </span>{</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">new</span> FinalizableDelegatedExecutorService</span><br><span class="line">        (<span class="keyword">new</span> ThreadPoolExecutor(<span class="number">1</span>, <span class="number">1</span>,</span><br><span class="line">                                <span class="number">0L</span>, TimeUnit.MILLISECONDS,</span><br><span class="line">                                <span class="keyword">new</span> LinkedBlockingQueue&lt;Runnable&gt;()));</span><br><span class="line">}</span><br></pre></td></tr></table></figure><h2 id="Java-&#x4E2D;&#x7684;-volatile-&#x548C;-synchronized"><a href="#Java-&#x4E2D;&#x7684;-volatile-&#x548C;-synchronized" class="headerlink" title="Java &#x4E2D;&#x7684; volatile &#x548C; synchronized"></a>Java &#x4E2D;&#x7684; volatile &#x548C; synchronized</h2><ul><li>JMM&#xFF08;Java Memory Mode&#xFF09;&#xFF1A;&#x89E3;&#x51B3;&#x5E76;&#x53D1;&#x8FC7;&#x7A0B;&#x4E2D;&#x53EF;&#x89C1;&#x6027;&#x3001;&#x539F;&#x5B50;&#x6027;&#x548C;&#x6709;&#x5E8F;&#x6027;&#x7684;&#x95EE;&#x9898;&#x3002;</li><li>&#x5E76;&#x53D1;&#x8FC7;&#x7A0B;&#x4E2D;&#x7684;&#x4E24;&#x4E2A;&#x5173;&#x952E;&#x95EE;&#x9898;<ul><li>&#x7EBF;&#x7A0B;&#x4E4B;&#x95F4;&#x5982;&#x4F55;&#x901A;&#x4FE1;<ul><li>&#x5171;&#x4EAB;&#x5185;&#x5B58;&#xFF1A;&#x9690;&#x8EAB;&#x901A;&#x4FE1; </li><li>&#x6D88;&#x606F;&#x4F20;&#x9012;&#xFF1A;&#x663E;&#x793A;&#x901A;&#x4FE1;&#xFF0C;&#x5982; wait() / notify() / notifyall()</li></ul></li><li>&#x7EBF;&#x7A0B;&#x4E4B;&#x95F4;&#x5982;&#x4F55;&#x540C;&#x6B65;<ul><li>&#x7EBF;&#x7A0B;&#x540C;&#x6B65;&#x6307;&#x7684;&#x662F;&#xFF1A;&#x7A0B;&#x5E8F;&#x7528;&#x4E8E;&#x63A7;&#x5236;&#x4E0D;&#x540C;&#x7EBF;&#x7A0B;&#x5148;&#x540E;&#x987A;&#x5E8F;&#x7684;&#x673A;&#x5236;&#x3002;</li><li>&#x5728;&#x6D88;&#x606F;&#x4F20;&#x9012;&#x7684;&#x5E76;&#x53D1;&#x6A21;&#x578B;&#x4E2D;&#xFF0C;&#x7531;&#x4E8E;&#x6D88;&#x606F;&#x7684;&#x53D1;&#x9001;&#x5FC5;&#x9700;&#x5728;&#x6D88;&#x606F;&#x63A5;&#x53D7;&#x4E4B;&#x524D;&#xFF0C;&#x6240;&#x4EE5;&#x662F;&#x9690;&#x5F0F;&#x540C;&#x6B65;&#x3002;</li></ul></li></ul></li><li>&#x5B9A;&#x4F4D;&#x5185;&#x5B58;&#x53EF;&#x89C1;&#x884C;&#x95EE;&#x9898;<ul><li>&#x4EC0;&#x4E48;&#x662F;&#x5185;&#x5B58;&#x5171;&#x4EAB;</li></ul></li><li>synchronized&#xFF1A;&#x53EF;&#x91CD;&#x5165;&#x9501;&#x3001;&#x4E92;&#x65A5;&#x6027;&#x548C;&#x53EF;&#x89C1;&#x6027;</li><li>volatile&#xFF1A;&#x53EF;&#x4EE5;&#x505A;&#x5230;&#x539F;&#x5B50;&#x6027;&#x3001;&#x53EF;&#x89C1;&#x6027;&#x4E0D;&#x80FD;&#x505A;&#x5230;&#x590D;&#x5408;&#x64CD;&#x4F5C;&#x7684;&#x539F;&#x5B50;&#x6027;</li><li>volatile &#x4FDD;&#x8BC1;&#x53EF;&#x89C1;&#x6027;&#x539F;&#x7406;<ul><li>&#x5BF9;&#x4E8E; volatile &#x4FEE;&#x9970;&#x7684;&#x53D8;&#x91CF;&#x8FDB;&#x884C;&#x5199;&#x64CD;&#x4F5C;&#x7684;&#x65F6;&#x5019;&#xFF0C;JVM &#x4F1A;&#x5411;&#x5904;&#x7406;&#x5668;&#x53D1;&#x9001;&#x4E00;&#x6761; Lock &#x524D;&#x7F00;&#x7684;&#x6307;&#x4EE4;&#xFF0C;&#x4F1A;&#x628A;&#x8FD9;&#x4E2A;&#x53D8;&#x91CF;&#x6240;&#x5728;&#x7F13;&#x5B58;&#x884C;&#x7684;&#x6570;&#x636E;&#x5199;&#x56DE;&#x7CFB;&#x7EDF;&#x5185;&#x5B58;&#x3002;</li><li>&#x5728;&#x591A;&#x5904;&#x7406;&#x5668;&#x7684;&#x60C5;&#x51B5;&#x4E0B;&#xFF0C;&#x5404;&#x4E2A;&#x5904;&#x7406;&#x5668;&#x4F1A;&#x901A;&#x8FC7;&#x603B;&#x7EBF;&#x4F20;&#x8FC7;&#x7684;&#x7684;&#x503C;&#x6765;&#x53D1;&#x73B0;&#x81EA;&#x5DF1;&#x4FDD;&#x5B58;&#x7684;&#x503C;&#x662F;&#x4E0D;&#x662F;&#x8FC7;&#x671F;&#x4E86;&#xFF0C;&#x5B9E;&#x73B0;&#x7F13;&#x5B58;&#x4E00;&#x81F4;&#x6027;&#x3002;&#x5F53;CPU&#x5199;&#x6570;&#x636E;&#x65F6;&#xFF0C;&#x5982;&#x679C;&#x53D1;&#x73B0;&#x64CD;&#x4F5C;&#x7684;&#x53D8;&#x91CF;&#x662F;&#x5171;&#x4EAB;&#x53D8;&#x91CF;&#xFF0C;&#x5373;&#x5728;&#x5176;&#x4ED6;CPU&#x4E2D;&#x4E5F;&#x5B58;&#x5728;&#x8BE5;&#x53D8;&#x91CF;&#x7684;&#x526F;&#x672C;&#xFF0C;&#x4F1A;&#x53D1;&#x51FA;&#x4FE1;&#x53F7;&#x901A;&#x77E5;&#x5176;&#x4ED6;CPU&#x5C06;&#x8BE5;&#x53D8;&#x91CF;&#x7684;&#x7F13;&#x5B58;&#x884C;&#x7F6E;&#x4E3A;&#x65E0;&#x6548;&#x72B6;&#x6001;&#xFF0C;&#x56E0;&#x6B64;&#x5F53;&#x5176;&#x4ED6;CPU&#x9700;&#x8981;&#x8BFB;&#x53D6;&#x8FD9;&#x4E2A;&#x53D8;&#x91CF;&#x65F6;&#xFF0C;&#x53D1;&#x73B0;&#x81EA;&#x5DF1;&#x7F13;&#x5B58;&#x4E2D;&#x7F13;&#x5B58;&#x8BE5;&#x53D8;&#x91CF;&#x7684;&#x7F13;&#x5B58;&#x884C;&#x662F;&#x65E0;&#x6548;&#x7684;&#xFF0C;&#x90A3;&#x4E48;&#x5B83;&#x5C31;&#x4F1A;&#x4ECE;&#x5185;&#x5B58;&#x91CD;&#x65B0;&#x8BFB;&#x53D6;&#x3002;</li></ul></li><li>synchronized &#x662F;&#x5173;&#x952E;&#x5B57;&#x5C5E;&#x4E8E; JVM &#x5C42;&#x9762;&#xFF0C;&#x53CD;&#x5E94;&#x5728;&#x5B57;&#x8282;&#x7801;&#x4E0A;&#x662F; monitorenter &#x548C; monitorexit&#xFF0C;&#x5176;&#x5E95;&#x5C42;&#x662F;&#x901A;&#x8FC7; monitor &#x5BF9;&#x8C61;&#x6765;&#x5B8C;&#x6210;&#xFF0C;&#x5176;&#x5B9E; wait/notify &#x7B49;&#x65B9;&#x6CD5;&#x4E5F;&#x662F;&#x4F9D;&#x8D56; monitor &#x5BF9;&#x8C61;&#x53EA;&#x6709;&#x5728;&#x540C;&#x6B65;&#x5FEB;&#x6216;&#x65B9;&#x6CD5;&#x4E2D;&#x624D;&#x80FD;&#x8C03;&#x7528; wait/notify &#x7B49;&#x65B9;&#x6CD5;&#x3002;</li></ul><h2 id="&#x65B0;&#x5EFA;&#x4E00;&#x4E2A;&#x7EBF;&#x7A0B;&#x7684;&#x51E0;&#x79CD;&#x65B9;&#x5F0F;"><a href="#&#x65B0;&#x5EFA;&#x4E00;&#x4E2A;&#x7EBF;&#x7A0B;&#x7684;&#x51E0;&#x79CD;&#x65B9;&#x5F0F;" class="headerlink" title="&#x65B0;&#x5EFA;&#x4E00;&#x4E2A;&#x7EBF;&#x7A0B;&#x7684;&#x51E0;&#x79CD;&#x65B9;&#x5F0F;"></a>&#x65B0;&#x5EFA;&#x4E00;&#x4E2A;&#x7EBF;&#x7A0B;&#x7684;&#x51E0;&#x79CD;&#x65B9;&#x5F0F;</h2><ul><li>Thread</li><li>Rannable</li><li>Callable/Future</li><li>ExectutorService</li></ul><h2 id="&#x5206;&#x5E03;&#x5F0F;&#x9501;&#x7684;&#x5B9E;&#x73B0;"><a href="#&#x5206;&#x5E03;&#x5F0F;&#x9501;&#x7684;&#x5B9E;&#x73B0;" class="headerlink" title="&#x5206;&#x5E03;&#x5F0F;&#x9501;&#x7684;&#x5B9E;&#x73B0;"></a><a href="http://www.hollischuang.com/archives/1716" target="_blank" rel="noopener">&#x5206;&#x5E03;&#x5F0F;&#x9501;&#x7684;&#x5B9E;&#x73B0;</a></h2><ul><li>&#x901A;&#x8FC7;&#x6570;&#x636E;&#x5E93;&#x5B9E;&#x73B0;</li><li>&#x4F7F;&#x7528; zookeeper &#x5B9E;&#x73B0;</li><li>&#x57FA;&#x4E8E; redis &#x5B9E;&#x73B0;</li></ul><h2 id="&#x5982;&#x679C;&#x901A;&#x8FC7;&#x4E00;&#x4E2A;-swap-&#x4EA4;&#x6362;&#x4E24;&#x4E2A;&#x6570;"><a href="#&#x5982;&#x679C;&#x901A;&#x8FC7;&#x4E00;&#x4E2A;-swap-&#x4EA4;&#x6362;&#x4E24;&#x4E2A;&#x6570;" class="headerlink" title="&#x5982;&#x679C;&#x901A;&#x8FC7;&#x4E00;&#x4E2A; swap &#x4EA4;&#x6362;&#x4E24;&#x4E2A;&#x6570;"></a>&#x5982;&#x679C;&#x901A;&#x8FC7;&#x4E00;&#x4E2A; swap &#x4EA4;&#x6362;&#x4E24;&#x4E2A;&#x6570;</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">SwapDemo</span> </span>{</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>{</span><br><span class="line">        Integer a = <span class="number">1</span>;</span><br><span class="line">        Integer b = <span class="number">2</span>;</span><br><span class="line">        System.out.println(<span class="string">&quot;before : a = &quot;</span> + a + <span class="string">&quot;, &quot;</span> + <span class="string">&quot;b = &quot;</span> + b);</span><br><span class="line">        swap(a, b);</span><br><span class="line">        System.out.println(<span class="string">&quot;after  : a = &quot;</span> + a + <span class="string">&quot;, &quot;</span> + <span class="string">&quot;b = &quot;</span> + b);</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">swap</span><span class="params">(Integer a, Integer b)</span> </span>{</span><br><span class="line">        <span class="keyword">int</span> temp = a;</span><br><span class="line">        a = b;</span><br><span class="line">        b = temp;</span><br><span class="line">    }</span><br><span class="line">}</span><br><span class="line"><span class="comment">// &#x8F93;&#x51FA;</span></span><br><span class="line"><span class="comment">// before : a = 1, b = 2</span></span><br><span class="line"><span class="comment">// after  : a = 1, b = 2</span></span><br></pre></td></tr></table></figure><p>&#x53D1;&#x73B0;&#x5E76;&#x6CA1;&#x6709;&#x4EA4;&#x6362;&#xFF0C;&#x56E0;&#x4E3A; Java &#x4F7F;&#x7528;&#x7684;&#x503C;&#x4F20;&#x9012;&#xFF0C;&#x4F20;&#x9012;&#x7684;&#x53EA;&#x662F;&#x4E00;&#x4E2A;&#x526F;&#x672C;&#xFF0C;&#x5982;&#x679C;&#x662F;&#x57FA;&#x672C;&#x7C7B;&#x578B;&#x5C31;&#x57FA;&#x672C;&#x7C7B;&#x578B;&#x526F;&#x672C;&#xFF0C;&#x5982;&#x679C;&#x662F;&#x5F15;&#x7528;&#x7C7B;&#x578B;&#x5C31;&#x662F;&#x5F15;&#x7528;&#x7C7B;&#x578B;&#x7684;&#x526F;&#x672C;&#x3002;</p><p>&#x67E5;&#x770B;&#x6E90;&#x7801;&#xFF0C;&#x53D1;&#x73B0; Integer &#x8FD9;&#x4E2A;&#x7C7B;&#x6709;&#x4E00;&#x4E2A; final &#x6210;&#x5458;&#x53D8;&#x91CF;&#x3002;</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * The value of the {<span class="doctag">@code</span> Integer}.</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@serial</span></span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">private</span> <span class="keyword">final</span> <span class="keyword">int</span> value;</span><br></pre></td></tr></table></figure><p>&#x6211;&#x4EEC;&#x77E5;&#x9053; final &#x4FEE;&#x9970;&#x7684;&#x53D8;&#x91CF;&#x4E0D;&#x80FD;&#x4FEE;&#x6539;&#xFF0C;&#x4F46;&#x662F;&#x6211;&#x4EEC;&#x53EF;&#x4EE5;&#x901A;&#x8FC7;&#x53CD;&#x5C04;&#x4FEE;&#x6539;&#x3002;</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">SwapDemo</span> </span>{</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> Exception</span>{</span><br><span class="line">        Integer a = <span class="number">1</span>; <span class="comment">// &#x540C; Integer.valueOf(1)</span></span><br><span class="line">        Integer b = <span class="number">2</span>;</span><br><span class="line">        System.out.println(<span class="string">&quot;before : a = &quot;</span> + a + <span class="string">&quot;, &quot;</span> + <span class="string">&quot;b = &quot;</span> + b);</span><br><span class="line">        swap(a, b);</span><br><span class="line">        System.out.println(<span class="string">&quot;after  : a = &quot;</span> + a + <span class="string">&quot;, &quot;</span> + <span class="string">&quot;b = &quot;</span> + b);</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">swap</span><span class="params">(Integer a, Integer b)</span> <span class="keyword">throws</span> NoSuchFieldException, IllegalAccessException </span>{</span><br><span class="line">        Field field = Integer.class.getDeclaredField(<span class="string">&quot;value&quot;</span>);</span><br><span class="line">        field.setAccessible(<span class="keyword">true</span>); <span class="comment">// &#x8BBF;&#x95EE;&#x79C1;&#x6709;&#x53D8;&#x91CF;</span></span><br><span class="line">        Integer temp = <span class="keyword">new</span> Integer(a.intValue()); <span class="comment">// &#x56E0;&#x4E3A; -128 ~ 127 &#x4F1A;&#x7F13;&#x51B2;&#xFF0C;&#x6240;&#x4EE5;&#x8981; new &#x51FA;&#x6765;</span></span><br><span class="line">        field.set(a, b.intValue());</span><br><span class="line">        field.set(b, temp);</span><br><span class="line">    }</span><br><span class="line">}</span><br><span class="line"><span class="comment">// &#x8F93;&#x51FA;</span></span><br><span class="line"><span class="comment">// before : a = 1, b = 2</span></span><br><span class="line"><span class="comment">// after  : a = 2, b = 1</span></span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      &lt;h2 id=&quot;&amp;#x5982;&amp;#x4F55;&amp;#x63A7;&amp;#x5236;&amp;#x7EBF;&amp;#x7A0B;&amp;#x6253;&amp;#x5370;&amp;#x987A;&amp;#x5E8F;&quot;&gt;&lt;a href=&quot;#&amp;#x5982;&amp;#x4F55;&amp;#x63A7;&amp;#x5236;&amp;#x7EBF;&amp;#x7A0B;&amp;#x6253;&amp;#x5370;&amp;#x987A;&amp;#x5E8F;&quot; class=&quot;headerlink&quot; title=&quot;&amp;#x5982;&amp;#x4F55;&amp;#x63A7;&amp;#x5236;&amp;#x7EBF;&amp;#x7A0B;&amp;#x6253;&amp;#x5370;&amp;#x987A;&amp;#x5E8F;&quot;&gt;&lt;/a&gt;&amp;#x5982;&amp;#x4F55;&amp;#x63A7;&amp;#x5236;&amp;#x7EBF;&amp;#x7A0B;&amp;#x6253;&amp;#x5370;&amp;#x987A;&amp;#x5E8F;&lt;/h2&gt;&lt;h3 id=&quot;&amp;#x4F7F;&amp;#x7528;-join-&amp;#x65B9;&amp;#x6CD5;&quot;&gt;&lt;a href=&quot;#&amp;#x4F7F;&amp;#x7528;-join-&amp;#x65B9;&amp;#x6CD5;&quot; class=&quot;headerlink&quot; title=&quot;&amp;#x4F7F;&amp;#x7528; join &amp;#x65B9;&amp;#x6CD5;&quot;&gt;&lt;/a&gt;&amp;#x4F7F;&amp;#x7528; join &amp;#x65B9;&amp;#x6CD5;&lt;/h3&gt;&lt;p&gt;&amp;#x5982;&amp;#x4E0B;&amp;#x9762;&amp;#x4EE3;&amp;#x7801;&amp;#x6240;&amp;#x793A;&amp;#xFF1A;&lt;/p&gt;
&lt;figure class=&quot;highlight java&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;14&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;15&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;class&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;title&quot;&gt;ThreadDemo&lt;/span&gt; &lt;/span&gt;{&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;function&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;static&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;title&quot;&gt;main&lt;/span&gt;&lt;span class=&quot;params&quot;&gt;(String[] args)&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;throws&lt;/span&gt; InterruptedException &lt;/span&gt;{&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;keyword&quot;&gt;final&lt;/span&gt; Thread thread1 = &lt;span class=&quot;keyword&quot;&gt;new&lt;/span&gt; Thread(() -&amp;gt; System.out.println(&lt;span class=&quot;string&quot;&gt;&amp;quot;thread1&amp;quot;&lt;/span&gt;));&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;keyword&quot;&gt;final&lt;/span&gt; Thread thread2 = &lt;span class=&quot;keyword&quot;&gt;new&lt;/span&gt; Thread(() -&amp;gt; System.out.println(&lt;span class=&quot;string&quot;&gt;&amp;quot;thread2&amp;quot;&lt;/span&gt;));&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;keyword&quot;&gt;final&lt;/span&gt; Thread thread3 = &lt;span class=&quot;keyword&quot;&gt;new&lt;/span&gt; Thread(() -&amp;gt; System.out.println(&lt;span class=&quot;string&quot;&gt;&amp;quot;thread3&amp;quot;&lt;/span&gt;));&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        thread1.start();&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        thread1.join();&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        thread2.start();&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        thread2.join();&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        thread3.start();&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        thread3.join();&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    }&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;}&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
    
    </summary>
    
      <category term="面试" scheme="http://blog.cuzz.site/categories/%E9%9D%A2%E8%AF%95/"/>
    
    
      <category term="join" scheme="http://blog.cuzz.site/tags/join/"/>
    
      <category term="volatile" scheme="http://blog.cuzz.site/tags/volatile/"/>
    
      <category term="synchronized" scheme="http://blog.cuzz.site/tags/synchronized/"/>
    
      <category term="分布式锁" scheme="http://blog.cuzz.site/tags/%E5%88%86%E5%B8%83%E5%BC%8F%E9%94%81/"/>
    
  </entry>
  
  <entry>
    <title>分布式事务框架Seata</title>
    <link href="http://blog.cuzz.site/2019/07/10/%E5%88%86%E5%B8%83%E5%BC%8F%E4%BA%8B%E5%8A%A1%E6%A1%86%E6%9E%B6Seata/"/>
    <id>http://blog.cuzz.site/2019/07/10/分布式事务框架Seata/</id>
    <published>2019-07-10T15:59:59.000Z</published>
    <updated>2019-07-16T11:43:31.322Z</updated>
    
    <content type="html"><![CDATA[<h2 id="&#x5206;&#x5E03;&#x5F0F;&#x57FA;&#x7840;"><a href="#&#x5206;&#x5E03;&#x5F0F;&#x57FA;&#x7840;" class="headerlink" title="&#x5206;&#x5E03;&#x5F0F;&#x57FA;&#x7840;"></a>&#x5206;&#x5E03;&#x5F0F;&#x57FA;&#x7840;</h2><h3 id="CAP-&#x5B9A;&#x7406;"><a href="#CAP-&#x5B9A;&#x7406;" class="headerlink" title="CAP &#x5B9A;&#x7406;"></a>CAP &#x5B9A;&#x7406;</h3><p>CAP &#x5B9A;&#x7406;&#x6307;&#x7684;&#x662F;&#x5728;&#x4E00;&#x4E2A;&#x5206;&#x5E03;&#x5F0F;&#x7CFB;&#x7EDF;&#x4E2D;&#xFF0C; Consistency&#xFF08;&#x4E00;&#x81F4;&#x6027;&#xFF09;&#x3001; Availability&#xFF08;&#x53EF;&#x7528;&#x6027;&#xFF09;&#x3001;Partition tolerance&#xFF08;&#x5206;&#x533A;&#x5BB9;&#x9519;&#x6027;&#xFF09;&#xFF0C;&#x4E09;&#x8005;&#x4E0D;&#x53EF;&#x517C;&#x5F97;&#x3002;&#x5728;&#x5206;&#x5E03;&#x5F0F;&#x7CFB;&#x7EDF;&#x4E2D;&#xFF0C;&#x5206;&#x533A;&#x5BB9;&#x9519;&#x6027;&#x662F;&#x5FC5;&#x987B;&#x9700;&#x8981;&#x5B9E;&#x73B0;&#x7684;&#x3002;&#x6240;&#x4EE5;&#x53EA;&#x80FD;&#x5728;&#x4E00;&#x81F4;&#x6027;&#x548C;&#x53EF;&#x7528;&#x6027;&#x4E4B;&#x95F4;&#x8FDB;&#x884C;&#x6743;&#x8861;&#xFF08;AP &#x6216;&#x8005; CP&#xFF09;&#x3002;</p><h3 id="BASE-&#x7406;&#x8BBA;"><a href="#BASE-&#x7406;&#x8BBA;" class="headerlink" title="BASE &#x7406;&#x8BBA;"></a>BASE &#x7406;&#x8BBA;</h3><p>BASE &#x662F; Basically Available&#xFF08;&#x57FA;&#x672C;&#x53EF;&#x7528;&#xFF09;&#x3001;Soft state&#xFF08;&#x8F6F;&#x72B6;&#x6001;&#xFF09;&#x548C; Eventually consistent&#xFF08;&#x6700;&#x7EC8;&#x4E00;&#x81F4;&#x6027;&#xFF09;&#x4E09;&#x4E2A;&#x77ED;&#x8BED;&#x7684;&#x7F29;&#x5199;&#x3002;&#x662F;&#x5BF9; CAP &#x4E2D; AP &#x7684;&#x4E00;&#x4E2A;&#x6269;&#x5C55;</p><ol><li>BA &#x57FA;&#x672C;&#x53EF;&#x7528;&#xFF1A;&#x5206;&#x5E03;&#x5F0F;&#x7CFB;&#x7EDF;&#x5728;&#x51FA;&#x73B0;&#x6545;&#x969C;&#x65F6;&#xFF0C;&#x5141;&#x8BB8;&#x635F;&#x5931;&#x90E8;&#x5206;&#x53EF;&#x7528;&#x529F;&#x80FD;&#xFF0C;&#x4FDD;&#x8BC1;&#x6838;&#x5FC3;&#x529F;&#x80FD;&#x53EF;&#x7528;&#x3002;</li><li>S &#x8F6F;&#x72B6;&#x6001;&#xFF1A;&#x5141;&#x8BB8;&#x7CFB;&#x7EDF;&#x4E2D;&#x5B58;&#x5728;&#x4E2D;&#x95F4;&#x72B6;&#x6001;&#xFF0C;&#x8FD9;&#x4E2A;&#x72B6;&#x6001;&#x4E0D;&#x5F71;&#x54CD;&#x7CFB;&#x7EDF;&#x53EF;&#x7528;&#x6027;&#xFF0C;&#x8FD9;&#x91CC;&#x6307;&#x7684;&#x662F; CAP &#x4E2D;&#x7684;&#x4E0D;&#x4E00;&#x81F4;&#x3002;</li><li>E &#x6700;&#x7EC8;&#x4E00;&#x81F4;&#xFF1A;&#x6700;&#x7EC8;&#x4E00;&#x81F4;&#x662F;&#x6307;&#x7ECF;&#x8FC7;&#x4E00;&#x6BB5;&#x65F6;&#x95F4;&#x540E;&#xFF0C;&#x6240;&#x6709;&#x8282;&#x70B9;&#x6570;&#x636E;&#x90FD;&#x5C06;&#x4F1A;&#x8FBE;&#x5230;&#x4E00;&#x81F4;&#x3002;</li></ol><p>BASE &#x89E3;&#x51B3;&#x4E86; CAP &#x4E2D;&#x7406;&#x8BBA;&#x6CA1;&#x6709;&#x7F51;&#x7EDC;&#x5EF6;&#x8FDF;&#xFF0C;&#x5728; BASE &#x4E2D;&#x7528;&#x8F6F;&#x72B6;&#x6001;&#x548C;&#x6700;&#x7EC8;&#x4E00;&#x81F4;&#xFF0C;&#x4FDD;&#x8BC1;&#x4E86;&#x5EF6;&#x8FDF;&#x540E;&#x7684;&#x4E00;&#x81F4;&#x6027;&#x3002;</p><p>BASE &#x548C; ACID &#x662F;&#x76F8;&#x53CD;&#x7684;&#xFF0C;&#x5B83;&#x5B8C;&#x5168;&#x4E0D;&#x540C;&#x4E8E; ACID &#x7684;&#x5F3A;&#x4E00;&#x81F4;&#x6027;&#x6A21;&#x578B;&#xFF0C;&#x800C;&#x662F;&#x901A;&#x8FC7;&#x727A;&#x7272;&#x5F3A;&#x4E00;&#x81F4;&#x6027;&#x6765;&#x83B7;&#x5F97;&#x53EF;&#x7528;&#x6027;&#xFF0C;&#x5E76;&#x5141;&#x8BB8;&#x6570;&#x636E;&#x5728;&#x4E00;&#x6BB5;&#x65F6;&#x95F4;&#x5185;&#x662F;&#x4E0D;&#x4E00;&#x81F4;&#x7684;&#xFF0C;&#x4F46;&#x6700;&#x7EC8;&#x8FBE;&#x5230;&#x4E00;&#x81F4;&#x72B6;&#x6001;&#x3002;</p><h3 id="&#x5206;&#x5E03;&#x5F0F;&#x4E8B;&#x52A1;&#x5B9E;&#x73B0;&#x65B9;&#x5F0F;"><a href="#&#x5206;&#x5E03;&#x5F0F;&#x4E8B;&#x52A1;&#x5B9E;&#x73B0;&#x65B9;&#x5F0F;" class="headerlink" title="&#x5206;&#x5E03;&#x5F0F;&#x4E8B;&#x52A1;&#x5B9E;&#x73B0;&#x65B9;&#x5F0F;"></a><a href="https://github.com/doocs/advanced-java/blob/master/docs/distributed-system/distributed-transaction.md" target="_blank" rel="noopener">&#x5206;&#x5E03;&#x5F0F;&#x4E8B;&#x52A1;&#x5B9E;&#x73B0;&#x65B9;&#x5F0F;</a></h3><ul><li><strong>XA &#x65B9;&#x6848;(&#x4E24;&#x9636;&#x6BB5;&#x63D0;&#x4EA4;)</strong></li><li><strong>TCC &#x65B9;&#x6848;</strong></li><li>&#x672C;&#x5730;&#x6D88;&#x606F;&#x8868;</li><li>&#x53EF;&#x9760;&#x6D88;&#x606F;&#x6700;&#x7EC8;&#x4E00;&#x81F4;&#x6027;&#x65B9;&#x6848;</li><li>&#x6700;&#x5927;&#x52AA;&#x529B;&#x901A;&#x77E5;&#x65B9;&#x6848;</li></ul><h2 id="Seata&#x7B80;&#x4ECB;"><a href="#Seata&#x7B80;&#x4ECB;" class="headerlink" title="Seata&#x7B80;&#x4ECB;"></a>Seata&#x7B80;&#x4ECB;</h2><p>Seata (Simple Extensible Autonomous Transaction Architecture) &#x662F;&#x963F;&#x91CC;&#x5DF4;&#x5DF4;&#x5F00;&#x6E90;&#x7684;&#x5206;&#x5E03;&#x5F0F;&#x4E8B;&#x52A1;&#x4E2D;&#x95F4;&#x4EF6;&#xFF0C;&#xFF0C;&#x89E3;&#x51B3;&#x5FAE;&#x670D;&#x52A1;&#x573A;&#x666F;&#x4E0B;&#x9762;&#x4E34;&#x7684;&#x5206;&#x5E03;&#x5F0F;&#x4E8B;&#x52A1;&#x95EE;&#x9898;&#x3002;</p><p>&#x5177;&#x4F53;&#x770B; <a href="https://github.com/seata/seata" target="_blank" rel="noopener">Seata</a> &#x5B98;&#x7F51;&#xFF1A;</p><p><img src="https://camo.githubusercontent.com/b3a71332ae0a91db7f8616286a69b879fcbea672/68747470733a2f2f63646e2e6e6c61726b2e636f6d2f6c61726b2f302f323031382f706e672f31383836322f313534353239363739313037342d33626365376263652d303235652d343563332d393338362d3762393531333564616465382e706e67" alt="Seata solution"></p><p><strong>Seata&#x4E3B;&#x8981;&#x7531;&#x4E09;&#x4E2A;&#x91CD;&#x8981;&#x7EC4;&#x4EF6;&#x7EC4;&#x6210;&#xFF1A;</strong></p><ul><li>Transaction Coordinator(TC)&#xFF1A;&#x7BA1;&#x7406;&#x5168;&#x5C40;&#x7684;&#x5206;&#x652F;&#x4E8B;&#x52A1;&#x7684;&#x72B6;&#x6001;&#xFF0C;&#x7528;&#x4E8E;&#x5168;&#x5C40;&#x6027;&#x4E8B;&#x52A1;&#x7684;&#x63D0;&#x4EA4;&#x548C;&#x56DE;&#x6EDA;&#x3002;</li><li>Transaction Manager(TM)&#xFF1A;&#x4E8B;&#x52A1;&#x7BA1;&#x7406;&#x5668;&#xFF0C;&#x7528;&#x4E8E;&#x5F00;&#x542F;&#x5168;&#x5C40;&#x4E8B;&#x52A1;&#x3001;&#x63D0;&#x4EA4;&#x6216;&#x8005;&#x56DE;&#x6EDA;&#x5168;&#x5C40;&#x4E8B;&#x52A1;&#xFF0C;&#x662F;&#x5168;&#x5C40;&#x4E8B;&#x52A1;&#x7684;&#x5F00;&#x542F;&#x8005;&#x3002;</li><li>Resource Manager(RM)&#xFF1A;&#x8D44;&#x6E90;&#x7BA1;&#x7406;&#x5668;&#xFF0C;&#x7528;&#x4E8E;&#x5206;&#x652F;&#x4E8B;&#x52A1;&#x4E0A;&#x7684;&#x8D44;&#x6E90;&#x7BA1;&#x7406;&#xFF0C;&#x5411; TC &#x6CE8;&#x518C;&#x5206;&#x652F;&#x4E8B;&#x52A1;&#xFF0C;&#x4E0A;&#x62A5;&#x5206;&#x652F;&#x4E8B;&#x52A1;&#x7684;&#x72B6;&#x6001;&#xFF0C;&#x63A5;&#x53D7; TC &#x7684;&#x547D;&#x4EE4;&#x6765;&#x63D0;&#x4EA4;&#x6216;&#x8005;&#x56DE;&#x6EDA;&#x5206;&#x652F;&#x4E8B;&#x52A1;&#x3002;</li></ul><h2 id="Seata-&#x4E24;&#x79CD;&#x6A21;&#x5F0F;"><a href="#Seata-&#x4E24;&#x79CD;&#x6A21;&#x5F0F;" class="headerlink" title="Seata &#x4E24;&#x79CD;&#x6A21;&#x5F0F;"></a>Seata &#x4E24;&#x79CD;&#x6A21;&#x5F0F;</h2><p>Seata &#x5173;&#x6CE8;&#x7684;&#x5C31;&#x662F;&#x5FAE;&#x670D;&#x52A1;&#x67B6;&#x6784;&#x4E0B;&#x7684;&#x6570;&#x636E;&#x4E00;&#x81F4;&#x6027;&#x95EE;&#x9898;&#xFF0C;&#x662F;&#x4E00;&#x6574;&#x5957;&#x7684;&#x5206;&#x5E03;&#x5F0F;&#x4E8B;&#x52A1;&#x89E3;&#x51B3;&#x65B9;&#x6848;&#x3002;Seata &#x6846;&#x67B6;&#x5305;&#x542B;&#x4E24;&#x79CD;&#x6A21;&#x5F0F;&#xFF0C;&#x4E00;&#x79CD;&#x662F; AT &#x6A21;&#x5F0F;&#x3002;AT &#x6A21;&#x5F0F;&#x4E3B;&#x8981;&#x4ECE;&#x6570;&#x636E;&#x5206;&#x7247;&#x7684;&#x89D2;&#x5EA6;&#xFF0C;&#x5173;&#x6CE8;&#x591A; DB &#x8BBF;&#x95EE;&#x7684;&#x6570;&#x636E;&#x4E00;&#x81F4;&#x6027;&#xFF0C;&#x5F53;&#x7136;&#x4E5F;&#x5305;&#x62EC;&#x591A;&#x670D;&#x52A1;&#x4E0B;&#x7684;&#x591A; DB &#x6570;&#x636E;&#x8BBF;&#x95EE;&#x4E00;&#x81F4;&#x6027;&#x95EE;&#x9898;&#x3002;</p><p>&#x53E6;&#x5916;&#x4E00;&#x4E2A;&#x5C31;&#x662F; TCC &#x6A21;&#x5F0F;&#xFF0C;TCC &#x6A21;&#x5F0F;&#x4E3B;&#x8981;&#x5173;&#x6CE8;&#x4E1A;&#x52A1;&#x62C6;&#x5206;&#xFF0C;&#x5728;&#x6309;&#x7167;&#x4E1A;&#x52A1;&#x6A2A;&#x5411;&#x6269;&#x5C55;&#x8D44;&#x6E90;&#x65F6;&#xFF0C;&#x89E3;&#x51B3;&#x5FAE;&#x670D;&#x52A1;&#x95F4;&#x8C03;&#x7528;&#x7684;&#x4E00;&#x81F4;&#x6027;&#x95EE;&#x9898;&#xFF0C;&#x4FDD;&#x8BC1;&#x8BFB;&#x8D44;&#x6E90;&#x8BBF;&#x95EE;&#x7684;&#x4E8B;&#x52A1;&#x5C5E;&#x6027;&#x3002;</p><h3 id="AT-&#x6A21;&#x5F0F;"><a href="#AT-&#x6A21;&#x5F0F;" class="headerlink" title="AT &#x6A21;&#x5F0F;"></a>AT &#x6A21;&#x5F0F;</h3><p>AT &#x6A21;&#x5F0F;&#x662F;&#x901A;&#x8FC7;&#x4E24;&#x6BB5;&#x63D0;&#x4EA4;&#x7684;&#x65B9;&#x5F0F;&#x5B9E;&#x73B0;&#xFF0C;AT &#x6A21;&#x5F0F;&#x4E0B;&#xFF0C;&#x628A;&#x6BCF;&#x4E2A;&#x6570;&#x636E;&#x5E93;&#x88AB;&#x5F53;&#x505A;&#x662F;&#x4E00;&#x4E2A; Resource&#xFF0C;Seata &#x91CC;&#x79F0;&#x4E3A; DataSource Resource&#x3002;&#x4E1A;&#x52A1;&#x901A;&#x8FC7; JDBC &#x6807;&#x51C6;&#x63A5;&#x53E3;&#x8BBF;&#x95EE;&#x6570;&#x636E;&#x5E93;&#x8D44;&#x6E90;&#x65F6;&#xFF0C;Seata &#x6846;&#x67B6;&#x4F1A;&#x5BF9;&#x6240;&#x6709;&#x8BF7;&#x6C42;&#x8FDB;&#x884C;&#x62E6;&#x622A;&#xFF0C;&#x505A;&#x4E00;&#x4E9B;&#x64CD;&#x4F5C;&#x3002;&#x6BCF;&#x4E2A;&#x672C;&#x5730;&#x4E8B;&#x52A1;&#x63D0;&#x4EA4;&#x65F6;&#xFF0C;Seata RM&#xFF08;Resource Manager&#xFF0C;&#x8D44;&#x6E90;&#x7BA1;&#x7406;&#x5668;&#xFF09; &#x90FD;&#x4F1A;&#x5411; TC&#xFF08;Transaction Coordinator&#xFF0C;&#x4E8B;&#x52A1;&#x534F;&#x8C03;&#x5668;&#xFF09; &#x6CE8;&#x518C;&#x4E00;&#x4E2A;&#x5206;&#x652F;&#x4E8B;&#x52A1;&#x3002;&#x5F53;&#x8BF7;&#x6C42;&#x94FE;&#x8DEF;&#x8C03;&#x7528;&#x5B8C;&#x6210;&#x540E;&#xFF0C;&#x53D1;&#x8D77;&#x65B9;&#x901A;&#x77E5; TC &#x63D0;&#x4EA4;&#x6216;&#x56DE;&#x6EDA;&#x5206;&#x5E03;&#x5F0F;&#x4E8B;&#x52A1;&#xFF0C;&#x8FDB;&#x5165;&#x4E8C;&#x9636;&#x6BB5;&#x8C03;&#x7528;&#x6D41;&#x7A0B;&#x3002;&#x6B64;&#x65F6;&#xFF0C;TC &#x4F1A;&#x6839;&#x636E;&#x4E4B;&#x524D;&#x6CE8;&#x518C;&#x7684;&#x5206;&#x652F;&#x4E8B;&#x52A1;&#x56DE;&#x8C03;&#x5230;&#x5BF9;&#x5E94;&#x53C2;&#x4E0E;&#x8005;&#x53BB;&#x6267;&#x884C;&#x5BF9;&#x5E94;&#x8D44;&#x6E90;&#x7684;&#x7B2C;&#x4E8C;&#x9636;&#x6BB5;&#x3002;TC &#x662F;&#x600E;&#x4E48;&#x627E;&#x5230;&#x5206;&#x652F;&#x4E8B;&#x52A1;&#x4E0E;&#x8D44;&#x6E90;&#x7684;&#x5BF9;&#x5E94;&#x5173;&#x7CFB;&#x5462;&#xFF1F;&#x6BCF;&#x4E2A;&#x8D44;&#x6E90;&#x90FD;&#x6709;&#x4E00;&#x4E2A;&#x5168;&#x5C40;&#x552F;&#x4E00;&#x7684;&#x8D44;&#x6E90; ID&#xFF0C;&#x5E76;&#x4E14;&#x5728;&#x521D;&#x59CB;&#x5316;&#x65F6;&#x7528;&#x8BE5; ID &#x5411; TC &#x6CE8;&#x518C;&#x8D44;&#x6E90;&#x3002;&#x5728;&#x8FD0;&#x884C;&#x65F6;&#xFF0C;&#x6BCF;&#x4E2A;&#x5206;&#x652F;&#x4E8B;&#x52A1;&#x7684;&#x6CE8;&#x518C;&#x90FD;&#x4F1A;&#x5E26;&#x4E0A;&#x5176;&#x8D44;&#x6E90; ID&#x3002;&#x8FD9;&#x6837; TC &#x5C31;&#x80FD;&#x5728;&#x4E8C;&#x9636;&#x6BB5;&#x8C03;&#x7528;&#x65F6;&#x6B63;&#x786E;&#x627E;&#x5230;&#x5BF9;&#x5E94;&#x7684;&#x8D44;&#x6E90;&#x3002;</p><p>&#x8FD9;&#x5C31;&#x662F;&#x6211;&#x4EEC;&#x7684; AT &#x6A21;&#x5F0F;&#x3002;&#x7B80;&#x5355;&#x603B;&#x7ED3;&#x4E00;&#x4E0B;&#xFF0C;&#x5C31;&#x662F;&#x628A;&#x6BCF;&#x4E2A;&#x6570;&#x636E;&#x5E93;&#x5F53;&#x505A;&#x4E00;&#x4E2A; Resource&#xFF0C;&#x5728;&#x672C;&#x5730;&#x4E8B;&#x52A1;&#x63D0;&#x4EA4;&#x65F6;&#x4F1A;&#x53BB;&#x6CE8;&#x518C;&#x4E00;&#x4E2A;&#x5206;&#x652F;&#x4E8B;&#x52A1;&#x3002;</p><p>&#x8FD9;&#x79CD;&#x6A21;&#x5F0F;&#x662F;&#x5BF9;&#x4E1A;&#x52A1;&#x96F6;&#x5165;&#x4FB5;&#xFF0C;&#x5E76;&#x53D1;&#x6CA1;&#x90A3;&#x4E48;&#x9AD8;&#x3002;</p><h3 id="TCC-&#x6A21;&#x5F0F;"><a href="#TCC-&#x6A21;&#x5F0F;" class="headerlink" title="TCC &#x6A21;&#x5F0F;"></a>TCC &#x6A21;&#x5F0F;</h3><p><strong>TCC &#x6A21;&#x578B;&#x662F;&#x628A;&#x9501;&#x7684;&#x7C92;&#x5EA6;&#x5B8C;&#x5168;&#x4EA4;&#x7ED9;&#x4E1A;&#x52A1;&#x5904;&#x7406;&#xFF0C;&#x5B83;&#x9700;&#x8981;&#x6BCF;&#x4E2A;&#x5B50;&#x4E8B;&#x52A1;&#x4E1A;&#x52A1;&#x90FD;&#x5B9E;&#x73B0;Try-Confirm / Cancel &#x63A5;&#x53E3;&#x3002;</strong></p><blockquote><p>TCC &#x6A21;&#x5F0F;&#x672C;&#x8D28;&#x4E5F;&#x662F; 2PC &#xFF0C;&#x53EA;&#x662F; TCC &#x5728;&#x5E94;&#x7528;&#x5C42;&#x63A7;&#x5236;&#x3002;</p></blockquote><ul><li>Try:<ul><li>&#x5C1D;&#x8BD5;&#x6267;&#x884C;&#x4E1A;&#x52A1;</li><li>&#x5B8C;&#x6210;&#x6240;&#x6709;&#x4E1A;&#x52A1;&#x68C0;&#x67E5;&#xFF08;&#x4E00;&#x81F4;&#x6027;&#xFF09;</li><li>&#x9884;&#x7559;&#x5FC5;&#x987B;&#x4E1A;&#x52A1;&#x8D44;&#x6E90;&#xFF08;&#x51C6;&#x9694;&#x79BB;&#x6027;&#xFF09;</li></ul></li><li>Confirm:<ul><li>&#x786E;&#x8BA4;&#x6267;&#x884C;&#x4E1A;&#x52A1;&#xFF1B;</li><li>&#x771F;&#x6B63;&#x6267;&#x884C;&#x4E1A;&#x52A1;&#xFF0C;&#x4E0D;&#x4F5C;&#x4EFB;&#x4F55;&#x4E1A;&#x52A1;&#x68C0;&#x67E5;</li><li>&#x53EA;&#x4F7F;&#x7528;Try&#x9636;&#x6BB5;&#x9884;&#x7559;&#x7684;&#x4E1A;&#x52A1;&#x8D44;&#x6E90;</li><li>Confirm &#x64CD;&#x4F5C;&#x6EE1;&#x8DB3;&#x5E42;&#x7B49;&#x6027;</li></ul></li><li>Cancel:<ul><li>&#x53D6;&#x6D88;&#x6267;&#x884C;&#x4E1A;&#x52A1;</li><li>&#x91CA;&#x653E;Try&#x9636;&#x6BB5;&#x9884;&#x7559;&#x7684;&#x4E1A;&#x52A1;&#x8D44;&#x6E90;</li><li>Cancel&#x64CD;&#x4F5C;&#x6EE1;&#x8DB3;&#x5E42;&#x7B49;&#x6027;</li></ul></li></ul><p><strong>&#x8FD9;&#x4E09;&#x4E2A;&#x9636;&#x6BB5;&#xFF0C;&#x90FD;&#x4F1A;&#x6309;&#x672C;&#x5730;&#x4E8B;&#x52A1;&#x7684;&#x65B9;&#x5F0F;&#x6267;&#x884C;&#x3002;&#x4E0D;&#x540C;&#x4E8E; XA &#x7684; prepare &#xFF0C;TCC &#x65E0;&#x9700;&#x5C06; XA &#x7684;&#x6295;&#x7968;&#x671F;&#x95F4;&#x7684;&#x6240;&#x6709;&#x8D44;&#x6E90;&#x6302;&#x8D77;&#xFF0C;&#x56E0;&#x6B64;&#x6781;&#x5927;&#x7684;&#x63D0;&#x9AD8;&#x4E86;&#x541E;&#x5410;&#x91CF;&#x3002;</strong></p><p>&#x90A3;&#x4E48;&#x5BF9;&#x5E94;&#x5230; TCC &#x6A21;&#x5F0F;&#x91CC;&#xFF0C;&#x4E5F;&#x662F;&#x4E00;&#x6837;&#x7684;&#xFF0C;Seata &#x6846;&#x67B6;&#x628A;&#x6BCF;&#x7EC4; TCC &#x63A5;&#x53E3;&#x5F53;&#x505A;&#x4E00;&#x4E2A; Resource&#xFF0C;&#x79F0;&#x4E3A; TCC Resource&#x3002;&#x8FD9;&#x5957; TCC &#x63A5;&#x53E3;&#x53EF;&#x4EE5;&#x662F; RPC&#xFF0C;&#x4E5F;&#x4EE5;&#x662F;&#x670D;&#x52A1;&#x5185; JVM &#x8C03;&#x7528;&#x3002;&#x5728;&#x4E1A;&#x52A1;&#x542F;&#x52A8;&#x65F6;&#xFF0C;Seata &#x6846;&#x67B6;&#x4F1A;&#x81EA;&#x52A8;&#x626B;&#x63CF;&#x8BC6;&#x522B;&#x5230; TCC &#x63A5;&#x53E3;&#x7684;&#x8C03;&#x7528;&#x65B9;&#x548C;&#x53D1;&#x5E03;&#x65B9;&#x3002;&#x5982;&#x679C;&#x662F; RPC &#x7684;&#x8BDD;&#xFF0C;&#x5C31;&#x662F; sofa:reference&#x3001;sofa:service&#x3001;dubbo:reference&#x3001;dubbo:service &#x7B49;&#x3002;</p><p>&#x626B;&#x63CF;&#x5230; TCC &#x63A5;&#x53E3;&#x7684;&#x8C03;&#x7528;&#x65B9;&#x548C;&#x53D1;&#x5E03;&#x65B9;&#x4E4B;&#x540E;&#x3002;&#x5982;&#x679C;&#x662F;&#x53D1;&#x5E03;&#x65B9;&#xFF0C;&#x4F1A;&#x5728;&#x4E1A;&#x52A1;&#x542F;&#x52A8;&#x65F6;&#x5411; TC &#x6CE8;&#x518C; TCC Resource&#xFF0C;&#x4E0E; DataSource Resource &#x4E00;&#x6837;&#xFF0C;&#x6BCF;&#x4E2A;&#x8D44;&#x6E90;&#x4E5F;&#x4F1A;&#x5E26;&#x6709;&#x4E00;&#x4E2A;&#x8D44;&#x6E90; ID&#x3002;</p><p>&#x5982;&#x679C;&#x662F;&#x8C03;&#x7528;&#x65B9;&#xFF0C;Seata &#x6846;&#x67B6;&#x4F1A;&#x7ED9;&#x8C03;&#x7528;&#x65B9;&#x52A0;&#x4E0A;&#x5207;&#x9762;&#xFF0C;&#x4E0E; AT &#x6A21;&#x5F0F;&#x4E00;&#x6837;&#xFF0C;&#x5728;&#x8FD0;&#x884C;&#x65F6;&#xFF0C;&#x8BE5;&#x5207;&#x9762;&#x4F1A;&#x62E6;&#x622A;&#x6240;&#x6709;&#x5BF9; TCC &#x63A5;&#x53E3;&#x7684;&#x8C03;&#x7528;&#x3002;&#x6BCF;&#x8C03;&#x7528;&#x4E00;&#x6B21; Try &#x63A5;&#x53E3;&#xFF0C;&#x5207;&#x9762;&#x4F1A;&#x5148;&#x5411; TC &#x6CE8;&#x518C;&#x4E00;&#x4E2A;&#x5206;&#x652F;&#x4E8B;&#x52A1;&#xFF0C;&#x7136;&#x540E;&#x624D;&#x53BB;&#x6267;&#x884C;&#x539F;&#x6765;&#x7684; RPC &#x8C03;&#x7528;&#x3002;&#x5F53;&#x8BF7;&#x6C42;&#x94FE;&#x8DEF;&#x8C03;&#x7528;&#x5B8C;&#x6210;&#x540E;&#xFF0C;TC &#x901A;&#x8FC7;&#x5206;&#x652F;&#x4E8B;&#x52A1;&#x7684;&#x8D44;&#x6E90; ID &#x56DE;&#x8C03;&#x5230;&#x6B63;&#x786E;&#x7684;&#x53C2;&#x4E0E;&#x8005;&#x53BB;&#x6267;&#x884C;&#x5BF9;&#x5E94; TCC &#x8D44;&#x6E90;&#x7684; Confirm &#x6216; Cancel &#x65B9;&#x6CD5;&#x3002;</p><p>&#x5728;&#x8BB2;&#x5B8C;&#x4E86;&#x6574;&#x4E2A;&#x6846;&#x67B6;&#x6A21;&#x578B;&#x4EE5;&#x540E;&#xFF0C;&#x5927;&#x5BB6;&#x53EF;&#x80FD;&#x4F1A;&#x95EE; TCC &#x4E09;&#x4E2A;&#x63A5;&#x53E3;&#x600E;&#x4E48;&#x5B9E;&#x73B0;&#x3002;&#x56E0;&#x4E3A;&#x6846;&#x67B6;&#x672C;&#x8EAB;&#x5F88;&#x7B80;&#x5355;&#xFF0C;&#x4E3B;&#x8981;&#x662F;&#x626B;&#x63CF; TCC &#x63A5;&#x53E3;&#xFF0C;&#x6CE8;&#x518C;&#x8D44;&#x6E90;&#xFF0C;&#x62E6;&#x622A;&#x63A5;&#x53E3;&#x8C03;&#x7528;&#xFF0C;&#x6CE8;&#x518C;&#x5206;&#x652F;&#x4E8B;&#x52A1;&#xFF0C;&#x6700;&#x540E;&#x56DE;&#x8C03;&#x4E8C;&#x9636;&#x6BB5;&#x63A5;&#x53E3;&#x3002;&#x6700;&#x6838;&#x5FC3;&#x7684;&#x5B9E;&#x9645;&#x4E0A;&#x662F; TCC &#x63A5;&#x53E3;&#x7684;&#x5B9E;&#x73B0;&#x903B;&#x8F91;&#x3002;&#x4E0B;&#x9762;&#x6211;&#x5C06;&#x6839;&#x636E;&#x8682;&#x8681;&#x91D1;&#x670D;&#x5185;&#x90E8;&#x591A;&#x5E74;&#x7684;&#x5B9E;&#x8DF5;&#x6765;&#x4E3A;&#x5927;&#x5BB6;&#x5206;&#x6790;&#x600E;&#x4E48;&#x5B9E;&#x73B0;&#x4E00;&#x4E2A;&#x5B8C;&#x5907;&#x7684; TCC &#x63A5;&#x53E3;&#x3002;</p><h2 id="&#x8FD0;&#x884C;-Demo"><a href="#&#x8FD0;&#x884C;-Demo" class="headerlink" title="&#x8FD0;&#x884C; Demo"></a>&#x8FD0;&#x884C; Demo</h2><p><a href="https://github.com/seata/seata-samples" target="_blank" rel="noopener">&#x5B98;&#x65B9;Demo</a></p><p>&#x4E0B;&#x9762;&#x662F; dubbo &#x7684;&#x4F8B;&#x5B50;&#xFF0C;&#x8FD0;&#x884C;&#x540E;&#x62A5;&#x9519;&#x53EF;&#x4EE5;&#x770B;&#x5230;&#x56DE;&#x6EDA;&#x4FE1;&#x606F;&#xFF1A;</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">INFO [rpcDispatch_RMROLE_4_8] - onMessage:xid=10.116.22.63:8091:2016481020,branchId=2016481022,branchType=AT,resourceId=jdbc:mysql://localhost:3306/fescar_demo?serverTimezone=UTC,applicationData=null</span><br><span class="line"> INFO [rpcDispatch_RMROLE_4_8] - Branch Rollbacking: 10.116.22.63:8091:2016481020 2016481022 jdbc:mysql://localhost:3306/fescar_demo?serverTimezone=UTC</span><br><span class="line"> INFO [rpcDispatch_RMROLE_4_8] - xid 10.116.22.63:8091:2016481020 branch 2016481022, undo_log deleted with GlobalFinished</span><br><span class="line"> INFO [rpcDispatch_RMROLE_4_8] - Branch Rollbacked result: PhaseTwo_Rollbacked</span><br><span class="line">DEBUG [rpcDispatch_RMROLE_4_8] - branch rollback result:xid=10.116.22.63:8091:2016481020,branchId=2016481022,branchStatus=PhaseTwo_Rollbacked,result code =Success,getMsg =null</span><br><span class="line"> INFO [rpcDispatch_RMROLE_4_8] - RmRpcClient sendResponse xid=10.116.22.63:8091:2016481020,branchId=2016481022,branchStatus=PhaseTwo_Rollbacked,result code =Success,getMsg =null</span><br><span class="line">DEBUG [rpcDispatch_RMROLE_4_8] - send response:xid=10.116.22.63:8091:2016481020,branchId=2016481022,branchStatus=PhaseTwo_Rollbacked,result code =Success,getMsg =null,channel:[id: 0xc8027ef7, L:/127.0.0.1:62873 - R:/127.0.0.1:8091]</span><br></pre></td></tr></table></figure><p><strong>&#x6CE8;&#x610F;&#xFF1A;</strong></p><ul><li>&#x6570;&#x636E;&#x5E93;&#x9A71;&#x52A8;&#x4E0E; Mysql &#x7248;&#x672C;&#x4E00;&#x81F4;</li><li>&#x6570;&#x636E;&#x5E93; rul &#x6DFB;&#x52A0;&#x65F6;&#x533A; <code>jdbc.account.url=jdbc:mysql://localhost:3306/fescar_demo?serverTimezone=UTC</code></li></ul><h2 id="&#x53C2;&#x8003;&#x94FE;&#x63A5;"><a href="#&#x53C2;&#x8003;&#x94FE;&#x63A5;" class="headerlink" title="&#x53C2;&#x8003;&#x94FE;&#x63A5;"></a>&#x53C2;&#x8003;&#x94FE;&#x63A5;</h2><p><a href="https://mp.weixin.qq.com/s/Nb3qeOXXW1xa-qFr-uNi9g" target="_blank" rel="noopener">Seata AT &#x6A21;&#x5F0F;&#x5206;&#x5E03;&#x5F0F;&#x4E8B;&#x52A1;&#x6E90;&#x7801;&#x5206;&#x6790;</a></p><p><a href="https://mp.weixin.qq.com/s/G9vkficqBSpmtGITgsJPgw" target="_blank" rel="noopener">&#x5206;&#x5E03;&#x5F0F;&#x4E8B;&#x52A1; Seata TCC &#x6A21;&#x5F0F;&#x6DF1;&#x5EA6;&#x89E3;&#x6790;</a></p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h2 id=&quot;&amp;#x5206;&amp;#x5E03;&amp;#x5F0F;&amp;#x57FA;&amp;#x7840;&quot;&gt;&lt;a href=&quot;#&amp;#x5206;&amp;#x5E03;&amp;#x5F0F;&amp;#x57FA;&amp;#x7840;&quot; class=&quot;headerlink&quot; title=&quot;&amp;#x5206;&amp;#x5
      
    
    </summary>
    
      <category term="分布式" scheme="http://blog.cuzz.site/categories/%E5%88%86%E5%B8%83%E5%BC%8F/"/>
    
    
      <category term="Seata" scheme="http://blog.cuzz.site/tags/Seata/"/>
    
  </entry>
  
  <entry>
    <title>关于null的思考</title>
    <link href="http://blog.cuzz.site/2019/06/03/%E5%85%B3%E4%BA%8Enull%E7%9A%84%E6%80%9D%E8%80%83/"/>
    <id>http://blog.cuzz.site/2019/06/03/关于null的思考/</id>
    <published>2019-06-03T11:54:59.000Z</published>
    <updated>2019-08-12T12:03:26.852Z</updated>
    
    <content type="html"><![CDATA[<p>&#x5199;&#x4EE3;&#x7801;&#x7684;&#x65F6;&#x5019;&#x6709;&#x4E2A;&#x5730;&#x65B9;&#x9700;&#x8981;&#x628A; <code>Integer</code> &#x7C7B;&#x578B;&#x5F3A;&#x8F6C;&#x4E3A; <code>String</code></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">Integer firstEventType = eventTask.getEventType1();</span><br><span class="line">String firstEventTypeName = eventTypeService.queryDescByCode(String.valueOf(firstEventType));</span><br></pre></td></tr></table></figure><p>&#x5F53;&#x6211;&#x70B9;&#x5F00; <code>String#valueof</code> &#x8FD9;&#x4E2A;&#x9759;&#x6001;&#x65B9;&#x5F0F;&#x65F6;</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> String <span class="title">valueOf</span><span class="params">(Object obj)</span> </span>{</span><br><span class="line">    <span class="keyword">return</span> (obj == <span class="keyword">null</span>) ? <span class="string">&quot;null&quot;</span> : obj.toString();</span><br><span class="line">}</span><br></pre></td></tr></table></figure><p>&#x5F53;&#x6211;&#x4EEC;&#x6CA1;&#x6709;&#x83B7;&#x53D6;&#x5230; firstEventType &#x8FD9;&#x4E2A;&#x503C;&#x65F6;&#xFF0C;&#x4E3A; null&#xFF0C;&#x6B64;&#x65F6;&#x5B83;&#x8FD4;&#x56DE;&#x7ED9;&#x6211;&#x4EEC;&#x7684;&#x662F;&#x5B57;&#x7B26;&#x4E32; <strong>&#x201C;null&#x201D;</strong> &#xFF0C;&#x6709;&#x65F6;&#x5019;&#x5C31;&#x4E0D;&#x7B26;&#x5408;&#x6211;&#x4EEC;&#x7684;&#x4E1A;&#x52A1;&#x573A;&#x666F;&#xFF0C;&#x6700;&#x597D;&#x662F;&#x63D0;&#x524D;&#x505A;&#x7A7A;&#x503C;&#x5224;&#x65AD;&#x3002;</p><a id="more"></a> <p>&#x770B;&#x4E0B;&#x9762;&#x4E00;&#x4E2A;&#x4F8B;&#x5B50;</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">Integer i = <span class="keyword">null</span>;</span><br><span class="line">System.out.println(String.valueOf(i));    <span class="comment">// &#x8F93;&#x51FA; null</span></span><br><span class="line">System.out.println(String.valueOf(<span class="keyword">null</span>)); <span class="comment">// &#x7A7A;&#x6307;&#x9488;</span></span><br></pre></td></tr></table></figure><p><strong>&#x611F;&#x89C9;&#x5F88;&#x5947;&#x602A;&#xFF0C;&#x7ADF;&#x7136;&#x8F93;&#x51FA;&#x7ED3;&#x679C;&#x4E0D;&#x4E00;&#x6837;&#x3002;</strong></p><p>&#x770B;&#x770B;&#x8FD9;&#x4E24;&#x4E2A;&#x91CD;&#x8F7D;&#x65B9;&#x6CD5;</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> String <span class="title">valueOf</span><span class="params">(Object obj)</span> </span>{</span><br><span class="line">    <span class="keyword">return</span> (obj == <span class="keyword">null</span>) ? <span class="string">&quot;null&quot;</span> : obj.toString();</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> String <span class="title">valueOf</span><span class="params">(<span class="keyword">char</span> data[])</span> </span>{</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">new</span> String(data);</span><br><span class="line">}</span><br></pre></td></tr></table></figure><p>&#x51ED;&#x76F4;&#x89C9;&#x6765;&#x770B;&#x4EE5;&#x4E3A;<code>String.valueOf(null)</code> &#x4F1A;&#x9009;&#x62E9;&#x7B2C;&#x4E00;&#x505A;&#x4E3A; <code>valueOf(Object obj)</code> &#x8FD9;&#x4E2A;&#x4ECE;&#x8F7D;&#x65B9;&#x6CD5;&#xFF0C;&#x7136;&#x800C;&#x9009;&#x62E9;&#x7684;&#x662F;<code>valueOf(char data[])</code> &#x6240;&#x4EE5;&#x4F1A;&#x62A5;&#x7A7A;&#x6307;&#x9488;&#x5F02;&#x5E38;&#x3002;</p><p>&#x4E0B;&#x9762;&#x662F;&#x67E5;&#x5230;&#x5B98;&#x65B9;&#x6587;&#x6863; <a href="https://docs.oracle.com/javase/specs/jls/se7/html/jls-15.html#jls-15.12.2.5" target="_blank" rel="noopener">https://docs.oracle.com/javase/specs/jls/se7/html/jls-15.html#jls-15.12.2.5</a></p><blockquote><p>&#x5982;&#x679C;&#x7B2C;&#x4E00;&#x4E2A;&#x65B9;&#x6CD5;&#x5904;&#x7406;&#x7684;&#x4EFB;&#x4F55;&#x8C03;&#x7528;&#x90FD;&#x53EF;&#x4EE5;&#x4F20;&#x9012;&#x7ED9;&#x53E6;&#x4E00;&#x4E2A;&#x6CA1;&#x6709;&#x7F16;&#x8BD1;&#x65F6;&#x7C7B;&#x578B;&#x9519;&#x8BEF;&#x7684;&#x8C03;&#x7528;&#xFF0C;&#x90A3;&#x4E48;&#x4E00;&#x4E2A;&#x65B9;&#x6CD5;&#x6BD4;&#x53E6;&#x4E00;&#x4E2A;&#x65B9;&#x6CD5;&#x66F4;&#x5177;&#x4F53;&#x3002;</p></blockquote><p>&#x4ECE;&#x610F;&#x601D;&#x6765;&#x770B; <code>valueOf(char data[])</code> &#x6BD4; <code>valueOf(Object obj)</code> &#x66F4;&#x5177;&#x4F53;&#x3002;</p><p>&#x6211;&#x4EEC;&#x975E;&#x5E38;&#x75DB;&#x6068;&#x7684; null &#x5230;&#x5E95;&#x662F;&#x4EC0;&#x4E48;</p><p>Java &#x8BED;&#x8A00;&#x5B9A;&#x4E49;</p><blockquote><p>There is also a special null type, the type of the expression null, which has no name. Because the null type has no name, it is impossible to declare a variable of the null type or to cast to the null type. The null reference is the only possible value of an expression of null type. The null reference can always be cast to any reference type. <strong>In practice, the programmer can ignore the null type</strong> and just pretend that null is merely a special literal that can be of any reference type.</p></blockquote>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;&amp;#x5199;&amp;#x4EE3;&amp;#x7801;&amp;#x7684;&amp;#x65F6;&amp;#x5019;&amp;#x6709;&amp;#x4E2A;&amp;#x5730;&amp;#x65B9;&amp;#x9700;&amp;#x8981;&amp;#x628A; &lt;code&gt;Integer&lt;/code&gt; &amp;#x7C7B;&amp;#x578B;&amp;#x5F3A;&amp;#x8F6C;&amp;#x4E3A; &lt;code&gt;String&lt;/code&gt;&lt;/p&gt;
&lt;figure class=&quot;highlight java&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;Integer firstEventType = eventTask.getEventType1();&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;String firstEventTypeName = eventTypeService.queryDescByCode(String.valueOf(firstEventType));&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;&amp;#x5F53;&amp;#x6211;&amp;#x70B9;&amp;#x5F00; &lt;code&gt;String#valueof&lt;/code&gt; &amp;#x8FD9;&amp;#x4E2A;&amp;#x9759;&amp;#x6001;&amp;#x65B9;&amp;#x5F0F;&amp;#x65F6;&lt;/p&gt;
&lt;figure class=&quot;highlight java&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;function&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;static&lt;/span&gt; String &lt;span class=&quot;title&quot;&gt;valueOf&lt;/span&gt;&lt;span class=&quot;params&quot;&gt;(Object obj)&lt;/span&gt; &lt;/span&gt;{&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;return&lt;/span&gt; (obj == &lt;span class=&quot;keyword&quot;&gt;null&lt;/span&gt;) ? &lt;span class=&quot;string&quot;&gt;&amp;quot;null&amp;quot;&lt;/span&gt; : obj.toString();&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;}&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;&amp;#x5F53;&amp;#x6211;&amp;#x4EEC;&amp;#x6CA1;&amp;#x6709;&amp;#x83B7;&amp;#x53D6;&amp;#x5230; firstEventType &amp;#x8FD9;&amp;#x4E2A;&amp;#x503C;&amp;#x65F6;&amp;#xFF0C;&amp;#x4E3A; null&amp;#xFF0C;&amp;#x6B64;&amp;#x65F6;&amp;#x5B83;&amp;#x8FD4;&amp;#x56DE;&amp;#x7ED9;&amp;#x6211;&amp;#x4EEC;&amp;#x7684;&amp;#x662F;&amp;#x5B57;&amp;#x7B26;&amp;#x4E32; &lt;strong&gt;&amp;#x201C;null&amp;#x201D;&lt;/strong&gt; &amp;#xFF0C;&amp;#x6709;&amp;#x65F6;&amp;#x5019;&amp;#x5C31;&amp;#x4E0D;&amp;#x7B26;&amp;#x5408;&amp;#x6211;&amp;#x4EEC;&amp;#x7684;&amp;#x4E1A;&amp;#x52A1;&amp;#x573A;&amp;#x666F;&amp;#xFF0C;&amp;#x6700;&amp;#x597D;&amp;#x662F;&amp;#x63D0;&amp;#x524D;&amp;#x505A;&amp;#x7A7A;&amp;#x503C;&amp;#x5224;&amp;#x65AD;&amp;#x3002;&lt;/p&gt;
    
    </summary>
    
      <category term="Java 基础" scheme="http://blog.cuzz.site/categories/Java-%E5%9F%BA%E7%A1%80/"/>
    
    
  </entry>
  
  <entry>
    <title>JVM 面试</title>
    <link href="http://blog.cuzz.site/2019/05/10/JVM%E9%9D%A2%E8%AF%95/"/>
    <id>http://blog.cuzz.site/2019/05/10/JVM面试/</id>
    <published>2019-05-10T15:29:22.000Z</published>
    <updated>2019-08-12T12:03:26.842Z</updated>
    
    <content type="html"><![CDATA[<h2 id="JVM-&#x5783;&#x573E;&#x56DE;&#x6536;&#x7684;&#x65F6;&#x5019;&#x5982;&#x4F55;&#x786E;&#x5B9A;&#x5783;&#x573E;&#xFF1F;&#x77E5;&#x9053;&#x4EC0;&#x4E48;&#x662F;-GC-Roots"><a href="#JVM-&#x5783;&#x573E;&#x56DE;&#x6536;&#x7684;&#x65F6;&#x5019;&#x5982;&#x4F55;&#x786E;&#x5B9A;&#x5783;&#x573E;&#xFF1F;&#x77E5;&#x9053;&#x4EC0;&#x4E48;&#x662F;-GC-Roots" class="headerlink" title="JVM &#x5783;&#x573E;&#x56DE;&#x6536;&#x7684;&#x65F6;&#x5019;&#x5982;&#x4F55;&#x786E;&#x5B9A;&#x5783;&#x573E;&#xFF1F;&#x77E5;&#x9053;&#x4EC0;&#x4E48;&#x662F; GC Roots ?"></a>JVM &#x5783;&#x573E;&#x56DE;&#x6536;&#x7684;&#x65F6;&#x5019;&#x5982;&#x4F55;&#x786E;&#x5B9A;&#x5783;&#x573E;&#xFF1F;&#x77E5;&#x9053;&#x4EC0;&#x4E48;&#x662F; GC Roots ?</h2><ul><li>&#x4EC0;&#x4E48;&#x662F;&#x5783;&#x573E;<ul><li>&#x7B80;&#x5355;&#x6765;&#x8BF4;&#x5C31;&#x662F;&#x5185;&#x5B58;&#x4E2D;&#x5DF2;&#x7ECF;&#x4E0D;&#x5728;&#x88AB;&#x4F7F;&#x7528;&#x5230;&#x7684;&#x7A7A;&#x95F4;&#x5C31;&#x662F;&#x5783;&#x573E;</li></ul></li><li>&#x8981;&#x8FDB;&#x884C;&#x5783;&#x573E;&#x56DE;&#x6536;&#xFF0C;&#x5982;&#x4F55;&#x5224;&#x65AD;&#x4E00;&#x4E2A;&#x5BF9;&#x8C61;&#x662F;&#x5426;&#x53EF;&#x4EE5;&#x88AB;&#x56DE;&#x6536;&#xFF1F;<ul><li>&#x5F15;&#x7528;&#x8BA1;&#x6570;&#x6CD5;</li><li>&#x679A;&#x4E3E;&#x6839;&#x8282;&#x70B9;&#x505A;&#x53EF;&#x8FBE;&#x6027;&#x5206;&#x6790;</li></ul></li></ul><p>&#x4E3A;&#x4E86;&#x89E3;&#x51B3;&#x5F15;&#x7528;&#x8BA1;&#x6570;&#x6CD5;&#x7684;&#x5FAA;&#x73AF;&#x5F15;&#x7528;&#x95EE;&#x9898;&#xFF0C;Java &#x4F7F;&#x7528;&#x4E86;&#x53EF;&#x8FBE;&#x6027;&#x7B97;&#x6CD5;&#x3002;</p><p><img src="/2019/05/10/JVM&#x9762;&#x8BD5;/1350633405_4538.jpg" alt="img"></p><p>&#x8DDF;&#x8E2A;&#x6536;&#x96C6;&#x5668;&#x91C7;&#x7528;&#x7684;&#x4E3A;&#x96C6;&#x4E2D;&#x5F0F;&#x7684;&#x7BA1;&#x7406;&#x65B9;&#x5F0F;&#xFF0C;&#x5168;&#x5C40;&#x8BB0;&#x5F55;&#x5BF9;&#x8C61;&#x4E4B;&#x95F4;&#x7684;&#x5F15;&#x7528;&#x72B6;&#x6001;&#xFF0C;&#x6267;&#x884C;&#x65F6;&#x4ECE;&#x4E00;&#x4E9B;&#x5217;GC  Roots&#x7684;&#x5BF9;&#x8C61;&#x505A;&#x4E3A;&#x8D77;&#x70B9;&#xFF0C;&#x4ECE;&#x8FD9;&#x4E9B;&#x8282;&#x70B9;&#x5411;&#x4E0B;&#x5F00;&#x59CB;&#x8FDB;&#x884C;&#x641C;&#x7D22;&#x6240;&#x6709;&#x7684;&#x5F15;&#x7528;&#x94FE;&#xFF0C;&#x5F53;&#x4E00;&#x4E2A;&#x5BF9;&#x8C61;&#x5230;GC  Roots &#x6CA1;&#x6709;&#x4EFB;&#x4F55;&#x5F15;&#x7528;&#x94FE;&#x65F6;&#xFF0C;&#x5219;&#x8BC1;&#x660E;&#x6B64;&#x5BF9;&#x8C61;&#x662F;&#x4E0D;&#x53EF;&#x7528;&#x7684;&#x3002;</p><p>&#x56FE;&#x4E2D;&#xFF0C;&#x5BF9;&#x8C61;Object6&#x3001;Object7&#x3001;Object8&#x867D;&#x7136;&#x4E92;&#x76F8;&#x5F15;&#x7528;&#xFF0C;&#x4F46;&#x4ED6;&#x4EEC;&#x7684;GC Roots&#x662F;&#x4E0D;&#x53EF;&#x5230;&#x8FBE;&#x7684;&#xFF0C;&#x6240;&#x4EE5;&#x5B83;&#x4EEC;&#x5C06;&#x4F1A;&#x88AB;&#x5224;&#x5B9A;&#x4E3A;&#x662F;&#x53EF;&#x56DE;&#x6536;&#x7684;&#x5BF9;&#x8C61;&#x3002;</p><p>&#x54EA;&#x4E9B;&#x5BF9;&#x8C61;&#x53EF;&#x4EE5;&#x4F5C;&#x4E3A; GC Roots &#x7684;&#x5BF9;&#x8C61;&#xFF1A;</p><ul><li>&#x865A;&#x62DF;&#x673A;&#x6808;&#xFF08;&#x6808;&#x5E27;&#x4E2D;&#x7684;&#x5C40;&#x90E8;&#x53D8;&#x91CF;&#x533A;&#xFF0C;&#x4E5F;&#x53EB;&#x5C40;&#x90E8;&#x53D8;&#x91CF;&#x8868;&#xFF09;&#x4E2D;&#x5F15;&#x7528;&#x7684;&#x5BF9;&#x8C61;</li><li>&#x65B9;&#x6CD5;&#x533A;&#x4E2D;&#x7684;&#x7C7B;&#x9759;&#x6001;&#x5C5E;&#x6027;&#x5F15;&#x7528;&#x7684;&#x5BF9;&#x8C61;</li><li>&#x65B9;&#x6CD5;&#x53BB;&#x5E38;&#x91CF;&#x5F15;&#x7528;&#x7684;&#x5BF9;&#x8C61;</li><li>&#x672C;&#x5730;&#x65B9;&#x6CD5;&#x6808;&#x4E2D; JNI (Native&#x65B9;&#x6CD5;)&#x5F15;&#x7528;&#x7684;&#x5BF9;&#x8C61;</li></ul><h2 id="&#x4F60;&#x8BF4;&#x4F60;&#x505A;&#x8FC7;-JVM-&#x8C03;&#x4F18;&#x548C;&#x53C2;&#x6570;&#x914D;&#x7F6E;&#xFF0C;&#x8BF7;&#x95EE;&#x5982;&#x679C;&#x76D8;&#x70B9;&#x67E5;&#x770B;-JVM-&#x7CFB;&#x7EDF;&#x9ED8;&#x8BA4;&#x503C;&#xFF1F;"><a href="#&#x4F60;&#x8BF4;&#x4F60;&#x505A;&#x8FC7;-JVM-&#x8C03;&#x4F18;&#x548C;&#x53C2;&#x6570;&#x914D;&#x7F6E;&#xFF0C;&#x8BF7;&#x95EE;&#x5982;&#x679C;&#x76D8;&#x70B9;&#x67E5;&#x770B;-JVM-&#x7CFB;&#x7EDF;&#x9ED8;&#x8BA4;&#x503C;&#xFF1F;" class="headerlink" title="&#x4F60;&#x8BF4;&#x4F60;&#x505A;&#x8FC7; JVM &#x8C03;&#x4F18;&#x548C;&#x53C2;&#x6570;&#x914D;&#x7F6E;&#xFF0C;&#x8BF7;&#x95EE;&#x5982;&#x679C;&#x76D8;&#x70B9;&#x67E5;&#x770B; JVM &#x7CFB;&#x7EDF;&#x9ED8;&#x8BA4;&#x503C;&#xFF1F;"></a>&#x4F60;&#x8BF4;&#x4F60;&#x505A;&#x8FC7; JVM &#x8C03;&#x4F18;&#x548C;&#x53C2;&#x6570;&#x914D;&#x7F6E;&#xFF0C;&#x8BF7;&#x95EE;&#x5982;&#x679C;&#x76D8;&#x70B9;&#x67E5;&#x770B; JVM &#x7CFB;&#x7EDF;&#x9ED8;&#x8BA4;&#x503C;&#xFF1F;</h2><h3 id="JVM-&#x7684;&#x53C2;&#x6570;&#x7C7B;&#x578B;"><a href="#JVM-&#x7684;&#x53C2;&#x6570;&#x7C7B;&#x578B;" class="headerlink" title="JVM &#x7684;&#x53C2;&#x6570;&#x7C7B;&#x578B;"></a>JVM &#x7684;&#x53C2;&#x6570;&#x7C7B;&#x578B;</h3><ul><li>&#x6807;&#x914D;&#x53C2;&#x6570;<ul><li>-version</li><li>-help </li></ul></li><li>X &#x53C2;&#x6570;&#xFF08;&#x4E86;&#x89E3;&#xFF09;<ul><li>-Xint&#xFF1A;&#x89E3;&#x91CA;&#x6267;&#x884C;</li><li>-Xcomp&#xFF1A;&#x7B2C;&#x4E00;&#x6B21;&#x4F7F;&#x7528;&#x5C31;&#x7F16;&#x8BD1;&#x6210;&#x672C;&#x5730;&#x4EE3;&#x7801;</li><li>-Xmixed&#xFF1A;&#x6DF7;&#x5408;&#x6A21;&#x5F0F;</li></ul></li><li><p>XX &#x53C2;&#x6570;</p><ul><li>Boolean &#x7C7B;&#x578B;&#xFF1A;-XX&#xFF1A;+ &#x6216;&#x8005; - &#x67D0;&#x4E2A;&#x5C5E;&#x6027;&#x503C;&#xFF08;+ &#x8868;&#x793A;&#x5F00;&#x542F;&#xFF0C;- &#x8868;&#x793A;&#x5173;&#x95ED;&#xFF09;<ul><li>-XX:+PrintGCDetails&#xFF1A;&#x6253;&#x5370; GC &#x6536;&#x96C6;&#x7EC6;&#x8282;</li><li>-XX:-PrintGCDetails&#xFF1A;&#x4E0D;&#x6253;&#x5370; GC &#x6536;&#x96C6;&#x7EC6;&#x8282;</li><li>-XX:+UseSerialGC&#xFF1A;&#x4F7F;&#x7528;&#x4E86;&#x4E32;&#x884C;&#x6536;&#x96C6;&#x5668;</li><li>-XX:-UseSerialGC&#xFF1A;&#x4E0D;&#x4F7F;&#x7528;&#x4E86;&#x4E32;&#x884C;&#x6536;&#x96C6;&#x5668;</li></ul></li><li>KV &#x8BBE;&#x7F6E;&#x7C7B;&#x578B;&#xFF1A;-XX:key=value<ul><li>-XX:MetaspaceSize=128m</li><li>-XX:MaxTenuringThreshold=15</li></ul></li><li><p>jinfo &#x4E3E;&#x4F8B;&#xFF0C;&#x5982;&#x4F55;&#x67E5;&#x770B;&#x5F53;&#x524D;&#x8FD0;&#x884C;&#x7A0B;&#x5E8F;&#x7684;&#x914D;&#x7F6E;</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">HelloGC</span> </span>{</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>{</span><br><span class="line">        System.out.println(<span class="string">&quot;hello GC...&quot;</span>);</span><br><span class="line">        <span class="keyword">try</span> {</span><br><span class="line">            Thread.sleep(Integer.MAX_VALUE);</span><br><span class="line">        } <span class="keyword">catch</span> (InterruptedException e) {</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        }</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></table></figure><p>&#x6211;&#x4EEC;&#x53EF;&#x4EE5;&#x4F7F;&#x7528; <code>jps -l</code> &#x547D;&#x4EE4;&#xFF0C;&#x67E5;&#x51FA;&#x8FDB;&#x7A0B; id</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">1923 org.jetbrains.jps.cmdline.Launcher</span><br><span class="line">1988 sun.tools.jps.Jps</span><br><span class="line">1173 org.jetbrains.kotlin.daemon.KotlinCompileDaemon</span><br><span class="line">32077 com.intellij.idea.Main</span><br><span class="line">1933 com.cuzz.jvm.HelloGC</span><br><span class="line">32382 org.jetbrains.idea.maven.server.RemoteMavenServer</span><br></pre></td></tr></table></figure><p>&#x5728;&#x4F7F;&#x7528; <code>jinfo -flag PrintGCDetails 1933</code> &#x547D;&#x4EE4;&#x67E5;&#x770B;</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">-XX:-PrintGCDetails</span><br></pre></td></tr></table></figure><p>&#x53EF;&#x4EE5;&#x770B;&#x51FA;&#x9ED8;&#x8BA4;&#x662F;&#x4E0D;&#x6253;&#x5370; GC &#x6536;&#x96C6;&#x7EC6;&#x8282;<br>&#x4E5F;&#x53EF;&#x662F;&#x4F7F;&#x7528;<code>jinfo -flags 1933</code> &#x67E5;&#x770B;&#x6240;&#x4EE5;&#x7684;&#x53C2;&#x6570;</p></li><li>&#x4E24;&#x4E2A;&#x7ECF;&#x5178;&#x53C2;&#x6570;&#xFF1A;-Xms &#x548C; - Xmx&#xFF08;&#x5982; -Xms1024m&#xFF09;<ul><li>-Xms &#x7B49;&#x4EF7;&#x4E8E; -XX:InitialHeapSize</li><li>-Xmx &#x7B49;&#x4EF7;&#x4E8E; -XX:MaxHeapSize</li></ul></li></ul></li></ul><h3 id="&#x76D8;&#x70B9;&#x5BB6;&#x5E95;&#x67E5;&#x770B;-JVM-&#x9ED8;&#x8BA4;&#x503C;"><a href="#&#x76D8;&#x70B9;&#x5BB6;&#x5E95;&#x67E5;&#x770B;-JVM-&#x9ED8;&#x8BA4;&#x503C;" class="headerlink" title="&#x76D8;&#x70B9;&#x5BB6;&#x5E95;&#x67E5;&#x770B; JVM &#x9ED8;&#x8BA4;&#x503C;"></a>&#x76D8;&#x70B9;&#x5BB6;&#x5E95;&#x67E5;&#x770B; JVM &#x9ED8;&#x8BA4;&#x503C;</h3><ul><li><p>&#x67E5;&#x770B;&#x521D;&#x59CB;&#x9ED8;&#x8BA4;&#x503C;&#xFF1A;-XX:+PrintFlagsInitial</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">cuzz@cuzz-pc:~/Project/demo$ java -XX:+PrintFlagsInitial</span><br><span class="line">[Global flags]</span><br><span class="line">     intx ActiveProcessorCount                      = -1                                  {product}</span><br><span class="line">    uintx AdaptiveSizeDecrementScaleFactor          = 4                                   {product}</span><br><span class="line">    uintx AdaptiveSizeMajorGCDecayTimeScale         = 10                                  {product}</span><br><span class="line">    uintx AdaptiveSizePausePolicy                   = 0                                   {product}</span><br><span class="line">    uintx AdaptiveSizePolicyCollectionCostMargin    = 50                                  {product}</span><br><span class="line">    uintx AdaptiveSizePolicyInitializingSteps       = 20                                  {product}</span><br><span class="line">    uintx AdaptiveSizePolicyOutputInterval          = 0                                   {product}</span><br><span class="line">    uintx AdaptiveSizePolicyWeight                  = 10                                  {product}</span><br><span class="line">   ...</span><br></pre></td></tr></table></figure></li><li><p>&#x67E5;&#x770B;&#x4FEE;&#x6539;&#x66F4;&#x65B0;&#xFF1A;-XX:+PrintFlagsFinal</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">bool UsePSAdaptiveSurvivorSizePolicy           = true                                {product}</span><br><span class="line">bool UseParNewGC                               = false                               {product}</span><br><span class="line">bool UseParallelGC                            := true                                {product}</span><br><span class="line">bool UseParallelOldGC                          = true                                {product}</span><br><span class="line">bool UsePerfData                               = true                                {product}</span><br><span class="line">bool UsePopCountInstruction                    = true                                {product}</span><br><span class="line">bool UseRDPCForConstantTableBase               = false                               {C2 product}</span><br></pre></td></tr></table></figure><p>= &#x4E0E; := &#x7684;&#x533A;&#x522B;&#x662F;&#xFF0C;&#x4E00;&#x4E2A;&#x662F;&#x9ED8;&#x8BA4;&#xFF0C;&#x4E00;&#x4E2A;&#x662F;&#x4EBA;&#x7269;&#x6539;&#x53D8;&#x6216;&#x8005; jvm &#x52A0;&#x8F7D;&#x65F6;&#x6539;&#x53D8;&#x7684;&#x53C2;&#x6570;</p></li><li>&#x6253;&#x5370;&#x547D;&#x4EE4;&#x884C;&#x53C2;&#x6570;(&#x53EF;&#x4EE5;&#x770B;&#x9ED8;&#x8BA4;&#x5783;&#x573E;&#x56DE;&#x6536;&#x5668;)&#xFF1A;-XX:+PrintCommandLineFlags<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">cuzz@cuzz-pc:~/Project/demo$ java -XX:+PrintCommandLineFlags</span><br><span class="line">-XX:InitialHeapSize=128789376 -XX:MaxHeapSize=2060630016 -XX:+PrintCommandLineFlags -XX:+UseCompressedClassPointers -XX:+UseCompressedOops -XX:+UseParallelGC</span><br></pre></td></tr></table></figure></li></ul><h2 id="&#x4F60;&#x5E73;&#x65F6;&#x5DE5;&#x4F5C;&#x7528;&#x8FC7;&#x7684;-JVM-&#x5E38;&#x7528;&#x7684;&#x57FA;&#x672C;&#x914D;&#x7F6E;&#x53C2;&#x6570;&#x6709;&#x54EA;&#x4E9B;&#xFF1F;"><a href="#&#x4F60;&#x5E73;&#x65F6;&#x5DE5;&#x4F5C;&#x7528;&#x8FC7;&#x7684;-JVM-&#x5E38;&#x7528;&#x7684;&#x57FA;&#x672C;&#x914D;&#x7F6E;&#x53C2;&#x6570;&#x6709;&#x54EA;&#x4E9B;&#xFF1F;" class="headerlink" title="&#x4F60;&#x5E73;&#x65F6;&#x5DE5;&#x4F5C;&#x7528;&#x8FC7;&#x7684; JVM &#x5E38;&#x7528;&#x7684;&#x57FA;&#x672C;&#x914D;&#x7F6E;&#x53C2;&#x6570;&#x6709;&#x54EA;&#x4E9B;&#xFF1F;"></a>&#x4F60;&#x5E73;&#x65F6;&#x5DE5;&#x4F5C;&#x7528;&#x8FC7;&#x7684; JVM &#x5E38;&#x7528;&#x7684;&#x57FA;&#x672C;&#x914D;&#x7F6E;&#x53C2;&#x6570;&#x6709;&#x54EA;&#x4E9B;&#xFF1F;</h2><ul><li>-Xms<ul><li>&#x521D;&#x59CB;&#x5927;&#x5C0F;&#x5185;&#x5B58;&#xFF0C;&#x9ED8;&#x8BA4;&#x4E3A;&#x7269;&#x7406;&#x5185;&#x5B58; 1/64</li><li>&#x7B49;&#x4EF7;&#x4E8E; -XX:InitialHeapSize</li></ul></li><li>-Xmx<ul><li>&#x6700;&#x5927;&#x5206;&#x914D;&#x5185;&#x5B58;&#xFF0C;&#x9ED8;&#x8BA4;&#x4E3A;&#x7269;&#x7406;&#x5185;&#x5B58;&#x7684; 1/4</li><li>&#x7B49;&#x4EF7;&#x4E8E; -XX:MaxHeapSize</li></ul></li><li>-Xss<ul><li>&#x8BBE;&#x7F6E;&#x5355;&#x4E2A;&#x7EBF;&#x7A0B;&#x6808;&#x7684;&#x5927;&#x5C0F;&#xFF0C;&#x4E00;&#x822C;&#x9ED8;&#x8BA4;&#x4E3A; 512-1024k</li><li>&#x7B49;&#x4EF7;&#x4E8E; -XX:ThreadStackSize</li></ul></li><li>-Xmn<ul><li>&#x8BBE;&#x7F6E;&#x5E74;&#x8F7B;&#x4EE3;&#x7684;&#x5927;&#x5C0F;</li><li><strong>&#x6574;&#x4E2A;JVM&#x5185;&#x5B58;&#x5927;&#x5C0F;=&#x5E74;&#x8F7B;&#x4EE3;&#x5927;&#x5C0F; + &#x5E74;&#x8001;&#x4EE3;&#x5927;&#x5C0F; + &#x6301;&#x4E45;&#x4EE3;&#x5927;&#x5C0F;</strong>&#xFF0C;&#x6301;&#x4E45;&#x4EE3;&#x4E00;&#x822C;&#x56FA;&#x5B9A;&#x5927;&#x5C0F;&#x4E3A;64m&#xFF0C;&#x6240;&#x4EE5;&#x589E;&#x5927;&#x5E74;&#x8F7B;&#x4EE3;&#x540E;&#xFF0C;&#x5C06;&#x4F1A;&#x51CF;&#x5C0F;&#x5E74;&#x8001;&#x4EE3;&#x5927;&#x5C0F;&#x3002;&#x6B64;&#x503C;&#x5BF9;&#x7CFB;&#x7EDF;&#x6027;&#x80FD;&#x5F71;&#x54CD;&#x8F83;&#x5927;&#xFF0C;Sun&#x5B98;&#x65B9;&#x63A8;&#x8350;&#x914D;&#x7F6E;&#x4E3A;&#x6574;&#x4E2A;&#x5806;&#x7684;3/8&#x3002;</li></ul></li><li>-XX:MetaspaceSize<ul><li>&#x8BBE;&#x7F6E;&#x5143;&#x7A7A;&#x95F4;&#x5927;&#x5C0F;&#xFF08;&#x5143;&#x7A7A;&#x95F4;&#x7684;&#x672C;&#x8D28;&#x548C;&#x6C38;&#x4E45;&#x4EE3;&#x7C7B;&#x4F3C;&#xFF0C;&#x90FD;&#x662F;&#x5BF9; JVM &#x89C4;&#x8303;&#x4E2D;&#x7684;&#x65B9;&#x6CD5;&#x533A;&#x7684;&#x5B9E;&#x73B0;&#xFF0C;&#x4E0D;&#x8FC7;&#x5143;&#x7A7A;&#x95F4;&#x4E8E;&#x6C38;&#x4E45;&#x4EE3;&#x4E4B;&#x95F4;&#x6700;&#x5927;&#x533A;&#x522B;&#x5728;&#x4E8E;&#xFF0C;<strong>&#x5143;&#x7A7A;&#x95F4;&#x5E76;&#x4E0D;&#x5728;&#x865A;&#x62DF;&#x4E2D;&#xFF0C;&#x800C;&#x662F;&#x4F7F;&#x7528;&#x672C;&#x5730;&#x5185;&#x5B58;</strong>&#xFF0C;&#x56E0;&#x6B64;&#x9ED8;&#x8BA4;&#x60C5;&#x51B5;&#x4E0B;&#xFF0C;&#x5143;&#x7A7A;&#x95F4;&#x7684;&#x5927;&#x5C0F;&#x4EC5;&#x53D7;&#x672C;&#x5730;&#x5185;&#x5B58;&#x9650;&#x5236;&#xFF09;</li><li>&#x5143;&#x7A7A;&#x95F4;&#x9ED8;&#x8BA4;&#x6BD4;&#x8F83;&#x5C0F;&#xFF0C;&#x6211;&#x4EEC;&#x53EF;&#x4EE5;&#x8C03;&#x5927;&#x4E00;&#x70B9;</li></ul></li><li><p>-XX:+PrintGCDetails</p><ul><li><p>&#x8F93;&#x51FA;&#x8BE6;&#x7EC6; GC &#x6536;&#x96C6;&#x65E5;&#x5FD7;&#x4FE1;&#x606F;</p><ul><li>&#x8BBE;&#x7F6E; JVM &#x53C2;&#x6570;&#x4E3A;&#xFF1A; -Xms10m -Xmx10m -XX:+PrintGCDetails</li><li><p>&#x4EE3;&#x7801;</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">public class HelloGC {</span><br><span class="line">    public static void main(String[] args) {</span><br><span class="line">        byte[] bytes = new byte[20 * 1024 * 1024];</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></table></figure></li><li><p>&#x6253;&#x5370;&#x7ED3;&#x679C;</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">[GC (Allocation Failure) [PSYoungGen: 1231K-&gt;448K(2560K)] 1231K-&gt;456K(9728K), 0.0015616 secs] [Times: user=0.00 sys=0.00, real=0.00 secs] </span><br><span class="line">[GC (Allocation Failure) [PSYoungGen: 448K-&gt;384K(2560K)] 456K-&gt;392K(9728K), 0.0016999 secs] [Times: user=0.00 sys=0.00, real=0.00 secs] </span><br><span class="line">[Full GC (Allocation Failure) [PSYoungGen: 384K-&gt;0K(2560K)] [ParOldGen: 8K-&gt;358K(7168K)] 392K-&gt;358K(9728K), [Metaspace: 3028K-&gt;3028K(1056768K)], 0.0066696 secs] [Times: user=0.01 sys=0.00, real=0.01 secs] </span><br><span class="line">[GC (Allocation Failure) [PSYoungGen: 0K-&gt;0K(2560K)] 358K-&gt;358K(9728K), 0.0005321 secs] [Times: user=0.00 sys=0.00, real=0.00 secs] </span><br><span class="line">[Full GC (Allocation Failure) [PSYoungGen: 0K-&gt;0K(2560K)] [ParOldGen: 358K-&gt;340K(7168K)] 358K-&gt;340K(9728K), [Metaspace: 3028K-&gt;3028K(1056768K)], 0.0051543 secs] [Times: user=0.01 sys=0.00, real=0.01 secs] </span><br><span class="line">Heap</span><br><span class="line"> PSYoungGen      total 2560K, used 81K [0x00000000ffd00000, 0x0000000100000000, 0x0000000100000000)</span><br><span class="line">  eden space 2048K, 3% used [0x00000000ffd00000,0x00000000ffd14668,0x00000000fff00000)</span><br><span class="line">  from space 512K, 0% used [0x00000000fff00000,0x00000000fff00000,0x00000000fff80000)</span><br><span class="line">  to   space 512K, 0% used [0x00000000fff80000,0x00000000fff80000,0x0000000100000000)</span><br><span class="line"> ParOldGen       total 7168K, used 340K [0x00000000ff600000, 0x00000000ffd00000, 0x00000000ffd00000)</span><br><span class="line">  object space 7168K, 4% used [0x00000000ff600000,0x00000000ff655188,0x00000000ffd00000)</span><br><span class="line"> Metaspace       used 3060K, capacity 4496K, committed 4864K, reserved 1056768K</span><br><span class="line">  class space    used 336K, capacity 388K, committed 512K, reserved 1048576K</span><br><span class="line">Exception in thread &quot;main&quot; java.lang.OutOfMemoryError: Java heap space</span><br><span class="line">at com.cuzz.jvm.HelloGC.main(HelloGC.java:12)</span><br></pre></td></tr></table></figure></li></ul></li><li><p>GC<br><img src="/2019/05/10/JVM&#x9762;&#x8BD5;/a9a0eb99b30cf3fd8973f464eb4678bf50f760cc.jpg" alt="img"></p></li><li>FullGC<br><img src="/2019/05/10/JVM&#x9762;&#x8BD5;/e04f3f3b68cff61027e5ba8eba9613bb7c69a08a.jpg" alt="img"></li></ul></li><li>-XX:SurvivorRatio<ul><li>&#x8BBE;&#x7F6E;&#x65B0;&#x751F;&#x4EE3;&#x4E2D; eden &#x548C; S0/S1 &#x7A7A;&#x95F4;&#x6BD4;&#x4F8B;</li><li>&#x9ED8;&#x8BA4; -XX:SurvivorRatio=8&#xFF0C;Eden : S0 : S1 = 8 : 1 : 1</li></ul></li><li>-XX:NewRatio<ul><li>&#x914D;&#x7F6E;&#x5E74;&#x8F7B;&#x4EE3;&#x548C;&#x8001;&#x5E74;&#x4EE3;&#x5728;&#x5806;&#x7ED3;&#x6784;&#x7684;&#x5360;&#x6BD4;</li><li>&#x9ED8;&#x8BA4; -XX:NewRatio=2 &#x65B0;&#x751F;&#x4EE3;&#x5360;1&#xFF0C;&#x8001;&#x5E74;&#x4EE3;&#x5360;2&#xFF0C;&#x5E74;&#x8F7B;&#x4EE3;&#x5360;&#x6574;&#x4E2A;&#x5806;&#x7684; 1/3</li></ul></li><li>-XX:MaxTenuringThreshold<ul><li>&#x8BBE;&#x7F6E;&#x5783;&#x573E;&#x6700;&#x5927;&#x5E74;&#x9F84;</li></ul></li></ul><h2 id="&#x5F3A;&#x5F15;&#x7528;&#x3001;&#x8F6F;&#x5F15;&#x7528;&#x3001;&#x5F31;&#x5F15;&#x7528;&#x548C;&#x865A;&#x5F15;&#x7528;&#x5206;&#x522B;&#x662F;&#x4EC0;&#x4E48;&#xFF1F;"><a href="#&#x5F3A;&#x5F15;&#x7528;&#x3001;&#x8F6F;&#x5F15;&#x7528;&#x3001;&#x5F31;&#x5F15;&#x7528;&#x548C;&#x865A;&#x5F15;&#x7528;&#x5206;&#x522B;&#x662F;&#x4EC0;&#x4E48;&#xFF1F;" class="headerlink" title="&#x5F3A;&#x5F15;&#x7528;&#x3001;&#x8F6F;&#x5F15;&#x7528;&#x3001;&#x5F31;&#x5F15;&#x7528;&#x548C;&#x865A;&#x5F15;&#x7528;&#x5206;&#x522B;&#x662F;&#x4EC0;&#x4E48;&#xFF1F;"></a>&#x5F3A;&#x5F15;&#x7528;&#x3001;&#x8F6F;&#x5F15;&#x7528;&#x3001;&#x5F31;&#x5F15;&#x7528;&#x548C;&#x865A;&#x5F15;&#x7528;&#x5206;&#x522B;&#x662F;&#x4EC0;&#x4E48;&#xFF1F;</h2><p>&#x5728;Java&#x8BED;&#x8A00;&#x4E2D;&#xFF0C;&#x9664;&#x4E86;&#x57FA;&#x672C;&#x6570;&#x636E;&#x7C7B;&#x578B;&#x5916;&#xFF0C;&#x5176;&#x4ED6;&#x7684;&#x90FD;&#x662F;&#x6307;&#x5411;&#x5404;&#x7C7B;&#x5BF9;&#x8C61;&#x7684;&#x5BF9;&#x8C61;&#x5F15;&#x7528;&#xFF1B;Java&#x4E2D;&#x6839;&#x636E;&#x5176;&#x751F;&#x547D;&#x5468;&#x671F;&#x7684;&#x957F;&#x77ED;&#xFF0C;&#x5C06;&#x5F15;&#x7528;&#x5206;&#x4E3A;4&#x7C7B;&#x3002;</p><ul><li>&#x5F3A;&#x5F15;&#x7528;<ul><li>&#x7279;&#x70B9;&#xFF1A;&#x6211;&#x4EEC;&#x5E73;&#x5E38;&#x5178;&#x578B;&#x7F16;&#x7801;Object obj = new Object()&#x4E2D;&#x7684;obj&#x5C31;&#x662F;&#x5F3A;&#x5F15;&#x7528;&#x3002;&#x901A;&#x8FC7;&#x5173;&#x952E;&#x5B57;new&#x521B;&#x5EFA;&#x7684;&#x5BF9;&#x8C61;&#x6240;&#x5173;&#x8054;&#x7684;&#x5F15;&#x7528;&#x5C31;&#x662F;&#x5F3A;&#x5F15;&#x7528;&#x3002; &#x5F53;JVM&#x5185;&#x5B58;&#x7A7A;&#x95F4;&#x4E0D;&#x8DB3;&#xFF0C;JVM&#x5B81;&#x613F;&#x629B;&#x51FA;OutOfMemoryError&#x8FD0;&#x884C;&#x65F6;&#x9519;&#x8BEF;&#xFF08;OOM&#xFF09;&#xFF0C;&#x4F7F;&#x7A0B;&#x5E8F;&#x5F02;&#x5E38;&#x7EC8;&#x6B62;&#xFF0C;&#x4E5F;&#x4E0D;&#x4F1A;&#x9760;&#x968F;&#x610F;&#x56DE;&#x6536;&#x5177;&#x6709;&#x5F3A;&#x5F15;&#x7528;&#x7684;&#x201C;&#x5B58;&#x6D3B;&#x201D;&#x5BF9;&#x8C61;&#x6765;&#x89E3;&#x51B3;&#x5185;&#x5B58;&#x4E0D;&#x8DB3;&#x7684;&#x95EE;&#x9898;&#x3002;&#x5BF9;&#x4E8E;&#x4E00;&#x4E2A;&#x666E;&#x901A;&#x7684;&#x5BF9;&#x8C61;&#xFF0C;&#x5982;&#x679C;&#x6CA1;&#x6709;&#x5176;&#x4ED6;&#x7684;&#x5F15;&#x7528;&#x5173;&#x7CFB;&#xFF0C;&#x53EA;&#x8981;&#x8D85;&#x8FC7;&#x4E86;&#x5F15;&#x7528;&#x7684;&#x4F5C;&#x7528;&#x57DF;&#x6216;&#x8005;&#x663E;&#x5F0F;&#x5730;&#x5C06;&#x76F8;&#x5E94;&#xFF08;&#x5F3A;&#xFF09;&#x5F15;&#x7528;&#x8D4B;&#x503C;&#x4E3A; null&#xFF0C;&#x5C31;&#x662F;&#x53EF;&#x4EE5;&#x88AB;&#x5783;&#x573E;&#x6536;&#x96C6;&#x7684;&#x4E86;&#xFF0C;&#x5177;&#x4F53;&#x56DE;&#x6536;&#x65F6;&#x673A;&#x8FD8;&#x662F;&#x8981;&#x770B;&#x5783;&#x573E;&#x6536;&#x96C6;&#x7B56;&#x7565;&#x3002;</li></ul></li><li><p>&#x8F6F;&#x5F15;&#x7528;</p><ul><li>&#x7279;&#x70B9;&#xFF1A;&#x8F6F;&#x5F15;&#x7528;&#x901A;&#x8FC7;SoftReference&#x7C7B;&#x5B9E;&#x73B0;&#x3002; &#x8F6F;&#x5F15;&#x7528;&#x7684;&#x751F;&#x547D;&#x5468;&#x671F;&#x6BD4;&#x5F3A;&#x5F15;&#x7528;&#x77ED;&#x4E00;&#x4E9B;&#x3002;&#x53EA;&#x6709;&#x5F53; JVM &#x8BA4;&#x4E3A;&#x5185;&#x5B58;&#x4E0D;&#x8DB3;&#x65F6;&#xFF0C;&#x624D;&#x4F1A;&#x53BB;&#x8BD5;&#x56FE;&#x56DE;&#x6536;&#x8F6F;&#x5F15;&#x7528;&#x6307;&#x5411;&#x7684;&#x5BF9;&#x8C61;&#xFF1A;&#x5373;JVM &#x4F1A;&#x786E;&#x4FDD;&#x5728;&#x629B;&#x51FA; OutOfMemoryError &#x4E4B;&#x524D;&#xFF0C;&#x6E05;&#x7406;&#x8F6F;&#x5F15;&#x7528;&#x6307;&#x5411;&#x7684;&#x5BF9;&#x8C61;&#x3002;&#x8F6F;&#x5F15;&#x7528;&#x53EF;&#x4EE5;&#x548C;&#x4E00;&#x4E2A;&#x5F15;&#x7528;&#x961F;&#x5217;&#xFF08;ReferenceQueue&#xFF09;&#x8054;&#x5408;&#x4F7F;&#x7528;&#xFF0C;&#x5982;&#x679C;&#x8F6F;&#x5F15;&#x7528;&#x6240;&#x5F15;&#x7528;&#x7684;&#x5BF9;&#x8C61;&#x88AB;&#x5783;&#x573E;&#x56DE;&#x6536;&#x5668;&#x56DE;&#x6536;&#xFF0C;Java&#x865A;&#x62DF;&#x673A;&#x5C31;&#x4F1A;&#x628A;&#x8FD9;&#x4E2A;&#x8F6F;&#x5F15;&#x7528;&#x52A0;&#x5165;&#x5230;&#x4E0E;&#x4E4B;&#x5173;&#x8054;&#x7684;&#x5F15;&#x7528;&#x961F;&#x5217;&#x4E2D;&#x3002;&#x540E;&#x7EED;&#xFF0C;&#x6211;&#x4EEC;&#x53EF;&#x4EE5;&#x8C03;&#x7528;ReferenceQueue&#x7684;poll()&#x65B9;&#x6CD5;&#x6765;&#x68C0;&#x67E5;&#x662F;&#x5426;&#x6709;&#x5B83;&#x6240;&#x5173;&#x5FC3;&#x7684;&#x5BF9;&#x8C61;&#x88AB;&#x56DE;&#x6536;&#x3002;&#x5982;&#x679C;&#x961F;&#x5217;&#x4E3A;&#x7A7A;&#xFF0C;&#x5C06;&#x8FD4;&#x56DE;&#x4E00;&#x4E2A;null,&#x5426;&#x5219;&#x8BE5;&#x65B9;&#x6CD5;&#x8FD4;&#x56DE;&#x961F;&#x5217;&#x4E2D;&#x524D;&#x9762;&#x7684;&#x4E00;&#x4E2A;Reference&#x5BF9;&#x8C61;&#x3002;</li><li>&#x5E94;&#x7528;&#x573A;&#x666F;&#xFF1A;&#x8F6F;&#x5F15;&#x7528;&#x901A;&#x5E38;&#x7528;&#x6765;&#x5B9E;&#x73B0;&#x5185;&#x5B58;&#x654F;&#x611F;&#x7684;&#x7F13;&#x5B58;&#x3002;&#x5982;&#x679C;&#x8FD8;&#x6709;&#x7A7A;&#x95F2;&#x5185;&#x5B58;&#xFF0C;&#x5C31;&#x53EF;&#x4EE5;&#x6682;&#x65F6;&#x4FDD;&#x7559;&#x7F13;&#x5B58;&#xFF0C;&#x5F53;&#x5185;&#x5B58;&#x4E0D;&#x8DB3;&#x65F6;&#x6E05;&#x7406;&#x6389;&#xFF0C;&#x8FD9;&#x6837;&#x5C31;&#x4FDD;&#x8BC1;&#x4E86;&#x4F7F;&#x7528;&#x7F13;&#x5B58;&#x7684;&#x540C;&#x65F6;&#xFF0C;&#x4E0D;&#x4F1A;&#x8017;&#x5C3D;&#x5185;&#x5B58;&#x3002;</li><li><p>&#x4EE3;&#x7801;&#x9A8C;&#x8BC1;<br>&#x6211;&#x8BBE;&#x7F6E; JVM &#x53C2;&#x6570;&#x4E3A; <code>-Xms10m -Xmx10m -XX:+PrintGCDetails</code></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">SoftReferenceDemo</span> </span>{</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>{</span><br><span class="line">        Object obj = <span class="keyword">new</span> Object();</span><br><span class="line">        SoftReference&lt;Object&gt; softReference = <span class="keyword">new</span> SoftReference&lt;&gt;(obj);</span><br><span class="line">        obj = <span class="keyword">null</span>;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">try</span> {</span><br><span class="line">            <span class="comment">// &#x5206;&#x914D; 20 M</span></span><br><span class="line">            <span class="keyword">byte</span>[] bytes = <span class="keyword">new</span> <span class="keyword">byte</span>[<span class="number">20</span> * <span class="number">1024</span> * <span class="number">1024</span>];</span><br><span class="line">        } <span class="keyword">catch</span> (Exception e) {</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        } <span class="keyword">finally</span> {</span><br><span class="line">            System.out.println(<span class="string">&quot;&#x8F6F;&#x5F15;&#x7528;&#xFF1A;&quot;</span> + softReference.get());</span><br><span class="line">        }</span><br><span class="line"></span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></table></figure><p>&#x8F93;&#x51FA;</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">[GC (Allocation Failure) [PSYoungGen: 1234K-&gt;448K(2560K)] 1234K-&gt;456K(9728K), 0.0016748 secs] [Times: user=0.00 sys=0.00, real=0.01 secs] </span><br><span class="line">[GC (Allocation Failure) [PSYoungGen: 448K-&gt;384K(2560K)] 456K-&gt;392K(9728K), 0.0018398 secs] [Times: user=0.01 sys=0.00, real=0.00 secs] </span><br><span class="line">[Full GC (Allocation Failure) [PSYoungGen: 384K-&gt;0K(2560K)] [ParOldGen: 8K-&gt;358K(7168K)] 392K-&gt;358K(9728K), [Metaspace: 3030K-&gt;3030K(1056768K)], 0.0057246 secs] [Times: user=0.01 sys=0.00, real=0.01 secs] </span><br><span class="line">[GC (Allocation Failure) [PSYoungGen: 0K-&gt;0K(2560K)] 358K-&gt;358K(9728K), 0.0006038 secs] [Times: user=0.00 sys=0.00, real=0.00 secs] </span><br><span class="line">[Full GC (Allocation Failure) [PSYoungGen: 0K-&gt;0K(2560K)] [ParOldGen: 358K-&gt;340K(7168K)] 358K-&gt;340K(9728K), [Metaspace: 3030K-&gt;3030K(1056768K)], 0.0115080 secs] [Times: user=0.01 sys=0.00, real=0.01 secs] </span><br><span class="line">&#x8F6F;&#x5F15;&#x7528;&#xFF1A;null</span><br><span class="line">Exception in thread &quot;main&quot; java.lang.OutOfMemoryError: Java heap space</span><br><span class="line">at com.cuzz.jvm.SoftReferenceDemo.main(SoftReferenceDemo.java:21)</span><br><span class="line">Heap</span><br><span class="line"> PSYoungGen      total 2560K, used 98K [0x00000000ffd00000, 0x0000000100000000, 0x0000000100000000)</span><br><span class="line">  eden space 2048K, 4% used [0x00000000ffd00000,0x00000000ffd18978,0x00000000fff00000)</span><br><span class="line">  from space 512K, 0% used [0x00000000fff00000,0x00000000fff00000,0x00000000fff80000)</span><br><span class="line">  to   space 512K, 0% used [0x00000000fff80000,0x00000000fff80000,0x0000000100000000)</span><br><span class="line"> ParOldGen       total 7168K, used 340K [0x00000000ff600000, 0x00000000ffd00000, 0x00000000ffd00000)</span><br><span class="line">  object space 7168K, 4% used [0x00000000ff600000,0x00000000ff6552f8,0x00000000ffd00000)</span><br><span class="line"> Metaspace       used 3067K, capacity 4496K, committed 4864K, reserved 1056768K</span><br><span class="line">  class space    used 336K, capacity 388K, committed 512K, reserved 1048576K</span><br></pre></td></tr></table></figure><p>&#x53D1;&#x73B0;&#x5F53;&#x5185;&#x5B58;&#x4E0D;&#x591F;&#x7684;&#x65F6;&#x5019;&#x5C31;&#x4F1A;&#x88AB;&#x56DE;&#x6536;&#x3002;</p></li></ul></li><li><p>&#x5F31;&#x5F15;&#x7528;</p><ul><li>&#x7279;&#x70B9;&#xFF1A;&#x5F31;&#x5F15;&#x7528;&#x901A;&#x8FC7;WeakReference&#x7C7B;&#x5B9E;&#x73B0;&#x3002; &#x5F31;&#x5F15;&#x7528;&#x7684;&#x751F;&#x547D;&#x5468;&#x671F;&#x6BD4;&#x8F6F;&#x5F15;&#x7528;&#x77ED;&#x3002;&#x5728;&#x5783;&#x573E;&#x56DE;&#x6536;&#x5668;&#x7EBF;&#x7A0B;&#x626B;&#x63CF;&#x5B83;&#x6240;&#x7BA1;&#x8F96;&#x7684;&#x5185;&#x5B58;&#x533A;&#x57DF;&#x7684;&#x8FC7;&#x7A0B;&#x4E2D;&#xFF0C;&#x4E00;&#x65E6;&#x53D1;&#x73B0;&#x4E86;&#x5177;&#x6709;&#x5F31;&#x5F15;&#x7528;&#x7684;&#x5BF9;&#x8C61;&#xFF0C;&#x4E0D;&#x7BA1;&#x5F53;&#x524D;&#x5185;&#x5B58;&#x7A7A;&#x95F4;&#x8DB3;&#x591F;&#x4E0E;&#x5426;&#xFF0C;&#x90FD;&#x4F1A;&#x56DE;&#x6536;&#x5B83;&#x7684;&#x5185;&#x5B58;&#x3002;&#x7531;&#x4E8E;&#x5783;&#x573E;&#x56DE;&#x6536;&#x5668;&#x662F;&#x4E00;&#x4E2A;&#x4F18;&#x5148;&#x7EA7;&#x5F88;&#x4F4E;&#x7684;&#x7EBF;&#x7A0B;&#xFF0C;&#x56E0;&#x6B64;&#x4E0D;&#x4E00;&#x5B9A;&#x4F1A;&#x5F88;&#x5FEB;&#x56DE;&#x6536;&#x5F31;&#x5F15;&#x7528;&#x7684;&#x5BF9;&#x8C61;&#x3002;&#x5F31;&#x5F15;&#x7528;&#x53EF;&#x4EE5;&#x548C;&#x4E00;&#x4E2A;&#x5F15;&#x7528;&#x961F;&#x5217;&#xFF08;ReferenceQueue&#xFF09;&#x8054;&#x5408;&#x4F7F;&#x7528;&#xFF0C;&#x5982;&#x679C;&#x5F31;&#x5F15;&#x7528;&#x6240;&#x5F15;&#x7528;&#x7684;&#x5BF9;&#x8C61;&#x88AB;&#x5783;&#x573E;&#x56DE;&#x6536;&#xFF0C;Java&#x865A;&#x62DF;&#x673A;&#x5C31;&#x4F1A;&#x628A;&#x8FD9;&#x4E2A;&#x5F31;&#x5F15;&#x7528;&#x52A0;&#x5165;&#x5230;&#x4E0E;&#x4E4B;&#x5173;&#x8054;&#x7684;&#x5F15;&#x7528;&#x961F;&#x5217;&#x4E2D;&#x3002;</li><li>&#x5E94;&#x7528;&#x573A;&#x666F;&#xFF1A;&#x5F31;&#x5E94;&#x7528;&#x540C;&#x6837;&#x53EF;&#x7528;&#x4E8E;&#x5185;&#x5B58;&#x654F;&#x611F;&#x7684;&#x7F13;&#x5B58;&#x3002;</li><li><p>&#x4EE3;&#x7801;&#x9A8C;&#x8BC1;</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">WeakReferenceDemo</span> </span>{</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>{</span><br><span class="line">        Object obj = <span class="keyword">new</span> Object();</span><br><span class="line">        WeakReference&lt;Object&gt; weakReference = <span class="keyword">new</span> WeakReference&lt;&gt;(obj);</span><br><span class="line">        System.out.println(obj);</span><br><span class="line">        System.out.println(weakReference.get());</span><br><span class="line"></span><br><span class="line">        obj = <span class="keyword">null</span>;</span><br><span class="line">        System.gc();</span><br><span class="line">        System.out.println(<span class="string">&quot;GC&#x4E4B;&#x540E;....&quot;</span>);</span><br><span class="line">        </span><br><span class="line">        System.out.println(obj);</span><br><span class="line">        System.out.println(weakReference.get());</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></table></figure><p>&#x8F93;&#x51FA;</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">java.lang.Object@1540e19d</span><br><span class="line">java.lang.Object@1540e19d</span><br><span class="line">GC&#x4E4B;&#x540E;....</span><br><span class="line">null</span><br><span class="line">null</span><br></pre></td></tr></table></figure><p>&#x503C;&#x5F97;&#x6CE8;&#x610F;&#x7684;&#x662F;<code>String name = &quot;cuzz&quot;</code> &#x8FD9;&#x79CD;&#x4F1A;&#x653E;&#x5165;&#x6C38;&#x4E45;&#x4EE3;&#xFF0C;&#x4EE5;&#x53CA; <code>Integer age = 1</code> &#x5728; int &#x4E2D; -128 &#x5230; 127 &#x4F1A;&#x88AB;&#x7F13;&#x5B58;&#xFF0C;&#x6240;&#x4EE5;&#x662F;&#x5F3A;&#x5F15;&#x7528;&#xFF0C;&#x7136;&#x540E; GC &#x4E5F;&#x4E0D;&#x4F1A;&#x88AB;&#x56DE;&#x6536;&#x3002;</p></li><li><p>&#x5F15;&#x7528;&#x961F;&#x5217;</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ReferenceQueueDemo</span> </span>{</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> InterruptedException </span>{</span><br><span class="line">        Object obj = <span class="keyword">new</span> Object();</span><br><span class="line">        ReferenceQueue&lt;Object&gt; referenceQueue = <span class="keyword">new</span> ReferenceQueue&lt;&gt;();</span><br><span class="line">        WeakReference&lt;Object&gt; weakReference = <span class="keyword">new</span> WeakReference&lt;&gt;(obj, referenceQueue);</span><br><span class="line">        System.out.println(obj);</span><br><span class="line">        System.out.println(weakReference.get());</span><br><span class="line">        System.out.println(weakReference);</span><br><span class="line"></span><br><span class="line">        obj = <span class="keyword">null</span>;</span><br><span class="line">        System.gc();</span><br><span class="line">        Thread.sleep(<span class="number">500</span>);</span><br><span class="line"></span><br><span class="line">        System.out.println(<span class="string">&quot;GC&#x4E4B;&#x540E;....&quot;</span>);</span><br><span class="line">        System.out.println(obj);</span><br><span class="line">        System.out.println(weakReference.get());</span><br><span class="line">        System.out.println(weakReference);</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></table></figure><p>&#x8F93;&#x51FA;</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">java.lang.Object@1540e19d</span><br><span class="line">java.lang.Object@1540e19d</span><br><span class="line">java.lang.ref.WeakReference@677327b6</span><br><span class="line">GC&#x4E4B;&#x540E;....</span><br><span class="line">null</span><br><span class="line">null</span><br><span class="line">java.lang.ref.WeakReference@677327b6</span><br></pre></td></tr></table></figure><p>&#x4F1A;&#x628A;&#x8BE5;&#x5BF9;&#x8C61;&#x7684;&#x5305;&#x88C5;&#x7C7B;&#x5373;<code>weakReference</code>&#x653E;&#x5165;&#x5230;<code>ReferenceQueue</code>&#x91CC;&#x9762;&#xFF0C;&#x6211;&#x4EEC;&#x53EF;&#x4EE5;&#x4ECE;queue&#x4E2D;&#x83B7;&#x53D6;&#x5230;&#x76F8;&#x5E94;&#x7684;&#x5BF9;&#x8C61;&#x4FE1;&#x606F;&#xFF0C;&#x540C;&#x65F6;&#x8FDB;&#x884C;&#x989D;&#x5916;&#x7684;&#x5904;&#x7406;&#x3002;&#x6BD4;&#x5982;&#x53CD;&#x5411;&#x64CD;&#x4F5C;&#xFF0C;&#x6570;&#x636E;&#x6E05;&#x7406;&#x7B49;&#x3002;</p></li></ul></li><li>&#x865A;&#x5F15;&#x7528;<ul><li>&#x7279;&#x70B9;&#xFF1A;&#x865A;&#x5F15;&#x7528;&#x4E5F;&#x53EB;&#x5E7B;&#x8C61;&#x5F15;&#x7528;&#xFF0C;&#x901A;&#x8FC7;PhantomReference&#x7C7B;&#x6765;&#x5B9E;&#x73B0;&#x3002;&#x65E0;&#x6CD5;&#x901A;&#x8FC7;&#x865A;&#x5F15;&#x7528;&#x8BBF;&#x95EE;&#x5BF9;&#x8C61;&#x7684;&#x4EFB;&#x4F55;&#x5C5E;&#x6027;&#x6216;&#x51FD;&#x6570;&#x3002;&#x5E7B;&#x8C61;&#x5F15;&#x7528;&#x4EC5;&#x4EC5;&#x662F;&#x63D0;&#x4F9B;&#x4E86;&#x4E00;&#x79CD;&#x786E;&#x4FDD;&#x5BF9;&#x8C61;&#x88AB; finalize &#x4EE5;&#x540E;&#xFF0C;&#x505A;&#x67D0;&#x4E9B;&#x4E8B;&#x60C5;&#x7684;&#x673A;&#x5236;&#x3002;&#x5982;&#x679C;&#x4E00;&#x4E2A;&#x5BF9;&#x8C61;&#x4EC5;&#x6301;&#x6709;&#x865A;&#x5F15;&#x7528;&#xFF0C;&#x90A3;&#x4E48;&#x5B83;&#x5C31;&#x548C;&#x6CA1;&#x6709;&#x4EFB;&#x4F55;&#x5F15;&#x7528;&#x4E00;&#x6837;&#xFF0C;&#x5728;&#x4EFB;&#x4F55;&#x65F6;&#x5019;&#x90FD;&#x53EF;&#x80FD;&#x88AB;&#x5783;&#x573E;&#x56DE;&#x6536;&#x5668;&#x56DE;&#x6536;&#x3002;&#x865A;&#x5F15;&#x7528;&#x5FC5;&#x987B;&#x548C;&#x5F15;&#x7528;&#x961F;&#x5217; &#xFF08;ReferenceQueue&#xFF09;&#x8054;&#x5408;&#x4F7F;&#x7528;&#x3002;&#x5F53;&#x5783;&#x573E;&#x56DE;&#x6536;&#x5668;&#x51C6;&#x5907;&#x56DE;&#x6536;&#x4E00;&#x4E2A;&#x5BF9;&#x8C61;&#x65F6;&#xFF0C;&#x5982;&#x679C;&#x53D1;&#x73B0;&#x5B83;&#x8FD8;&#x6709;&#x865A;&#x5F15;&#x7528;&#xFF0C;&#x5C31;&#x4F1A;&#x5728;&#x56DE;&#x6536;&#x5BF9;&#x8C61;&#x7684;&#x5185;&#x5B58;&#x4E4B;&#x524D;&#xFF0C;&#x628A;&#x8FD9;&#x4E2A;&#x865A;&#x5F15;&#x7528;&#x52A0;&#x5165;&#x5230;&#x4E0E;&#x4E4B;&#x5173;&#x8054;&#x7684;&#x5F15;&#x7528;&#x961F;&#x5217;&#x4E2D;&#x3002;<br>ReferenceQueue queue = new ReferenceQueue ();<br>PhantomReference pr = new PhantomReference (object, queue);<br>&#x7A0B;&#x5E8F;&#x53EF;&#x4EE5;&#x901A;&#x8FC7;&#x5224;&#x65AD;&#x5F15;&#x7528;&#x961F;&#x5217;&#x4E2D;&#x662F;&#x5426;&#x5DF2;&#x7ECF;&#x52A0;&#x5165;&#x4E86;&#x865A;&#x5F15;&#x7528;&#xFF0C;&#x6765;&#x4E86;&#x89E3;&#x88AB;&#x5F15;&#x7528;&#x7684;&#x5BF9;&#x8C61;&#x662F;&#x5426;&#x5C06;&#x8981;&#x88AB;&#x5783;&#x573E;&#x56DE;&#x6536;&#x3002;&#x5982;&#x679C;&#x7A0B;&#x5E8F;&#x53D1;&#x73B0;&#x67D0;&#x4E2A;&#x865A;&#x5F15;&#x7528;&#x5DF2;&#x7ECF;&#x88AB;&#x52A0;&#x5165;&#x5230;&#x5F15;&#x7528;&#x961F;&#x5217;&#xFF0C;&#x90A3;&#x4E48;&#x5C31;&#x53EF;&#x4EE5;&#x5728;&#x6240;&#x5F15;&#x7528;&#x7684;&#x5BF9;&#x8C61;&#x7684;&#x5185;&#x5B58;&#x88AB;&#x56DE;&#x6536;&#x4E4B;&#x524D;&#x91C7;&#x53D6;&#x4E00;&#x4E9B;&#x7A0B;&#x5E8F;&#x884C;&#x52A8;&#x3002;</li><li>&#x5E94;&#x7528;&#x573A;&#x666F;&#xFF1A;&#x53EF;&#x7528;&#x6765;&#x8DDF;&#x8E2A;&#x5BF9;&#x8C61;&#x88AB;&#x5783;&#x573E;&#x56DE;&#x6536;&#x5668;&#x56DE;&#x6536;&#x7684;&#x6D3B;&#x52A8;&#xFF0C;&#x5F53;&#x4E00;&#x4E2A;&#x865A;&#x5F15;&#x7528;&#x5173;&#x8054;&#x7684;&#x5BF9;&#x8C61;&#x88AB;&#x5783;&#x573E;&#x6536;&#x96C6;&#x5668;&#x56DE;&#x6536;&#x4E4B;&#x524D;&#x4F1A;&#x6536;&#x5230;&#x4E00;&#x6761;&#x7CFB;&#x7EDF;&#x901A;&#x77E5;&#x3002;</li></ul></li></ul><h2 id="&#x8BF7;&#x8C08;&#x8C08;&#x4F60;&#x5BF9;-OOM-&#x7684;&#x8BA4;&#x8BC6;&#xFF1F;"><a href="#&#x8BF7;&#x8C08;&#x8C08;&#x4F60;&#x5BF9;-OOM-&#x7684;&#x8BA4;&#x8BC6;&#xFF1F;" class="headerlink" title="&#x8BF7;&#x8C08;&#x8C08;&#x4F60;&#x5BF9; OOM &#x7684;&#x8BA4;&#x8BC6;&#xFF1F;"></a>&#x8BF7;&#x8C08;&#x8C08;&#x4F60;&#x5BF9; OOM &#x7684;&#x8BA4;&#x8BC6;&#xFF1F;</h2><ul><li>java.lang.StackOverflowError<ul><li>&#x5728;&#x4E00;&#x4E2A;&#x51FD;&#x6570;&#x4E2D;&#x8C03;&#x7528;&#x81EA;&#x5DF1;&#x5C31;&#x4F1A;&#x4EA7;&#x751F;&#x8FD9;&#x4E2A;&#x9519;&#x8BEF;</li></ul></li><li>java.lang.OutOfMemoryError : Java heap space<ul><li>new &#x4E00;&#x4E2A;&#x5F88;&#x5927;&#x5BF9;&#x8C61;</li></ul></li><li>java.lang.OutOfMemoryError : GC overhead limit exceeded<ul><li>&#x6267;&#x884C;&#x5783;&#x573E;&#x6536;&#x96C6;&#x7684;&#x65F6;&#x95F4;&#x6BD4;&#x4F8B;&#x592A;&#x5927;&#xFF0C; &#x6709;&#x6548;&#x7684;&#x8FD0;&#x7B97;&#x91CF;&#x592A;&#x5C0F;&#xFF0C;&#x9ED8;&#x8BA4;&#x60C5;&#x51B5;&#x4E0B;,&#xFF0C;&#x5982;&#x679C;GC&#x82B1;&#x8D39;&#x7684;&#x65F6;&#x95F4;&#x8D85;&#x8FC7; <strong>98%</strong>&#xFF0C; &#x5E76;&#x4E14;GC&#x56DE;&#x6536;&#x7684;&#x5185;&#x5B58;&#x5C11;&#x4E8E; <strong>2%</strong>&#xFF0C; JVM&#x5C31;&#x4F1A;&#x629B;&#x51FA;&#x8FD9;&#x4E2A;&#x9519;&#x8BEF;&#x3002;</li></ul></li><li><p>java.lang.OutOfMemoryError : Direct buffer memory<br>&#x914D;&#x7F6E;&#x53C2;&#x6570;&#xFF1A;-Xms10m -Xmx10m -XX:+PrintGCDetails -XX:MaxDirectMemorySize=5m</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">DirectBufferDemo</span> </span>{</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>{</span><br><span class="line">        System.out.println(<span class="string">&quot;maxDirectMemory : &quot;</span> + sun.misc.VM.maxDirectMemory() / (<span class="number">1024</span> * <span class="number">1024</span>) + <span class="string">&quot;MB&quot;</span>);</span><br><span class="line">        ByteBuffer byteBuffer = ByteBuffer.allocateDirect(<span class="number">6</span> * <span class="number">1024</span> * <span class="number">1024</span>);</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></table></figure><p>&#x8F93;&#x51FA;</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">maxDirectMemory : 5MB</span><br><span class="line">[GC (System.gc()) [PSYoungGen: 1315K-&gt;464K(2560K)] 1315K-&gt;472K(9728K), 0.0008907 secs] [Times: user=0.00 sys=0.00, real=0.01 secs] </span><br><span class="line">[Full GC (System.gc()) [PSYoungGen: 464K-&gt;0K(2560K)] [ParOldGen: 8K-&gt;359K(7168K)] 472K-&gt;359K(9728K), [Metaspace: 3037K-&gt;3037K(1056768K)], 0.0060466 secs] [Times: user=0.01 sys=0.00, real=0.00 secs] </span><br><span class="line">Exception in thread &quot;main&quot; java.lang.OutOfMemoryError: Direct buffer memory</span><br><span class="line">at java.nio.Bits.reserveMemory(Bits.java:694)</span><br><span class="line">at java.nio.DirectByteBuffer.&lt;init&gt;(DirectByteBuffer.java:123)</span><br><span class="line">at java.nio.ByteBuffer.allocateDirect(ByteBuffer.java:311)</span><br><span class="line">at com.cuzz.jvm.DirectBufferDemo.main(DirectBufferDemo.java:17)</span><br><span class="line">Heap</span><br><span class="line"> PSYoungGen      total 2560K, used 56K [0x00000000ffd00000, 0x0000000100000000, 0x0000000100000000)</span><br><span class="line">  eden space 2048K, 2% used [0x00000000ffd00000,0x00000000ffd0e170,0x00000000fff00000)</span><br><span class="line">  from space 512K, 0% used [0x00000000fff00000,0x00000000fff00000,0x00000000fff80000)</span><br><span class="line">  to   space 512K, 0% used [0x00000000fff80000,0x00000000fff80000,0x0000000100000000)</span><br><span class="line"> ParOldGen       total 7168K, used 359K [0x00000000ff600000, 0x00000000ffd00000, 0x00000000ffd00000)</span><br><span class="line">  object space 7168K, 5% used [0x00000000ff600000,0x00000000ff659e28,0x00000000ffd00000)</span><br><span class="line"> Metaspace       used 3068K, capacity 4496K, committed 4864K, reserved 1056768K</span><br><span class="line">  class space    used 336K, capacity 388K, committed 512K, reserved 1048576K</span><br></pre></td></tr></table></figure></li><li><p>java.lang.OutOfMemoryError : unable to create new native thread</p><ul><li>&#x521B;&#x5EFA;&#x7EBF;&#x7A0B;&#x6570;&#x592A;&#x591A;&#x4E86;</li></ul></li><li>java.lang.OutOfMemoryError : Metaspace<ul><li>Java 8 &#x4E4B;&#x540E;&#x7684;&#x7248;&#x672C;&#x4F7F;&#x7528;&#x5143;&#x7A7A;&#x95F4;&#xFF08;Metaspace&#xFF09;&#x4EE3;&#x66FF;&#x4E86;&#x6C38;&#x4E45;&#x4EE3;&#xFF0C;&#x5143;&#x7A7A;&#x95F4;&#x662F;&#x65B9;&#x6CD5;&#x533A;&#x5728; HotSpot &#x4E2D;&#x7684;&#x5B9E;&#x73B0;&#xFF0C;&#x5B83;&#x4E0E;&#x6301;&#x4E45;&#x4EE3;&#x6700;&#x5927;&#x7684;&#x533A;&#x522B;&#x662F;&#xFF1A;&#x5143;&#x7A7A;&#x95F4;&#x5E76;&#x4E0D;&#x5728;&#x865A;&#x62DF;&#x673A;&#x4E2D;&#x7684;&#x5185;&#x5B58;&#x4E2D;&#x800C;&#x662F;&#x4F7F;&#x7528;&#x672C;&#x5730;&#x5185;&#x5B58;&#x3002;</li><li>&#x5143;&#x7A7A;&#x95F4;&#x5B58;&#x653E;&#x7684;&#x4FE1;&#x606F;&#xFF1A;<ul><li>&#x865A;&#x62DF;&#x673A;&#x52A0;&#x8F7D;&#x7684;&#x7C7B;&#x4FE1;&#x606F;</li><li>&#x5E38;&#x91CF;&#x6C60;</li><li>&#x9759;&#x6001;&#x53D8;&#x91CF;</li><li>&#x5373;&#x65F6;&#x7F16;&#x8BD1;&#x540E;&#x7684;&#x4EE3;&#x7801;</li></ul></li></ul></li></ul><p>&#x5177;&#x4F53;&#x7684;&#x5B9E;&#x73B0;&#x53EF;&#x4EE5;&#x770B;&#x770B;&#x8FD9;&#x4E2A;&#x5E16;&#x5B50;&#xFF1A;<a href="http://www.dataguru.cn/thread-351920-1-1.html" target="_blank" rel="noopener">&#x51E0;&#x79CD;&#x624B;&#x52A8;OOM&#x7684;&#x65B9;&#x5F0F;</a></p><h2 id="GC-&#x5783;&#x573E;&#x56DE;&#x6536;&#x7B97;&#x6CD5;&#x548C;&#x5783;&#x573E;&#x6536;&#x96C6;&#x5668;&#x7684;&#x5173;&#x7CFB;&#xFF1F;&#x8C08;&#x8C08;&#x4F60;&#x7684;&#x7406;&#x89E3;&#xFF1F;"><a href="#GC-&#x5783;&#x573E;&#x56DE;&#x6536;&#x7B97;&#x6CD5;&#x548C;&#x5783;&#x573E;&#x6536;&#x96C6;&#x5668;&#x7684;&#x5173;&#x7CFB;&#xFF1F;&#x8C08;&#x8C08;&#x4F60;&#x7684;&#x7406;&#x89E3;&#xFF1F;" class="headerlink" title="GC &#x5783;&#x573E;&#x56DE;&#x6536;&#x7B97;&#x6CD5;&#x548C;&#x5783;&#x573E;&#x6536;&#x96C6;&#x5668;&#x7684;&#x5173;&#x7CFB;&#xFF1F;&#x8C08;&#x8C08;&#x4F60;&#x7684;&#x7406;&#x89E3;&#xFF1F;"></a>GC &#x5783;&#x573E;&#x56DE;&#x6536;&#x7B97;&#x6CD5;&#x548C;&#x5783;&#x573E;&#x6536;&#x96C6;&#x5668;&#x7684;&#x5173;&#x7CFB;&#xFF1F;&#x8C08;&#x8C08;&#x4F60;&#x7684;&#x7406;&#x89E3;&#xFF1F;</h2><ul><li>&#x56DB;&#x79CD; GC &#x5783;&#x573E;&#x56DE;&#x6536;&#x7B97;&#x6CD5;<ul><li>&#x5F15;&#x7528;&#x8BA1;&#x6570;</li><li>&#x590D;&#x5236;&#x56DE;&#x6536;</li><li>&#x6807;&#x8BB0;&#x6E05;&#x9664;</li><li>&#x6807;&#x8BB0;&#x6574;&#x7406;</li></ul></li><li>GC &#x7B97;&#x6CD5;&#x662F;&#x5185;&#x5B58;&#x56DE;&#x6536;&#x7684;&#x65B9;&#x6CD5;&#x8BBA;&#xFF0C;&#x5783;&#x573E;&#x6536;&#x96C6;&#x5176;&#x5C31;&#x662F;&#x7B97;&#x6CD5;&#x7684;&#x843D;&#x5B9E;&#x7684;&#x5B9E;&#x73B0;&#x3002;</li><li>&#x76EE;&#x524D;&#x4E3A;&#x6B62;&#x8FD8;&#x6CA1;&#x6709;&#x5B8C;&#x7F8E;&#x7684;&#x6536;&#x96C6;&#x5668;&#x7684;&#x51FA;&#x73B0;&#xFF0C;&#x66F4;&#x52A0;&#x6CA1;&#x6709;&#x4E07;&#x80FD;&#x7684;&#x6536;&#x96C6;&#x5668;&#xFF0C;&#x53EA;&#x662F;&#x9488;&#x5BF9;&#x5177;&#x4F53;&#x5E94;&#x7528;&#x6700;&#x9002;&#x5408;&#x7684;&#x6536;&#x96C6;&#x5668;&#xFF0C;&#x8FDB;&#x884C;&#x5206;&#x4EE3;&#x6536;&#x96C6;&#x3002;</li><li>&#x4E32;&#x884C;&#x5783;&#x573E;&#x56DE;&#x6536;&#x5668;&#xFF08;Serial&#xFF09;<ul><li>&#x5B83;&#x4E3A;&#x5355;&#x7EBF;&#x7A0B;&#x73AF;&#x5883;&#x8BBE;&#x8BA1;&#x4E14;&#x53EA;&#x4F7F;&#x7528;&#x4E00;&#x4E2A;&#x7EBF;&#x7A0B;&#x8FDB;&#x884C;&#x5783;&#x573E;&#x56DE;&#x6536;&#xFF0C;&#x4F1A;&#x6682;&#x505C;&#x6240;&#x6709;&#x7684;&#x7528;&#x6237;&#x7EBF;&#x7A0B;&#xFF0C;&#x6240;&#x4EE5;&#x4E0D;&#x9002;&#x5408;&#x670D;&#x52A1;&#x73AF;&#x5883;&#x3002;</li></ul></li><li>&#x5E76;&#x884C;&#x5783;&#x573E;&#x56DE;&#x6536;&#x5668;&#xFF08;Parallel&#xFF09;<ul><li>&#x591A;&#x4E2A;&#x5783;&#x573E;&#x6536;&#x96C6;&#x7EBF;&#x7A0B;&#x5E76;&#x884C;&#x5DE5;&#x4F5C;&#xFF0C;&#x6B64;&#x65F6;&#x7528;&#x6237;&#x7EBF;&#x7A0B;&#x662F;&#x6682;&#x505C;&#x7684;&#xFF0C;&#x7528;&#x4E8E;&#x79D1;&#x5B66;&#x8BA1;&#x7B97;&#x3001;&#x5927;&#x6570;&#x636E;&#x5904;&#x7406;&#x7B49;&#x5F31;&#x4EA4;&#x4E92;&#x573A;&#x666F;&#x3002;</li></ul></li><li>&#x5E76;&#x53D1;&#x5783;&#x573E;&#x56DE;&#x6536;&#x5668;&#xFF08;CMS&#xFF09;<ul><li>&#x7528;&#x6237;&#x7EBF;&#x7A0B;&#x548C;&#x5783;&#x573E;&#x6536;&#x96C6;&#x7EBF;&#x7A0B;&#x540C;&#x65F6;&#x6267;&#x884C;&#xFF08;&#x4E0D;&#x4E00;&#x5B9A;&#x662F;&#x5E76;&#x884C;&#xFF0C;&#x53EF;&#x80FD;&#x662F;&#x4EA4;&#x66FF;&#x6267;&#x884C;&#xFF09;&#xFF0C;&#x4E0D;&#x9700;&#x8981;&#x505C;&#x987F;&#x7528;&#x6237;&#x7EBF;&#x7A0B;&#xFF0C;&#x4E92;&#x8054;&#x7F51;&#x516C;&#x53F8;&#x591A;&#x7528;&#x5B83;&#xFF0C;&#x9002;&#x7528;&#x5BF9;&#x76F8;&#x5E94;&#x65F6;&#x95F4;&#x6709;&#x8981;&#x6C42;&#x7684;&#x573A;&#x666F;&#x3002;</li></ul></li><li>G1 &#x5783;&#x573E;&#x56DE;&#x6536;&#x5668;<ul><li>G1 &#x5783;&#x573E;&#x56DE;&#x6536;&#x5668;&#x5C06;&#x5806;&#x5185;&#x5B58;&#x5206;&#x5272;&#x6210;&#x4E0D;&#x540C;&#x7684;&#x533A;&#x57DF;&#x7136;&#x540E;&#x5E76;&#x53D1;&#x7684;&#x5BF9;&#x5176;&#x8FDB;&#x884C;&#x5783;&#x573E;&#x56DE;&#x6536;&#x3002;</li></ul></li></ul><h2 id="&#x600E;&#x4E48;&#x67E5;&#x770B;&#x670D;&#x52A1;&#x5668;&#x9ED8;&#x8BA4;&#x5783;&#x573E;&#x6536;&#x96C6;&#x5668;&#x662F;&#x54EA;&#x4E2A;&#xFF1F;&#x751F;&#x4EA7;&#x662F;&#x5982;&#x4F55;&#x914D;&#x7F6E;&#x5783;&#x573E;&#x6536;&#x96C6;&#x5668;&#xFF1F;&#x8C08;&#x8C08;&#x4F60;&#x5BF9;&#x5783;&#x573E;&#x6536;&#x96C6;&#x5668;&#x7684;&#x7406;&#x89E3;&#xFF1F;"><a href="#&#x600E;&#x4E48;&#x67E5;&#x770B;&#x670D;&#x52A1;&#x5668;&#x9ED8;&#x8BA4;&#x5783;&#x573E;&#x6536;&#x96C6;&#x5668;&#x662F;&#x54EA;&#x4E2A;&#xFF1F;&#x751F;&#x4EA7;&#x662F;&#x5982;&#x4F55;&#x914D;&#x7F6E;&#x5783;&#x573E;&#x6536;&#x96C6;&#x5668;&#xFF1F;&#x8C08;&#x8C08;&#x4F60;&#x5BF9;&#x5783;&#x573E;&#x6536;&#x96C6;&#x5668;&#x7684;&#x7406;&#x89E3;&#xFF1F;" class="headerlink" title="&#x600E;&#x4E48;&#x67E5;&#x770B;&#x670D;&#x52A1;&#x5668;&#x9ED8;&#x8BA4;&#x5783;&#x573E;&#x6536;&#x96C6;&#x5668;&#x662F;&#x54EA;&#x4E2A;&#xFF1F;&#x751F;&#x4EA7;&#x662F;&#x5982;&#x4F55;&#x914D;&#x7F6E;&#x5783;&#x573E;&#x6536;&#x96C6;&#x5668;&#xFF1F;&#x8C08;&#x8C08;&#x4F60;&#x5BF9;&#x5783;&#x573E;&#x6536;&#x96C6;&#x5668;&#x7684;&#x7406;&#x89E3;&#xFF1F;"></a>&#x600E;&#x4E48;&#x67E5;&#x770B;&#x670D;&#x52A1;&#x5668;&#x9ED8;&#x8BA4;&#x5783;&#x573E;&#x6536;&#x96C6;&#x5668;&#x662F;&#x54EA;&#x4E2A;&#xFF1F;&#x751F;&#x4EA7;&#x662F;&#x5982;&#x4F55;&#x914D;&#x7F6E;&#x5783;&#x573E;&#x6536;&#x96C6;&#x5668;&#xFF1F;&#x8C08;&#x8C08;&#x4F60;&#x5BF9;&#x5783;&#x573E;&#x6536;&#x96C6;&#x5668;&#x7684;&#x7406;&#x89E3;&#xFF1F;</h2><ul><li>&#x600E;&#x4E48;&#x67E5;&#x770B;&#x670D;&#x52A1;&#x5668;&#x9ED8;&#x8BA4;&#x5783;&#x573E;&#x6536;&#x96C6;&#x5668;&#x662F;&#x54EA;&#x4E2A;&#xFF1F;<ul><li>Java -XX:+PrintCommandLineFlags</li></ul></li><li>Java &#x7684; GC &#x56DE;&#x6536;&#x7684;&#x7C7B;&#x578B;&#x4E3B;&#x8981;&#x6709;&#xFF1A;<ul><li>UseSerialGC&#xFF0C;UseParallelGC&#xFF0C;UseConcMarkSweepGC&#xFF0C;UseParNewGC&#xFF0C;UseParallelOldGC&#xFF0C;UseG1GC</li><li>Java 8 &#x4EE5;&#x540E;&#x57FA;&#x672C;&#x4E0D;&#x4F7F;&#x7528; Serial Old</li></ul></li><li>&#x5783;&#x573E;&#x6536;&#x96C6;&#x5668;<br><img src="/2019/05/10/JVM&#x9762;&#x8BD5;/timg.jpg" alt="timg"></li><li>&#x53C2;&#x6570;&#x8BF4;&#x660E;<ul><li>DefNew : Default New Generation</li><li>Tenured : Old</li><li>ParNew : Parallel New Generation</li><li>PSYoungGen : Parallel Scavenge</li><li>ParOldGen : Parallel Old Generation</li></ul></li><li>Server/Client &#x6A21;&#x5F0F;&#x5206;&#x522B;&#x662F;&#x4EC0;&#x4E48;&#x610F;&#x601D;<ul><li>&#x6700;&#x4E3B;&#x8981;&#x7684;&#x5DEE;&#x522B;&#x5728;&#x4E8E;&#xFF1A;-Server&#x6A21;&#x5F0F;&#x542F;&#x52A8;&#x65F6;&#xFF0C;&#x901F;&#x5EA6;&#x8F83;&#x6162;&#xFF0C;&#x4F46;&#x662F;&#x4E00;&#x65E6;&#x8FD0;&#x884C;&#x8D77;&#x6765;&#x540E;&#xFF0C;&#x6027;&#x80FD;&#x5C06;&#x4F1A;&#x6709;&#x5F88;&#x5927;&#x7684;&#x63D0;&#x5347;&#x3002;</li><li>&#x5F53;&#x865A;&#x62DF;&#x673A;&#x8FD0;&#x884C;&#x5728;-client&#x6A21;&#x5F0F;&#x7684;&#x65F6;&#x5019;&#xFF0C;&#x4F7F;&#x7528;&#x7684;&#x662F;&#x4E00;&#x4E2A;&#x4EE3;&#x53F7;&#x4E3A;C1&#x7684;&#x8F7B;&#x91CF;&#x7EA7;&#x7F16;&#x8BD1;&#x5668;, &#x800C;-server&#x6A21;&#x5F0F;&#x542F;&#x52A8;&#x7684;&#x865A;&#x62DF;&#x673A;&#x91C7;&#x7528;&#x76F8;&#x5BF9;&#x91CD;&#x91CF;&#x7EA7;&#xFF0C;&#x4EE3;&#x53F7;&#x4E3A;C2&#x7684;&#x7F16;&#x8BD1;&#x5668;&#xFF0C;C2&#x6BD4;C1&#x7F16;&#x8BD1;&#x5668;&#x7F16;&#x8BD1;&#x7684;&#x76F8;&#x5BF9;&#x5F7B;&#x5E95;&#xFF0C;&#x670D;&#x52A1;&#x8D77;&#x6765;&#x4E4B;&#x540E;,&#x6027;&#x80FD;&#x66F4;&#x9AD8;&#x3002;</li><li>&#x6240;&#x4EE5;&#x901A;&#x5E38;&#x7528;&#x4E8E;&#x505A;&#x670D;&#x52A1;&#x5668;&#x7684;&#x65F6;&#x5019;&#x6211;&#x4EEC;&#x7528;&#x670D;&#x52A1;&#x7AEF;&#x6A21;&#x5F0F;&#xFF0C;&#x5982;&#x679C;&#x4F60;&#x7684;&#x7535;&#x8111;&#x53EA;&#x662F;&#x8FD0;&#x884C;&#x4E00;&#x4E0B;java&#x7A0B;&#x5E8F;&#xFF0C;&#x5C31;&#x5BA2;&#x6237;&#x7AEF;&#x6A21;&#x5F0F;&#x5C31;&#x53EF;&#x4EE5;&#x4E86;&#x3002;&#x5F53;&#x7136;&#x8FD9;&#x4E9B;&#x90FD;&#x662F;&#x6211;&#x4EEC;&#x505A;&#x7A0B;&#x5E8F;&#x4F18;&#x5316;&#x7A0B;&#x5E8F;&#x624D;&#x9700;&#x8981;&#x8FD9;&#x4E9B;&#x4E1C;&#x897F;&#x7684;&#xFF0C;&#x666E;&#x901A;&#x4EBA;&#x5E76;&#x4E0D;&#x5173;&#x6CE8;&#x8FD9;&#x4E9B;&#x4E13;&#x4E1A;&#x7684;&#x4E1C;&#x897F;&#x4E86;&#x3002;&#x5176;&#x5B9E;&#x670D;&#x52A1;&#x5668;&#x6A21;&#x5F0F;&#x5373;&#x4F7F;&#x7F16;&#x8BD1;&#x66F4;&#x5F7B;&#x5E95;&#xFF0C;&#x7136;&#x540E;&#x5783;&#x573E;&#x56DE;&#x6536;&#x4F18;&#x5316;&#x66F4;&#x597D;&#xFF0C;&#x8FD9;&#x5F53;&#x7136;&#x5403;&#x7684;&#x5185;&#x5B58;&#x8981;&#x591A;&#x70B9;&#x76F8;&#x5BF9;&#x4E8E;&#x5BA2;&#x6237;&#x7AEF;&#x6A21;&#x5F0F;&#x3002;</li></ul></li><li>&#x65B0;&#x751F;&#x4EE3;<ul><li>&#x4E32;&#x884C; GC (Serial/ Serital Copying)</li><li>&#x5E76;&#x884C; GC (ParNew)</li><li>&#x5E76;&#x884C;&#x56DE;&#x6536; GC (Parallel/ Parallel Scanvenge)</li></ul></li><li>&#x8001;&#x5E74;&#x4EE3;<ul><li>&#x4E32;&#x884C; GC (Serial Old/ Serial MSC)</li><li>&#x5E76;&#x884C; GC (Parallel Old/ Parallel MSC)</li><li>&#x5E76;&#x53D1;&#x6807;&#x8BB0;&#x6E05;&#x9664; GC (CMS)<ul><li>&#x662F;&#x4E00;&#x79CD;&#x4EE5;&#x83B7;&#x53D6;&#x6700;&#x77ED;&#x56DE;&#x6536;&#x505C;&#x987F;&#x65F6;&#x95F4;&#x4E3A;&#x76EE;&#x6807;&#x7684;&#x6536;&#x96C6;&#x5668;&#xFF0C;&#x9002;&#x5408;&#x5E94;&#x7528;&#x5728;&#x4E92;&#x8054;&#x7F51;&#x7AD9;&#x6216;&#x8005; B/S &#x7CFB;&#x7EDF;&#x7684;&#x670D;&#x52A1;&#x5668;&#x4E0A;&#xFF0C;&#x8FD9;&#x4E2A;&#x7C7B;&#x5E94;&#x7528;&#x5C24;&#x5176;&#x91CD;&#x89C6;&#x670D;&#x52A1;&#x5668;&#x7684;&#x54CD;&#x5E94;&#x901F;&#x5EA6;&#xFF0C;&#x5E0C;&#x671B;&#x7CFB;&#x7EDF;&#x505C;&#x987F;&#x65F6;&#x95F4;&#x6700;&#x77ED;&#x3002;</li><li>CMS &#x975E;&#x5E38;&#x9002;&#x5408;&#x5806;&#x5185;&#x5B58;&#x5927;&#x3001;CPU &#x6838;&#x6570;&#x591A;&#x7684;&#x670D;&#x52A1;&#x5668;&#x7AEF;&#x5E94;&#x7528;&#xFF0C;&#x4E5F;&#x662F; G1 &#x51FA;&#x73B0;&#x4E4B;&#x524D;&#x5927;&#x578B;&#x5E94;&#x7528;&#x9996;&#x9009;&#x6536;&#x96C6;&#x5668;&#x3002;</li><li>&#x5E76;&#x53D1;&#x505C;&#x987F;&#x6BD4;&#x8F83;&#x5C11;&#xFF0C;&#x5E76;&#x53D1;&#x6307;&#x7684;&#x662F;&#x4E0E;&#x7528;&#x6237;&#x7EBF;&#x7A0B;&#x4E00;&#x8D77;&#x6267;&#x884C;&#x3002;</li><li>&#x8FC7;&#x7A0B;<ul><li>&#x521D;&#x59CB;&#x6807;&#x8BB0;&#xFF08;initail mark&#xFF09;&#xFF1A;&#x53EA;&#x662F;&#x6807;&#x8BB0;&#x4E00;&#x4E0B; GC Roots &#x80FD;&#x76F4;&#x63A5;&#x5173;&#x8054;&#x7684;&#x5BF9;&#x8C61;&#xFF0C;&#x901F;&#x5EA6;&#x5F88;&#x5FEB;&#xFF0C;&#x9700;&#x8981;&#x6682;&#x505C;&#x6240;&#x6709;&#x7684;&#x5DE5;&#x4F5C;&#x7EBF;&#x7A0B;</li><li>&#x5E76;&#x53D1;&#x6807;&#x8BB0;&#xFF08;concurrent mark &#x548C;&#x7528;&#x6237;&#x7EBF;&#x7A0B;&#x4E00;&#x8D77;&#xFF09;&#xFF1A;&#x8FDB;&#x884C; GC Roots &#x7684;&#x8DDF;&#x8E2A;&#x8FC7;&#x7A0B;&#xFF0C;&#x548C;&#x7528;&#x6237;&#x7EBF;&#x7A0B;&#x4E00;&#x8D77;&#x5DE5;&#x4F5C;&#xFF0C;&#x4E0D;&#x9700;&#x8981;&#x6682;&#x505C;&#x5DE5;&#x4F5C;&#x7EBF;&#x7A0B;&#x3002;</li><li>&#x91CD;&#x65B0;&#x6807;&#x8BB0;&#xFF08;remark&#xFF09;&#xFF1A;&#x4E3A;&#x4E86;&#x4FEE;&#x6B63;&#x5728;&#x5E76;&#x53D1;&#x6807;&#x8BB0;&#x671F;&#x95F4;&#xFF0C;&#x56E0;&#x7528;&#x6237;&#x7A0B;&#x5E8F;&#x7EE7;&#x7EED;&#x8FD0;&#x884C;&#x800C;&#x5BFC;&#x81F4;&#x6807;&#x8BB0;&#x4EA7;&#x751F;&#x53D8;&#x52A8;&#x7684;&#x90A3;&#x4E00;&#x90E8;&#x5206;&#x5BF9;&#x8C61;&#x7684;&#x6807;&#x8BB0;&#x8BB0;&#x5F55;&#xFF0C;&#x4ECD;&#x7136;&#x9700;&#x8981;&#x6682;&#x505C;&#x6240;&#x6709;&#x7684;&#x5DE5;&#x4F5C;&#x7EBF;&#x7A0B;&#x3002;</li><li>&#x5E76;&#x53D1;&#x6E05;&#x9664;&#xFF08;concurrent sweep &#x548C;&#x7528;&#x6237;&#x7EBF;&#x7A0B;&#x4E00;&#x8D77;&#xFF09;&#xFF1A;&#x6E05;&#x9664; GC &#x4E0D;&#x53EF;&#x8FBE;&#x5BF9;&#x8C61;&#xFF0C;&#x548C;&#x7528;&#x6237;&#x7EBF;&#x7A0B;&#x4E00;&#x8D77;&#x5DE5;&#x4F5C;&#xFF0C;&#x4E0D;&#x9700;&#x8981;&#x6682;&#x505C;&#x5DE5;&#x4F5C;&#x7EBF;&#x7A0B;&#xFF0C;&#x57FA;&#x4E8E;&#x6807;&#x8BB0;&#x7ED3;&#x679C;&#xFF0C;&#x76F4;&#x63A5;&#x6E05;&#x9664;&#x3002;&#x7531;&#x4E8E;&#x8017;&#x65F6;&#x6700;&#x957F;&#x7684;&#x5E76;&#x53D1;&#x6807;&#x8BB0;&#x548C;&#x5E76;&#x53D1;&#x6E05;&#x9664;&#x8FC7;&#x7A0B;&#x4E2D;&#xFF0C;&#x5783;&#x573E;&#x6536;&#x96C6;&#x7EBF;&#x7A0B;&#x548C;&#x7528;&#x6237;&#x7EBF;&#x7A0B;&#x53EF;&#x4EE5;&#x4E00;&#x8D77;&#x5E76;&#x53D1;&#x5DE5;&#x4F5C;&#xFF0C;&#x6240;&#x4EE5;&#x603B;&#x4F53;&#x6765;&#x770B; CMS &#x6536;&#x96C6;&#x5668;&#x7684;&#x5185;&#x5B58;&#x56DE;&#x6536;&#x548C;&#x7528;&#x6237;&#x7EBF;&#x7A0B;&#x662F;&#x4E00;&#x8D77;&#x5E76;&#x53D1;&#x5730;&#x6267;&#x884C;&#x3002;</li></ul></li><li>&#x4F18;&#x7F3A;&#x70B9;<ul><li>&#x4F18;&#x70B9;&#xFF1A;&#x5E76;&#x53D1;&#x6536;&#x96C6;&#x505C;&#x987F;&#x4F4E;</li><li>&#x7F3A;&#x70B9;&#xFF1A;&#x5E76;&#x53D1;&#x6267;&#x884C;&#x5BF9; CPU &#x8D44;&#x6E90;&#x538B;&#x529B;&#x5927;&#xFF0C;&#x91C7;&#x7528;&#x7684;&#x6807;&#x8BB0;&#x6E05;&#x9664;&#x7B97;&#x6CD5;&#x4F1A;&#x5BFC;&#x81F4;&#x5927;&#x91CF;&#x788E;&#x7247;</li></ul></li><li>&#x7531;&#x4E8E;&#x5E76;&#x53D1;&#x8FDB;&#x884C;&#xFF0C; CMS &#x5728;&#x6536;&#x96C6;&#x4E0E;&#x5E94;&#x7528;&#x7EBF;&#x7A0B;&#x4F1A;&#x540C;&#x65F6;&#x589E;&#x52A0;&#x5BF9;&#x5806;&#x5185;&#x5B58;&#x7684;&#x5360;&#x7528;&#xFF0C;&#x4E5F;&#x5C31;&#x662F;&#x8BF4;&#xFF0C;CMS &#x5FC5;&#x987B;&#x8981;&#x5728;&#x8001;&#x5E74;&#x4EE3;&#x5806;&#x7528;&#x5C3D;&#x4E4B;&#x524D;&#x5B8C;&#x6210;&#x5783;&#x573E;&#x56DE;&#x6536;&#xFF0C;&#x5426;&#x8005; CMS &#x56DE;&#x6536;&#x5931;&#x8D25;&#xFF0C;&#x5C06;&#x89E6;&#x53D1;&#x62C5;&#x4FDD;&#x673A;&#x5236;&#xFF0C;&#x4E32;&#x884C;&#x8001;&#x5E74;&#x4EE3;&#x6536;&#x96C6;&#x5668;&#x5C06;&#x4F1A;&#x4EE5; STW &#x7684;&#x65B9;&#x5F0F;&#x8FDB;&#x884C;&#x4E00;&#x6B21; GC&#xFF0C;&#x4ECE;&#x800C;&#x9020;&#x6210;&#x8F83;&#x5927;&#x7684;&#x505C;&#x987F;&#x65F6;&#x95F4;&#x3002;</li><li>&#x6807;&#x8BB0;&#x6E05;&#x9664;&#x7B97;&#x6CD5;&#x65E0;&#x6CD5;&#x6574;&#x7406;&#x7A7A;&#x95F4;&#x788E;&#x7247;&#xFF0C;&#x8001;&#x5E74;&#x4EE3;&#x7A7A;&#x95F4;&#x4F1A;&#x968F;&#x7740;&#x5E94;&#x7528;&#x65F6;&#x957F;&#x88AB;&#x9010;&#x6E10;&#x8017;&#x5C3D;&#xFF0C;&#x6700;&#x540E;&#x5C06;&#x4E0D;&#x5F97;&#x4E0D;&#x901A;&#x8FC7;&#x62C5;&#x4FDD;&#x673A;&#x5236;&#x5BF9;&#x5806;&#x5185;&#x5B58;&#x8FDB;&#x884C;&#x538B;&#x7F29;&#x3002;CMS &#x4E5F;&#x63D0;&#x4F9B;&#x4E86;&#x53C2;&#x6570; -XX:CMSFullGCsBeForeCompaction (&#x9ED8;&#x8BA4;0&#xFF0C;&#x5373;&#x6BCF;&#x6B21;&#x90FD;&#x8FDB;&#x884C;&#x5185;&#x5B58;&#x6574;&#x7406;) &#x6765;&#x6307;&#x5B9A;&#x591A;&#x5C11;&#x6B21; CMS &#x6536;&#x96C6;&#x4E4B;&#x540E;&#xFF0C;&#x8FDB;&#x884C;&#x4E00;&#x6B21;&#x538B;</li></ul></li></ul></li><li>&#x5783;&#x573E;&#x6536;&#x96C6;&#x5668;&#x914D;&#x7F6E;&#x4EE3;&#x7801;&#x603B;&#x7ED3;<ul><li>&#x914D;&#x7F6E;&#x65B0;&#x751F;&#x4EE3;&#x6536;&#x96C6;&#x5668;&#xFF0C;&#x8001;&#x5E74;&#x4EE3;&#x6536;&#x96C6;&#x5668;&#x4F1A;&#x81EA;&#x52A8;&#x914D;&#x7F6E;&#x4E0A;&#x3002;<br><img src="/2019/05/10/JVM&#x9762;&#x8BD5;/1558237229584.png" alt="1558237229584"></li></ul></li><li>&#x5982;&#x4F55;&#x9009;&#x62E9;&#x5783;&#x573E;&#x6536;&#x96C6;&#x5668;<ul><li>&#x5355; CPU &#x6216;&#x8005;&#x5C0F;&#x5185;&#x5B58;&#xFF0C;&#x5355;&#x673A;&#x7A0B;&#x5E8F;&#xFF1A;-XX:UseSerialGC</li><li>&#x591A; CPU &#x9700;&#x8981;&#x6700;&#x5927;&#x541E;&#x5410;&#x91CF;&#xFF0C;&#x5982;&#x540E;&#x53F0;&#x8BA1;&#x7B97;&#x578B;&#x5E94;&#x7528;&#xFF1A;-XX:UseParallelGC &#x6216;&#x8005; -XX:UseParallelOldGC</li><li>&#x591A; CPU &#x8FFD;&#x6C42;&#x4F4E;&#x505C;&#x987F;&#x65F6;&#x95F4;&#xFF0C;&#x9700;&#x8981;&#x5FEB;&#x901F;&#x54CD;&#x5E94;&#xFF0C;&#x5982;&#x4E92;&#x8054;&#x7F51;&#x5E94;&#x7528;&#xFF1A;-XX:+UseConcMarkSweepGC</li></ul></li></ul><h2 id="G1-&#x5783;&#x573E;&#x6536;&#x96C6;&#x5668;&#x4F60;&#x4E86;&#x89E3;&#x5417;&#xFF1F;"><a href="#G1-&#x5783;&#x573E;&#x6536;&#x96C6;&#x5668;&#x4F60;&#x4E86;&#x89E3;&#x5417;&#xFF1F;" class="headerlink" title="G1 &#x5783;&#x573E;&#x6536;&#x96C6;&#x5668;&#x4F60;&#x4E86;&#x89E3;&#x5417;&#xFF1F;"></a>G1 &#x5783;&#x573E;&#x6536;&#x96C6;&#x5668;&#x4F60;&#x4E86;&#x89E3;&#x5417;&#xFF1F;</h2><ul><li>&#x4EE5;&#x524D;&#x6536;&#x96C6;&#x5668;&#x7684;&#x7279;&#x70B9;<ul><li>&#x5E74;&#x8F7B;&#x4EE3;&#x548C;&#x8001;&#x5E74;&#x4EE3;&#x662F;&#x5404;&#x81EA;&#x72EC;&#x7ACB;&#x4E14;&#x8FDE;&#x7EED;&#x7684;&#x5185;&#x5B58;&#x5757;</li><li>&#x5E74;&#x8F7B;&#x4EE3;&#x6536;&#x96C6;&#x5668;&#x4F7F;&#x7528; eden + S0 + S1 &#x8FDB;&#x884C;&#x590D;&#x5236;&#x7B97;&#x6CD5;</li><li>&#x8001;&#x5E74;&#x4EE3;&#x6536;&#x96C6;&#x5FC5;&#x987B;&#x626B;&#x63CF;&#x6574;&#x4E2A;&#x8001;&#x5E74;&#x4EE3;&#x533A;&#x57DF;</li><li>&#x90FD;&#x662F;&#x4EE5;&#x5C3D;&#x53EF;&#x80FD;&#x7684;&#x5C11;&#x800C;&#x5FEB;&#x901F;&#x5730;&#x6267;&#x884C; GC &#x4E3A;&#x8BBE;&#x8BA1;&#x539F;&#x5219;</li></ul></li><li>G1 &#x662F;&#x4EC0;&#x4E48;<ul><li>G1 &#x662F;&#x4E00;&#x79CD;&#x9762;&#x5411;&#x670D;&#x52A1;&#x7AEF;&#x7684;&#x5783;&#x573E;&#x6536;&#x96C6;&#x5668;&#xFF0C;&#x5E94;&#x7528;&#x5728;&#x591A;&#x6838;&#x5904;&#x7406;&#x5668;&#x548C;&#x5927;&#x5BB9;&#x91CF;&#x5185;&#x5B58;&#x73AF;&#x5883;&#x4E2D;&#xFF0C;&#x5728;&#x5B9E;&#x73B0;&#x9AD8;&#x541E;&#x5410;&#x91CF;&#x7684;&#x540C;&#x65F6;&#xFF0C;&#x5C3D;&#x53EF;&#x80FD;&#x7684;&#x6EE1;&#x8DB3;&#x5783;&#x573E;&#x6536;&#x96C6;&#x5668;&#x7684;&#x6682;&#x505C;&#x65F6;&#x95F4;&#x8981;&#x6C42;&#x3002;</li><li>&#x50CF; CMS &#x6536;&#x96C6;&#x5668;&#x4E00;&#x6837;&#xFF0C;&#x80FD;&#x4E0E;&#x5E94;&#x7528;&#x7A0B;&#x5E8F;&#x7EBF;&#x7A0B;&#x5E76;&#x53D1;&#x6267;&#x884C;&#xFF0C;&#x6574;&#x7406;&#x7A7A;&#x95F2;&#x7A7A;&#x95F4;&#x66F4;&#x5FEB;&#xFF0C;&#x9700;&#x8981;&#x66F4;&#x591A;&#x7684;&#x65F6;&#x95F4;&#x6765;&#x9884;&#x6D4B; GC &#x505C;&#x987F;&#x65F6;&#x95F4;&#xFF0C;&#x4E0D;&#x5E0C;&#x671B;&#x727A;&#x7272;&#x5927;&#x91CF;&#x7684;&#x541E;&#x5410;&#x6027;&#x80FD;&#xFF0C;&#x4E0D;&#x9700;&#x8981;&#x66F4;&#x5927;&#x7684; JAVA Heap&#x3002;</li><li>G1 &#x6536;&#x96C6;&#x5668;&#x7684;&#x8BBE;&#x8BA1;&#x76EE;&#x7684;&#x662F;&#x53D6;&#x4EE3; CMS &#x6536;&#x96C6;&#x5668;&#xFF0C;&#x540C;&#x65F6;&#x4E0E; CMS &#x76F8;&#x6BD4;&#xFF0C;G1 &#x5783;&#x573E;&#x6536;&#x96C6;&#x5668;&#x662F;&#x4E00;&#x4E2A;&#x6709;&#x6574;&#x7406;&#x5185;&#x5B58;&#x8FC7;&#x7A0B;&#x7684;&#x5783;&#x573E;&#x6536;&#x96C6;&#x5668;&#xFF0C;&#x4E0D;&#x4F1A;&#x4EA7;&#x751F;&#x5F88;&#x591A;&#x5185;&#x5B58;&#x788E;&#x7247;&#x3002;G1 &#x7684; Stop The World &#x66F4;&#x53EF;&#x63A7;&#xFF0C;G1 &#x5728;&#x505C;&#x987F;&#x4E0A;&#x6DFB;&#x52A0;&#x4E86;&#x9884;&#x6D4B;&#x673A;&#x5236;&#xFF0C;&#x7528;&#x6237;&#x53EF;&#x4EE5;&#x6307;&#x5B9A;&#x671F;&#x671B;&#x7684;&#x505C;&#x987F;&#x65F6;&#x95F4;&#x3002;</li><li>G1 &#x662F;&#x5728; 2012 &#x5E74;&#x624D;&#x5728; jdk.1.7u4 &#x4E2D;&#x53EF;&#x4EE5;&#x5440;&#x7528;&#xFF0C;&#x5728; jdk9 &#x4E2D;&#x5C06; G1 &#x53D8;&#x6210;&#x9ED8;&#x8BA4;&#x5783;&#x573E;&#x6536;&#x96C6;&#x5668;&#x6765;&#x4EE3;&#x66FF; CMS&#x3002;&#x5B83;&#x662F;&#x4EE5;&#x6B3E;&#x9762;&#x5411;&#x670D;&#x52A1;&#x5E94;&#x7528;&#x7684;&#x6536;&#x96C6;&#x5668;&#x3002;</li><li>&#x4E3B;&#x8981;&#x6539;&#x53D8;&#x662F; Eden&#x3001;Survivor &#x548C; Tenured &#x7B49;&#x5185;&#x5B58;&#x533A;&#x57DF;&#x4E0D;&#x518D;&#x662F;&#x8FDE;&#x7EED;&#x7684;&#xFF0C;&#x800C;&#x662F;&#x53D8;&#x6210;&#x4E86;&#x4E00;&#x4E2A;&#x4E2A;&#x5927;&#x5C0F;&#x4E00;&#x6837;&#x7684; region&#xFF0C;&#x6BCF;&#x4E2A; region &#x4ECE; 1M &#x5230; 32M &#x4E0D;&#x7B49;&#xFF0C;&#x4E00;&#x4E2A; region &#x6709;&#x53EF;&#x80FD;&#x5C5E;&#x4E8E; Eden&#x3001;Survivor &#x6216;&#x8005; Tenured &#x5185;&#x5B58;&#x533A;&#x57DF;&#x3002;</li></ul></li><li>&#x7279;&#x70B9;<ul><li>G1 &#x80FD;&#x5145;&#x5206;&#x5229;&#x7528;&#x591A; CPU&#x3001;&#x591A;&#x6838;&#x73AF;&#x5883;&#x786C;&#x4EF6;&#x4F18;&#x52BF;&#xFF0C;&#x5C3D;&#x91CF;&#x7F29;&#x77ED; STW&#x3002;</li><li>G1 &#x6574;&#x4F53;&#x91C7;&#x7528;&#x6807;&#x8BB0;-&#x6574;&#x7406;&#x7B97;&#x6CD5;&#xFF0C;&#x5C40;&#x90E8;&#x662F;&#x901A;&#x8FC7;&#x662F;&#x901A;&#x8FC7;&#x590D;&#x5236;&#x7B97;&#x6CD5;&#xFF0C;<strong>&#x4E0D;&#x4F1A;&#x4EA7;&#x751F;&#x5185;&#x5B58;&#x788E;&#x7247;</strong>&#x3002;</li><li>&#x5B8F;&#x89C2;&#x4E0A;&#x770B; G1 &#x4E4B;&#x4E2D;&#x4E0D;&#x5728;&#x533A;&#x5206;&#x5E74;&#x8F7B;&#x4EE3;&#x548C;&#x8001;&#x5E74;&#x4EE3;&#xFF0C;&#x88AB;&#x5185;&#x5B58;&#x5212;&#x5206;&#x4E3A;&#x591A;&#x4E2A;&#x72EC;&#x7ACB;&#x7684;&#x5B50;&#x533A;&#x57DF;&#x3002;</li><li>G1 &#x6536;&#x96C6;&#x5668;&#x91CC;&#x9762;&#x8BB2;&#x6574;&#x4E2A;&#x7684;&#x5185;&#x5B58;&#x533A;&#x57DF;&#x6DF7;&#x5408;&#x5728;&#x4E00;&#x8D77;&#xFF0C;<strong>&#x4F46;&#x5176;&#x672C;&#x8EAB;&#x4F9D;&#x7136;&#x5728;&#x5C0F;&#x8303;&#x56F4;&#x5185;&#x8981;&#x8FDB;&#x884C;&#x5E74;&#x8F7B;&#x4EE3;&#x548C;&#x8001;&#x5E74;&#x4EE3;&#x7684;&#x533A;&#x5206;</strong>&#x3002;&#x4FDD;&#x7559;&#x4E86;&#x65B0;&#x751F;&#x4EE3;&#x548C;&#x8001;&#x5E74;&#x4EE3;&#xFF0C;&#x4F46;&#x5979;&#x4EEC;&#x4E0D;&#x5728;&#x662F;&#x7269;&#x7406;&#x9694;&#x79BB;&#xFF0C;&#x800C;&#x662F;&#x4E00;&#x90E8;&#x5206; Region &#x7684;&#x96C6;&#x5408;&#x4E14;&#x4E0D;&#x9700;&#x8981; Region &#x662F;&#x8FDE;&#x7EED;&#x7684;&#xFF0C;&#x4E5F;&#x5C31;&#x662F;&#x8BF4;&#x4F9D;&#x7136;&#x4F1A;&#x91C7;&#x7528;&#x4E0D;&#x540C;&#x7684; GC &#x65B9;&#x5F0F;&#x6765;&#x5904;&#x7406;&#x4E0D;&#x540C;&#x7684;&#x533A;&#x57DF;&#x3002;</li><li>G1 &#x867D;&#x7136;&#x4E5F;&#x662F;&#x5206;&#x4EE3;&#x6536;&#x96C6;&#x5668;&#xFF0C;&#x4F46;&#x6574;&#x4E2A;&#x5185;&#x5B58;&#x5206;&#x533A;&#x4E0D;&#x5B58;&#x5728;&#x7269;&#x7406;&#x4E0A;&#x7684;&#x5E74;&#x8F7B;&#x4EE3;&#x548C;&#x8001;&#x5E74;&#x4EE3;&#x7684;&#x533A;&#x522B;&#xFF0C;&#x4E5F;&#x4E0D;&#x9700;&#x8981;&#x5B8C;&#x5168;&#x72EC;&#x7ACB;&#x7684; Survivor to space &#x5806;&#x505A;&#x590D;&#x5236;&#x51C6;&#x5907;&#x3002;G1 &#x53EA;&#x6709;&#x903B;&#x8F91;&#x4E0A;&#x7684;&#x5206;&#x4EE3;&#x6982;&#x5FF5;&#xFF0C;&#x6216;&#x8005;&#x8BF4;&#x6BCF;&#x4E2A;&#x5206;&#x533A;&#x90FD;&#x53EF;&#x80FD;&#x968F; G1 &#x7684;&#x8FD0;&#x884C;&#x5728;&#x4E0D;&#x540C;&#x4EE3;&#x4E4B;&#x95F4;&#x524D;&#x540E;&#x5207;&#x6362;&#x3002;</li></ul></li><li><p>&#x5E95;&#x5C42;&#x539F;&#x7406;</p><ul><li><p>Region &#x533A;&#x57DF;&#x5316;&#x5783;&#x573E;&#x6536;&#x96C6;&#x5668;&#xFF1A;&#x6700;&#x5927;&#x597D;&#x5904;&#x662F;&#x5316;&#x6574;&#x4E3A;&#x96F6;&#xFF0C;&#x907F;&#x514D;&#x5168;&#x5185;&#x5B58;&#x626B;&#x63CF;&#xFF0C;&#x53EA;&#x9700;&#x8981;&#x6309;&#x7167;&#x533A;&#x57DF;&#x6765;&#x8FDB;&#x884C;&#x626B;&#x63CF;&#x5373;&#x53EF;&#x3002;</p></li><li><h3 id="Region"><a href="#Region" class="headerlink" title="Region"></a>Region</h3><p><img src="/2019/05/10/JVM&#x9762;&#x8BD5;/5611237-f643066bd97c7703.png" alt="5611237-f643066bd97c7703"><br>G1&#x7684;&#x5185;&#x5B58;&#x7ED3;&#x6784;&#x548C;&#x4F20;&#x7EDF;&#x7684;&#x5185;&#x5B58;&#x7A7A;&#x95F4;&#x5212;&#x5206;&#x6709;&#x6BD4;&#x8F83;&#x7684;&#x4E0D;&#x540C;&#x3002;G1&#x5C06;&#x5185;&#x5B58;&#x5212;&#x5206;&#x6210;&#x4E86;&#x591A;&#x4E2A;&#x5927;&#x5C0F;&#x76F8;&#x7B49;&#x7684;Region&#xFF08;&#x9ED8;&#x8BA4;&#x662F;512K&#xFF09;&#xFF0C;Region&#x903B;&#x8F91;&#x4E0A;&#x8FDE;&#x7EED;&#xFF0C;&#x7269;&#x7406;&#x5185;&#x5B58;&#x5730;&#x5740;&#x4E0D;&#x8FDE;&#x7EED;&#x3002;&#x540C;&#x65F6;&#x6BCF;&#x4E2A;Region&#x88AB;&#x6807;&#x8BB0;&#x6210;E&#x3001;S&#x3001;O&#x3001;H&#xFF0C;&#x5206;&#x522B;&#x8868;&#x793A;Eden&#x3001;Survivor&#x3001;Old&#x3001;Humongous&#x3002;&#x5176;&#x4E2D;E&#x3001;S&#x5C5E;&#x4E8E;&#x5E74;&#x8F7B;&#x4EE3;&#xFF0C;O&#x4E0E;H&#x5C5E;&#x4E8E;&#x8001;&#x5E74;&#x4EE3;&#x3002;<br>H&#x8868;&#x793A;Humongous&#x3002;&#x4ECE;&#x5B57;&#x9762;&#x4E0A;&#x5C31;&#x53EF;&#x4EE5;&#x7406;&#x89E3;&#x8868;&#x793A;&#x5927;&#x7684;&#x5BF9;&#x8C61;&#xFF08;&#x4E0B;&#x9762;&#x7B80;&#x79F0;H&#x5BF9;&#x8C61;&#xFF09;&#x3002;<strong>&#x5F53;&#x5206;&#x914D;&#x7684;&#x5BF9;&#x8C61;&#x5927;&#x4E8E;&#x7B49;&#x4E8E;Region&#x5927;&#x5C0F;&#x7684;&#x4E00;&#x534A;</strong>&#x7684;&#x65F6;&#x5019;&#x5C31;&#x4F1A;&#x88AB;&#x8BA4;&#x4E3A;&#x662F;&#x5DE8;&#x578B;&#x5BF9;&#x8C61;&#x3002;H&#x5BF9;&#x8C61;&#x9ED8;&#x8BA4;&#x5206;&#x914D;&#x5728;&#x8001;&#x5E74;&#x4EE3;&#xFF0C;&#x53EF;&#x4EE5;&#x9632;&#x6B62;GC&#x7684;&#x65F6;&#x5019;&#x5927;&#x5BF9;&#x8C61;&#x7684;&#x5185;&#x5B58;&#x62F7;&#x8D1D;&#x3002;&#x901A;&#x8FC7;&#x5982;&#x679C;&#x53D1;&#x73B0;&#x5806;&#x5185;&#x5B58;&#x5BB9;&#x4E0D;&#x4E0B;H&#x5BF9;&#x8C61;&#x7684;&#x65F6;&#x5019;&#xFF0C;&#x4F1A;&#x89E6;&#x53D1;&#x4E00;&#x6B21;GC&#x64CD;&#x4F5C;&#x3002; </p></li><li>&#x56DE;&#x6536;&#x6B65;&#x9AA4;<ul><li>&#x53C2;&#x770B;&#xFF1A;<a href="https://www.jianshu.com/p/548c67aa1bc0" target="_blank" rel="noopener">G1&#x4ECE;&#x5165;&#x95E8;&#x5230;&#x653E;&#x5F03;</a></li></ul></li><li>&#x56DB;&#x6B65;&#x8FC7;&#x7A0B;<br><img src="/2019/05/10/JVM&#x9762;&#x8BD5;/u=1236259389,1737476709&amp;fm=26&amp;gp=0.jpg" alt="u=1236259389,1737476709&amp;fm=26&amp;gp=0"></li></ul></li></ul><h2 id="&#x751F;&#x4EA7;&#x73AF;&#x5883;&#x670D;&#x52A1;&#x5668;&#x53D8;&#x6162;&#xFF0C;&#x8BCA;&#x65AD;&#x601D;&#x8DEF;&#x548C;&#x6027;&#x80FD;&#x8BC4;&#x4F30;&#x8C08;&#x8C08;&#xFF1F;"><a href="#&#x751F;&#x4EA7;&#x73AF;&#x5883;&#x670D;&#x52A1;&#x5668;&#x53D8;&#x6162;&#xFF0C;&#x8BCA;&#x65AD;&#x601D;&#x8DEF;&#x548C;&#x6027;&#x80FD;&#x8BC4;&#x4F30;&#x8C08;&#x8C08;&#xFF1F;" class="headerlink" title="&#x751F;&#x4EA7;&#x73AF;&#x5883;&#x670D;&#x52A1;&#x5668;&#x53D8;&#x6162;&#xFF0C;&#x8BCA;&#x65AD;&#x601D;&#x8DEF;&#x548C;&#x6027;&#x80FD;&#x8BC4;&#x4F30;&#x8C08;&#x8C08;&#xFF1F;"></a>&#x751F;&#x4EA7;&#x73AF;&#x5883;&#x670D;&#x52A1;&#x5668;&#x53D8;&#x6162;&#xFF0C;&#x8BCA;&#x65AD;&#x601D;&#x8DEF;&#x548C;&#x6027;&#x80FD;&#x8BC4;&#x4F30;&#x8C08;&#x8C08;&#xFF1F;</h2><ul><li>&#x6574;&#x673A;&#xFF1A;top</li><li>CPU&#xFF1A;vmstat</li><li>&#x5185;&#x5B58;&#xFF1A;free</li><li>&#x786C;&#x76D8;&#xFF1A;df</li><li>&#x78C1;&#x76D8;IO&#xFF1A;iostat</li><li>&#x7F51;&#x7EDC;IO&#xFF1A;ifstat</li></ul><h2 id="&#x5047;&#x5982;&#x751F;&#x4EA7;&#x73AF;&#x5883;&#x51FA;&#x73B0;-CPU-&#x8FC7;&#x9AD8;&#xFF0C;&#x8BF7;&#x8C08;&#x8C08;&#x4F60;&#x7684;&#x5206;&#x6790;&#x601D;&#x8DEF;&#x548C;&#x5B9A;&#x4F4D;&#xFF1F;"><a href="#&#x5047;&#x5982;&#x751F;&#x4EA7;&#x73AF;&#x5883;&#x51FA;&#x73B0;-CPU-&#x8FC7;&#x9AD8;&#xFF0C;&#x8BF7;&#x8C08;&#x8C08;&#x4F60;&#x7684;&#x5206;&#x6790;&#x601D;&#x8DEF;&#x548C;&#x5B9A;&#x4F4D;&#xFF1F;" class="headerlink" title="&#x5047;&#x5982;&#x751F;&#x4EA7;&#x73AF;&#x5883;&#x51FA;&#x73B0; CPU &#x8FC7;&#x9AD8;&#xFF0C;&#x8BF7;&#x8C08;&#x8C08;&#x4F60;&#x7684;&#x5206;&#x6790;&#x601D;&#x8DEF;&#x548C;&#x5B9A;&#x4F4D;&#xFF1F;"></a>&#x5047;&#x5982;&#x751F;&#x4EA7;&#x73AF;&#x5883;&#x51FA;&#x73B0; CPU &#x8FC7;&#x9AD8;&#xFF0C;&#x8BF7;&#x8C08;&#x8C08;&#x4F60;&#x7684;&#x5206;&#x6790;&#x601D;&#x8DEF;&#x548C;&#x5B9A;&#x4F4D;&#xFF1F;</h2><ul><li>&#x5148;&#x7528; top &#x547D;&#x4EE4;&#x627E;&#x51FA; CPU &#x5360;&#x6BD4;&#x6700;&#x9AD8;&#x7684;</li><li>ps -ef &#x6216;&#x8005; jps &#x8FDB;&#x4E00;&#x6B65;&#x5B9A;&#x4F4D;&#xFF0C;&#x5F97;&#x77E5;&#x662F;&#x4E00;&#x4E2A;&#x600E;&#x4E48;&#x6837;&#x7684;&#x4E00;&#x4E2A;&#x540E;&#x53F0;&#x7A0B;&#x5E8F;</li><li>&#x5B9A;&#x4F4D;&#x5230;&#x5177;&#x4F53;&#x7684;&#x7EBF;&#x7A0B;&#x6216;&#x4EE3;&#x7801;<ul><li>ps -mp 11111 -o THREAD,tid,time</li><li>-m &#x663E;&#x793A;&#x6240;&#x6709;&#x7684;&#x7EBF;&#x7A0B;</li><li>-p &#x8FDB;&#x7A0B;&#x4F7F;&#x7528;cpu&#x7684;&#x65F6;&#x95F4;</li><li>-o &#x8BE5;&#x53C2;&#x6570;&#x540E;&#x662F;&#x7528;&#x6237;&#x81EA;&#x5B9A;&#x4E49;&#x683C;&#x5F0F;</li></ul></li><li>&#x5C06;&#x9700;&#x8981;&#x7684;&#x7EBF;&#x7A0B; ID &#x8F6C;&#x5316;&#x4E3A; 16 &#x8FDB;&#x5236;&#x683C;&#x5F0F;</li><li>jstat &lt;&#x8FDB;&#x7A0B;ID&gt; | grep &lt;&#x7EBF;&#x7A0B;ID(16&#x8FDB;&#x5236;)&gt; -A60</li></ul><h2 id="&#x5BF9;&#x4E8E;-JDK-&#x81EA;&#x5E26;&#x7684;-JVM-&#x76D1;&#x63A7;&#x548C;&#x6027;&#x80FD;&#x5206;&#x6790;&#x5DE5;&#x5177;&#x7528;&#x8FC7;&#x54EA;&#x4E9B;&#xFF1F;&#x4E00;&#x822C;&#x673A;&#x662F;&#x600E;&#x4E48;&#x7528;&#x5230;&#x7684;&#xFF1F;"><a href="#&#x5BF9;&#x4E8E;-JDK-&#x81EA;&#x5E26;&#x7684;-JVM-&#x76D1;&#x63A7;&#x548C;&#x6027;&#x80FD;&#x5206;&#x6790;&#x5DE5;&#x5177;&#x7528;&#x8FC7;&#x54EA;&#x4E9B;&#xFF1F;&#x4E00;&#x822C;&#x673A;&#x662F;&#x600E;&#x4E48;&#x7528;&#x5230;&#x7684;&#xFF1F;" class="headerlink" title="&#x5BF9;&#x4E8E; JDK &#x81EA;&#x5E26;&#x7684; JVM &#x76D1;&#x63A7;&#x548C;&#x6027;&#x80FD;&#x5206;&#x6790;&#x5DE5;&#x5177;&#x7528;&#x8FC7;&#x54EA;&#x4E9B;&#xFF1F;&#x4E00;&#x822C;&#x673A;&#x662F;&#x600E;&#x4E48;&#x7528;&#x5230;&#x7684;&#xFF1F;"></a>&#x5BF9;&#x4E8E; JDK &#x81EA;&#x5E26;&#x7684; JVM &#x76D1;&#x63A7;&#x548C;&#x6027;&#x80FD;&#x5206;&#x6790;&#x5DE5;&#x5177;&#x7528;&#x8FC7;&#x54EA;&#x4E9B;&#xFF1F;&#x4E00;&#x822C;&#x673A;&#x662F;&#x600E;&#x4E48;&#x7528;&#x5230;&#x7684;&#xFF1F;</h2><p>&#x4E0B;&#x4E00;&#x7BC7;&#x91CD;&#x70B9;&#x4ECB;&#x7ECD;&#x3002;</p><h2 id="&#x53C2;&#x8003;&#x94FE;&#x63A5;"><a href="#&#x53C2;&#x8003;&#x94FE;&#x63A5;" class="headerlink" title="&#x53C2;&#x8003;&#x94FE;&#x63A5;"></a>&#x53C2;&#x8003;&#x94FE;&#x63A5;</h2><ul><li><a href="https://time.geekbang.org/column/article/6970" target="_blank" rel="noopener">&#x5F3A;&#x5F15;&#x7528;&#x3001;&#x8F6F;&#x5F15;&#x7528;&#x3001;&#x5F31;&#x5F15;&#x7528;&#x3001;&#x5E7B;&#x8C61;&#x5F15;&#x7528;&#x6709;&#x4EC0;&#x4E48;&#x533A;&#x522B;&#xFF1F;(&#x8BC4;&#x8BBA;)</a></li><li><a href="https://www.jianshu.com/p/548c67aa1bc0" target="_blank" rel="noopener">G1&#x4ECE;&#x5165;&#x95E8;&#x5230;&#x653E;&#x5F03;</a></li></ul>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h2 id=&quot;JVM-&amp;#x5783;&amp;#x573E;&amp;#x56DE;&amp;#x6536;&amp;#x7684;&amp;#x65F6;&amp;#x5019;&amp;#x5982;&amp;#x4F55;&amp;#x786E;&amp;#x5B9A;&amp;#x5783;&amp;#x573E;&amp;#xFF1F;&amp;#x77E5;&amp;#x9053;
      
    
    </summary>
    
      <category term="面试" scheme="http://blog.cuzz.site/categories/%E9%9D%A2%E8%AF%95/"/>
    
    
      <category term="JVM" scheme="http://blog.cuzz.site/tags/JVM/"/>
    
  </entry>
  
  <entry>
    <title>2019春招总结</title>
    <link href="http://blog.cuzz.site/2019/05/07/2019%E6%98%A5%E6%8B%9B%E6%80%BB%E7%BB%93/"/>
    <id>http://blog.cuzz.site/2019/05/07/2019春招总结/</id>
    <published>2019-05-07T15:59:59.000Z</published>
    <updated>2019-07-16T11:43:31.249Z</updated>
    
    <content type="html"><![CDATA[<h2 id="&#x524D;&#x8A00;"><a href="#&#x524D;&#x8A00;" class="headerlink" title="&#x524D;&#x8A00;"></a>&#x524D;&#x8A00;</h2><p>3 &#x6708;&#x4EFD;&#x5F00;&#x59CB;&#x51C6;&#x5907;&#x6625;&#x62DB;&#x5230;&#x73B0;&#x5728;&#x5DF2;&#x7ECF; 2 &#x4E2A;&#x591A;&#x6708;&#x4E86;&#xFF0C; &#x603B;&#x7ED3;&#x4E00;&#x4E0B;&#x8FD9;&#x4E2A;&#x4E24;&#x4E2A;&#x6708;&#x7684;&#x9762;&#x8BD5;&#x7684;&#x4E00;&#x4E9B;&#x60C5;&#x51B5;&#xFF0C;&#x4E0B;&#x9762;&#x662F;&#x6211;&#x8FD9;&#x4E2A;&#x6708;&#x9762;&#x8FC7;&#x7684;&#x4E00;&#x4E9B;&#x516C;&#x53F8;&#x3002;</p><a id="more"></a><table><thead><tr><th style="text-align:center">&#x65F6;&#x95F4;</th><th style="text-align:center">&#x516C;&#x53F8;</th><th style="text-align:center">&#x5730;&#x70B9;</th></tr></thead><tbody><tr><td style="text-align:center">2019/3/5 15:30</td><td style="text-align:center">&#x817E;&#x8BAF;</td><td style="text-align:center">&#x89C6;&#x9891;</td></tr><tr><td style="text-align:center">2019/3/9 19:30</td><td style="text-align:center">&#x817E;&#x8BAF;</td><td style="text-align:center">&#x89C6;&#x9891;</td></tr><tr><td style="text-align:center">2019/3/11 15:00</td><td style="text-align:center">&#x6C26;&#x79D1;&#x6280;</td><td style="text-align:center">&#x73B0;&#x573A;</td></tr><tr><td style="text-align:center">2019/3/12 14:00</td><td style="text-align:center">&#x822A;&#x73ED;&#x7BA1;&#x5BB6;</td><td style="text-align:center">&#x73B0;&#x573A;</td></tr><tr><td style="text-align:center">2019/3/15 15:00</td><td style="text-align:center">&#x5B57;&#x8282;&#x8DF3;&#x52A8;</td><td style="text-align:center">&#x89C6;&#x9891;</td></tr><tr><td style="text-align:center">2019/3/19 15:00</td><td style="text-align:center">&#x963F;&#x91CC;&#x5DF4;&#x5DF4;</td><td style="text-align:center">&#x7535;&#x8BDD;</td></tr><tr><td style="text-align:center">2019/3/21 15:00</td><td style="text-align:center">&#x963F;&#x91CC;&#x5DF4;&#x5DF4;</td><td style="text-align:center">&#x7535;&#x8BDD;</td></tr><tr><td style="text-align:center">2019/3/28 15:00</td><td style="text-align:center">&#x963F;&#x91CC;&#x5DF4;&#x5DF4;</td><td style="text-align:center">&#x7535;&#x8BDD;</td></tr><tr><td style="text-align:center">2019/3/29 19:00</td><td style="text-align:center">&#x5FEB;&#x624B;</td><td style="text-align:center">&#x7B14;&#x8BD5;</td></tr><tr><td style="text-align:center">2019/4/1 19:00</td><td style="text-align:center">&#x864E;&#x7259;</td><td style="text-align:center">&#x7B14;&#x8BD5;</td></tr><tr><td style="text-align:center">2019/4/3 19:00</td><td style="text-align:center">&#x62FC;&#x591A;&#x591A;</td><td style="text-align:center">&#x7B14;&#x8BD5;</td></tr><tr><td style="text-align:center">2019/4/5 19:00</td><td style="text-align:center">&#x817E;&#x8BAF;</td><td style="text-align:center">&#x7B14;&#x8BD5;</td></tr><tr><td style="text-align:center">2019/4/6 19:00</td><td style="text-align:center">&#x767E;&#x5EA6;</td><td style="text-align:center">&#x7B14;&#x8BD5;</td></tr><tr><td style="text-align:center">2019/4/10 19:00</td><td style="text-align:center">&#x534E;&#x4E3A;</td><td style="text-align:center">&#x7B14;&#x8BD5;</td></tr><tr><td style="text-align:center">2019/4/12 19:00</td><td style="text-align:center">&#x963F;&#x91CC;&#x5DF4;&#x5DF4;</td><td style="text-align:center">&#x7B14;&#x8BD5;</td></tr><tr><td style="text-align:center">2019/4/14 19:00</td><td style="text-align:center">&#x5B8C;&#x7F8E;&#x4E16;&#x754C;</td><td style="text-align:center">&#x7B14;&#x8BD5;</td></tr><tr><td style="text-align:center">2019/4/15 10:00</td><td style="text-align:center">&#x534E;&#x4E3A;</td><td style="text-align:center">&#x73B0;&#x573A;</td></tr><tr><td style="text-align:center">2019/4/15 15:00</td><td style="text-align:center">&#x4F5C;&#x4E1A;&#x5E2E;</td><td style="text-align:center">&#x7B14;&#x8BD5;</td></tr><tr><td style="text-align:center">2019/4/21 19:00</td><td style="text-align:center">&#x83DC;&#x9E1F;</td><td style="text-align:center">&#x7535;&#x8BDD;</td></tr><tr><td style="text-align:center">2019/5/6 17:00</td><td style="text-align:center">&#x53BB;&#x54EA;&#x513F;</td><td style="text-align:center">&#x73B0;&#x573A;</td></tr><tr><td style="text-align:center">2019/5/7 19:00</td><td style="text-align:center">&#x83DC;&#x9E1F;</td><td style="text-align:center">&#x7535;&#x8BDD;</td></tr></tbody></table><h2 id="&#x4E00;&#x4E9B;&#x9762;&#x8BD5;&#x6CA1;&#x6709;&#x7B54;&#x51FA;&#x7684;&#x7684;&#x9898;&#x76EE;"><a href="#&#x4E00;&#x4E9B;&#x9762;&#x8BD5;&#x6CA1;&#x6709;&#x7B54;&#x51FA;&#x7684;&#x7684;&#x9898;&#x76EE;" class="headerlink" title="&#x4E00;&#x4E9B;&#x9762;&#x8BD5;&#x6CA1;&#x6709;&#x7B54;&#x51FA;&#x7684;&#x7684;&#x9898;&#x76EE;"></a>&#x4E00;&#x4E9B;&#x9762;&#x8BD5;&#x6CA1;&#x6709;&#x7B54;&#x51FA;&#x7684;&#x7684;&#x9898;&#x76EE;</h2><p>&#x6709;&#x7684;&#x9762;&#x8BD5;&#x5DF2;&#x7ECF;&#x8FC7;&#x53BB;&#x5F88;&#x4E45;&#x4E86;&#xFF0C;&#x6211;&#x5C31;&#x628A;&#x6211;&#x5370;&#x8C61;&#x6BD4;&#x8F83;&#x6DF1;&#x7684;&#x9898;&#x76EE;&#x5217;&#x51FA;&#x6765;</p><ul><li>HashMap &#x4E3A;&#x4EC0;&#x4E48;&#x4F7F;&#x7528;&#x7EA2;&#x9ED1;&#x6811;&#x800C;&#x4E0D;&#x4F7F;&#x7528;&#x5E73;&#x8861;&#x6811;&#xFF1F;&#xFF08;&#x83DC;&#x9E1F;&#xFF09;</li><li>6&#x5927;&#x8BBE;&#x8BA1;&#x539F;&#x5219;&#xFF0C;&#x4EC0;&#x4E48;&#x662F;&#x9AD8;&#x5185;&#x805A;&#x4F4E;&#x8026;&#x5408;&#xFF08;&#x83DC;&#x9E1F;&#xFF09;</li><li>&#x8861;&#x91CF;&#x5783;&#x573E;&#x6536;&#x96C6;&#x5668;&#x7684;&#x6307;&#x6807;&#x6709;&#x54EA;&#x4E9B;&#xFF0C;&#x8BF4;&#x8BF4;CMS&#x6536;&#x96C6;&#x5668;&#xFF0C;CMS &#x4E3A;&#x4EC0;&#x4E48;&#x9700;&#x8981;&#x6682;&#x505C; - stop the world&#xFF1F;&#xFF08;&#x83DC;&#x9E1F;&#xFF09;</li><li>&#x77E5;&#x9053; C++ &#x7684;&#x6790;&#x6784;&#x51FD;&#x6570;&#x5417;&#xFF1F;&#x5728; JAVA &#x4E2D;&#x8C03;&#x7528; finalize &#x7684;&#x4F1A;&#x600E;&#x6837;&#xFF1F;&#x90A3;&#x4F60;&#x77E5;&#x9053;  finalize &#x6709;&#x4EC0;&#x4E48;&#x4F5C;&#x7528;&#xFF1F;&#xFF08;&#x83DC;&#x9E1F;&#xFF09;</li><li>&#x8BF4;&#x8BF4;&#x4E00;&#x81F4;&#x6027;Hash&#x7B97;&#x6CD5;&#xFF0C;&#x5B83;&#x89E3;&#x51B3;&#x4E86;&#x4EC0;&#x4E48;&#x95EE;&#x9898;&#xFF1F;&#xFF08;&#x83DC;&#x9E1F;&#xFF09;</li><li>Dubbo &#x6709;&#x54EA;&#x4E9B;&#x4F20;&#x8F93;&#x534F;&#x8BAE;&#xFF1F;&#xFF08;&#x963F;&#x91CC;&#xFF09;</li><li>&#x6700;&#x77ED;&#x8DEF;&#x5F84;&#xFF1F;&#xFF08;&#x963F;&#x91CC;&#xFF09;</li><li>HTTPS &#x52A0;&#x5BC6;&#x8FC7;&#x7A0B;&#xFF0C;&#x662F;&#x600E;&#x4E48;&#x4FDD;&#x8BC1;&#x4FE1;&#x606F;&#x53EF;&#x9760;&#x7684;&#xFF1F;&#xFF08;&#x5934;&#x6761;&#xFF09;</li><li>Dubbo &#x6709;&#x54EA;&#x4E9B;&#x8D1F;&#x8F7D;&#x5747;&#x8861;&#x7B56;&#x7565;&#xFF1F;&#xFF08;&#x5934;&#x6761;&#xFF09;</li></ul><h2 id="&#x540E;&#x8BB0;"><a href="#&#x540E;&#x8BB0;" class="headerlink" title="&#x540E;&#x8BB0;"></a>&#x540E;&#x8BB0;</h2><p>&#x5176;&#x5B9E;&#x5F88;&#x591A;&#x90FD;&#x662F;&#x7B14;&#x8BD5;&#x6302;&#x4E86;&#xFF0C;&#x81EA;&#x5DF1;&#x5237;&#x4E86;&#x5251;&#x6307;offer &#x8FD8;&#x6709; leetcode &#x4E00;&#x4E9B;&#x9898;&#xFF0C;&#x8FD8;&#x662F;&#x5F88;&#x96BE;&#x901A;&#x8FC7;&#x4E00;&#x4E9B;&#x5927;&#x516C;&#x53F8;&#x7684;&#x7B14;&#x8BD5;&#x9898;&#xFF0C;&#x6700;&#x8FD1;&#x5728;&#x5B9E;&#x4E60;&#x5237;&#x7684;&#x6BD4;&#x8F83;&#x5C11;&#xFF0C;&#x6709;&#x65F6;&#x5019;&#x6CA1;&#x624B;&#x611F;&#xFF0C;&#x770B;&#x5230;&#x9898;&#x76EE;&#x90FD;&#x662F;&#x61F5;&#x903C;&#x72B6;&#x6001;&#xFF0C;&#x6240;&#x4EE5;&#x8FD8;&#x662F;&#x8981;&#x575A;&#x6301;&#x5237;&#x9898;&#x3002;</p><p>&#x963F;&#x91CC;&#x9762;&#x8BD5;&#x65F6;&#x76F4;&#x63A5;&#x6253;&#x7535;&#x8BDD;&#x8FC7;&#x6765;&#xFF0C;&#x6211;&#x4E00;&#x822C;&#x90FD;&#x6CA1;&#x6709;&#x65F6;&#x95F4;&#x51C6;&#x5907;&#x5C31;&#x5F00;&#x59CB;&#x9762;&#x8BD5;&#x4E86;&#xFF0C;&#x6700;&#x53EF;&#x60DC;&#x7684;&#x662F;&#x963F;&#x91CC;&#x7B2C;&#x4E09;&#x9762;&#x7684;&#x65F6;&#x5019;&#xFF0C;&#x6211;&#x8BA4;&#x4E3A;&#x7B2C;&#x4E09;&#x9762;&#x4F1A;&#x95EE;&#x6BD4;&#x8F83;&#x591A;&#x9879;&#x76EE;&#xFF0C;&#x7136;&#x800C;&#x4ED6;&#x95EE;&#x4E86;&#x5F88;&#x591A;&#x8BA1;&#x7B97;&#x673A;&#x57FA;&#x7840;&#x7684;&#x77E5;&#x8BC6;&#xFF0C;&#x6BD4;&#x5982;&#x7EA2;&#x9ED1;&#x6811;&#x3001;&#x6700;&#x77ED;&#x8DEF;&#x5F84;&#x95EE;&#x9898;&#x7B49;&#xFF0C;&#x8FD9;&#x4E9B;&#x6211;&#x90FD;&#x6CA1;&#x7B54;&#x597D;&#xFF0C;&#x6240;&#x4EE5;&#x5C31;&#x51C9;&#x51C9;&#x4E86;&#xFF0C;&#x81EA;&#x5DF1;&#x5728;&#x8FD9;&#x65B9;&#x9762;&#x8FD8;&#x662F;&#x6BD4;&#x8F83;&#x8584;&#x5F31;&#xFF0C;&#x9700;&#x8981;&#x52A0;&#x5F3A;&#x3002;</p><p>&#x5F53;&#x7136;&#x4E5F;&#x6536;&#x5230;&#x4E86;&#x51E0;&#x4E2A; offer&#xFF0C;&#x7ECF;&#x5386;&#x4E86;&#x8FD9;&#x6BB5;&#x9762;&#x8BD5;&#xFF0C;&#x81EA;&#x5DF1;&#x4E5F;&#x5B66;&#x5230;&#x4E86;&#x633A;&#x591A;&#xFF0C;&#x81F3;&#x5C11;&#x4E0D;&#x518D;&#x754F;&#x60E7;&#x9762;&#x8BD5;&#x4E86;&#xFF0C;&#x4E5F;&#x77E5;&#x9053;&#x4E86;&#x5927;&#x5382;&#x9700;&#x8981;&#x4EC0;&#x4E48;&#x6837;&#x7684;&#x4EBA;&#x624D;&#xFF0C;&#x7EE7;&#x7EED;&#x52AA;&#x529B;&#xFF0C;&#x79CB;&#x62DB;&#x518D;&#x6765;&#x3002;</p>]]></content>
    
    <summary type="html">
    
      &lt;h2 id=&quot;&amp;#x524D;&amp;#x8A00;&quot;&gt;&lt;a href=&quot;#&amp;#x524D;&amp;#x8A00;&quot; class=&quot;headerlink&quot; title=&quot;&amp;#x524D;&amp;#x8A00;&quot;&gt;&lt;/a&gt;&amp;#x524D;&amp;#x8A00;&lt;/h2&gt;&lt;p&gt;3 &amp;#x6708;&amp;#x4EFD;&amp;#x5F00;&amp;#x59CB;&amp;#x51C6;&amp;#x5907;&amp;#x6625;&amp;#x62DB;&amp;#x5230;&amp;#x73B0;&amp;#x5728;&amp;#x5DF2;&amp;#x7ECF; 2 &amp;#x4E2A;&amp;#x591A;&amp;#x6708;&amp;#x4E86;&amp;#xFF0C; &amp;#x603B;&amp;#x7ED3;&amp;#x4E00;&amp;#x4E0B;&amp;#x8FD9;&amp;#x4E2A;&amp;#x4E24;&amp;#x4E2A;&amp;#x6708;&amp;#x7684;&amp;#x9762;&amp;#x8BD5;&amp;#x7684;&amp;#x4E00;&amp;#x4E9B;&amp;#x60C5;&amp;#x51B5;&amp;#xFF0C;&amp;#x4E0B;&amp;#x9762;&amp;#x662F;&amp;#x6211;&amp;#x8FD9;&amp;#x4E2A;&amp;#x6708;&amp;#x9762;&amp;#x8FC7;&amp;#x7684;&amp;#x4E00;&amp;#x4E9B;&amp;#x516C;&amp;#x53F8;&amp;#x3002;&lt;/p&gt;
    
    </summary>
    
      <category term="日记" scheme="http://blog.cuzz.site/categories/%E6%97%A5%E8%AE%B0/"/>
    
    
      <category term="面试" scheme="http://blog.cuzz.site/tags/%E9%9D%A2%E8%AF%95/"/>
    
  </entry>
  
  <entry>
    <title>Java 并发编程</title>
    <link href="http://blog.cuzz.site/2019/04/16/Java%E5%B9%B6%E5%8F%91%E7%BC%96%E7%A8%8B/"/>
    <id>http://blog.cuzz.site/2019/04/16/Java并发编程/</id>
    <published>2019-04-16T15:59:59.000Z</published>
    <updated>2019-10-29T03:27:58.553Z</updated>
    
    <content type="html"><![CDATA[<h2 id="&#x8BF7;&#x8C08;&#x8C08;&#x4F60;&#x5BF9;-volatile-&#x7684;&#x7406;&#x89E3;"><a href="#&#x8BF7;&#x8C08;&#x8C08;&#x4F60;&#x5BF9;-volatile-&#x7684;&#x7406;&#x89E3;" class="headerlink" title="&#x8BF7;&#x8C08;&#x8C08;&#x4F60;&#x5BF9; volatile &#x7684;&#x7406;&#x89E3;"></a>&#x8BF7;&#x8C08;&#x8C08;&#x4F60;&#x5BF9; volatile &#x7684;&#x7406;&#x89E3;</h2><h3 id="volatile-&#x662F;-Java-&#x865A;&#x62DF;&#x673A;&#x63D0;&#x4F9B;&#x7684;&#x8F7B;&#x91CF;&#x7EA7;&#x7684;&#x540C;&#x6B65;&#x673A;&#x5236;"><a href="#volatile-&#x662F;-Java-&#x865A;&#x62DF;&#x673A;&#x63D0;&#x4F9B;&#x7684;&#x8F7B;&#x91CF;&#x7EA7;&#x7684;&#x540C;&#x6B65;&#x673A;&#x5236;" class="headerlink" title="volatile &#x662F; Java &#x865A;&#x62DF;&#x673A;&#x63D0;&#x4F9B;&#x7684;&#x8F7B;&#x91CF;&#x7EA7;&#x7684;&#x540C;&#x6B65;&#x673A;&#x5236;"></a>volatile &#x662F; Java &#x865A;&#x62DF;&#x673A;&#x63D0;&#x4F9B;&#x7684;&#x8F7B;&#x91CF;&#x7EA7;&#x7684;&#x540C;&#x6B65;&#x673A;&#x5236;</h3><ul><li>&#x4FDD;&#x8BC1;&#x53EF;&#x89C1;&#x6027;</li><li>&#x7981;&#x6B62;&#x6307;&#x4EE4;&#x6392;&#x5E8F;</li><li>&#x4E0D;&#x4FDD;&#x8BC1;&#x539F;&#x5B50;&#x6027;</li></ul><h3 id="JMM&#xFF08;Java-&#x5185;&#x5B58;&#x6A21;&#x578B;&#xFF09;-&#x4F60;&#x8C08;&#x8C08;"><a href="#JMM&#xFF08;Java-&#x5185;&#x5B58;&#x6A21;&#x578B;&#xFF09;-&#x4F60;&#x8C08;&#x8C08;" class="headerlink" title="JMM&#xFF08;Java &#x5185;&#x5B58;&#x6A21;&#x578B;&#xFF09; &#x4F60;&#x8C08;&#x8C08;"></a>JMM&#xFF08;Java &#x5185;&#x5B58;&#x6A21;&#x578B;&#xFF09; &#x4F60;&#x8C08;&#x8C08;</h3><h4 id="&#x57FA;&#x672C;&#x6982;&#x5FF5;"><a href="#&#x57FA;&#x672C;&#x6982;&#x5FF5;" class="headerlink" title="&#x57FA;&#x672C;&#x6982;&#x5FF5;"></a>&#x57FA;&#x672C;&#x6982;&#x5FF5;</h4><ul><li>JMM &#x672C;&#x8EAB;&#x662F;&#x4E00;&#x79CD;&#x62BD;&#x8C61;&#x7684;&#x6982;&#x5FF5;&#x5E76;&#x4E0D;&#x662F;&#x771F;&#x5B9E;&#x5B58;&#x5728;&#xFF0C;&#x5B83;&#x63CF;&#x8FF0;&#x7684;&#x662F;&#x4E00;&#x7EC4;&#x89C4;&#x5B9A;&#x6216;&#x5219;&#x89C4;&#x8303;&#xFF0C;&#x901A;&#x8FC7;&#x8FD9;&#x7EC4;&#x89C4;&#x8303;&#x5B9A;&#x4E49;&#x4E86;&#x7A0B;&#x5E8F;&#x4E2D;&#x7684;&#x8BBF;&#x95EE;&#x65B9;&#x5F0F;&#x3002;</li><li>JMM &#x540C;&#x6B65;&#x89C4;&#x5B9A;<ul><li>&#x7EBF;&#x7A0B;&#x89E3;&#x9501;&#x524D;&#xFF0C;&#x5FC5;&#x987B;&#x628A;&#x5171;&#x4EAB;&#x53D8;&#x91CF;&#x7684;&#x503C;&#x5237;&#x65B0;&#x56DE;&#x4E3B;&#x5185;&#x5B58;</li><li>&#x7EBF;&#x7A0B;&#x52A0;&#x9501;&#x524D;&#xFF0C;&#x5FC5;&#x987B;&#x8BFB;&#x53D6;&#x4E3B;&#x5185;&#x5B58;&#x7684;&#x6700;&#x65B0;&#x503C;&#x5230;&#x81EA;&#x5DF1;&#x7684;&#x5DE5;&#x4F5C;&#x5185;&#x5B58;</li><li>&#x52A0;&#x9501;&#x89E3;&#x9501;&#x662F;&#x540C;&#x4E00;&#x628A;&#x9501;</li></ul></li><li>&#x7531;&#x4E8E; JVM &#x8FD0;&#x884C;&#x7A0B;&#x5E8F;&#x7684;&#x5B9E;&#x4F53;&#x662F;&#x7EBF;&#x7A0B;&#xFF0C;&#x800C;&#x6BCF;&#x4E2A;&#x7EBF;&#x7A0B;&#x521B;&#x5EFA;&#x65F6; JVM &#x90FD;&#x4F1A;&#x4E3A;&#x5176;&#x521B;&#x5EFA;&#x4E00;&#x4E2A;&#x5DE5;&#x4F5C;&#x5185;&#x5B58;&#xFF0C;&#x5DE5;&#x4F5C;&#x5185;&#x5B58;&#x662F;&#x6BCF;&#x4E2A;&#x7EBF;&#x7A0B;&#x7684;&#x79C1;&#x6709;&#x6570;&#x636E;&#x533A;&#x57DF;&#xFF0C;&#x800C; Java &#x5185;&#x5B58;&#x6A21;&#x578B;&#x4E2D;&#x89C4;&#x5B9A;&#x6240;&#x6709;&#x53D8;&#x91CF;&#x7684;&#x50A8;&#x5B58;&#x5728;&#x4E3B;&#x5185;&#x5B58;&#xFF0C;&#x4E3B;&#x5185;&#x5B58;&#x662F;&#x5171;&#x4EAB;&#x5185;&#x5B58;&#x533A;&#x57DF;&#xFF0C;&#x6240;&#x6709;&#x7684;&#x7EBF;&#x7A0B;&#x90FD;&#x53EF;&#x4EE5;&#x8BBF;&#x95EE;&#xFF0C;&#x4F46;&#x7EBF;&#x7A0B;&#x5BF9;&#x53D8;&#x91CF;&#x7684;&#x64CD;&#x4F5C;&#xFF08;&#x8BFB;&#x53D6;&#x8D4B;&#x503C;&#x7B49;&#xFF09;&#x5FC5;&#x987B;&#x90FD;&#x5DE5;&#x4F5C;&#x5185;&#x5B58;&#x8FDB;&#x884C;&#x770B;&#x3002;</li><li>&#x9996;&#x5148;&#x8981;&#x5C06;&#x53D8;&#x91CF;&#x4ECE;&#x4E3B;&#x5185;&#x5B58;&#x62F7;&#x8D1D;&#x7684;&#x81EA;&#x5DF1;&#x7684;&#x5DE5;&#x4F5C;&#x5185;&#x5B58;&#x7A7A;&#x95F4;&#xFF0C;&#x7136;&#x540E;&#x5BF9;&#x53D8;&#x91CF;&#x8FDB;&#x884C;&#x64CD;&#x4F5C;&#xFF0C;&#x64CD;&#x4F5C;&#x5B8C;&#x6210;&#x540E;&#x518D;&#x5C06;&#x53D8;&#x91CF;&#x5199;&#x56DE;&#x4E3B;&#x5185;&#x5B58;&#xFF0C;&#x4E0D;&#x80FD;&#x76F4;&#x63A5;&#x64CD;&#x4F5C;&#x4E3B;&#x5185;&#x5B58;&#x4E2D;&#x7684;&#x53D8;&#x91CF;&#xFF0C;&#x5DE5;&#x4F5C;&#x5185;&#x5B58;&#x4E2D;&#x5B58;&#x50A8;&#x7740;&#x4E3B;&#x5185;&#x5B58;&#x4E2D;&#x7684;&#x53D8;&#x91CF;&#x526F;&#x672C;&#x62F7;&#x8D1D;&#xFF0C;&#x524D;&#x9762;&#x8BF4;&#x8FC7;&#xFF0C;&#x5DE5;&#x4F5C;&#x5185;&#x5B58;&#x662F;&#x6BCF;&#x4E2A;&#x7EBF;&#x7A0B;&#x7684;&#x79C1;&#x6709;&#x6570;&#x636E;&#x533A;&#x57DF;&#xFF0C;&#x56E0;&#x6B64;&#x4E0D;&#x540C;&#x7684;&#x7EBF;&#x7A0B;&#x95F4;&#x65E0;&#x6CD5;&#x8BBF;&#x95EE;&#x5BF9;&#x65B9;&#x7684;&#x5DE5;&#x4F5C;&#x5185;&#x5B58;&#xFF0C;&#x7EBF;&#x7A0B;&#x95F4;&#x7684;&#x901A;&#x4FE1;(&#x4F20;&#x503C;)&#x5FC5;&#x987B;&#x901A;&#x8FC7;&#x4E3B;&#x5185;&#x5B58;&#x6765;&#x5B8C;&#x6210;&#x3002;</li><li>&#x5185;&#x5B58;&#x6A21;&#x578B;&#x56FE;<br><img src="/2019/04/16/Java&#x5E76;&#x53D1;&#x7F16;&#x7A0B;/&#x641C;&#x72D7;&#x622A;&#x56FE;20190416211412.png" alt="&#x641C;&#x72D7;&#x622A;&#x56FE;20190416211412"></li></ul><a id="more"></a><h4 id="&#x4E09;&#x5927;&#x7279;&#x6027;"><a href="#&#x4E09;&#x5927;&#x7279;&#x6027;" class="headerlink" title="&#x4E09;&#x5927;&#x7279;&#x6027;"></a>&#x4E09;&#x5927;&#x7279;&#x6027;</h4><ul><li><p>&#x53EF;&#x89C1;&#x6027;</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Author</span>: cuzz</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Date</span>: 2019/4/16 21:29</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Description</span>: &#x53EF;&#x89C1;&#x6027;&#x4EE3;&#x7801;&#x5B9E;&#x4F8B;</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">VolatileDemo</span> </span>{</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>{</span><br><span class="line">        Data data = <span class="keyword">new</span> Data();</span><br><span class="line">        <span class="keyword">new</span> Thread(() -&gt; {</span><br><span class="line">            System.out.println(Thread.currentThread().getName() + <span class="string">&quot; coming...&quot;</span>);</span><br><span class="line">            <span class="keyword">try</span> {</span><br><span class="line">                Thread.sleep(<span class="number">3000</span>);</span><br><span class="line">            } <span class="keyword">catch</span> (InterruptedException e) {</span><br><span class="line">                e.printStackTrace();</span><br><span class="line">            }</span><br><span class="line">            data.addOne();</span><br><span class="line">            System.out.println(Thread.currentThread().getName() + <span class="string">&quot; updated...&quot;</span>);</span><br><span class="line">        }).start();</span><br><span class="line"></span><br><span class="line">        <span class="keyword">while</span> (data.a == <span class="number">0</span>) {</span><br><span class="line">            <span class="comment">// looping</span></span><br><span class="line">        }</span><br><span class="line">        System.out.println(Thread.currentThread().getName() + <span class="string">&quot; job is done...&quot;</span>);</span><br><span class="line">    }</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Data</span> </span>{</span><br><span class="line">    <span class="comment">// int a = 0;</span></span><br><span class="line">    <span class="keyword">volatile</span> <span class="keyword">int</span> a = <span class="number">0</span>;</span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">addOne</span><span class="params">()</span> </span>{</span><br><span class="line">        <span class="keyword">this</span>.a += <span class="number">1</span>;</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></table></figure><p>&#x5982;&#x679C;&#x4E0D;&#x52A0; volatile &#x5173;&#x952E;&#x5B57;&#xFF0C;&#x5219;&#x4E3B;&#x7EBF;&#x7A0B;&#x4F1A;&#x8FDB;&#x5165;&#x6B7B;&#x5FAA;&#x73AF;&#xFF0C;&#x52A0; volatile &#x5219;&#x4E3B;&#x7EBF;&#x7A0B;&#x80FD;&#x591F;&#x9000;&#x51FA;&#xFF0C;&#x8BF4;&#x660E;&#x52A0;&#x4E86; volatile &#x5173;&#x952E;&#x5B57;&#x53D8;&#x91CF;&#xFF0C;&#x5F53;&#x6709;&#x4E00;&#x4E2A;&#x7EBF;&#x7A0B;&#x4FEE;&#x6539;&#x4E86;&#x503C;&#xFF0C;&#x4F1A;&#x9A6C;&#x4E0A;&#x88AB;&#x53E6;&#x4E00;&#x4E2A;&#x7EBF;&#x7A0B;&#x611F;&#x77E5;&#x5230;&#xFF0C;&#x5F53;&#x524D;&#x503C;&#x4F5C;&#x5E9F;&#xFF0C;&#x4ECE;&#x65B0;&#x4ECE;&#x4E3B;&#x5185;&#x5B58;&#x4E2D;&#x83B7;&#x53D6;&#x503C;&#x3002;&#x5BF9;&#x5176;&#x4ED6;&#x7EBF;&#x7A0B;&#x53EF;&#x89C1;&#xFF0C;&#x8FD9;&#x5C31;&#x53EB;&#x53EF;&#x89C1;&#x6027;&#x3002;</p></li><li><p>&#x539F;&#x5B50;&#x6027;</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">VolatileDemo</span> </span>{</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>{</span><br><span class="line">       <span class="comment">// test01();</span></span><br><span class="line">       test02();</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="comment">// &#x6D4B;&#x8BD5;&#x539F;&#x5B50;&#x6027;</span></span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">test02</span><span class="params">()</span> </span>{</span><br><span class="line">        Data data = <span class="keyword">new</span> Data();</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; <span class="number">20</span>; i++) {</span><br><span class="line">            <span class="keyword">new</span> Thread(() -&gt; {</span><br><span class="line">                <span class="keyword">for</span> (<span class="keyword">int</span> j = <span class="number">0</span>; j &lt; <span class="number">1000</span>; j++) {</span><br><span class="line">                    data.addOne();</span><br><span class="line">                }</span><br><span class="line">            }).start();</span><br><span class="line">        }</span><br><span class="line">        <span class="comment">// &#x9ED8;&#x8BA4;&#x6709; main &#x7EBF;&#x7A0B;&#x548C; gc &#x7EBF;&#x7A0B;</span></span><br><span class="line">        <span class="keyword">while</span> (Thread.activeCount() &gt; <span class="number">2</span>) {</span><br><span class="line">            Thread.yield();</span><br><span class="line">        }</span><br><span class="line">        System.out.println(data.a);</span><br><span class="line">    }</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Data</span> </span>{</span><br><span class="line">    <span class="keyword">volatile</span> <span class="keyword">int</span> a = <span class="number">0</span>;</span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">addOne</span><span class="params">()</span> </span>{</span><br><span class="line">        <span class="keyword">this</span>.a += <span class="number">1</span>;</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></table></figure><p>&#x53D1;&#x73B0;&#x5E76;&#x4E0D;&#x80FD;&#x8F93;&#x5165; 20000</p></li><li><p>&#x6709;&#x5E8F;&#x6027;</p><ul><li>&#x8BA1;&#x7B97;&#x673A;&#x5728;&#x6267;&#x884C;&#x7A0B;&#x5E8F;&#x65F6;&#xFF0C;&#x4E3A;&#x4E86;&#x63D0;&#x9AD8;&#x6027;&#x80FD;&#xFF0C;&#x7F16;&#x8BD1;&#x5668;&#x4E2A;&#x5904;&#x7406;&#x5668;&#x5E38;&#x5E38;&#x4F1A;&#x5BF9;&#x6307;&#x4EE4;&#x505A;&#x91CD;&#x6392;&#xFF0C;&#x4E00;&#x822C;&#x5206;&#x4E3A;&#x4EE5;&#x4E0B; 3 &#x79CD;<ul><li>&#x7F16;&#x8BD1;&#x5668;&#x4F18;&#x5316;&#x7684;&#x91CD;&#x6392;</li><li>&#x6307;&#x4EE4;&#x5E76;&#x884C;&#x7684;&#x91CD;&#x6392;</li><li>&#x5185;&#x5B58;&#x7CFB;&#x7EDF;&#x7684;&#x91CD;&#x6392;</li></ul></li><li>&#x5355;&#x7EBF;&#x7A0B;&#x73AF;&#x5883;&#x91CC;&#x9762;&#x786E;&#x4FDD;&#x7A0B;&#x5E8F;&#x6700;&#x7EC8;&#x6267;&#x884C;&#x7684;&#x7ED3;&#x679C;&#x548C;&#x4EE3;&#x7801;&#x6267;&#x884C;&#x7684;&#x7ED3;&#x679C;&#x4E00;&#x81F4;</li><li>&#x5904;&#x7406;&#x5668;&#x5728;&#x8FDB;&#x884C;&#x91CD;&#x6392;&#x5E8F;&#x65F6;&#x5FC5;&#x987B;&#x8003;&#x8651;&#x6307;&#x4EE4;&#x4E4B;&#x95F4;&#x7684;&#x6570;&#x636E;&#x4F9D;&#x8D56;&#x6027;</li><li>&#x591A;&#x7EBF;&#x7A0B;&#x73AF;&#x5883;&#x4E2D;&#x7EBF;&#x7A0B;&#x4EA4;&#x66FF;&#x6267;&#x884C;&#xFF0C;&#x7531;&#x4E8E;&#x7F16;&#x8BD1;&#x5668;&#x4F18;&#x5316;&#x91CD;&#x6392;&#x7684;&#x5B58;&#x5728;&#xFF0C;&#x4E24;&#x4E2A;&#x7EBF;&#x7A0B;&#x4E2D;&#x4F7F;&#x7528;&#x7684;&#x53D8;&#x91CF;&#x80FD;&#x5426;&#x4FDD;&#x8BC1;&#x7528;&#x7684;&#x53D8;&#x91CF;&#x80FD;&#x5426;&#x4E00;&#x81F4;&#x6027;&#x662F;&#x65E0;&#x6CD5;&#x786E;&#x5B9A;&#x7684;&#xFF0C;&#x7ED3;&#x679C;&#x65E0;&#x6CD5;&#x9884;&#x6D4B;</li><li><p>&#x4EE3;&#x7801;&#x793A;&#x4F8B;</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ReSortSeqDemo</span> </span>{</span><br><span class="line">    <span class="keyword">int</span> a = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">boolean</span> flag = <span class="keyword">false</span>;</span><br><span class="line">    </span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">method01</span><span class="params">()</span> </span>{</span><br><span class="line">        a = <span class="number">1</span>;           <span class="comment">// flag = true;</span></span><br><span class="line">                         <span class="comment">// ----&#x7EBF;&#x7A0B;&#x5207;&#x6362;----</span></span><br><span class="line">        flag = <span class="keyword">true</span>;     <span class="comment">// a = 1;</span></span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">method02</span><span class="params">()</span> </span>{</span><br><span class="line">        <span class="keyword">if</span> (flag) {</span><br><span class="line">            a = a + <span class="number">3</span>;</span><br><span class="line">            System.out.println(<span class="string">&quot;a = &quot;</span> + a);</span><br><span class="line">        }</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">}</span><br></pre></td></tr></table></figure><p>&#x5982;&#x679C;&#x4E24;&#x4E2A;&#x7EBF;&#x7A0B;&#x540C;&#x65F6;&#x6267;&#x884C;&#xFF0C;method01 &#x548C; method02 &#x5982;&#x679C;&#x7EBF;&#x7A0B; 1 &#x6267;&#x884C; method01 &#x91CD;&#x6392;&#x5E8F;&#x4E86;&#xFF0C;&#x7136;&#x540E;&#x5207;&#x6362;&#x7684;&#x7EBF;&#x7A0B; 2 &#x6267;&#x884C; method02 &#x5C31;&#x4F1A;&#x51FA;&#x73B0;&#x4E0D;&#x4E00;&#x6837;&#x7684;&#x7ED3;&#x679C;&#x3002;</p></li></ul></li></ul><h4 id="&#x7981;&#x6B62;&#x6307;&#x4EE4;&#x6392;&#x5E8F;"><a href="#&#x7981;&#x6B62;&#x6307;&#x4EE4;&#x6392;&#x5E8F;" class="headerlink" title="&#x7981;&#x6B62;&#x6307;&#x4EE4;&#x6392;&#x5E8F;"></a>&#x7981;&#x6B62;&#x6307;&#x4EE4;&#x6392;&#x5E8F;</h4><p>volatile &#x5B9E;&#x73B0;&#x7981;&#x6B62;&#x6307;&#x4EE4;&#x91CD;&#x6392;&#x5E8F;&#x7684;&#x4F18;&#x5316;&#xFF0C;&#x4ECE;&#x800C;&#x907F;&#x514D;&#x4E86;&#x591A;&#x7EBF;&#x7A0B;&#x73AF;&#x5883;&#x4E0B;&#x7A0B;&#x5E8F;&#x51FA;&#x73B0;&#x4E71;&#x5E8F;&#x7684;&#x73B0;&#x8C61;</p><p>&#x5148;&#x4E86;&#x89E3;&#x4E00;&#x4E2A;&#x6982;&#x5FF5;&#xFF0C;&#x5185;&#x5B58;&#x5C4F;&#x969C;&#xFF08;Memory Barrier&#xFF09;&#x53C8;&#x79F0;&#x5185;&#x5B58;&#x6805;&#x680F;&#xFF0C;&#x662F;&#x4E00;&#x4E2A; CPU &#x6307;&#x4EE4;&#xFF0C;&#x4ED6;&#x7684;&#x4F5C;&#x7528;&#x6709;&#x4E24;&#x4E2A;&#xFF1A;</p><ul><li>&#x4FDD;&#x8BC1;&#x7279;&#x5B9A;&#x64CD;&#x4F5C;&#x7684;&#x6267;&#x884C;&#x987A;&#x5E8F;</li><li>&#x4FDD;&#x8BC1;&#x67D0;&#x4E9B;&#x53D8;&#x91CF;&#x7684;&#x5185;&#x5B58;&#x53EF;&#x89C1;&#x6027;&#xFF08;&#x5229;&#x7528;&#x8BE5;&#x7279;&#x6027;&#x5B9E;&#x73B0; volatile &#x7684;&#x5185;&#x5B58;&#x53EF;&#x89C1;&#x6027;&#xFF09;</li></ul><p>&#x7531;&#x4E8E;&#x7F16;&#x8BD1;&#x5668;&#x4E2A;&#x5904;&#x7406;&#x5668;&#x90FD;&#x80FD;&#x6267;&#x884C;&#x6307;&#x4EE4;&#x91CD;&#x6392;&#x5E8F;&#x4F18;&#x5316;&#xFF0C;&#x5982;&#x679C;&#x5728;&#x6307;&#x4EE4;&#x95F4;&#x63D2;&#x5165;&#x4E00;&#x6761; Memory Barrier &#x5219;&#x4F1A;&#x544A;&#x8BC9;&#x7F16;&#x8BD1;&#x5668;&#x548C; CPU&#xFF0C;&#x4E0D;&#x7BA1;&#x4EC0;&#x4E48;&#x6307;&#x4EE4;&#x90FD;&#x4E0D;&#x80FD;&#x4E2A;&#x8FD9;&#x6761; Memory Barrier &#x6307;&#x4EE4;&#x91CD;&#x6392;&#x5E8F;&#xFF0C;&#x4E5F;&#x5C31;&#x662F;&#x8BF4;&#x901A;&#x8FC7;&#x63D2;&#x5165;&#x5185;&#x5B58;&#x5C4F;&#x969C;&#x7981;&#x6B62;&#x5728;&#x5185;&#x5B58;&#x5C4F;&#x969C;&#x524D;&#x540E;&#x6267;&#x884C;&#x91CD;&#x6392;&#x5E8F;&#x4F18;&#x5316;&#x3002;&#x5185;&#x5B58;&#x5C4F;&#x969C;&#x53E6;&#x4E00;&#x4E2A;&#x4F5C;&#x7528;&#x662F;&#x5F3A;&#x5236;&#x5237;&#x51FA;&#x5404;&#x79CD; CPU &#x7F13;&#x5B58;&#x6570;&#x636E;&#xFF0C;&#x56E0;&#x6B64;&#x4EFB;&#x4F55; CPU &#x4E0A;&#x7684;&#x7EBF;&#x7A0B;&#x90FD;&#x80FD;&#x8BFB;&#x53D6;&#x5230;&#x8FD9;&#x4E9B;&#x6570;&#x636E;&#x7684;&#x6700;&#x65B0;&#x7248;&#x672C;&#x3002;</p><p>&#x4E0B;&#x9762;&#x662F;&#x4FDD;&#x5B88;&#x7B56;&#x7565;&#x4E0B;&#xFF0C;volatile&#x5199;&#x63D2;&#x5165;&#x5185;&#x5B58;&#x5C4F;&#x969C;&#x540E;&#x751F;&#x6210;&#x7684;&#x6307;&#x4EE4;&#x5E8F;&#x5217;&#x793A;&#x610F;&#x56FE;&#xFF1A; </p><p><img src="/2019/04/16/Java&#x5E76;&#x53D1;&#x7F16;&#x7A0B;/0e75180bf35c40e2921493d0bf6bd684_th.png" alt="0e75180bf35c40e2921493d0bf6bd684_th"></p><p>&#x4E0B;&#x9762;&#x662F;&#x5728;&#x4FDD;&#x5B88;&#x7B56;&#x7565;&#x4E0B;&#xFF0C;volatile&#x8BFB;&#x63D2;&#x5165;&#x5185;&#x5B58;&#x5C4F;&#x969C;&#x540E;&#x751F;&#x6210;&#x7684;&#x6307;&#x4EE4;&#x5E8F;&#x5217;&#x793A;&#x610F;&#x56FE;&#xFF1A; </p><p><img src="/2019/04/16/Java&#x5E76;&#x53D1;&#x7F16;&#x7A0B;/21ebc7e8190c4966948c4ef4424088be_th.png" alt="21ebc7e8190c4966948c4ef4424088be_th"></p><h4 id="&#x7EBF;&#x7A0B;&#x5B89;&#x5168;&#x6027;&#x4FDD;&#x8BC1;"><a href="#&#x7EBF;&#x7A0B;&#x5B89;&#x5168;&#x6027;&#x4FDD;&#x8BC1;" class="headerlink" title="&#x7EBF;&#x7A0B;&#x5B89;&#x5168;&#x6027;&#x4FDD;&#x8BC1;"></a>&#x7EBF;&#x7A0B;&#x5B89;&#x5168;&#x6027;&#x4FDD;&#x8BC1;</h4><ul><li>&#x5DE5;&#x4F5C;&#x5185;&#x5B58;&#x4E0E;&#x4E3B;&#x5185;&#x5B58;&#x540C;&#x6B65;&#x5EF6;&#x8FDF;&#x73B0;&#x8C61;&#x5BFC;&#x81F4;&#x53EF;&#x89C1;&#x6027;&#x95EE;&#x9898;<ul><li>&#x53EF;&#x4EE5;&#x4F7F;&#x7528; synchronzied &#x6216; volatile &#x5173;&#x952E;&#x5B57;&#x89E3;&#x51B3;&#xFF0C;&#x5B83;&#x4EEC;&#x53EF;&#x4EE5;&#x4F7F;&#x7528;&#x4E00;&#x4E2A;&#x7EBF;&#x7A0B;&#x4FEE;&#x6539;&#x540E;&#x7684;&#x53D8;&#x91CF;&#x7ACB;&#x5373;&#x5BF9;&#x5176;&#x4ED6;&#x7EBF;&#x7A0B;&#x53EF;&#x89C1;</li></ul></li><li>&#x5BF9;&#x4E8E;&#x6307;&#x4EE4;&#x91CD;&#x6392;&#x5BFC;&#x81F4;&#x53EF;&#x89C1;&#x6027;&#x95EE;&#x9898;&#x548C;&#x6709;&#x5E8F;&#x6027;&#x95EE;&#x9898;<ul><li>&#x53EF;&#x4EE5;&#x5229;&#x7528; volatile &#x5173;&#x952E;&#x5B57;&#x89E3;&#x51B3;&#xFF0C;&#x56E0;&#x4E3A; volatile &#x7684;&#x53E6;&#x4E00;&#x4E2A;&#x4F5C;&#x7528;&#x5C31;&#x662F;&#x7981;&#x6B62;&#x6307;&#x4EE4;&#x91CD;&#x6392;&#x5E8F;&#x4F18;&#x5316;</li></ul></li></ul><h3 id="&#x4F60;&#x5728;&#x54EA;&#x4E9B;&#x5730;&#x65B9;&#x7528;&#x5230;&#x8FC7;-volatile"><a href="#&#x4F60;&#x5728;&#x54EA;&#x4E9B;&#x5730;&#x65B9;&#x7528;&#x5230;&#x8FC7;-volatile" class="headerlink" title="&#x4F60;&#x5728;&#x54EA;&#x4E9B;&#x5730;&#x65B9;&#x7528;&#x5230;&#x8FC7; volatile"></a>&#x4F60;&#x5728;&#x54EA;&#x4E9B;&#x5730;&#x65B9;&#x7528;&#x5230;&#x8FC7; volatile</h3><h4 id="&#x5355;&#x4F8B;"><a href="#&#x5355;&#x4F8B;" class="headerlink" title="&#x5355;&#x4F8B;"></a>&#x5355;&#x4F8B;</h4><ul><li><p>&#x591A;&#x7EBF;&#x7A0B;&#x73AF;&#x5883;&#x4E0B;&#x53EF;&#x80FD;&#x5B58;&#x5728;&#x7684;&#x5B89;&#x5168;&#x95EE;&#x9898;</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@NotThreadSafe</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Singleton01</span> </span>{</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> Singleton01 instance = <span class="keyword">null</span>;</span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="title">Singleton01</span><span class="params">()</span> </span>{</span><br><span class="line">        System.out.println(Thread.currentThread().getName() + <span class="string">&quot;  construction...&quot;</span>);</span><br><span class="line">    }</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> Singleton01 <span class="title">getInstance</span><span class="params">()</span> </span>{</span><br><span class="line">        <span class="keyword">if</span> (instance == <span class="keyword">null</span>) {</span><br><span class="line">            instance = <span class="keyword">new</span> Singleton01();</span><br><span class="line">        }</span><br><span class="line">        <span class="keyword">return</span> instance;</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>{</span><br><span class="line">        ExecutorService executorService = Executors.newFixedThreadPool(<span class="number">10</span>);</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; <span class="number">10</span>; i++) {</span><br><span class="line">            executorService.execute(()-&gt; Singleton01.getInstance());</span><br><span class="line">        }</span><br><span class="line">        executorService.shutdown();</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></table></figure><p>&#x53D1;&#x73B0;&#x6784;&#x9020;&#x5668;&#x91CC;&#x7684;&#x5185;&#x5BB9;&#x4F1A;&#x591A;&#x6B21;&#x8F93;&#x51FA;</p></li><li><p>&#x53CC;&#x91CD;&#x9501;&#x5355;&#x4F8B;</p><ul><li>&#x4EE3;&#x7801;</li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Singleton02</span> </span>{</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">volatile</span> Singleton02 instance = <span class="keyword">null</span>;</span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="title">Singleton02</span><span class="params">()</span> </span>{</span><br><span class="line">        System.out.println(Thread.currentThread().getName() + <span class="string">&quot;  construction...&quot;</span>);</span><br><span class="line">    }</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> Singleton02 <span class="title">getInstance</span><span class="params">()</span> </span>{</span><br><span class="line">        <span class="keyword">if</span> (instance == <span class="keyword">null</span>) {</span><br><span class="line">            <span class="keyword">synchronized</span> (Singleton01.class) {</span><br><span class="line">                <span class="keyword">if</span> (instance == <span class="keyword">null</span>) {</span><br><span class="line">                    instance = <span class="keyword">new</span> Singleton02();</span><br><span class="line">                }</span><br><span class="line">            }</span><br><span class="line">        }</span><br><span class="line">        <span class="keyword">return</span> instance;</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>{</span><br><span class="line">        ExecutorService executorService = Executors.newFixedThreadPool(<span class="number">10</span>);</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; <span class="number">10</span>; i++) {</span><br><span class="line">            executorService.execute(()-&gt; Singleton02.getInstance());</span><br><span class="line">        }</span><br><span class="line">        executorService.shutdown();</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></table></figure><ul><li><p>&#x5982;&#x679C;&#x6CA1;&#x6709;&#x52A0; volatile &#x5C31;&#x4E0D;&#x4E00;&#x5B9A;&#x662F;&#x7EBF;&#x7A0B;&#x5B89;&#x5168;&#x7684;&#xFF0C;&#x539F;&#x56E0;&#x662F;&#x6307;&#x4EE4;&#x91CD;&#x6392;&#x5E8F;&#x7684;&#x5B58;&#x5728;&#xFF0C;&#x52A0;&#x5165; volatile &#x53EF;&#x4EE5;&#x7981;&#x6B62;&#x6307;&#x4EE4;&#x91CD;&#x6392;&#x3002;</p></li><li><p>&#x539F;&#x56E0;&#x662F;&#x5728;&#x4E8E;&#x67D0;&#x4E00;&#x4E2A;&#x7EBF;&#x7A0B;&#x6267;&#x884C;&#x5230;&#x7B2C;&#x4E00;&#x6B21;&#x68C0;&#x6D4B;&#xFF0C;&#x8BFB;&#x53D6;&#x5230;&#x7684; instance &#x4E0D;&#x4E3A; null &#x65F6;&#xFF0C;<strong>instance &#x7684;&#x5F15;&#x7528;&#x5BF9;&#x8C61;&#x53EF;&#x80FD;&#x8FD8;&#x6CA1;&#x6709;&#x5B8C;&#x6210;&#x521D;&#x59CB;&#x5316;&#x3002;</strong></p></li><li><p><code>instance = new Singleton()</code> &#x53EF;&#x4EE5;&#x5206;&#x4E3A;&#x4EE5;&#x4E0B;&#x4E09;&#x6B65;&#x5B8C;&#x6210;</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">memory = allocate();  // 1.&#x5206;&#x914D;&#x5BF9;&#x8C61;&#x7A7A;&#x95F4;</span><br><span class="line">instance(memory);     // 2.&#x521D;&#x59CB;&#x5316;&#x5BF9;&#x8C61;</span><br><span class="line">instance = memory;    // 3.&#x8BBE;&#x7F6E;instance&#x6307;&#x5411;&#x521A;&#x5206;&#x914D;&#x7684;&#x5185;&#x5B58;&#x5730;&#x5740;&#xFF0C;&#x6B64;&#x65F6;instance != null</span><br></pre></td></tr></table></figure></li><li><p>&#x6B65;&#x9AA4; 2 &#x548C;&#x6B65;&#x9AA4; 3 &#x4E0D;&#x5B58;&#x5728;&#x4F9D;&#x8D56;&#x5173;&#x7CFB;&#xFF0C;&#x800C;&#x4E14;&#x65E0;&#x8BBA;&#x91CD;&#x6392;&#x524D;&#x8FD8;&#x662F;&#x91CD;&#x6392;&#x540E;&#x7A0B;&#x5E8F;&#x7684;&#x6267;&#x884C;&#x7ED3;&#x679C;&#x5728;&#x5355;&#x7EBF;&#x7A0B;&#x4E2D;&#x5E76;&#x6CA1;&#x6709;&#x6539;&#x53D8;&#xFF0C;&#x56E0;&#x6B64;&#x8FD9;&#x79CD;&#x4F18;&#x5316;&#x662F;&#x5141;&#x8BB8;&#x7684;&#x3002;</p></li><li><p>&#x53D1;&#x751F;&#x91CD;&#x6392;</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">memory = allocate();  <span class="comment">// 1.&#x5206;&#x914D;&#x5BF9;&#x8C61;&#x7A7A;&#x95F4;</span></span><br><span class="line">instance = memory;    <span class="comment">// 3.&#x8BBE;&#x7F6E;instance&#x6307;&#x5411;&#x521A;&#x5206;&#x914D;&#x7684;&#x5185;&#x5B58;&#x5730;&#x5740;&#xFF0C;&#x6B64;&#x65F6;instance != null&#xFF0C;&#x4F46;&#x5BF9;&#x8C61;&#x8FD8;&#x6CA1;&#x6709;&#x521D;&#x59CB;&#x5316;&#x5B8C;&#x6210;</span></span><br><span class="line">instance(memory);     <span class="comment">// 2.&#x521D;&#x59CB;&#x5316;&#x5BF9;&#x8C61;</span></span><br></pre></td></tr></table></figure></li><li><p>&#x6240;&#x4EE5;&#x4E0D;&#x52A0; volatile &#x8FD4;&#x56DE;&#x7684;&#x5B9E;&#x4F8B;&#x4E0D;&#x4E3A;&#x7A7A;&#xFF0C;&#x4F46;&#x53EF;&#x80FD;&#x662F;&#x672A;&#x521D;&#x59CB;&#x5316;&#x7684;&#x5B9E;&#x4F8B;</p></li></ul></li></ul><h2 id="CAS-&#x4F60;&#x77E5;&#x9053;&#x5417;&#xFF1F;"><a href="#CAS-&#x4F60;&#x77E5;&#x9053;&#x5417;&#xFF1F;" class="headerlink" title="CAS &#x4F60;&#x77E5;&#x9053;&#x5417;&#xFF1F;"></a>CAS &#x4F60;&#x77E5;&#x9053;&#x5417;&#xFF1F;</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">CASDemo</span> </span>{</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>{</span><br><span class="line">        AtomicInteger atomicInteger = <span class="keyword">new</span> AtomicInteger(<span class="number">666</span>);</span><br><span class="line">        <span class="comment">// &#x83B7;&#x53D6;&#x771F;&#x5B9E;&#x503C;&#xFF0C;&#x5E76;&#x66FF;&#x6362;&#x4E3A;&#x76F8;&#x5E94;&#x7684;&#x503C;</span></span><br><span class="line">        <span class="keyword">boolean</span> b = atomicInteger.compareAndSet(<span class="number">666</span>, <span class="number">2019</span>);</span><br><span class="line">        System.out.println(b); <span class="comment">// true</span></span><br><span class="line">        <span class="keyword">boolean</span> b1 = atomicInteger.compareAndSet(<span class="number">666</span>, <span class="number">2020</span>);</span><br><span class="line">        System.out.println(b1); <span class="comment">// false</span></span><br><span class="line">        atomicInteger.getAndIncrement();</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></table></figure><h3 id="CAS-&#x5E95;&#x5C42;&#x539F;&#x7406;&#xFF1F;&#x8C08;&#x8C08;&#x5BF9;-UnSafe-&#x7684;&#x7406;&#x89E3;&#xFF1F;"><a href="#CAS-&#x5E95;&#x5C42;&#x539F;&#x7406;&#xFF1F;&#x8C08;&#x8C08;&#x5BF9;-UnSafe-&#x7684;&#x7406;&#x89E3;&#xFF1F;" class="headerlink" title="CAS &#x5E95;&#x5C42;&#x539F;&#x7406;&#xFF1F;&#x8C08;&#x8C08;&#x5BF9; UnSafe &#x7684;&#x7406;&#x89E3;&#xFF1F;"></a>CAS &#x5E95;&#x5C42;&#x539F;&#x7406;&#xFF1F;&#x8C08;&#x8C08;&#x5BF9; UnSafe &#x7684;&#x7406;&#x89E3;&#xFF1F;</h3><h4 id="getAndIncrement"><a href="#getAndIncrement" class="headerlink" title="getAndIncrement();"></a>getAndIncrement();</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * Atomically increments by one the current value.</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@return</span> the previous value</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">final</span> <span class="keyword">int</span> <span class="title">getAndIncrement</span><span class="params">()</span> </span>{</span><br><span class="line">    <span class="keyword">return</span> unsafe.getAndAddInt(<span class="keyword">this</span>, valueOffset, <span class="number">1</span>);</span><br><span class="line">}</span><br></pre></td></tr></table></figure><p>&#x5F15;&#x51FA;&#x4E00;&#x4E2A;&#x95EE;&#x9898;&#xFF1A;UnSafe &#x7C7B;&#x662F;&#x4EC0;&#x4E48;&#xFF1F;</p><h4 id="UnSafe-&#x7C7B;"><a href="#UnSafe-&#x7C7B;" class="headerlink" title="UnSafe &#x7C7B;"></a>UnSafe &#x7C7B;</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">AtomicInteger</span> <span class="keyword">extends</span> <span class="title">Number</span> <span class="keyword">implements</span> <span class="title">java</span>.<span class="title">io</span>.<span class="title">Serializable</span> </span>{</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="keyword">long</span> serialVersionUID = <span class="number">6214790243416807050L</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// setup to use Unsafe.compareAndSwapInt for updates</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> Unsafe unsafe = Unsafe.getUnsafe();</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="keyword">long</span> valueOffset;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">static</span> {</span><br><span class="line">        <span class="keyword">try</span> {</span><br><span class="line">            <span class="comment">// &#x83B7;&#x53D6;&#x4E0B;&#x9762; value &#x7684;&#x5730;&#x5740;&#x504F;&#x79FB;&#x91CF;</span></span><br><span class="line">            valueOffset = unsafe.objectFieldOffset</span><br><span class="line">                (AtomicInteger.class.getDeclaredField(<span class="string">&quot;value&quot;</span>));</span><br><span class="line">        } <span class="keyword">catch</span> (Exception ex) { <span class="keyword">throw</span> <span class="keyword">new</span> Error(ex); }</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">volatile</span> <span class="keyword">int</span> value;</span><br><span class="line"><span class="comment">// ...</span></span><br><span class="line">}</span><br></pre></td></tr></table></figure><ul><li>Unsafe &#x662F; CAS &#x7684;&#x6838;&#x5FC3;&#x7C7B;&#xFF0C;&#x7531;&#x4E8E; Java &#x65B9;&#x6CD5;&#x65E0;&#x6CD5;&#x76F4;&#x63A5;&#x8BBF;&#x95EE;&#x5E95;&#x5C42;&#x7CFB;&#x7EDF;&#xFF0C;&#x800C;&#x9700;&#x8981;&#x901A;&#x8FC7;&#x672C;&#x5730;&#xFF08;native&#xFF09;&#x65B9;&#x6CD5;&#x6765;&#x8BBF;&#x95EE;&#xFF0C; Unsafe &#x7C7B;&#x76F8;&#x5F53;&#x4E00;&#x4E2A;&#x540E;&#x95E8;&#xFF0C;&#x57FA;&#x4E8E;&#x8BE5;&#x7C7B;&#x53EF;&#x4EE5;&#x76F4;&#x63A5;&#x64CD;&#x4F5C;&#x7279;&#x5B9A;&#x5185;&#x5B58;&#x7684;&#x6570;&#x636E;&#x3002;Unsafe &#x7C7B;&#x5B58;&#x5728;&#x4E8E; sun.misc &#x5305;&#x4E2D;&#xFF0C;&#x5176;&#x5185;&#x90E8;&#x65B9;&#x6CD5;&#x64CD;&#x4F5C;&#x53EF;&#x4EE5;&#x50CF; C &#x6307;&#x9488;&#x4E00;&#x6837;&#x76F4;&#x63A5;&#x64CD;&#x4F5C;&#x5185;&#x5B58;&#xFF0C;&#x56E0;&#x4E3A; Java &#x4E2D; CAS &#x64CD;&#x4F5C;&#x6267;&#x884C;&#x4F9D;&#x8D56;&#x4E8E; Unsafe &#x7C7B;&#x3002; </li><li>&#x53D8;&#x91CF; vauleOffset&#xFF0C;&#x8868;&#x793A;&#x8BE5;&#x53D8;&#x91CF;&#x503C;&#x5728;&#x5185;&#x5B58;&#x4E2D;&#x7684;&#x504F;&#x79FB;&#x91CF;&#xFF0C;&#x56E0;&#x4E3A; Unsafe &#x5C31;&#x662F;&#x6839;&#x636E;&#x5185;&#x5B58;&#x504F;&#x79FB;&#x91CF;&#x6765;&#x83B7;&#x53D6;&#x6570;&#x636E;&#x7684;&#x3002;</li><li>&#x53D8;&#x91CF; value &#x7528; volatile &#x4FEE;&#x9970;&#xFF0C;&#x4FDD;&#x8BC1;&#x4E86;&#x591A;&#x7EBF;&#x7A0B;&#x4E4B;&#x95F4;&#x7684;&#x5185;&#x5B58;&#x53EF;&#x89C1;&#x6027;&#x3002;</li></ul><h4 id="CAS-&#x662F;&#x4EC0;&#x4E48;"><a href="#CAS-&#x662F;&#x4EC0;&#x4E48;" class="headerlink" title="CAS &#x662F;&#x4EC0;&#x4E48;"></a>CAS &#x662F;&#x4EC0;&#x4E48;</h4><ul><li><p>CAS    &#x7684;&#x5168;&#x79F0; Compare-And-Swap&#xFF0C;&#x5B83;&#x662F;&#x4E00;&#x6761; CPU &#x5E76;&#x53D1;&#x3002;</p></li><li><p>&#x5B83;&#x7684;&#x529F;&#x80FD;&#x662F;&#x5224;&#x65AD;&#x5185;&#x5B58;&#x67D0;&#x4E00;&#x4E2A;&#x4F4D;&#x7F6E;&#x7684;&#x503C;&#x662F;&#x5426;&#x4E3A;&#x9884;&#x671F;&#xFF0C;&#x5982;&#x679C;&#x662F;&#x5219;&#x66F4;&#x6539;&#x8FD9;&#x4E2A;&#x503C;&#xFF0C;&#x8FD9;&#x4E2A;&#x8FC7;&#x7A0B;&#x5C31;&#x662F;&#x539F;&#x5B50;&#x7684;&#x3002;</p></li><li><p>CAS &#x5E76;&#x53D1;&#x539F;&#x4F53;&#x73B0;&#x5728; JAVA &#x8BED;&#x8A00;&#x4E2D;&#x5C31;&#x662F; sun.misc.Unsafe &#x7C7B;&#x4E2D;&#x7684;&#x5404;&#x4E2A;&#x65B9;&#x6CD5;&#x3002;&#x8C03;&#x7528; UnSafe &#x7C7B;&#x4E2D;&#x7684; CAS &#x65B9;&#x6CD5;&#xFF0C;JVM &#x4F1A;&#x5E2E;&#x6211;&#x4EEC;&#x5B9E;&#x73B0;&#x51FA; CAS &#x6C47;&#x7F16;&#x6307;&#x4EE4;&#x3002;&#x8FD9;&#x662F;&#x4E00;&#x79CD;&#x5B8C;&#x5168;&#x4F9D;&#x8D56;&#x786C;&#x4EF6;&#x7684;&#x529F;&#x80FD;&#xFF0C;&#x901A;&#x8FC7;&#x5B83;&#x5B9E;&#x73B0;&#x4E86;&#x539F;&#x5B50;&#x64CD;&#x4F5C;&#x3002;&#x7531;&#x4E8E; CAS &#x662F;&#x4E00;&#x79CD;&#x7CFB;&#x7EDF;&#x6E90;&#x8BED;&#xFF0C;&#x6E90;&#x8BED;&#x5C5E;&#x4E8E;&#x64CD;&#x4F5C;&#x7CFB;&#x7EDF;&#x7528;&#x8BED;&#x8303;&#x7574;&#xFF0C;&#x662F;&#x7531;&#x82E5;&#x5E72;&#x6761;&#x6307;&#x4EE4;&#x7EC4;&#x6210;&#xFF0C;&#x7528;&#x4E8E;&#x5B8C;&#x6210;&#x67D0;&#x4E00;&#x4E2A;&#x529F;&#x80FD;&#x7684;&#x8FC7;&#x7A0B;&#xFF0C;&#x5E76;&#x4E14;&#x539F;&#x8BED;&#x7684;&#x6267;&#x884C;&#x5FC5;&#x987B;&#x662F;&#x8FDE;&#x7EED;&#x7684;&#xFF0C;&#x5728;&#x6267;&#x884C;&#x7684;&#x8FC7;&#x7A0B;&#x4E2D;&#x4E0D;&#x5141;&#x8BB8;&#x88AB;&#x4E2D;&#x65AD;&#xFF0C;&#x4E5F;&#x5C31;&#x662F;&#x8BF4; CAS &#x662F;&#x4E00;&#x6761;&#x539F;&#x5B50;&#x6307;&#x4EE4;&#xFF0C;&#x4E0D;&#x4F1A;&#x9020;&#x6210;&#x6240;&#x8C13;&#x7684;&#x6570;&#x636E;&#x4E0D;&#x4E00;&#x81F4;&#x7684;&#x95EE;&#x9898;&#x3002; </p></li><li><p>&#x5206;&#x6790;&#x4E00;&#x4E0B; getAndAddInt &#x8FD9;&#x4E2A;&#x65B9;&#x6CD5;</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// unsafe.getAndAddInt</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">final</span> <span class="keyword">int</span> <span class="title">getAndAddInt</span><span class="params">(Object obj, <span class="keyword">long</span> valueOffset, <span class="keyword">long</span> expected, <span class="keyword">int</span> val)</span> </span>{</span><br><span class="line">    <span class="keyword">int</span> temp;</span><br><span class="line">    <span class="keyword">do</span> {</span><br><span class="line">        temp = <span class="keyword">this</span>.getIntVolatile(obj, valueOffset);  <span class="comment">// &#x83B7;&#x53D6;&#x5FEB;&#x7167;&#x503C;</span></span><br><span class="line">    } <span class="keyword">while</span> (!<span class="keyword">this</span>.compareAndSwap(obj, valueOffset, temp, temp + val));  <span class="comment">// &#x5982;&#x679C;&#x6B64;&#x65F6; temp &#x6CA1;&#x6709;&#x88AB;&#x4FEE;&#x6539;&#xFF0C;&#x5C31;&#x80FD;&#x9000;&#x51FA;&#x5FAA;&#x73AF;&#xFF0C;&#x5426;&#x5219;&#x91CD;&#x65B0;&#x83B7;&#x53D6;</span></span><br><span class="line">    <span class="keyword">return</span> temp;</span><br><span class="line">}</span><br></pre></td></tr></table></figure></li></ul><h3 id="CAS-&#x7684;&#x7F3A;&#x70B9;&#xFF1F;"><a href="#CAS-&#x7684;&#x7F3A;&#x70B9;&#xFF1F;" class="headerlink" title="CAS &#x7684;&#x7F3A;&#x70B9;&#xFF1F;"></a>CAS &#x7684;&#x7F3A;&#x70B9;&#xFF1F;</h3><ul><li>&#x5FAA;&#x73AF;&#x65F6;&#x95F4;&#x957F;&#x5F00;&#x9500;&#x5F88;&#x5927;<ul><li>&#x5982;&#x679C; CAS &#x5931;&#x8D25;&#xFF0C;&#x4F1A;&#x4E00;&#x76F4;&#x5C1D;&#x8BD5;&#xFF0C;&#x5982;&#x679C; CAS &#x957F;&#x65F6;&#x95F4;&#x4E00;&#x76F4;&#x4E0D;&#x6210;&#x529F;&#xFF0C;&#x53EF;&#x80FD;&#x4F1A;&#x7ED9; CPU &#x5E26;&#x6765;&#x5F88;&#x5927;&#x7684;&#x5F00;&#x9500;&#xFF08;&#x6BD4;&#x5982;&#x7EBF;&#x7A0B;&#x6570;&#x5F88;&#x591A;&#xFF0C;&#x6BCF;&#x6B21;&#x6BD4;&#x8F83;&#x90FD;&#x662F;&#x5931;&#x8D25;&#xFF0C;&#x5C31;&#x4F1A;&#x4E00;&#x76F4;&#x5FAA;&#x73AF;&#xFF09;&#xFF0C;&#x6240;&#x4EE5;&#x5E0C;&#x671B;&#x662F;&#x7EBF;&#x7A0B;&#x6570;&#x6BD4;&#x8F83;&#x5C0F;&#x7684;&#x573A;&#x666F;&#x3002;</li></ul></li><li>&#x53EA;&#x80FD;&#x4FDD;&#x8BC1;&#x4E00;&#x4E2A;&#x5171;&#x4EAB;&#x53D8;&#x91CF;&#x7684;&#x539F;&#x5B50;&#x64CD;&#x4F5C;<ul><li>&#x5BF9;&#x4E8E;&#x591A;&#x4E2A;&#x5171;&#x4EAB;&#x53D8;&#x91CF;&#x64CD;&#x4F5C;&#x65F6;&#xFF0C;&#x5FAA;&#x73AF; CAS &#x5C31;&#x65E0;&#x6CD5;&#x4FDD;&#x8BC1;&#x64CD;&#x4F5C;&#x7684;&#x539F;&#x5B50;&#x6027;&#x3002;</li></ul></li><li>&#x5F15;&#x51FA; ABA &#x95EE;&#x9898;</li></ul><h2 id="&#x539F;&#x5B50;&#x7C7B;-AtomicInteger-&#x7684;-ABA-&#x95EE;&#x9898;&#x8C08;&#x4E00;&#x8C08;&#xFF1F;&#x539F;&#x5B50;&#x66F4;&#x65B0;&#x5F15;&#x7528;&#x77E5;&#x9053;&#x5417;&#xFF1F;"><a href="#&#x539F;&#x5B50;&#x7C7B;-AtomicInteger-&#x7684;-ABA-&#x95EE;&#x9898;&#x8C08;&#x4E00;&#x8C08;&#xFF1F;&#x539F;&#x5B50;&#x66F4;&#x65B0;&#x5F15;&#x7528;&#x77E5;&#x9053;&#x5417;&#xFF1F;" class="headerlink" title="&#x539F;&#x5B50;&#x7C7B; AtomicInteger &#x7684; ABA &#x95EE;&#x9898;&#x8C08;&#x4E00;&#x8C08;&#xFF1F;&#x539F;&#x5B50;&#x66F4;&#x65B0;&#x5F15;&#x7528;&#x77E5;&#x9053;&#x5417;&#xFF1F;"></a>&#x539F;&#x5B50;&#x7C7B; AtomicInteger &#x7684; ABA &#x95EE;&#x9898;&#x8C08;&#x4E00;&#x8C08;&#xFF1F;&#x539F;&#x5B50;&#x66F4;&#x65B0;&#x5F15;&#x7528;&#x77E5;&#x9053;&#x5417;&#xFF1F;</h2><ul><li><p>&#x539F;&#x5B50;&#x5F15;&#x7528;</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">AtomicReferenceDemo</span> </span>{</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>{</span><br><span class="line">        User cuzz = <span class="keyword">new</span> User(<span class="string">&quot;cuzz&quot;</span>, <span class="number">18</span>);</span><br><span class="line">        User faker = <span class="keyword">new</span> User(<span class="string">&quot;faker&quot;</span>, <span class="number">20</span>);</span><br><span class="line">        AtomicReference&lt;User&gt; atomicReference = <span class="keyword">new</span> AtomicReference&lt;&gt;();</span><br><span class="line">        atomicReference.set(cuzz);</span><br><span class="line">        System.out.println(atomicReference.compareAndSet(cuzz, faker)); <span class="comment">// true</span></span><br><span class="line">        System.out.println(atomicReference.get()); <span class="comment">// User(userName=faker, age=20)</span></span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></table></figure></li><li><p>ABA &#x95EE;&#x9898;&#x662F;&#x600E;&#x4E48;&#x4EA7;&#x751F;&#x7684;</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@program</span>: learn-demo</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@description</span>: ABA</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span>: cuzz</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@create</span>: 2019-04-21 23:31</span></span><br><span class="line"><span class="comment"> **/</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ABADemo</span> </span>{</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> AtomicReference&lt;Integer&gt; atomicReference = <span class="keyword">new</span> AtomicReference&lt;&gt;(<span class="number">100</span>);</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>{</span><br><span class="line">        <span class="keyword">new</span> Thread(() -&gt; {</span><br><span class="line">            atomicReference.compareAndSet(<span class="number">100</span>, <span class="number">101</span>);</span><br><span class="line">            atomicReference.compareAndSet(<span class="number">101</span>, <span class="number">100</span>);</span><br><span class="line">        }).start();</span><br><span class="line"></span><br><span class="line">        <span class="keyword">new</span> Thread(() -&gt; {</span><br><span class="line">            <span class="comment">// &#x4FDD;&#x8BC1;&#x4E0A;&#x9762;&#x7EBF;&#x7A0B;&#x5148;&#x6267;&#x884C;</span></span><br><span class="line">            <span class="keyword">try</span> {</span><br><span class="line">                Thread.sleep(<span class="number">1000</span>);</span><br><span class="line">            } <span class="keyword">catch</span> (InterruptedException e) {</span><br><span class="line">                e.printStackTrace();</span><br><span class="line">            }</span><br><span class="line">            atomicReference.compareAndSet(<span class="number">100</span>, <span class="number">2019</span>);</span><br><span class="line">            System.out.println(atomicReference.get()); <span class="comment">// 2019</span></span><br><span class="line">        }).start();</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></table></figure><p>&#x5F53;&#x6709;&#x4E00;&#x4E2A;&#x503C;&#x4ECE; A &#x6539;&#x4E3A; B &#x53C8;&#x6539;&#x4E3A; A&#xFF0C;&#x8FD9;&#x5C31;&#x662F; ABA &#x95EE;&#x9898;&#x3002;</p></li><li><p>&#x65F6;&#x95F4;&#x6233;&#x539F;&#x5B50;&#x5F15;&#x7528;</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.cuzz.thread;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util.concurrent.atomic.AtomicReference;</span><br><span class="line"><span class="keyword">import</span> java.util.concurrent.atomic.AtomicStampedReference;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@program</span>: learn-demo</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@description</span>: ABA</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span>: cuzz</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@create</span>: 2019-04-21 23:31</span></span><br><span class="line"><span class="comment"> **/</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ABADemo2</span> </span>{</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> AtomicStampedReference&lt;Integer&gt; atomicStampedReference = <span class="keyword">new</span> AtomicStampedReference&lt;&gt;(<span class="number">100</span>, <span class="number">1</span>);</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>{</span><br><span class="line">        <span class="keyword">new</span> Thread(() -&gt; {</span><br><span class="line">            <span class="keyword">int</span> stamp = atomicStampedReference.getStamp();</span><br><span class="line">            System.out.println(Thread.currentThread().getName() + <span class="string">&quot; &#x7684;&#x7248;&#x672C;&#x53F7;&#x4E3A;&#xFF1A;&quot;</span> + stamp);</span><br><span class="line">            <span class="keyword">try</span> {</span><br><span class="line">                Thread.sleep(<span class="number">1000</span>);</span><br><span class="line">            } <span class="keyword">catch</span> (InterruptedException e) {</span><br><span class="line">                e.printStackTrace();</span><br><span class="line">            }</span><br><span class="line">            atomicStampedReference.compareAndSet(<span class="number">100</span>, <span class="number">101</span>, atomicStampedReference.getStamp(), atomicStampedReference.getStamp() + <span class="number">1</span> );</span><br><span class="line">            atomicStampedReference.compareAndSet(<span class="number">101</span>, <span class="number">100</span>, atomicStampedReference.getStamp(), atomicStampedReference.getStamp() + <span class="number">1</span> );</span><br><span class="line">        }).start();</span><br><span class="line"></span><br><span class="line">        <span class="keyword">new</span> Thread(() -&gt; {</span><br><span class="line">            <span class="keyword">int</span> stamp = atomicStampedReference.getStamp();</span><br><span class="line">            System.out.println(Thread.currentThread().getName() + <span class="string">&quot; &#x7684;&#x7248;&#x672C;&#x53F7;&#x4E3A;&#xFF1A;&quot;</span> + stamp);</span><br><span class="line">            <span class="keyword">try</span> {</span><br><span class="line">                Thread.sleep(<span class="number">3000</span>);</span><br><span class="line">            } <span class="keyword">catch</span> (InterruptedException e) {</span><br><span class="line">                e.printStackTrace();</span><br><span class="line">            }</span><br><span class="line">            <span class="keyword">boolean</span> b = atomicStampedReference.compareAndSet(<span class="number">100</span>, <span class="number">2019</span>, stamp, stamp + <span class="number">1</span>);</span><br><span class="line">            System.out.println(b); <span class="comment">// false</span></span><br><span class="line">            System.out.println(atomicStampedReference.getReference()); <span class="comment">// 100</span></span><br><span class="line">        }).start();</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></table></figure><p>&#x6211;&#x4EEC;&#x5148;&#x4FDD;&#x8BC1;&#x4E24;&#x4E2A;&#x7EBF;&#x7A0B;&#x7684;&#x521D;&#x59CB;&#x7248;&#x672C;&#x4E3A;&#x4E00;&#x81F4;&#xFF0C;&#x540E;&#x9762;&#x4FEE;&#x6539;&#x662F;&#x7531;&#x4E8E;&#x7248;&#x672C;&#x4E0D;&#x4E00;&#x6837;&#x5C31;&#x4F1A;&#x4FEE;&#x6539;&#x5931;&#x8D25;&#x3002;</p></li></ul><h2 id="&#x6211;&#x4EEC;&#x77E5;&#x9053;-ArrayList-&#x662F;&#x7EBF;&#x7A0B;&#x4E0D;&#x5B89;&#x5168;&#xFF0C;&#x8BF7;&#x7F16;&#x5199;&#x4E00;&#x4E2A;&#x4E0D;&#x5B89;&#x5168;&#x7684;&#x6848;&#x4F8B;&#x5E76;&#x7ED9;&#x51FA;&#x89E3;&#x51B3;&#x65B9;&#x6848;&#xFF1F;"><a href="#&#x6211;&#x4EEC;&#x77E5;&#x9053;-ArrayList-&#x662F;&#x7EBF;&#x7A0B;&#x4E0D;&#x5B89;&#x5168;&#xFF0C;&#x8BF7;&#x7F16;&#x5199;&#x4E00;&#x4E2A;&#x4E0D;&#x5B89;&#x5168;&#x7684;&#x6848;&#x4F8B;&#x5E76;&#x7ED9;&#x51FA;&#x89E3;&#x51B3;&#x65B9;&#x6848;&#xFF1F;" class="headerlink" title="&#x6211;&#x4EEC;&#x77E5;&#x9053; ArrayList &#x662F;&#x7EBF;&#x7A0B;&#x4E0D;&#x5B89;&#x5168;&#xFF0C;&#x8BF7;&#x7F16;&#x5199;&#x4E00;&#x4E2A;&#x4E0D;&#x5B89;&#x5168;&#x7684;&#x6848;&#x4F8B;&#x5E76;&#x7ED9;&#x51FA;&#x89E3;&#x51B3;&#x65B9;&#x6848;&#xFF1F;"></a>&#x6211;&#x4EEC;&#x77E5;&#x9053; ArrayList &#x662F;&#x7EBF;&#x7A0B;&#x4E0D;&#x5B89;&#x5168;&#xFF0C;&#x8BF7;&#x7F16;&#x5199;&#x4E00;&#x4E2A;&#x4E0D;&#x5B89;&#x5168;&#x7684;&#x6848;&#x4F8B;&#x5E76;&#x7ED9;&#x51FA;&#x89E3;&#x51B3;&#x65B9;&#x6848;&#xFF1F;</h2><ul><li><p>&#x6545;&#x969C;&#x73B0;&#x8C61;</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ContainerDemo</span> </span>{</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>{</span><br><span class="line">        List&lt;Integer&gt; list = <span class="keyword">new</span> ArrayList&lt;&gt;();</span><br><span class="line">        Random random = <span class="keyword">new</span> Random();</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; <span class="number">100</span>; i++) {</span><br><span class="line">            <span class="keyword">new</span> Thread(() -&gt; {</span><br><span class="line">                list.add(random.nextInt(<span class="number">10</span>));</span><br><span class="line">                System.out.println(list);</span><br><span class="line">            }).start();</span><br><span class="line">        }</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></table></figure><p>&#x53D1;&#x73B0;&#x62A5; <code>java.util.ConcurrentModificationException</code> </p></li><li><p>&#x5BFC;&#x81F4;&#x539F;&#x56E0;</p><ul><li>&#x5E76;&#x53D1;&#x4FEE;&#x6539;&#x5BFC;&#x81F4;&#x7684;&#x5F02;&#x5E38;</li></ul></li><li><p>&#x89E3;&#x51B3;&#x65B9;&#x6848;</p><ul><li><code>new Vector();</code></li><li><code>Collections.synchronizedList(new ArrayList&lt;&gt;());</code></li><li><code>new CopyOnWriteArrayList&lt;&gt;();</code></li></ul></li><li><p>&#x4F18;&#x5316;&#x5EFA;&#x8BAE;</p><ul><li>&#x5728;&#x8BFB;&#x591A;&#x5199;&#x5C11;&#x7684;&#x65F6;&#x5019;&#x63A8;&#x8350;&#x4F7F;&#x7528; CopeOnWriteArrayList &#x8FD9;&#x4E2A;&#x7C7B;</li></ul></li></ul><h2 id="java-&#x4E2D;&#x9501;&#x4F60;&#x77E5;&#x9053;&#x54EA;&#x4E9B;&#xFF1F;&#x8BF7;&#x624B;&#x5199;&#x4E00;&#x4E2A;&#x81EA;&#x65CB;&#x9501;&#xFF1F;"><a href="#java-&#x4E2D;&#x9501;&#x4F60;&#x77E5;&#x9053;&#x54EA;&#x4E9B;&#xFF1F;&#x8BF7;&#x624B;&#x5199;&#x4E00;&#x4E2A;&#x81EA;&#x65CB;&#x9501;&#xFF1F;" class="headerlink" title="java &#x4E2D;&#x9501;&#x4F60;&#x77E5;&#x9053;&#x54EA;&#x4E9B;&#xFF1F;&#x8BF7;&#x624B;&#x5199;&#x4E00;&#x4E2A;&#x81EA;&#x65CB;&#x9501;&#xFF1F;"></a>java &#x4E2D;&#x9501;&#x4F60;&#x77E5;&#x9053;&#x54EA;&#x4E9B;&#xFF1F;&#x8BF7;&#x624B;&#x5199;&#x4E00;&#x4E2A;&#x81EA;&#x65CB;&#x9501;&#xFF1F;</h2><h3 id="&#x516C;&#x5E73;&#x548C;&#x975E;&#x516C;&#x5E73;&#x9501;"><a href="#&#x516C;&#x5E73;&#x548C;&#x975E;&#x516C;&#x5E73;&#x9501;" class="headerlink" title="&#x516C;&#x5E73;&#x548C;&#x975E;&#x516C;&#x5E73;&#x9501;"></a>&#x516C;&#x5E73;&#x548C;&#x975E;&#x516C;&#x5E73;&#x9501;</h3><ul><li>&#x662F;&#x4EC0;&#x4E48;<ul><li><strong>&#x516C;&#x5E73;&#x9501;&#xFF1A;</strong>&#x662F;&#x6307;&#x591A;&#x4E2A;&#x7EBF;&#x7A0B;&#x6309;&#x7167;&#x7533;&#x8BF7;&#x7684;&#x987A;&#x5E8F;&#x6765;&#x83B7;&#x53D6;&#x503C;</li><li><strong>&#x975E;&#x516C;&#x5E73;&#x9501;&#xFF1A;</strong>&#x662F;&#x503C;&#x591A;&#x4E2A;&#x7EBF;&#x7A0B;&#x83B7;&#x53D6;&#x503C;&#x7684;&#x987A;&#x5E8F;&#x5E76;&#x4E0D;&#x662F;&#x6309;&#x7167;&#x7533;&#x8BF7;&#x9501;&#x7684;&#x987A;&#x5E8F;&#xFF0C;&#x6709;&#x53EF;&#x80FD;&#x540E;&#x7533;&#x8BF7;&#x7684;&#x7EBF;&#x7A0B;&#x6BD4;&#x5148;&#x7533;&#x8BF7;&#x7684;&#x7EBF;&#x7A0B;&#x4F18;&#x5148;&#x83B7;&#x53D6;&#x9501;&#xFF0C;&#x5728;&#x9AD8;&#x5E76;&#x53D1;&#x7684;&#x60C5;&#x51B5;&#x4E0B;&#xFF0C;&#x53EF;&#x80FD;&#x4F1A;&#x9020;&#x6210;&#x4F18;&#x5148;&#x7EA7;&#x7FFB;&#x8F6C;&#x6216;&#x8005;&#x9965;&#x997F;&#x73B0;&#x8C61;</li></ul></li><li>&#x4E24;&#x8005;&#x533A;&#x522B;<ul><li><strong>&#x516C;&#x5E73;&#x9501;&#xFF1A;</strong>&#x5728;&#x5E76;&#x53D1;&#x73AF;&#x5883;&#x4E2D;&#xFF0C;&#x6BCF;&#x4E00;&#x4E2A;&#x7EBF;&#x7A0B;&#x5728;&#x83B7;&#x53D6;&#x9501;&#x65F6;&#x4F1A;&#x5148;&#x67E5;&#x770B;&#x6B64;&#x9501;&#x7EF4;&#x62A4;&#x7684;&#x7B49;&#x5F85;&#x961F;&#x5217;&#xFF0C;&#x5982;&#x679C;&#x4E3A;&#x7A7A;&#xFF0C;&#x6216;&#x8005;&#x5F53;&#x524D;&#x7EBF;&#x7A0B;&#x662F;&#x7B49;&#x5F85;&#x961F;&#x5217;&#x7684;&#x7B2C;&#x4E00;&#x4E2A;&#x5C31;&#x5360;&#x6709;&#x9501;&#xFF0C;&#x5426;&#x8005;&#x5C31;&#x4F1A;&#x52A0;&#x5165;&#x5230;&#x7B49;&#x5F85;&#x961F;&#x5217;&#x4E2D;&#xFF0C;&#x4EE5;&#x540E;&#x4F1A;&#x6309;&#x7167; FIFO &#x7684;&#x89C4;&#x5219;&#x83B7;&#x53D6;&#x9501;</li><li><strong>&#x975E;&#x516C;&#x5E73;&#x9501;&#xFF1A;</strong>&#x4E00;&#x4E0A;&#x6765;&#x5C31;&#x5C1D;&#x8BD5;&#x5360;&#x6709;&#x9501;&#xFF0C;&#x5982;&#x679C;&#x5931;&#x8D25;&#x5728;&#x8FDB;&#x884C;&#x6392;&#x961F;</li></ul></li></ul><h3 id="&#x53EF;&#x91CD;&#x5165;&#x9501;&#x548C;&#x4E0D;&#x53EF;&#x91CD;&#x5165;&#x9501;"><a href="#&#x53EF;&#x91CD;&#x5165;&#x9501;&#x548C;&#x4E0D;&#x53EF;&#x91CD;&#x5165;&#x9501;" class="headerlink" title="&#x53EF;&#x91CD;&#x5165;&#x9501;&#x548C;&#x4E0D;&#x53EF;&#x91CD;&#x5165;&#x9501;"></a>&#x53EF;&#x91CD;&#x5165;&#x9501;&#x548C;&#x4E0D;&#x53EF;&#x91CD;&#x5165;&#x9501;</h3><ul><li><p>&#x662F;&#x4EC0;&#x4E48;</p><ul><li><strong>&#x53EF;&#x91CD;&#x5165;&#x9501;&#xFF1A;</strong>&#x6307;&#x7684;&#x662F;&#x540C;&#x4E00;&#x4E2A;&#x7EBF;&#x7A0B;&#x5916;&#x5C42;&#x51FD;&#x6570;&#x83B7;&#x5F97;&#x9501;&#x4E4B;&#x540E;&#xFF0C;&#x5185;&#x5C42;&#x4ECD;&#x7136;&#x80FD;&#x83B7;&#x53D6;&#x5230;&#x8BE5;&#x9501;&#xFF0C;&#x5728;&#x540C;&#x4E00;&#x4E2A;&#x7EBF;&#x7A0B;&#x5728;&#x5916;&#x5C42;&#x65B9;&#x6CD5;&#x83B7;&#x53D6;&#x9501;&#x7684;&#x65F6;&#x5019;&#xFF0C;&#x5728;&#x8FDB;&#x5165;&#x5185;&#x5C42;&#x65B9;&#x6CD5;&#x6216;&#x4F1A;&#x81EA;&#x52A8;&#x83B7;&#x53D6;&#x8BE5;&#x9501;       </li><li><strong>&#x4E0D;&#x53EF;&#x91CD;&#x5165;&#x9501;&#xFF1A;</strong> &#x6240;&#x8C13;&#x4E0D;&#x53EF;&#x91CD;&#x5165;&#x9501;&#xFF0C;&#x5373;&#x82E5;&#x5F53;&#x524D;&#x7EBF;&#x7A0B;&#x6267;&#x884C;&#x67D0;&#x4E2A;&#x65B9;&#x6CD5;&#x5DF2;&#x7ECF;&#x83B7;&#x53D6;&#x4E86;&#x8BE5;&#x9501;&#xFF0C;&#x90A3;&#x4E48;&#x5728;&#x65B9;&#x6CD5;&#x4E2D;&#x5C1D;&#x8BD5;&#x518D;&#x6B21;&#x83B7;&#x53D6;&#x9501;&#x65F6;&#xFF0C;&#x5C31;&#x4F1A;&#x83B7;&#x53D6;&#x4E0D;&#x5230;&#x88AB;&#x963B;&#x585E; </li></ul></li><li><p>&#x4EE3;&#x7801;&#x5B9E;&#x73B0;</p><ul><li><p>&#x53EF;&#x91CD;&#x5165;&#x9501;</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ReentrantLock</span> </span>{</span><br><span class="line">    <span class="keyword">boolean</span> isLocked = <span class="keyword">false</span>;</span><br><span class="line">    Thread lockedBy = <span class="keyword">null</span>;</span><br><span class="line">    <span class="keyword">int</span> lockedCount = <span class="number">0</span>;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">synchronized</span> <span class="keyword">void</span> <span class="title">lock</span><span class="params">()</span> <span class="keyword">throws</span> InterruptedException </span>{</span><br><span class="line">        Thread thread = Thread.currentThread();</span><br><span class="line">        <span class="keyword">while</span> (isLocked &amp;&amp; lockedBy != thread) {</span><br><span class="line">            wait();</span><br><span class="line">        }</span><br><span class="line">        isLocked = <span class="keyword">true</span>;</span><br><span class="line">        lockedCount++;</span><br><span class="line">        lockedBy = thread;</span><br><span class="line">    }</span><br><span class="line">    </span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">synchronized</span> <span class="keyword">void</span> <span class="title">unlock</span><span class="params">()</span> </span>{</span><br><span class="line">        <span class="keyword">if</span> (Thread.currentThread() == lockedBy) {</span><br><span class="line">            lockedCount--;</span><br><span class="line">            <span class="keyword">if</span> (lockedCount == <span class="number">0</span>) {</span><br><span class="line">                isLocked = <span class="keyword">false</span>;</span><br><span class="line">                notify();</span><br><span class="line">            }</span><br><span class="line">        }</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></table></figure><p>&#x6D4B;&#x8BD5;</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Count</span> </span>{</span><br><span class="line"><span class="comment">//    NotReentrantLock lock = new NotReentrantLock();</span></span><br><span class="line">    ReentrantLock lock = <span class="keyword">new</span> ReentrantLock();</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">print</span><span class="params">()</span> <span class="keyword">throws</span> InterruptedException</span>{</span><br><span class="line">        lock.lock();</span><br><span class="line">        doAdd();</span><br><span class="line">        lock.unlock();</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">doAdd</span><span class="params">()</span> <span class="keyword">throws</span> InterruptedException </span>{</span><br><span class="line">        lock.lock();</span><br><span class="line">        <span class="comment">// do something</span></span><br><span class="line">        System.out.println(<span class="string">&quot;ReentrantLock&quot;</span>);</span><br><span class="line">        lock.unlock();</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> InterruptedException </span>{</span><br><span class="line">        Count count = <span class="keyword">new</span> Count();</span><br><span class="line">        count.print();</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></table></figure><p>&#x53D1;&#x73B0;&#x53EF;&#x4EE5;&#x8F93;&#x51FA; ReentrantLock&#xFF0C;&#x6211;&#x4EEC;&#x8BBE;&#x8BA1;&#x4E24;&#x4E2A;&#x7EBF;&#x7A0B;&#x8C03;&#x7528; print() &#x65B9;&#x6CD5;&#xFF0C;&#x7B2C;&#x4E00;&#x4E2A;&#x7EBF;&#x7A0B;&#x8C03;&#x7528; print() &#x65B9;&#x6CD5;&#x83B7;&#x53D6;&#x9501;&#xFF0C;&#x8FDB;&#x5165; lock() &#x65B9;&#x6CD5;&#xFF0C;&#x7531;&#x4E8E;&#x521D;&#x59CB; lockedBy &#x662F; null&#xFF0C;&#x6240;&#x4EE5;&#x4E0D;&#x4F1A;&#x8FDB;&#x5165; while &#x800C;&#x6302;&#x8D77;&#x5F53;&#x524D;&#x7EBF;&#x7A0B;&#xFF0C;&#x800C;&#x662F;&#x662F;&#x589E;&#x91CF; lockedCount &#x5E76;&#x8BB0;&#x5F55; lockBy &#x4E3A;&#x7B2C;&#x4E00;&#x4E2A;&#x7EBF;&#x7A0B;&#x3002;&#x63A5;&#x7740;&#x7B2C;&#x4E00;&#x4E2A;&#x7EBF;&#x7A0B;&#x8FDB;&#x5165; doAdd() &#x65B9;&#x6CD5;&#xFF0C;&#x7531;&#x4E8E;&#x540C;&#x4E00;&#x8FDB;&#x7A0B;&#xFF0C;&#x6240;&#x4EE5;&#x4E0D;&#x4F1A;&#x8FDB;&#x5165; while &#x800C;&#x6302;&#x8D77;&#xFF0C;&#x63A5;&#x7740;&#x589E;&#x91CF; lockedCount&#xFF0C;&#x5F53;&#x7B2C;&#x4E8C;&#x4E2A;&#x7EBF;&#x7A0B;&#x5C1D;&#x8BD5;lock&#xFF0C;&#x7531;&#x4E8E; isLocked=true&#xFF0C;&#x6240;&#x4EE5;&#x4ED6;&#x4E0D;&#x4F1A;&#x83B7;&#x53D6;&#x8BE5;&#x9501;&#xFF0C;&#x76F4;&#x5230;&#x7B2C;&#x4E00;&#x4E2A;&#x7EBF;&#x7A0B;&#x8C03;&#x7528;&#x4E24;&#x6B21; unlock() &#x5C06; lockCount &#x9012;&#x51CF;&#x4E3A;0&#xFF0C;&#x624D;&#x5C06;&#x6807;&#x8BB0;&#x4E3A; isLocked &#x8BBE;&#x7F6E;&#x4E3A; false&#x3002;</p></li><li><p>&#x4E0D;&#x53EF;&#x91CD;&#x5165;&#x9501;</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">NotReentrantLock</span> </span>{</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">boolean</span> isLocked = <span class="keyword">false</span>;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">synchronized</span> <span class="keyword">void</span> <span class="title">lock</span><span class="params">()</span> <span class="keyword">throws</span> InterruptedException </span>{</span><br><span class="line">        <span class="keyword">while</span> (isLocked) {</span><br><span class="line">            wait();</span><br><span class="line">        }</span><br><span class="line">        isLocked = <span class="keyword">true</span>;</span><br><span class="line">    }</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">synchronized</span> <span class="keyword">void</span> <span class="title">unlock</span><span class="params">()</span> </span>{</span><br><span class="line">        isLocked = <span class="keyword">false</span>;</span><br><span class="line">        notify();</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></table></figure><p>&#x6D4B;&#x8BD5;</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Count</span> </span>{</span><br><span class="line">    NotReentrantLock lock = <span class="keyword">new</span> NotReentrantLock();</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">print</span><span class="params">()</span> <span class="keyword">throws</span> InterruptedException</span>{</span><br><span class="line">        lock.lock();</span><br><span class="line">        doAdd();</span><br><span class="line">        lock.unlock();</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">doAdd</span><span class="params">()</span> <span class="keyword">throws</span> InterruptedException </span>{</span><br><span class="line">        lock.lock();</span><br><span class="line">        <span class="comment">// do something</span></span><br><span class="line">        lock.unlock();</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> InterruptedException </span>{</span><br><span class="line">        Count count = <span class="keyword">new</span> Count();</span><br><span class="line">        count.print();</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></table></figure><p>&#x5F53;&#x524D;&#x7EBF;&#x7A0B;&#x6267;&#x884C;print()&#x65B9;&#x6CD5;&#x9996;&#x5148;&#x83B7;&#x53D6;lock&#xFF0C;&#x63A5;&#x4E0B;&#x6765;&#x6267;&#x884C;doAdd()&#x65B9;&#x6CD5;&#x5C31;&#x65E0;&#x6CD5;&#x6267;&#x884C;doAdd()&#x4E2D;&#x7684;&#x903B;&#x8F91;&#xFF0C;&#x5FC5;&#x987B;&#x5148;&#x91CA;&#x653E;&#x9501;&#x3002;&#x8FD9;&#x4E2A;&#x4F8B;&#x5B50;&#x5F88;&#x597D;&#x7684;&#x8BF4;&#x660E;&#x4E86;&#x4E0D;&#x53EF;&#x91CD;&#x5165;&#x9501;&#x3002;</p></li></ul></li><li><p>synchronized &#x548C; ReentrantLock &#x90FD;&#x662F;&#x53EF;&#x91CD;&#x5165;&#x9501;</p><ul><li><p>synchronzied </p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">SynchronziedDemo</span> </span>{</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">synchronized</span> <span class="keyword">void</span> <span class="title">print</span><span class="params">()</span> </span>{</span><br><span class="line">        doAdd();</span><br><span class="line">    }</span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">synchronized</span> <span class="keyword">void</span> <span class="title">doAdd</span><span class="params">()</span> </span>{</span><br><span class="line">        System.out.println(<span class="string">&quot;doAdd...&quot;</span>);</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>{</span><br><span class="line">        SynchronziedDemo synchronziedDemo = <span class="keyword">new</span> SynchronziedDemo();</span><br><span class="line">        synchronziedDemo.print(); <span class="comment">// doAdd...</span></span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></table></figure><p>&#x4E0A;&#x9762;&#x53EF;&#x4EE5;&#x8BF4;&#x660E; synchronized &#x662F;&#x53EF;&#x91CD;&#x5165;&#x9501;&#x3002;</p></li><li><p>ReentrantLock</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ReentrantLockDemo</span> </span>{</span><br><span class="line">    <span class="keyword">private</span> Lock lock = <span class="keyword">new</span> ReentrantLock();</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">print</span><span class="params">()</span> </span>{</span><br><span class="line">        lock.lock();</span><br><span class="line">        doAdd();</span><br><span class="line">        lock.unlock();</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">doAdd</span><span class="params">()</span> </span>{</span><br><span class="line">        lock.lock();</span><br><span class="line">        lock.lock();</span><br><span class="line">        System.out.println(<span class="string">&quot;doAdd...&quot;</span>);</span><br><span class="line">        lock.unlock();</span><br><span class="line">        lock.unlock();</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>{</span><br><span class="line">        ReentrantLockDemo reentrantLockDemo = <span class="keyword">new</span> ReentrantLockDemo();</span><br><span class="line">        reentrantLockDemo.print();</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></table></figure><p>&#x4E0A;&#x9762;&#x4F8B;&#x5B50;&#x53EF;&#x4EE5;&#x8BF4;&#x660E; ReentrantLock &#x662F;&#x53EF;&#x91CD;&#x5165;&#x9501;&#xFF0C;&#x800C;&#x4E14;&#x5728; #doAdd &#x65B9;&#x6CD5;&#x4E2D;&#x52A0;&#x4E24;&#x6B21;&#x9501;&#x548C;&#x89E3;&#x4E24;&#x6B21;&#x9501;&#x4E5F;&#x53EF;&#x4EE5;&#x3002;</p></li></ul></li></ul><h3 id="&#x81EA;&#x65CB;&#x9501;"><a href="#&#x81EA;&#x65CB;&#x9501;" class="headerlink" title="&#x81EA;&#x65CB;&#x9501;"></a>&#x81EA;&#x65CB;&#x9501;</h3><ul><li><p>&#x662F;&#x6307;&#x5B9A;&#x5C1D;&#x8BD5;&#x83B7;&#x53D6;&#x9501;&#x7684;&#x7EBF;&#x7A0B;&#x4E0D;&#x4F1A;&#x7ACB;&#x5373;&#x5835;&#x585E;&#xFF0C;&#x800C;&#x662F;<strong>&#x91C7;&#x7528;&#x5FAA;&#x73AF;&#x7684;&#x65B9;&#x5F0F;&#x53BB;&#x5C1D;&#x8BD5;&#x83B7;&#x53D6;&#x9501;</strong>&#xFF0C;&#x8FD9;&#x6837;&#x7684;&#x597D;&#x5904;&#x662F;&#x51CF;&#x5C11;&#x7EBF;&#x7A0B;&#x4E0A;&#x7EBF;&#x6587;&#x5207;&#x6362;&#x7684;&#x6D88;&#x8017;&#xFF0C;&#x7F3A;&#x70B9;&#x5C31;&#x662F;&#x5FAA;&#x73AF;&#x4F1A;&#x6D88;&#x8017; CPU&#x3002;</p></li><li><p>&#x624B;&#x52A8;&#x5B9E;&#x73B0;&#x81EA;&#x65CB;&#x9501;</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">SpinLock</span> </span>{</span><br><span class="line">    <span class="keyword">private</span> AtomicReference&lt;Thread&gt; atomicReference = <span class="keyword">new</span> AtomicReference&lt;&gt;();</span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">lock</span> <span class="params">()</span> </span>{</span><br><span class="line">        System.out.println(Thread.currentThread() + <span class="string">&quot; coming...&quot;</span>);</span><br><span class="line">        <span class="keyword">while</span> (!atomicReference.compareAndSet(<span class="keyword">null</span>, Thread.currentThread())) {</span><br><span class="line">            <span class="comment">// loop</span></span><br><span class="line">        }</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">unlock</span><span class="params">()</span> </span>{</span><br><span class="line">        Thread thread = Thread.currentThread();</span><br><span class="line">        atomicReference.compareAndSet(thread, <span class="keyword">null</span>);</span><br><span class="line">        System.out.println(thread + <span class="string">&quot; unlock...&quot;</span>);</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> InterruptedException </span>{</span><br><span class="line">        SpinLock spinLock = <span class="keyword">new</span> SpinLock();</span><br><span class="line">        <span class="keyword">new</span> Thread(() -&gt; {</span><br><span class="line">            spinLock.lock();</span><br><span class="line">            <span class="keyword">try</span> {</span><br><span class="line">                Thread.sleep(<span class="number">3000</span>);</span><br><span class="line">            } <span class="keyword">catch</span> (InterruptedException e) {</span><br><span class="line">                e.printStackTrace();</span><br><span class="line">            }</span><br><span class="line">            System.out.println(<span class="string">&quot;hahaha&quot;</span>);</span><br><span class="line">            spinLock.unlock();</span><br><span class="line"></span><br><span class="line">        }).start();</span><br><span class="line"></span><br><span class="line">        Thread.sleep(<span class="number">1</span>);</span><br><span class="line"></span><br><span class="line">        <span class="keyword">new</span> Thread(() -&gt; {</span><br><span class="line">            spinLock.lock();</span><br><span class="line">            System.out.println(<span class="string">&quot;hehehe&quot;</span>);</span><br><span class="line">            spinLock.unlock();</span><br><span class="line">        }).start();</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></table></figure><p>&#x8F93;&#x51FA;&#xFF1A;</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">Thread[Thread-0,5,main] coming...</span><br><span class="line">Thread[Thread-1,5,main] coming...</span><br><span class="line">hahaha</span><br><span class="line">Thread[Thread-0,5,main] unlock...</span><br><span class="line">hehehe</span><br><span class="line">Thread[Thread-1,5,main] unlock...</span><br></pre></td></tr></table></figure><p>&#x83B7;&#x53D6;&#x9501;&#x7684;&#x65F6;&#x5019;&#xFF0C;&#x5982;&#x679C;&#x539F;&#x5B50;&#x5F15;&#x7528;&#x4E3A;&#x7A7A;&#x5C31;&#x83B7;&#x53D6;&#x9501;&#xFF0C;&#x4E0D;&#x4E3A;&#x7A7A;&#x8868;&#x793A;&#x6709;&#x4EBA;&#x83B7;&#x53D6;&#x4E86;&#x9501;&#xFF0C;&#x5C31;&#x5FAA;&#x73AF;&#x7B49;&#x5F85;&#x3002;</p></li></ul><h3 id="&#x72EC;&#x5360;&#x9501;&#xFF08;&#x5199;&#x9501;&#xFF09;-&#x5171;&#x4EAB;&#x9501;&#xFF08;&#x8BFB;&#x9501;&#xFF09;"><a href="#&#x72EC;&#x5360;&#x9501;&#xFF08;&#x5199;&#x9501;&#xFF09;-&#x5171;&#x4EAB;&#x9501;&#xFF08;&#x8BFB;&#x9501;&#xFF09;" class="headerlink" title="&#x72EC;&#x5360;&#x9501;&#xFF08;&#x5199;&#x9501;&#xFF09;/&#x5171;&#x4EAB;&#x9501;&#xFF08;&#x8BFB;&#x9501;&#xFF09;"></a>&#x72EC;&#x5360;&#x9501;&#xFF08;&#x5199;&#x9501;&#xFF09;/&#x5171;&#x4EAB;&#x9501;&#xFF08;&#x8BFB;&#x9501;&#xFF09;</h3><ul><li><p>&#x662F;&#x4EC0;&#x4E48;</p><ul><li><strong>&#x72EC;&#x5360;&#x9501;&#xFF1A;</strong>&#x6307;&#x8BE5;&#x9501;&#x4E00;&#x6B21;&#x53EA;&#x80FD;&#x88AB;&#x4E00;&#x4E2A;&#x7EBF;&#x7A0B;&#x6301;&#x6709;</li><li><strong>&#x5171;&#x4EAB;&#x9501;&#xFF1A;</strong>&#x8BE5;&#x9501;&#x53EF;&#x4EE5;&#x88AB;&#x591A;&#x4E2A;&#x7EBF;&#x7A0B;&#x6301;&#x6709;</li></ul></li><li><p>&#x5BF9;&#x4E8E; ReentrantLock &#x548C; synchronized &#x90FD;&#x662F;&#x72EC;&#x5360;&#x9501;&#xFF1B;&#x5BF9;&#x4E0E; ReentrantReadWriteLock &#x5176;&#x8BFB;&#x9501;&#x662F;&#x5171;&#x4EAB;&#x9501;&#x800C;&#x5199;&#x9501;&#x662F;&#x72EC;&#x5360;&#x9501;&#x3002;&#x8BFB;&#x9501;&#x7684;&#x5171;&#x4EAB;&#x53EF;&#x4FDD;&#x8BC1;&#x5E76;&#x53D1;&#x8BFB;&#x662F;&#x975E;&#x5E38;&#x9AD8;&#x6548;&#x7684;&#xFF0C;&#x8BFB;&#x5199;&#x3001;&#x5199;&#x8BFB;&#x548C;&#x5199;&#x5199;&#x7684;&#x8FC7;&#x7A0B;&#x662F;&#x4E92;&#x65A5;&#x7684;&#x3002;</p></li><li><p>&#x8BFB;&#x5199;&#x9501;&#x4F8B;&#x5B50;</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MyCache</span> </span>{</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">volatile</span> Map&lt;String, Object&gt; map = <span class="keyword">new</span> HashMap&lt;&gt;();</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> ReentrantReadWriteLock lock = <span class="keyword">new</span> ReentrantReadWriteLock();</span><br><span class="line">    WriteLock writeLock = lock.writeLock();</span><br><span class="line">    ReadLock readLock = lock.readLock();</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">put</span><span class="params">(String key, Object value)</span> </span>{</span><br><span class="line">        <span class="keyword">try</span> {</span><br><span class="line">            writeLock.lock();</span><br><span class="line">            System.out.println(Thread.currentThread().getName() + <span class="string">&quot; &#x6B63;&#x5728;&#x5199;&#x5165;...&quot;</span>);</span><br><span class="line">            <span class="keyword">try</span> {</span><br><span class="line">                Thread.sleep(<span class="number">1000</span>);</span><br><span class="line">            } <span class="keyword">catch</span> (InterruptedException e) {</span><br><span class="line">                e.printStackTrace();</span><br><span class="line">            }</span><br><span class="line">            map.put(key, value);</span><br><span class="line">            System.out.println(Thread.currentThread().getName() + <span class="string">&quot; &#x5199;&#x5165;&#x5B8C;&#x6210;&#xFF0C;&#x5199;&#x5165;&#x7ED3;&#x679C;&#x662F; &quot;</span> + value);</span><br><span class="line">        } <span class="keyword">finally</span> {</span><br><span class="line">            writeLock.unlock();</span><br><span class="line">        }</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">get</span><span class="params">(String key)</span> </span>{</span><br><span class="line">        <span class="keyword">try</span> {</span><br><span class="line">            readLock.lock();</span><br><span class="line">            System.out.println(Thread.currentThread().getName() + <span class="string">&quot; &#x6B63;&#x5728;&#x8BFB;...&quot;</span>);</span><br><span class="line">            <span class="keyword">try</span> {</span><br><span class="line">                Thread.sleep(<span class="number">1000</span>);</span><br><span class="line">            } <span class="keyword">catch</span> (InterruptedException e) {</span><br><span class="line">                e.printStackTrace();</span><br><span class="line">            }</span><br><span class="line">            Object res = map.get(key);</span><br><span class="line">            System.out.println(Thread.currentThread().getName() + <span class="string">&quot; &#x8BFB;&#x53D6;&#x5B8C;&#x6210;&#xFF0C;&#x8BFB;&#x53D6;&#x7ED3;&#x679C;&#x662F; &quot;</span> + res);</span><br><span class="line">        } <span class="keyword">finally</span> {</span><br><span class="line">            readLock.unlock();</span><br><span class="line">        }</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></table></figure><p>&#x6D4B;&#x8BD5;</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ReadWriteLockDemo</span> </span>{</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>{</span><br><span class="line">        MyCache cache = <span class="keyword">new</span> MyCache();</span><br><span class="line"></span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; <span class="number">5</span>; i++) {</span><br><span class="line">            <span class="keyword">final</span> <span class="keyword">int</span> temp = i;</span><br><span class="line">            <span class="keyword">new</span> Thread(() -&gt; {</span><br><span class="line">                cache.put(temp + <span class="string">&quot;&quot;</span>, temp + <span class="string">&quot;&quot;</span>);</span><br><span class="line">            }).start();</span><br><span class="line">        }</span><br><span class="line"></span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; <span class="number">5</span>; i++) {</span><br><span class="line">            <span class="keyword">final</span> <span class="keyword">int</span> temp = i;</span><br><span class="line">            <span class="keyword">new</span> Thread(() -&gt; {</span><br><span class="line">                cache.get(temp + <span class="string">&quot;&quot;</span>);</span><br><span class="line">            }).start();</span><br><span class="line">        }</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></table></figure><p>&#x8F93;&#x51FA;&#x7ED3;&#x679C;</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">Thread-0 &#x6B63;&#x5728;&#x5199;&#x5165;...</span><br><span class="line">Thread-0 &#x5199;&#x5165;&#x5B8C;&#x6210;&#xFF0C;&#x5199;&#x5165;&#x7ED3;&#x679C;&#x662F; 0</span><br><span class="line">Thread-1 &#x6B63;&#x5728;&#x5199;&#x5165;...</span><br><span class="line">Thread-1 &#x5199;&#x5165;&#x5B8C;&#x6210;&#xFF0C;&#x5199;&#x5165;&#x7ED3;&#x679C;&#x662F; 1</span><br><span class="line">Thread-2 &#x6B63;&#x5728;&#x5199;&#x5165;...</span><br><span class="line">Thread-2 &#x5199;&#x5165;&#x5B8C;&#x6210;&#xFF0C;&#x5199;&#x5165;&#x7ED3;&#x679C;&#x662F; 2</span><br><span class="line">Thread-3 &#x6B63;&#x5728;&#x5199;&#x5165;...</span><br><span class="line">Thread-3 &#x5199;&#x5165;&#x5B8C;&#x6210;&#xFF0C;&#x5199;&#x5165;&#x7ED3;&#x679C;&#x662F; 3</span><br><span class="line">Thread-4 &#x6B63;&#x5728;&#x5199;&#x5165;...</span><br><span class="line">Thread-4 &#x5199;&#x5165;&#x5B8C;&#x6210;&#xFF0C;&#x5199;&#x5165;&#x7ED3;&#x679C;&#x662F; 4</span><br><span class="line">Thread-5 &#x6B63;&#x5728;&#x8BFB;...</span><br><span class="line">Thread-7 &#x6B63;&#x5728;&#x8BFB;...</span><br><span class="line">Thread-8 &#x6B63;&#x5728;&#x8BFB;...</span><br><span class="line">Thread-6 &#x6B63;&#x5728;&#x8BFB;...</span><br><span class="line">Thread-9 &#x6B63;&#x5728;&#x8BFB;...</span><br><span class="line">Thread-5 &#x8BFB;&#x53D6;&#x5B8C;&#x6210;&#xFF0C;&#x8BFB;&#x53D6;&#x7ED3;&#x679C;&#x662F; 0</span><br><span class="line">Thread-7 &#x8BFB;&#x53D6;&#x5B8C;&#x6210;&#xFF0C;&#x8BFB;&#x53D6;&#x7ED3;&#x679C;&#x662F; 2</span><br><span class="line">Thread-8 &#x8BFB;&#x53D6;&#x5B8C;&#x6210;&#xFF0C;&#x8BFB;&#x53D6;&#x7ED3;&#x679C;&#x662F; 3</span><br><span class="line">Thread-6 &#x8BFB;&#x53D6;&#x5B8C;&#x6210;&#xFF0C;&#x8BFB;&#x53D6;&#x7ED3;&#x679C;&#x662F; 1</span><br><span class="line">Thread-9 &#x8BFB;&#x53D6;&#x5B8C;&#x6210;&#xFF0C;&#x8BFB;&#x53D6;&#x7ED3;&#x679C;&#x662F; 4</span><br></pre></td></tr></table></figure><p>&#x80FD;&#x4FDD;&#x8BC1;<strong>&#x8BFB;&#x5199;</strong>&#x3001;<strong>&#x5199;&#x8BFB;</strong>&#x548C;<strong>&#x5199;&#x5199;</strong>&#x7684;&#x8FC7;&#x7A0B;&#x662F;&#x4E92;&#x65A5;&#x7684;&#x65F6;&#x5019;&#x662F;&#x72EC;&#x4EAB;&#x7684;&#xFF0C;<strong>&#x8BFB;&#x8BFB;</strong>&#x7684;&#x65F6;&#x5019;&#x662F;&#x5171;&#x4EAB;&#x7684;&#x3002;</p></li></ul><h2 id="CountDownLatch-CyclicBarrier-Semaphore-&#x4F7F;&#x7528;&#x8FC7;&#x5417;&#xFF1F;"><a href="#CountDownLatch-CyclicBarrier-Semaphore-&#x4F7F;&#x7528;&#x8FC7;&#x5417;&#xFF1F;" class="headerlink" title="CountDownLatch/CyclicBarrier/Semaphore &#x4F7F;&#x7528;&#x8FC7;&#x5417;&#xFF1F;"></a>CountDownLatch/CyclicBarrier/Semaphore &#x4F7F;&#x7528;&#x8FC7;&#x5417;&#xFF1F;</h2><h3 id="CountDownLatch"><a href="#CountDownLatch" class="headerlink" title="CountDownLatch"></a>CountDownLatch</h3><p>&#x8BA9;&#x4E00;&#x4E9B;&#x7EBF;&#x7A0B;&#x5835;&#x585E;&#x76F4;&#x5230;&#x53E6;&#x4E00;&#x4E2A;&#x7EBF;&#x7A0B;&#x5B8C;&#x6210;&#x4E00;&#x7CFB;&#x5217;&#x64CD;&#x4F5C;&#x540E;&#x624D;&#x88AB;&#x5524;&#x9192;&#x3002;CountDownLatch &#x4E3B;&#x8981;&#x6709;&#x4E24;&#x4E2A;&#x65B9;&#x6CD5;&#xFF0C;&#x5F53;&#x4E00;&#x4E2A;&#x6216;&#x591A;&#x4E2A;&#x7EBF;&#x7A0B;&#x8C03;&#x7528; await &#x65B9;&#x6CD5;&#x65F6;&#xFF0C;&#x8C03;&#x7528;&#x7EBF;&#x7A0B;&#x4F1A;&#x88AB;&#x5835;&#x585E;&#xFF0C;&#x5176;&#x4ED6;&#x7EBF;&#x7A0B;&#x8C03;&#x7528; countDown &#x65B9;&#x6CD5;&#x4F1A;&#x5C06;&#x8BA1;&#x6570;&#x51CF;&#x4E00;&#xFF08;&#x8C03;&#x7528; countDown &#x65B9;&#x6CD5;&#x7684;&#x7EBF;&#x7A0B;&#x4E0D;&#x4F1A;&#x5835;&#x585E;&#xFF09;&#xFF0C;&#x5F53;&#x8BA1;&#x6570;&#x5176;&#x503C;&#x53D8;&#x4E3A;&#x96F6;&#x65F6;&#xFF0C;&#x56E0;&#x8C03;&#x7528; await &#x65B9;&#x6CD5;&#x88AB;&#x5835;&#x585E;&#x7684;&#x7EBF;&#x7A0B;&#x4F1A;&#x88AB;&#x5524;&#x9192;&#xFF0C;&#x7EE7;&#x7EED;&#x6267;&#x884C;&#x3002;</p><p>&#x5047;&#x8BBE;&#x6211;&#x4EEC;&#x6709;&#x8FD9;&#x4E48;&#x4E00;&#x4E2A;&#x573A;&#x666F;&#xFF0C;&#x6559;&#x5BA4;&#x91CC;&#x6709;&#x73ED;&#x957F;&#x548C;&#x5176;&#x4ED6;6&#x4E2A;&#x4EBA;&#x5728;&#x6559;&#x5BA4;&#x4E0A;&#x81EA;&#x4E60;&#xFF0C;&#x600E;&#x4E48;&#x4FDD;&#x8BC1;&#x73ED;&#x957F;&#x7B49;&#x5176;&#x4ED6;6&#x4E2A;&#x4EBA;&#x90FD;&#x8D70;&#x51FA;&#x6559;&#x5BA4;&#x5728;&#x628A;&#x6559;&#x5BA4;&#x95E8;&#x7ED9;&#x5173;&#x6389;&#x3002;</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">CountDownLanchDemo</span> </span>{</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>{</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; <span class="number">6</span>; i++) {</span><br><span class="line">            <span class="keyword">new</span> Thread(() -&gt; {</span><br><span class="line">                System.out.println(Thread.currentThread().getName() + <span class="string">&quot; &#x79BB;&#x5F00;&#x4E86;&#x6559;&#x5BA4;...&quot;</span>);</span><br><span class="line">            }, String.valueOf(i)).start();</span><br><span class="line">        }</span><br><span class="line">        System.out.println(<span class="string">&quot;&#x73ED;&#x957F;&#x628A;&#x95E8;&#x7ED9;&#x5173;&#x4E86;&#xFF0C;&#x79BB;&#x5F00;&#x4E86;&#x6559;&#x5BA4;...&quot;</span>);</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></table></figure><p>&#x6B64;&#x65F6;&#x8F93;&#x51FA;</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">0 &#x79BB;&#x5F00;&#x4E86;&#x6559;&#x5BA4;...</span><br><span class="line">1 &#x79BB;&#x5F00;&#x4E86;&#x6559;&#x5BA4;...</span><br><span class="line">2 &#x79BB;&#x5F00;&#x4E86;&#x6559;&#x5BA4;...</span><br><span class="line">3 &#x79BB;&#x5F00;&#x4E86;&#x6559;&#x5BA4;...</span><br><span class="line">&#x73ED;&#x957F;&#x628A;&#x95E8;&#x7ED9;&#x5173;&#x4E86;&#xFF0C;&#x79BB;&#x5F00;&#x4E86;&#x6559;&#x5BA4;...</span><br><span class="line">5 &#x79BB;&#x5F00;&#x4E86;&#x6559;&#x5BA4;...</span><br><span class="line">4 &#x79BB;&#x5F00;&#x4E86;&#x6559;&#x5BA4;...</span><br></pre></td></tr></table></figure><p>&#x53D1;&#x73B0;&#x73ED;&#x957F;&#x90FD;&#x6CA1;&#x6709;&#x7B49;&#x5176;&#x4ED6;&#x4EBA;&#x7406;&#x4ED6;&#x6559;&#x5BA4;&#x5C31;&#x628A;&#x95E8;&#x7ED9;&#x5173;&#x4E86;&#xFF0C;&#x6B64;&#x65F6;&#x6211;&#x4EEC;&#x5C31;&#x53EF;&#x4EE5;&#x4F7F;&#x7528; CountDownLatch &#x6765;&#x63A7;&#x5236;</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">CountDownLanchDemo</span> </span>{</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> InterruptedException </span>{</span><br><span class="line">        CountDownLatch countDownLatch = <span class="keyword">new</span> CountDownLatch(<span class="number">6</span>);</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; <span class="number">6</span>; i++) {</span><br><span class="line">            <span class="keyword">new</span> Thread(() -&gt; {</span><br><span class="line">                countDownLatch.countDown();</span><br><span class="line">                System.out.println(Thread.currentThread().getName() + <span class="string">&quot; &#x79BB;&#x5F00;&#x4E86;&#x6559;&#x5BA4;...&quot;</span>);</span><br><span class="line">            }, String.valueOf(i)).start();</span><br><span class="line">        }</span><br><span class="line">        countDownLatch.await();</span><br><span class="line">        System.out.println(<span class="string">&quot;&#x73ED;&#x957F;&#x628A;&#x95E8;&#x7ED9;&#x5173;&#x4E86;&#xFF0C;&#x79BB;&#x5F00;&#x4E86;&#x6559;&#x5BA4;...&quot;</span>);</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></table></figure><p>&#x6B64;&#x65F6;&#x8F93;&#x51FA;</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">0 &#x79BB;&#x5F00;&#x4E86;&#x6559;&#x5BA4;...</span><br><span class="line">1 &#x79BB;&#x5F00;&#x4E86;&#x6559;&#x5BA4;...</span><br><span class="line">2 &#x79BB;&#x5F00;&#x4E86;&#x6559;&#x5BA4;...</span><br><span class="line">3 &#x79BB;&#x5F00;&#x4E86;&#x6559;&#x5BA4;...</span><br><span class="line">4 &#x79BB;&#x5F00;&#x4E86;&#x6559;&#x5BA4;...</span><br><span class="line">5 &#x79BB;&#x5F00;&#x4E86;&#x6559;&#x5BA4;...</span><br><span class="line">&#x73ED;&#x957F;&#x628A;&#x95E8;&#x7ED9;&#x5173;&#x4E86;&#xFF0C;&#x79BB;&#x5F00;&#x4E86;&#x6559;&#x5BA4;...</span><br></pre></td></tr></table></figure><h3 id="CyclicBarrier"><a href="#CyclicBarrier" class="headerlink" title="CyclicBarrier"></a>CyclicBarrier</h3><p>&#x6211;&#x4EEC;&#x5047;&#x8BBE;&#x6709;&#x8FD9;&#x4E48;&#x4E00;&#x4E2A;&#x573A;&#x666F;&#xFF0C;&#x6BCF;&#x8F86;&#x8F66;&#x53EA;&#x80FD;&#x5750;&#x4E2A;&#x4EBA;&#xFF0C;&#x5F53;&#x8F66;&#x6EE1;&#x4E86;&#xFF0C;&#x5C31;&#x53D1;&#x8F66;&#x3002;<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">CyclicBarrierDemo</span> </span>{</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>{</span><br><span class="line">        CyclicBarrier cyclicBarrier = <span class="keyword">new</span> CyclicBarrier(<span class="number">4</span>, () -&gt; {</span><br><span class="line">            System.out.println(<span class="string">&quot;&#x8F66;&#x6EE1;&#x4E86;&#xFF0C;&#x5F00;&#x59CB;&#x51FA;&#x53D1;...&quot;</span>);</span><br><span class="line">        });</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; <span class="number">8</span>; i++) {</span><br><span class="line">            <span class="keyword">new</span> Thread(() -&gt; {</span><br><span class="line">                System.out.println(Thread.currentThread().getName() + <span class="string">&quot; &#x5F00;&#x59CB;&#x4E0A;&#x8F66;...&quot;</span>);</span><br><span class="line">                <span class="keyword">try</span> {</span><br><span class="line">                    cyclicBarrier.await();</span><br><span class="line">                } <span class="keyword">catch</span> (InterruptedException e) {</span><br><span class="line">                    e.printStackTrace();</span><br><span class="line">                } <span class="keyword">catch</span> (BrokenBarrierException e) {</span><br><span class="line">                    e.printStackTrace();</span><br><span class="line">                }</span><br><span class="line">            }).start();</span><br><span class="line">        }</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></table></figure></p><p>&#x8F93;&#x51FA;&#x7ED3;&#x679C;<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">Thread-0 &#x5F00;&#x59CB;&#x4E0A;&#x8F66;...</span><br><span class="line">Thread-1 &#x5F00;&#x59CB;&#x4E0A;&#x8F66;...</span><br><span class="line">Thread-3 &#x5F00;&#x59CB;&#x4E0A;&#x8F66;...</span><br><span class="line">Thread-4 &#x5F00;&#x59CB;&#x4E0A;&#x8F66;...</span><br><span class="line">&#x8F66;&#x6EE1;&#x4E86;&#xFF0C;&#x5F00;&#x59CB;&#x51FA;&#x53D1;...</span><br><span class="line">Thread-5 &#x5F00;&#x59CB;&#x4E0A;&#x8F66;...</span><br><span class="line">Thread-7 &#x5F00;&#x59CB;&#x4E0A;&#x8F66;...</span><br><span class="line">Thread-2 &#x5F00;&#x59CB;&#x4E0A;&#x8F66;...</span><br><span class="line">Thread-6 &#x5F00;&#x59CB;&#x4E0A;&#x8F66;...</span><br><span class="line">&#x8F66;&#x6EE1;&#x4E86;&#xFF0C;&#x5F00;&#x59CB;&#x51FA;&#x53D1;...</span><br></pre></td></tr></table></figure></p><h3 id="Semaphore"><a href="#Semaphore" class="headerlink" title="Semaphore"></a>Semaphore</h3><p>&#x5047;&#x8BBE;&#x6211;&#x4EEC;&#x6709; 3 &#x4E2A;&#x505C;&#x8F66;&#x4F4D;&#xFF0C;6 &#x8F86;&#x8F66;&#x53BB;&#x62A2;<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">SemaphoreDemo</span> </span>{</span><br><span class="line">  <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>{</span><br><span class="line">      Semaphore semaphore = <span class="keyword">new</span> Semaphore(<span class="number">3</span>);</span><br><span class="line">      <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; <span class="number">6</span>; i++) {</span><br><span class="line">          <span class="keyword">new</span> Thread(() -&gt; {</span><br><span class="line">              <span class="keyword">try</span> {</span><br><span class="line">                  semaphore.acquire(); <span class="comment">// &#x83B7;&#x53D6;&#x4E00;&#x4E2A;&#x8BB8;&#x53EF;</span></span><br><span class="line">                  System.out.println(Thread.currentThread().getName() + <span class="string">&quot; &#x62A2;&#x5230;&#x8F66;&#x4F4D;...&quot;</span>);</span><br><span class="line">                  Thread.sleep(<span class="number">3000</span>);</span><br><span class="line">                  System.out.println(Thread.currentThread().getName() + <span class="string">&quot; &#x79BB;&#x5F00;&#x8F66;&#x4F4D;&quot;</span>);</span><br><span class="line">              } <span class="keyword">catch</span> (InterruptedException e) {</span><br><span class="line">                  e.printStackTrace();</span><br><span class="line">              } <span class="keyword">finally</span> {</span><br><span class="line">                  semaphore.release(); <span class="comment">// &#x91CA;&#x653E;&#x4E00;&#x4E2A;&#x8BB8;&#x53EF;</span></span><br><span class="line">              }</span><br><span class="line">          }).start();</span><br><span class="line">      }</span><br><span class="line">  }</span><br><span class="line">}</span><br></pre></td></tr></table></figure></p><p>&#x8F93;&#x51FA;<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">Thread-1 &#x62A2;&#x5230;&#x8F66;&#x4F4D;...</span><br><span class="line">Thread-2 &#x62A2;&#x5230;&#x8F66;&#x4F4D;...</span><br><span class="line">Thread-0 &#x62A2;&#x5230;&#x8F66;&#x4F4D;...</span><br><span class="line">Thread-2 &#x79BB;&#x5F00;&#x8F66;&#x4F4D;</span><br><span class="line">Thread-0 &#x79BB;&#x5F00;&#x8F66;&#x4F4D;</span><br><span class="line">Thread-3 &#x62A2;&#x5230;&#x8F66;&#x4F4D;...</span><br><span class="line">Thread-1 &#x79BB;&#x5F00;&#x8F66;&#x4F4D;</span><br><span class="line">Thread-4 &#x62A2;&#x5230;&#x8F66;&#x4F4D;...</span><br><span class="line">Thread-5 &#x62A2;&#x5230;&#x8F66;&#x4F4D;...</span><br><span class="line">Thread-3 &#x79BB;&#x5F00;&#x8F66;&#x4F4D;</span><br><span class="line">Thread-5 &#x79BB;&#x5F00;&#x8F66;&#x4F4D;</span><br><span class="line">Thread-4 &#x79BB;&#x5F00;&#x8F66;&#x4F4D;</span><br></pre></td></tr></table></figure></p><h2 id="&#x5835;&#x585E;&#x961F;&#x5217;&#x4F60;&#x77E5;&#x9053;&#x5417;&#xFF1F;"><a href="#&#x5835;&#x585E;&#x961F;&#x5217;&#x4F60;&#x77E5;&#x9053;&#x5417;&#xFF1F;" class="headerlink" title="&#x5835;&#x585E;&#x961F;&#x5217;&#x4F60;&#x77E5;&#x9053;&#x5417;&#xFF1F;"></a>&#x5835;&#x585E;&#x961F;&#x5217;&#x4F60;&#x77E5;&#x9053;&#x5417;&#xFF1F;</h2><h3 id="&#x963B;&#x585E;&#x961F;&#x5217;&#x6709;&#x54EA;&#x4E9B;"><a href="#&#x963B;&#x585E;&#x961F;&#x5217;&#x6709;&#x54EA;&#x4E9B;" class="headerlink" title="&#x963B;&#x585E;&#x961F;&#x5217;&#x6709;&#x54EA;&#x4E9B;"></a>&#x963B;&#x585E;&#x961F;&#x5217;&#x6709;&#x54EA;&#x4E9B;</h3><ul><li>ArrayBlockingQueue&#xFF1A;&#x662F;&#x4E00;&#x4E2A;&#x57FA;&#x4E8E;&#x6570;&#x7EC4;&#x7ED3;&#x6784;&#x7684;&#x6709;&#x754C;&#x963B;&#x585E;&#x961F;&#x5217;&#xFF0C;&#x6B64;&#x961F;&#x5217;&#x6309; FIFO&#xFF08;&#x5148;&#x8FDB;&#x5148;&#x51FA;&#xFF09;&#x5BF9;&#x5143;&#x7D20;&#x8FDB;&#x884C;&#x6392;&#x5E8F;&#x3002;</li><li>LinkedBlokcingQueue&#xFF1A;&#x662F;&#x4E00;&#x4E2A;&#x57FA;&#x4E8E;&#x94FE;&#x8868;&#x7ED3;&#x6784;&#x7684;&#x963B;&#x585E;&#x961F;&#x5217;&#xFF0C;&#x6B64;&#x961F;&#x5217;&#x6309; FIFO&#xFF08;&#x5148;&#x8FDB;&#x5148;&#x51FA;&#xFF09;&#x5BF9;&#x5143;&#x7D20;&#x8FDB;&#x884C;&#x6392;&#x5E8F;&#xFF0C;&#x541E;&#x5410;&#x91CF;&#x901A;&#x5E38;&#x8981;&#x9AD8;&#x4E8E; ArrayBlockingQueue&#x3002;</li><li>SynchronousQueue&#xFF1A;&#x662F;&#x4E00;&#x4E2A;&#x4E0D;&#x5B58;&#x50A8;&#x5143;&#x7D20;&#x7684;&#x963B;&#x585E;&#x961F;&#x5217;&#xFF0C;&#x6BCF;&#x4E2A;&#x63D2;&#x5165;&#x64CD;&#x4F5C;&#x5FC5;&#x987B;&#x7B49;&#x5230;&#x53E6;&#x4E00;&#x4E2A;&#x7EBF;&#x7A0B;&#x8C03;&#x7528;&#x79FB;&#x9664;&#x64CD;&#x4F5C;&#xFF0C;&#x5426;&#x5219;&#x63D2;&#x5165;&#x64CD;&#x4F5C;&#x4E00;&#x76F4;&#x5904;&#x4E8E;&#x963B;&#x585E;&#x72B6;&#x6001;&#xFF0C;&#x541E;&#x5410;&#x91CF;&#x901A;&#x5E38;&#x8981;&#x9AD8;&#x4E8E; LinkedBlokcingQueue&#x3002;</li></ul><h3 id="&#x4EC0;&#x4E48;&#x662F;&#x963B;&#x585E;&#x961F;&#x5217;"><a href="#&#x4EC0;&#x4E48;&#x662F;&#x963B;&#x585E;&#x961F;&#x5217;" class="headerlink" title="&#x4EC0;&#x4E48;&#x662F;&#x963B;&#x585E;&#x961F;&#x5217;"></a>&#x4EC0;&#x4E48;&#x662F;&#x963B;&#x585E;&#x961F;&#x5217;</h3><p><img src="/2019/04/16/Java&#x5E76;&#x53D1;&#x7F16;&#x7A0B;/1234sdafsdf.png" alt="img"></p><ul><li>&#x963B;&#x585E;&#x961F;&#x5217;&#xFF0C;&#x987E;&#x540D;&#x601D;&#x4E49;&#xFF0C;&#x9996;&#x5148;&#x5B83;&#x662F;&#x4E00;&#x4E2A;&#x961F;&#x5217;&#xFF0C;&#x800C;&#x4E00;&#x4E2A;&#x963B;&#x585E;&#x961F;&#x5217;&#x5728;&#x6570;&#x636E;&#x7ED3;&#x6784;&#x4E2D;&#x6240;&#x8D77;&#x7684;&#x4F5C;&#x7528;&#x5927;&#x81F4;&#x5982;&#x56FE;&#x6240;&#x793A;&#xFF1A;</li><li>&#x5F53;&#x963B;&#x585E;&#x961F;&#x5217;&#x662F;&#x7A7A;&#x65F6;&#xFF0C;&#x4ECE;&#x961F;&#x5217;&#x4E2D;&#x83B7;&#x53D6;&#x5143;&#x7D20;&#x7684;&#x64CD;&#x4F5C;&#x5C06;&#x4F1A;&#x88AB;&#x963B;&#x585E;&#x3002;</li><li><p>&#x5F53;&#x963B;&#x585E;&#x961F;&#x5217;&#x662F;&#x6EE1;&#x65F6;&#xFF0C;&#x5F80;&#x961F;&#x5217;&#x91CC;&#x6DFB;&#x52A0;&#x5143;&#x7D20;&#x7684;&#x64CD;&#x4F5C;&#x5C06;&#x4F1A;&#x88AB;&#x963B;&#x585E;&#x3002;</p></li><li><p>&#x6838;&#x5FC3;&#x65B9;&#x6CD5;</p><p>| &#x65B9;&#x6CD5;\&#x884C;&#x4E3A; |  &#x629B;&#x5F02;&#x5E38;   |     &#x7279;&#x5B9A;&#x7684;&#x503C;      |  &#x963B;&#x585E;  |            &#x8D85;&#x65F6;             |<br>| :&#x2014;&#x2014;-: | :&#x2014;&#x2014;-: | :&#x2014;&#x2014;&#x2014;&#x2014;&#x2014;: | :&#x2014;-: | :&#x2014;&#x2014;&#x2014;&#x2014;&#x2014;&#x2014;&#x2014;&#x2014;-: |<br>| &#x63D2;&#x5165;&#x65B9;&#x6CD5;  |  add(o)   |     offer(o)      | put(o) | offer(o, timeout, timeunit) |<br>| &#x79FB;&#x9664;&#x65B9;&#x6CD5;  |           | poll()&#x3001;remove(o) | take() |   poll(timeout, timeunit)   |<br>| &#x68C0;&#x67E5;&#x65B9;&#x6CD5;  | element() |      peek()       |        |                             |</p></li><li><p>&#x884C;&#x4E3A;&#x89E3;&#x91CA;&#xFF1A;</p><ul><li><p>&#x629B;&#x5F02;&#x5E38;&#xFF1A;&#x5982;&#x679C;&#x64CD;&#x4F5C;&#x4E0D;&#x80FD;&#x9A6C;&#x4E0A;&#x8FDB;&#x884C;&#xFF0C;&#x5219;&#x629B;&#x51FA;&#x5F02;&#x5E38;</p></li><li><p>&#x7279;&#x5B9A;&#x7684;&#x503C;&#xFF1A;&#x5982;&#x679C;&#x64CD;&#x4F5C;&#x4E0D;&#x80FD;&#x9A6C;&#x4E0A;&#x8FDB;&#x884C;&#xFF0C;&#x5C06;&#x4F1A;&#x8FD4;&#x56DE;&#x4E00;&#x4E2A;&#x7279;&#x6B8A;&#x7684;&#x503C;&#xFF0C;&#x4E00;&#x822C;&#x662F; true &#x6216;&#x8005; false</p></li><li><p>&#x963B;&#x585E;&#xFF1A;&#x5982;&#x679C;&#x64CD;&#x4F5C;&#x4E0D;&#x80FD;&#x9A6C;&#x4E0A;&#x8FDB;&#x884C;&#xFF0C;&#x64CD;&#x4F5C;&#x4F1A;&#x88AB;&#x963B;&#x585E;</p></li><li><p>&#x8D85;&#x65F6;&#xFF1A;&#x5982;&#x679C;&#x64CD;&#x4F5C;&#x4E0D;&#x80FD;&#x9A6C;&#x4E0A;&#x8FDB;&#x884C;&#xFF0C;&#x64CD;&#x4F5C;&#x4F1A;&#x88AB;&#x963B;&#x585E;&#x6307;&#x5B9A;&#x7684;&#x65F6;&#x95F4;&#xFF0C;&#x5982;&#x679C;&#x6307;&#x5B9A;&#x65F6;&#x95F4;&#x6CA1;&#x6267;&#x884C;&#xFF0C;&#x5219;&#x8FD4;&#x56DE;&#x4E00;&#x4E2A;&#x7279;&#x6B8A;&#x503C;&#xFF0C;&#x4E00;&#x822C;&#x662F; true &#x6216;&#x8005; false</p></li></ul></li><li><p>&#x63D2;&#x5165;&#x65B9;&#x6CD5;&#xFF1A;</p><ul><li>add(E e)&#xFF1A;&#x6DFB;&#x52A0;&#x6210;&#x529F;&#x8FD4;&#x56DE;true&#xFF0C;&#x5931;&#x8D25;&#x629B; IllegalStateException &#x5F02;&#x5E38;</li><li>offer(E e)&#xFF1A;&#x6210;&#x529F;&#x8FD4;&#x56DE; true&#xFF0C;&#x5982;&#x679C;&#x6B64;&#x961F;&#x5217;&#x5DF2;&#x6EE1;&#xFF0C;&#x5219;&#x8FD4;&#x56DE; false</li><li>put(E e)&#xFF1A;&#x5C06;&#x5143;&#x7D20;&#x63D2;&#x5165;&#x6B64;&#x961F;&#x5217;&#x7684;&#x5C3E;&#x90E8;&#xFF0C;&#x5982;&#x679C;&#x8BE5;&#x961F;&#x5217;&#x5DF2;&#x6EE1;&#xFF0C;&#x5219;&#x4E00;&#x76F4;&#x963B;&#x585E;</li></ul></li><li><p>&#x5220;&#x9664;&#x65B9;&#x6CD5;&#xFF1A;</p><ul><li>remove(Object o) &#xFF1A;&#x79FB;&#x9664;&#x6307;&#x5B9A;&#x5143;&#x7D20;,&#x6210;&#x529F;&#x8FD4;&#x56DE;true&#xFF0C;&#x5931;&#x8D25;&#x8FD4;&#x56DE;false</li><li>poll()&#xFF1A;&#x83B7;&#x53D6;&#x5E76;&#x79FB;&#x9664;&#x6B64;&#x961F;&#x5217;&#x7684;&#x5934;&#x5143;&#x7D20;&#xFF0C;&#x82E5;&#x961F;&#x5217;&#x4E3A;&#x7A7A;&#xFF0C;&#x5219;&#x8FD4;&#x56DE; null</li><li>take()&#xFF1A;&#x83B7;&#x53D6;&#x5E76;&#x79FB;&#x9664;&#x6B64;&#x961F;&#x5217;&#x5934;&#x5143;&#x7D20;&#xFF0C;&#x82E5;&#x6CA1;&#x6709;&#x5143;&#x7D20;&#x5219;&#x4E00;&#x76F4;&#x963B;&#x585E;</li></ul></li><li><p>&#x68C0;&#x67E5;&#x65B9;&#x6CD5;&#xFF1A;</p><ul><li>element() &#xFF1A;&#x83B7;&#x53D6;&#x4F46;&#x4E0D;&#x79FB;&#x9664;&#x6B64;&#x961F;&#x5217;&#x7684;&#x5934;&#x5143;&#x7D20;&#xFF0C;&#x6CA1;&#x6709;&#x5143;&#x7D20;&#x5219;&#x629B;&#x5F02;&#x5E38;</li><li>peek() :&#x83B7;&#x53D6;&#x4F46;&#x4E0D;&#x79FB;&#x9664;&#x6B64;&#x961F;&#x5217;&#x7684;&#x5934;&#xFF1B;&#x82E5;&#x961F;&#x5217;&#x4E3A;&#x7A7A;&#xFF0C;&#x5219;&#x8FD4;&#x56DE; null</li></ul></li></ul><h3 id="SynchronousQueue"><a href="#SynchronousQueue" class="headerlink" title="SynchronousQueue"></a>SynchronousQueue</h3><p>SynchronousQueue&#xFF0C;&#x5B9E;&#x9645;&#x4E0A;&#x5B83;&#x4E0D;&#x662F;&#x4E00;&#x4E2A;&#x771F;&#x6B63;&#x7684;&#x961F;&#x5217;&#xFF0C;&#x56E0;&#x4E3A;&#x5B83;&#x4E0D;&#x4F1A;&#x4E3A;&#x961F;&#x5217;&#x4E2D;&#x5143;&#x7D20;&#x7EF4;&#x62A4;&#x5B58;&#x50A8;&#x7A7A;&#x95F4;&#x3002;&#x4E0E;&#x5176;&#x4ED6;&#x961F;&#x5217;&#x4E0D;&#x540C;&#x7684;&#x662F;&#xFF0C;&#x5B83;&#x7EF4;&#x62A4;&#x4E00;&#x7EC4;&#x7EBF;&#x7A0B;&#xFF0C;&#x8FD9;&#x4E9B;&#x7EBF;&#x7A0B;&#x5728;&#x7B49;&#x5F85;&#x7740;&#x628A;&#x5143;&#x7D20;&#x52A0;&#x5165;&#x6216;&#x79FB;&#x51FA;&#x961F;&#x5217;&#x3002;</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">SynchronousQueueDemo</span> </span>{</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>{</span><br><span class="line">        SynchronousQueue&lt;Integer&gt; synchronousQueue = <span class="keyword">new</span> SynchronousQueue&lt;&gt;();</span><br><span class="line">        <span class="keyword">new</span> Thread(() -&gt; {</span><br><span class="line">            <span class="keyword">try</span> {</span><br><span class="line">                synchronousQueue.put(<span class="number">1</span>);</span><br><span class="line">                Thread.sleep(<span class="number">3000</span>);</span><br><span class="line">                synchronousQueue.put(<span class="number">2</span>);</span><br><span class="line">                Thread.sleep(<span class="number">3000</span>);</span><br><span class="line">                synchronousQueue.put(<span class="number">3</span>);</span><br><span class="line">            } <span class="keyword">catch</span> (InterruptedException e) {</span><br><span class="line">                e.printStackTrace();</span><br><span class="line">            }</span><br><span class="line">        }).start();</span><br><span class="line"></span><br><span class="line">        <span class="keyword">new</span> Thread(() -&gt; {</span><br><span class="line">            <span class="keyword">try</span> {</span><br><span class="line">                Integer val = synchronousQueue.take();</span><br><span class="line">                System.out.println(val);</span><br><span class="line">                Integer val2 = synchronousQueue.take();</span><br><span class="line">                System.out.println(val2);</span><br><span class="line">                Integer val3 = synchronousQueue.take();</span><br><span class="line">                System.out.println(val3);</span><br><span class="line">            } <span class="keyword">catch</span> (InterruptedException e) {</span><br><span class="line">                e.printStackTrace();</span><br><span class="line">            }</span><br><span class="line">        }).start();</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></table></figure><h3 id="&#x4F7F;&#x7528;&#x573A;&#x666F;"><a href="#&#x4F7F;&#x7528;&#x573A;&#x666F;" class="headerlink" title="&#x4F7F;&#x7528;&#x573A;&#x666F;"></a>&#x4F7F;&#x7528;&#x573A;&#x666F;</h3><ul><li>&#x751F;&#x4EA7;&#x8005;&#x6D88;&#x8D39;&#x8005;&#x6A21;&#x5F0F;</li><li>&#x7EBF;&#x7A0B;&#x6C60;</li><li>&#x6D88;&#x606F;&#x4E2D;&#x95F4;&#x4EF6;</li></ul><h2 id="synchronized-&#x548C;-Lock-&#x6709;&#x4EC0;&#x4E48;&#x533A;&#x522B;&#xFF1F;"><a href="#synchronized-&#x548C;-Lock-&#x6709;&#x4EC0;&#x4E48;&#x533A;&#x522B;&#xFF1F;" class="headerlink" title="synchronized &#x548C; Lock &#x6709;&#x4EC0;&#x4E48;&#x533A;&#x522B;&#xFF1F;"></a>synchronized &#x548C; Lock &#x6709;&#x4EC0;&#x4E48;&#x533A;&#x522B;&#xFF1F;</h2><ul><li>&#x539F;&#x59CB;&#x7ED3;&#x6784;<ul><li>synchronized &#x662F;&#x5173;&#x952E;&#x5B57;&#x5C5E;&#x4E8E; JVM &#x5C42;&#x9762;&#xFF0C;&#x53CD;&#x5E94;&#x5728;&#x5B57;&#x8282;&#x7801;&#x4E0A;&#x662F; monitorenter &#x548C; monitorexit&#xFF0C;&#x5176;&#x5E95;&#x5C42;&#x662F;&#x901A;&#x8FC7; monitor &#x5BF9;&#x8C61;&#x6765;&#x5B8C;&#x6210;&#xFF0C;&#x5176;&#x5B9E; wait/notify &#x7B49;&#x65B9;&#x6CD5;&#x4E5F;&#x662F;&#x4F9D;&#x8D56; monitor &#x5BF9;&#x8C61;&#x53EA;&#x6709;&#x5728;&#x540C;&#x6B65;&#x5FEB;&#x6216;&#x65B9;&#x6CD5;&#x4E2D;&#x624D;&#x80FD;&#x8C03;&#x7528; wait/notify &#x7B49;&#x65B9;&#x6CD5;&#x3002;</li><li>Lock &#x662F;&#x5177;&#x4F53;&#x7C7B;&#xFF08;java.util.concurrent.locks.Lock&#xFF09;&#x662F; api &#x5C42;&#x9762;&#x7684;&#x9501;&#x3002;</li></ul></li><li>&#x4F7F;&#x7528;&#x65B9;&#x6CD5;<ul><li>synchronized &#x4E0D;&#x9700;&#x8981;&#x7528;&#x6237;&#x624B;&#x52A8;&#x53BB;&#x91CA;&#x653E;&#x9501;&#xFF0C;&#x5F53; synchronized &#x4EE3;&#x7801;&#x6267;&#x884C;&#x5B8C;&#x540E;&#x7CFB;&#x7EDF;&#x4F1A;&#x81EA;&#x52A8;&#x8BA9;&#x7EBF;&#x7A0B;&#x91CA;&#x653E;&#x5BF9;&#x9501;&#x7684;&#x5360;&#x7528;&#x3002;</li><li>ReentrantLock &#x5219;&#x9700;&#x8981;&#x7528;&#x6237;&#x624B;&#x52A8;&#x7684;&#x91CA;&#x653E;&#x9501;&#xFF0C;&#x82E5;&#x6CA1;&#x6709;&#x4E3B;&#x52A8;&#x91CA;&#x653E;&#x9501;&#xFF0C;&#x53EF;&#x80FD;&#x5BFC;&#x81F4;&#x51FA;&#x73B0;&#x6B7B;&#x9501;&#x7684;&#x73B0;&#x8C61;&#xFF0C;lock() &#x548C; unlock() &#x65B9;&#x6CD5;&#x9700;&#x8981;&#x914D;&#x5408; try/finally &#x8BED;&#x53E5;&#x6765;&#x5B8C;&#x6210;&#x3002;</li></ul></li><li>&#x7B49;&#x5F85;&#x662F;&#x5426;&#x53EF;&#x4E2D;&#x65AD;<ul><li>synchronized &#x4E0D;&#x53EF;&#x4E2D;&#x65AD;&#xFF0C;&#x9664;&#x975E;&#x629B;&#x51FA;&#x5F02;&#x5E38;&#x6216;&#x8005;&#x6B63;&#x5E38;&#x8FD0;&#x884C;&#x5B8C;&#x6210;&#x3002;</li><li>ReentrantLock &#x53EF;&#x4E2D;&#x65AD;&#xFF0C;&#x8BBE;&#x7F6E;&#x8D85;&#x65F6;&#x65B9;&#x6CD5; tryLock(long timeout, TimeUnit unit)&#xFF0C;lockInterruptibly() &#x653E;&#x4EE3;&#x7801;&#x5757;&#x4E2D;&#xFF0C;&#x8C03;&#x7528; interrupt() &#x65B9;&#x6CD5;&#x53EF;&#x4E2D;&#x65AD;&#x3002;</li></ul></li><li>&#x52A0;&#x9501;&#x662F;&#x5426;&#x516C;&#x5E73;<ul><li>synchronized &#x975E;&#x516C;&#x5E73;&#x9501;</li><li>ReentrantLock &#x9ED8;&#x8BA4;&#x975E;&#x516C;&#x5E73;&#x9501;&#xFF0C;&#x6784;&#x9020;&#x65B9;&#x6CD5;&#x4E2D;&#x53EF;&#x4EE5;&#x4F20;&#x5165; boolean &#x503C;&#xFF0C;true &#x4E3A;&#x516C;&#x5E73;&#x9501;&#xFF0C;false &#x4E3A;&#x975E;&#x516C;&#x5E73;&#x9501;&#x3002;</li></ul></li><li>&#x9501;&#x53EF;&#x4EE5;&#x7ED1;&#x5B9A;&#x591A;&#x4E2A; Condition<ul><li>synchronized &#x6CA1;&#x6709; Condition&#x3002;</li><li>ReentrantLock &#x7528;&#x6765;&#x5B9E;&#x73B0;&#x5206;&#x7EC4;&#x5524;&#x9192;&#x9700;&#x8981;&#x5524;&#x9192;&#x7684;&#x7EBF;&#x7A0B;&#x4EEC;&#xFF0C;&#x53EF;&#x4EE5;&#x7CBE;&#x786E;&#x5524;&#x9192;&#xFF0C;&#x800C;&#x4E0D;&#x662F;&#x50CF; synchronized &#x8981;&#x4E48;&#x968F;&#x673A;&#x5524;&#x9192;&#x4E00;&#x4E2A;&#x7EBF;&#x7A0B;&#x8981;&#x4E48;&#x5524;&#x9192;&#x5168;&#x90E8;&#x7EBF;&#x7A0B;&#x3002;</li></ul></li></ul><h2 id="&#x7EBF;&#x7A0B;&#x6C60;&#x4F7F;&#x7528;&#x8FC7;&#x5417;&#xFF1F;&#x8C08;&#x8C08;&#x5BF9;-ThreadPoolExector-&#x7684;&#x7406;&#x89E3;&#xFF1F;"><a href="#&#x7EBF;&#x7A0B;&#x6C60;&#x4F7F;&#x7528;&#x8FC7;&#x5417;&#xFF1F;&#x8C08;&#x8C08;&#x5BF9;-ThreadPoolExector-&#x7684;&#x7406;&#x89E3;&#xFF1F;" class="headerlink" title="&#x7EBF;&#x7A0B;&#x6C60;&#x4F7F;&#x7528;&#x8FC7;&#x5417;&#xFF1F;&#x8C08;&#x8C08;&#x5BF9; ThreadPoolExector &#x7684;&#x7406;&#x89E3;&#xFF1F;"></a>&#x7EBF;&#x7A0B;&#x6C60;&#x4F7F;&#x7528;&#x8FC7;&#x5417;&#xFF1F;&#x8C08;&#x8C08;&#x5BF9; ThreadPoolExector &#x7684;&#x7406;&#x89E3;&#xFF1F;</h2><h3 id="&#x4E3A;&#x4EC0;&#x4F7F;&#x7528;&#x7EBF;&#x7A0B;&#x6C60;&#xFF0C;&#x7EBF;&#x7A0B;&#x6C60;&#x7684;&#x4F18;&#x52BF;&#xFF1F;"><a href="#&#x4E3A;&#x4EC0;&#x4F7F;&#x7528;&#x7EBF;&#x7A0B;&#x6C60;&#xFF0C;&#x7EBF;&#x7A0B;&#x6C60;&#x7684;&#x4F18;&#x52BF;&#xFF1F;" class="headerlink" title="&#x4E3A;&#x4EC0;&#x4F7F;&#x7528;&#x7EBF;&#x7A0B;&#x6C60;&#xFF0C;&#x7EBF;&#x7A0B;&#x6C60;&#x7684;&#x4F18;&#x52BF;&#xFF1F;"></a>&#x4E3A;&#x4EC0;&#x4F7F;&#x7528;&#x7EBF;&#x7A0B;&#x6C60;&#xFF0C;&#x7EBF;&#x7A0B;&#x6C60;&#x7684;&#x4F18;&#x52BF;&#xFF1F;</h3><p>&#x7EBF;&#x7A0B;&#x6C60;&#x7528;&#x4E8E;&#x591A;&#x7EBF;&#x7A0B;&#x5904;&#x7406;&#x4E2D;&#xFF0C;&#x5B83;&#x53EF;&#x4EE5;&#x6839;&#x636E;&#x7CFB;&#x7EDF;&#x7684;&#x60C5;&#x51B5;&#xFF0C;&#x53EF;&#x4EE5;&#x6709;&#x6548;&#x63A7;&#x5236;&#x7EBF;&#x7A0B;&#x6267;&#x884C;&#x7684;&#x6570;&#x91CF;&#xFF0C;&#x4F18;&#x5316;&#x8FD0;&#x884C;&#x6548;&#x679C;&#x3002;&#x7EBF;&#x7A0B;&#x6C60;&#x505A;&#x7684;&#x5DE5;&#x4F5C;&#x4E3B;&#x8981;&#x662F;&#x63A7;&#x5236;&#x8FD0;&#x884C;&#x7684;&#x7EBF;&#x7A0B;&#x7684;&#x6570;&#x91CF;&#xFF0C;&#x5904;&#x7406;&#x8FC7;&#x7A0B;&#x4E2D;&#x5C06;&#x4EFB;&#x52A1;&#x653E;&#x5165;&#x961F;&#x5217;&#xFF0C;&#x7136;&#x540E;&#x5728;&#x7EBF;&#x7A0B;&#x521B;&#x5EFA;&#x540E;&#x542F;&#x52A8;&#x8FD9;&#x4E9B;&#x4EFB;&#x52A1;&#xFF0C;&#x5982;&#x679C;&#x7EBF;&#x7A0B;&#x6570;&#x91CF;&#x8D85;&#x8FC7;&#x4E86;&#x6700;&#x5927;&#x6570;&#x91CF;&#xFF0C;&#x90A3;&#x4E48;&#x8D85;&#x51FA;&#x6570;&#x91CF;&#x7684;&#x7EBF;&#x7A0B;&#x6392;&#x961F;&#x7B49;&#x5019;&#xFF0C;&#x7B49;&#x5176;&#x5B83;&#x7EBF;&#x7A0B;&#x6267;&#x884C;&#x5B8C;&#x6BD5;&#xFF0C;&#x518D;&#x4ECE;&#x961F;&#x5217;&#x4E2D;&#x53D6;&#x51FA;&#x4EFB;&#x52A1;&#x6765;&#x6267;&#x884C;&#x3002;</p><p>&#x4E3B;&#x8981;&#x7279;&#x70B9;&#x4E3A;&#xFF1A;</p><ul><li>&#x7EBF;&#x7A0B;&#x590D;&#x7528;</li><li>&#x63A7;&#x5236;&#x6700;&#x5927;&#x5E76;&#x53D1;&#x6570;&#x91CF;</li><li>&#x7BA1;&#x7406;&#x7EBF;&#x7A0B;</li></ul><p>&#x4E3B;&#x8981;&#x4F18;&#x70B9;</p><ul><li>&#x964D;&#x4F4E;&#x8D44;&#x6E90;&#x6D88;&#x8017;&#xFF0C;&#x901A;&#x8FC7;&#x91CD;&#x590D;&#x5229;&#x7528;&#x5DF2;&#x521B;&#x5EFA;&#x7684;&#x7EBF;&#x7A0B;&#x6765;&#x964D;&#x4F4E;&#x7EBF;&#x7A0B;&#x521B;&#x5EFA;&#x548C;&#x9500;&#x6BC1;&#x9020;&#x6210;&#x7684;&#x6D88;&#x8017;&#x3002;</li><li>&#x63D0;&#x9AD8;&#x76F8;&#x5E94;&#x901F;&#x5EA6;&#xFF0C;&#x5F53;&#x4EFB;&#x52A1;&#x5230;&#x8FBE;&#x65F6;&#xFF0C;&#x4EFB;&#x52A1;&#x53EF;&#x4EE5;&#x4E0D;&#x9700;&#x8981;&#x7684;&#x7B49;&#x5230;&#x7EBF;&#x7A0B;&#x521B;&#x5EFA;&#x5C31;&#x80FD;&#x7ACB;&#x5373;&#x6267;&#x884C;&#x3002;</li><li>&#x63D0;&#x9AD8;&#x7EBF;&#x7A0B;&#x7684;&#x53EF;&#x7BA1;&#x7406;&#x6027;&#xFF0C;&#x7EBF;&#x7A0B;&#x662F;&#x7A00;&#x7F3A;&#x8D44;&#x6E90;&#xFF0C;&#x5982;&#x679C;&#x65E0;&#x9650;&#x5236;&#x7684;&#x521B;&#x5EFA;&#xFF0C;&#x4E0D;&#x4EC5;&#x4EC5;&#x4F1A;&#x6D88;&#x8017;&#x7CFB;&#x7EDF;&#x8D44;&#x6E90;&#xFF0C;&#x8FD8;&#x4F1A;&#x964D;&#x4F4E;&#x4F53;&#x7EDF;&#x7684;&#x7A33;&#x5B9A;&#x6027;&#xFF0C;&#x4F7F;&#x7528;&#x7EBF;&#x7A0B;&#x53EF;&#x4EE5;&#x8FDB;&#x884C;&#x7EDF;&#x4E00;&#x5206;&#x914D;&#xFF0C;&#x8C03;&#x4F18;&#x548C;&#x76D1;&#x63A7;&#x3002;</li></ul><h3 id="&#x521B;&#x5EFA;&#x7EBF;&#x7A0B;&#x7684;&#x51E0;&#x79CD;&#x65B9;&#x5F0F;"><a href="#&#x521B;&#x5EFA;&#x7EBF;&#x7A0B;&#x7684;&#x51E0;&#x79CD;&#x65B9;&#x5F0F;" class="headerlink" title="&#x521B;&#x5EFA;&#x7EBF;&#x7A0B;&#x7684;&#x51E0;&#x79CD;&#x65B9;&#x5F0F;"></a>&#x521B;&#x5EFA;&#x7EBF;&#x7A0B;&#x7684;&#x51E0;&#x79CD;&#x65B9;&#x5F0F;</h3><ul><li><p>&#x7EE7;&#x627F; Thread</p></li><li><p>&#x5B9E;&#x73B0; Runnable &#x63A5;&#x53E3;</p></li><li><p>&#x5B9E;&#x73B0; Callable</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">CallableDemo</span> </span>{</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> ExecutionException, InterruptedException </span>{</span><br><span class="line">        <span class="comment">// &#x5728; FutureTask &#x4E2D;&#x4F20;&#x5165; Callable &#x7684;&#x5B9E;&#x73B0;&#x7C7B;</span></span><br><span class="line">        FutureTask&lt;Integer&gt; futureTask = <span class="keyword">new</span> FutureTask&lt;&gt;(<span class="keyword">new</span> Callable&lt;Integer&gt;() {</span><br><span class="line">            <span class="meta">@Override</span></span><br><span class="line">            <span class="function"><span class="keyword">public</span> Integer <span class="title">call</span><span class="params">()</span> <span class="keyword">throws</span> Exception </span>{</span><br><span class="line">                <span class="keyword">return</span> <span class="number">666</span>;</span><br><span class="line">            }</span><br><span class="line">        });</span><br><span class="line">        <span class="comment">// &#x628A; futureTask &#x653E;&#x5165;&#x7EBF;&#x7A0B;&#x4E2D;</span></span><br><span class="line">        <span class="keyword">new</span> Thread(futureTask).start();</span><br><span class="line">        <span class="comment">// &#x83B7;&#x53D6;&#x7ED3;&#x679C;</span></span><br><span class="line">        Integer res = futureTask.get();</span><br><span class="line">        System.out.println(res);</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></table></figure></li></ul><h3 id="&#x7EBF;&#x7A0B;&#x6C60;&#x5982;&#x679C;&#x4F7F;&#x7528;&#xFF1F;"><a href="#&#x7EBF;&#x7A0B;&#x6C60;&#x5982;&#x679C;&#x4F7F;&#x7528;&#xFF1F;" class="headerlink" title="&#x7EBF;&#x7A0B;&#x6C60;&#x5982;&#x679C;&#x4F7F;&#x7528;&#xFF1F;"></a>&#x7EBF;&#x7A0B;&#x6C60;&#x5982;&#x679C;&#x4F7F;&#x7528;&#xFF1F;</h3><h4 id="&#x67B6;&#x6784;&#x8BF4;&#x660E;"><a href="#&#x67B6;&#x6784;&#x8BF4;&#x660E;" class="headerlink" title="&#x67B6;&#x6784;&#x8BF4;&#x660E;"></a>&#x67B6;&#x6784;&#x8BF4;&#x660E;</h4><p><img src="/2019/04/16/Java&#x5E76;&#x53D1;&#x7F16;&#x7A0B;/u=947447203,3545120712&amp;fm=26&amp;gp=0.jpg" alt="img"></p><h4 id="&#x7F16;&#x7801;&#x5B9E;&#x73B0;"><a href="#&#x7F16;&#x7801;&#x5B9E;&#x73B0;" class="headerlink" title="&#x7F16;&#x7801;&#x5B9E;&#x73B0;"></a>&#x7F16;&#x7801;&#x5B9E;&#x73B0;</h4><ul><li>Executors.newSingleThreadExecutor()&#xFF1A;&#x53EA;&#x6709;&#x4E00;&#x4E2A;&#x7EBF;&#x7A0B;&#x7684;&#x7EBF;&#x7A0B;&#x6C60;&#xFF0C;&#x56E0;&#x6B64;&#x6240;&#x6709;&#x63D0;&#x4EA4;&#x7684;&#x4EFB;&#x52A1;&#x662F;&#x987A;&#x5E8F;&#x6267;&#x884C;</li><li>Executors.newCachedThreadPool()&#xFF1A;&#x7EBF;&#x7A0B;&#x6C60;&#x91CC;&#x6709;&#x5F88;&#x591A;&#x7EBF;&#x7A0B;&#x9700;&#x8981;&#x540C;&#x65F6;&#x6267;&#x884C;&#xFF0C;&#x8001;&#x7684;&#x53EF;&#x7528;&#x7EBF;&#x7A0B;&#x5C06;&#x88AB;&#x65B0;&#x7684;&#x4EFB;&#x52A1;&#x89E6;&#x53D1;&#x91CD;&#x65B0;&#x6267;&#x884C;&#xFF0C;&#x5982;&#x679C;&#x7EBF;&#x7A0B;&#x8D85;&#x8FC7;60&#x79D2;&#x5185;&#x6CA1;&#x6267;&#x884C;&#xFF0C;&#x90A3;&#x4E48;&#x5C06;&#x88AB;&#x7EC8;&#x6B62;&#x5E76;&#x4ECE;&#x6C60;&#x4E2D;&#x5220;&#x9664;</li><li>Executors.newFixedThreadPool()&#xFF1A;&#x62E5;&#x6709;&#x56FA;&#x5B9A;&#x7EBF;&#x7A0B;&#x6570;&#x7684;&#x7EBF;&#x7A0B;&#x6C60;&#xFF0C;&#x5982;&#x679C;&#x6CA1;&#x6709;&#x4EFB;&#x52A1;&#x6267;&#x884C;&#xFF0C;&#x90A3;&#x4E48;&#x7EBF;&#x7A0B;&#x4F1A;&#x4E00;&#x76F4;&#x7B49;&#x5F85;</li><li>Executors.newScheduledThreadPool()&#xFF1A;&#x7528;&#x6765;&#x8C03;&#x5EA6;&#x5373;&#x5C06;&#x6267;&#x884C;&#x7684;&#x4EFB;&#x52A1;&#x7684;&#x7EBF;&#x7A0B;&#x6C60;</li><li>Executors.newWorkStealingPool()&#xFF1A; newWorkStealingPool&#x9002;&#x5408;&#x4F7F;&#x7528;&#x5728;&#x5F88;&#x8017;&#x65F6;&#x7684;&#x64CD;&#x4F5C;&#xFF0C;&#x4F46;&#x662F;newWorkStealingPool&#x4E0D;&#x662F;ThreadPoolExecutor&#x7684;&#x6269;&#x5C55;&#xFF0C;&#x5B83;&#x662F;&#x65B0;&#x7684;&#x7EBF;&#x7A0B;&#x6C60;&#x7C7B;ForkJoinPool&#x7684;&#x6269;&#x5C55;&#xFF0C;&#x4F46;&#x662F;&#x90FD;&#x662F;&#x5728;&#x7EDF;&#x4E00;&#x7684;&#x4E00;&#x4E2A;Executors&#x7C7B;&#x4E2D;&#x5B9E;&#x73B0;&#xFF0C;&#x7531;&#x4E8E;&#x80FD;&#x591F;&#x5408;&#x7406;&#x7684;&#x4F7F;&#x7528;CPU&#x8FDB;&#x884C;&#x5BF9;&#x4EFB;&#x52A1;&#x64CD;&#x4F5C;&#xFF08;&#x5E76;&#x884C;&#x64CD;&#x4F5C;&#xFF09;&#xFF0C;&#x6240;&#x4EE5;&#x9002;&#x5408;&#x4F7F;&#x7528;&#x5728;&#x5F88;&#x8017;&#x65F6;&#x7684;&#x4EFB;&#x52A1;&#x4E2D;</li></ul><h4 id="ThreadPoolExecutor"><a href="#ThreadPoolExecutor" class="headerlink" title="ThreadPoolExecutor"></a>ThreadPoolExecutor</h4><p>ThreadPoolExecutor&#x4F5C;&#x4E3A;java.util.concurrent&#x5305;&#x5BF9;&#x5916;&#x63D0;&#x4F9B;&#x57FA;&#x7840;&#x5B9E;&#x73B0;&#xFF0C;&#x4EE5;&#x5185;&#x90E8;&#x7EBF;&#x7A0B;&#x6C60;&#x7684;&#x5F62;&#x5F0F;&#x5BF9;&#x5916;&#x63D0;&#x4F9B;&#x7BA1;&#x7406;&#x4EFB;&#x52A1;&#x6267;&#x884C;&#xFF0C;&#x7EBF;&#x7A0B;&#x8C03;&#x5EA6;&#xFF0C;&#x7EBF;&#x7A0B;&#x6C60;&#x7BA1;&#x7406;&#x7B49;&#x7B49;&#x670D;&#x52A1;&#x3002;</p><h3 id="&#x7EBF;&#x7A0B;&#x6C60;&#x7684;&#x51E0;&#x4E2A;&#x91CD;&#x8981;&#x53C2;&#x6570;&#x4ECB;&#x7ECD;&#xFF1F;"><a href="#&#x7EBF;&#x7A0B;&#x6C60;&#x7684;&#x51E0;&#x4E2A;&#x91CD;&#x8981;&#x53C2;&#x6570;&#x4ECB;&#x7ECD;&#xFF1F;" class="headerlink" title="&#x7EBF;&#x7A0B;&#x6C60;&#x7684;&#x51E0;&#x4E2A;&#x91CD;&#x8981;&#x53C2;&#x6570;&#x4ECB;&#x7ECD;&#xFF1F;"></a>&#x7EBF;&#x7A0B;&#x6C60;&#x7684;&#x51E0;&#x4E2A;&#x91CD;&#x8981;&#x53C2;&#x6570;&#x4ECB;&#x7ECD;&#xFF1F;</h3><table><thead><tr><th style="text-align:left">&#x53C2;&#x6570;</th><th style="text-align:left">&#x4F5C;&#x7528;</th></tr></thead><tbody><tr><td style="text-align:left">corePoolSize</td><td style="text-align:left">&#x6838;&#x5FC3;&#x7EBF;&#x7A0B;&#x6C60;&#x5927;&#x5C0F;</td></tr><tr><td style="text-align:left">maximumPoolSize</td><td style="text-align:left">&#x6700;&#x5927;&#x7EBF;&#x7A0B;&#x6C60;&#x5927;&#x5C0F;</td></tr><tr><td style="text-align:left">keepAliveTime</td><td style="text-align:left">&#x7EBF;&#x7A0B;&#x6C60;&#x4E2D;&#x8D85;&#x8FC7; corePoolSize &#x6570;&#x76EE;&#x7684;&#x7A7A;&#x95F2;&#x7EBF;&#x7A0B;&#x6700;&#x5927;&#x5B58;&#x6D3B;&#x65F6;&#x95F4;&#xFF1B;&#x53EF;&#x4EE5;allowCoreThreadTimeOut(true) &#x4F7F;&#x5F97;&#x6838;&#x5FC3;&#x7EBF;&#x7A0B;&#x6709;&#x6548;&#x65F6;&#x95F4;</td></tr><tr><td style="text-align:left">TimeUnit</td><td style="text-align:left">keepAliveTime &#x65F6;&#x95F4;&#x5355;&#x4F4D;</td></tr><tr><td style="text-align:left">workQueue</td><td style="text-align:left">&#x963B;&#x585E;&#x4EFB;&#x52A1;&#x961F;&#x5217;</td></tr><tr><td style="text-align:left">threadFactory</td><td style="text-align:left">&#x65B0;&#x5EFA;&#x7EBF;&#x7A0B;&#x5DE5;&#x5382;</td></tr><tr><td style="text-align:left">RejectedExecutionHandler</td><td style="text-align:left">&#x5F53;&#x63D0;&#x4EA4;&#x4EFB;&#x52A1;&#x6570;&#x8D85;&#x8FC7; maxmumPoolSize+workQueue &#x4E4B;&#x548C;&#x65F6;&#xFF0C;&#x4EFB;&#x52A1;&#x4F1A;&#x4EA4;&#x7ED9;RejectedExecutionHandler &#x6765;&#x5904;&#x7406;</td></tr></tbody></table><p>&#x8BF4;&#x8BF4;&#x7EBF;&#x7A0B;&#x6C60;&#x7684;&#x5E95;&#x5C42;&#x5DE5;&#x4F5C;&#x539F;&#x7406;&#xFF1F;</p><p><strong>&#x91CD;&#x70B9;&#x8BB2;&#x89E3;&#xFF1A;</strong> &#x5176;&#x4E2D;&#x6BD4;&#x8F83;&#x5BB9;&#x6613;&#x8BA9;&#x4EBA;&#x8BEF;&#x89E3;&#x7684;&#x662F;&#xFF1A;corePoolSize&#xFF0C;maximumPoolSize&#xFF0C;workQueue&#x4E4B;&#x95F4;&#x5173;&#x7CFB;&#x3002;</p><ol><li><p>&#x5F53;&#x7EBF;&#x7A0B;&#x6C60;&#x5C0F;&#x4E8E;corePoolSize&#x65F6;&#xFF0C;&#x65B0;&#x63D0;&#x4EA4;&#x4EFB;&#x52A1;&#x5C06;&#x521B;&#x5EFA;&#x4E00;&#x4E2A;&#x65B0;&#x7EBF;&#x7A0B;&#x6267;&#x884C;&#x4EFB;&#x52A1;&#xFF0C;&#x5373;&#x4F7F;&#x6B64;&#x65F6;&#x7EBF;&#x7A0B;&#x6C60;&#x4E2D;&#x5B58;&#x5728;&#x7A7A;&#x95F2;&#x7EBF;&#x7A0B;&#x3002;</p></li><li><p>&#x5F53;&#x7EBF;&#x7A0B;&#x6C60;&#x8FBE;&#x5230;corePoolSize&#x65F6;&#xFF0C;&#x65B0;&#x63D0;&#x4EA4;&#x4EFB;&#x52A1;&#x5C06;&#x88AB;&#x653E;&#x5165; workQueue &#x4E2D;&#xFF0C;&#x7B49;&#x5F85;&#x7EBF;&#x7A0B;&#x6C60;&#x4E2D;&#x4EFB;&#x52A1;&#x8C03;&#x5EA6;&#x6267;&#x884C;&#x3002; </p></li><li><p>&#x5F53;workQueue&#x5DF2;&#x6EE1;&#xFF0C;&#x4E14; maximumPoolSize &#x5927;&#x4E8E; corePoolSize &#x65F6;&#xFF0C;&#x65B0;&#x63D0;&#x4EA4;&#x4EFB;&#x52A1;&#x4F1A;&#x521B;&#x5EFA;&#x65B0;&#x7EBF;&#x7A0B;&#x6267;&#x884C;&#x4EFB;&#x52A1;&#x3002; </p></li><li><p>&#x5F53;&#x63D0;&#x4EA4;&#x4EFB;&#x52A1;&#x6570;&#x8D85;&#x8FC7; maximumPoolSize &#x65F6;&#xFF0C;&#x65B0;&#x63D0;&#x4EA4;&#x4EFB;&#x52A1;&#x7531; RejectedExecutionHandler &#x5904;&#x7406;&#x3002; </p></li><li><p>&#x5F53;&#x7EBF;&#x7A0B;&#x6C60;&#x4E2D;&#x8D85;&#x8FC7;corePoolSize &#x7EBF;&#x7A0B;&#xFF0C;&#x7A7A;&#x95F2;&#x65F6;&#x95F4;&#x8FBE;&#x5230; keepAliveTime &#x65F6;&#xFF0C;&#x5173;&#x95ED;&#x7A7A;&#x95F2;&#x7EBF;&#x7A0B; &#x3002;</p></li><li><p>&#x5F53;&#x8BBE;&#x7F6E;allowCoreThreadTimeOut(true) &#x65F6;&#xFF0C;&#x7EBF;&#x7A0B;&#x6C60;&#x4E2D; corePoolSize &#x7EBF;&#x7A0B;&#x7A7A;&#x95F2;&#x65F6;&#x95F4;&#x8FBE;&#x5230; keepAliveTime &#x4E5F;&#x5C06;&#x5173;&#x95ED;&#x3002;</p></li></ol><p><img src="/2019/04/16/Java&#x5E76;&#x53D1;&#x7F16;&#x7A0B;/92ad4409-2ab4-388b-9fb1-9fc4e0d832cd.jpg" alt="img"></p><h2 id="&#x7EBF;&#x7A0B;&#x6C60;&#x7528;&#x8FC7;&#x5417;&#xFF1F;&#x751F;&#x4EA7;&#x4E0A;&#x4F60;&#x5982;&#x4F55;&#x8BBE;&#x7F6E;&#x5408;&#x7406;&#x53C2;&#x6570;&#xFF1F;"><a href="#&#x7EBF;&#x7A0B;&#x6C60;&#x7528;&#x8FC7;&#x5417;&#xFF1F;&#x751F;&#x4EA7;&#x4E0A;&#x4F60;&#x5982;&#x4F55;&#x8BBE;&#x7F6E;&#x5408;&#x7406;&#x53C2;&#x6570;&#xFF1F;" class="headerlink" title="&#x7EBF;&#x7A0B;&#x6C60;&#x7528;&#x8FC7;&#x5417;&#xFF1F;&#x751F;&#x4EA7;&#x4E0A;&#x4F60;&#x5982;&#x4F55;&#x8BBE;&#x7F6E;&#x5408;&#x7406;&#x53C2;&#x6570;&#xFF1F;"></a>&#x7EBF;&#x7A0B;&#x6C60;&#x7528;&#x8FC7;&#x5417;&#xFF1F;&#x751F;&#x4EA7;&#x4E0A;&#x4F60;&#x5982;&#x4F55;&#x8BBE;&#x7F6E;&#x5408;&#x7406;&#x53C2;&#x6570;&#xFF1F;</h2><h3 id="&#x7EBF;&#x7A0B;&#x6C60;&#x7684;&#x62D2;&#x7EDD;&#x7B56;&#x7565;&#x4F60;&#x8C08;&#x8C08;&#xFF1F;"><a href="#&#x7EBF;&#x7A0B;&#x6C60;&#x7684;&#x62D2;&#x7EDD;&#x7B56;&#x7565;&#x4F60;&#x8C08;&#x8C08;&#xFF1F;" class="headerlink" title="&#x7EBF;&#x7A0B;&#x6C60;&#x7684;&#x62D2;&#x7EDD;&#x7B56;&#x7565;&#x4F60;&#x8C08;&#x8C08;&#xFF1F;"></a>&#x7EBF;&#x7A0B;&#x6C60;&#x7684;&#x62D2;&#x7EDD;&#x7B56;&#x7565;&#x4F60;&#x8C08;&#x8C08;&#xFF1F;</h3><ul><li>&#x662F;&#x4EC0;&#x4E48;<ul><li>&#x7B49;&#x5F85;&#x961F;&#x5217;&#x5DF2;&#x7ECF;&#x6EE1;&#x4E86;&#xFF0C;&#x518D;&#x4E5F;&#x585E;&#x4E0D;&#x4E0B;&#x65B0;&#x7684;&#x4EFB;&#x52A1;&#xFF0C;&#x540C;&#x65F6;&#x7EBF;&#x7A0B;&#x6C60;&#x4E2D;&#x7684;&#x7EBF;&#x7A0B;&#x6570;&#x8FBE;&#x5230;&#x4E86;&#x6700;&#x5927;&#x7EBF;&#x7A0B;&#x6570;&#xFF0C;&#x65E0;&#x6CD5;&#x7EE7;&#x7EED;&#x4E3A;&#x65B0;&#x4EFB;&#x52A1;&#x670D;&#x52A1;&#x3002;</li></ul></li><li>&#x62D2;&#x7EDD;&#x7B56;&#x7565;<ul><li>AbortPolicy&#xFF1A;&#x5904;&#x7406;&#x7A0B;&#x5E8F;&#x906D;&#x5230;&#x62D2;&#x7EDD;&#x5C06;&#x629B;&#x51FA;&#x8FD0;&#x884C;&#x65F6; RejectedExecutionException </li><li>CallerRunsPolicy&#xFF1A;&#x7EBF;&#x7A0B;&#x8C03;&#x7528;&#x8FD0;&#x884C;&#x8BE5;&#x4EFB;&#x52A1;&#x7684; execute &#x672C;&#x8EAB;&#x3002;&#x6B64;&#x7B56;&#x7565;&#x63D0;&#x4F9B;&#x7B80;&#x5355;&#x7684;&#x53CD;&#x9988;&#x63A7;&#x5236;&#x673A;&#x5236;&#xFF0C;&#x80FD;&#x591F;&#x51CF;&#x7F13;&#x65B0;&#x4EFB;&#x52A1;&#x7684;&#x63D0;&#x4EA4;&#x901F;&#x5EA6;&#x3002;</li><li>DiscardPolicy&#xFF1A;&#x4E0D;&#x80FD;&#x6267;&#x884C;&#x7684;&#x4EFB;&#x52A1;&#x5C06;&#x88AB;&#x5220;&#x9664; </li><li>DiscardOldestPolicy&#xFF1A;&#x5982;&#x679C;&#x6267;&#x884C;&#x7A0B;&#x5E8F;&#x5C1A;&#x672A;&#x5173;&#x95ED;&#xFF0C;&#x5219;&#x4F4D;&#x4E8E;&#x5DE5;&#x4F5C;&#x961F;&#x5217;&#x5934;&#x90E8;&#x7684;&#x4EFB;&#x52A1;&#x5C06;&#x88AB;&#x5220;&#x9664;&#xFF0C;&#x7136;&#x540E;&#x91CD;&#x8BD5;&#x6267;&#x884C;&#x7A0B;&#x5E8F;&#xFF08;&#x5982;&#x679C;&#x518D;&#x6B21;&#x5931;&#x8D25;&#xFF0C;&#x5219;&#x91CD;&#x590D;&#x6B64;&#x8FC7;&#x7A0B;&#xFF09;</li></ul></li></ul><h3 id="&#x4F60;&#x5728;&#x5DE5;&#x4F5C;&#x4E2D;&#x5355;&#x4E00;&#x7684;&#x3001;&#x56FA;&#x5B9A;&#x6570;&#x7684;&#x548C;&#x53EF;&#x53D8;&#x7684;&#x4E09;&#x79CD;&#x521B;&#x5EFA;&#x7EBF;&#x7A0B;&#x6C60;&#x7684;&#x65B9;&#x6CD5;&#xFF0C;&#x4F60;&#x7528;&#x54EA;&#x4E2A;&#x591A;&#xFF0C;&#x8D85;&#x7EA7;&#x5927;&#x5751;&#xFF1F;"><a href="#&#x4F60;&#x5728;&#x5DE5;&#x4F5C;&#x4E2D;&#x5355;&#x4E00;&#x7684;&#x3001;&#x56FA;&#x5B9A;&#x6570;&#x7684;&#x548C;&#x53EF;&#x53D8;&#x7684;&#x4E09;&#x79CD;&#x521B;&#x5EFA;&#x7EBF;&#x7A0B;&#x6C60;&#x7684;&#x65B9;&#x6CD5;&#xFF0C;&#x4F60;&#x7528;&#x54EA;&#x4E2A;&#x591A;&#xFF0C;&#x8D85;&#x7EA7;&#x5927;&#x5751;&#xFF1F;" class="headerlink" title="&#x4F60;&#x5728;&#x5DE5;&#x4F5C;&#x4E2D;&#x5355;&#x4E00;&#x7684;&#x3001;&#x56FA;&#x5B9A;&#x6570;&#x7684;&#x548C;&#x53EF;&#x53D8;&#x7684;&#x4E09;&#x79CD;&#x521B;&#x5EFA;&#x7EBF;&#x7A0B;&#x6C60;&#x7684;&#x65B9;&#x6CD5;&#xFF0C;&#x4F60;&#x7528;&#x54EA;&#x4E2A;&#x591A;&#xFF0C;&#x8D85;&#x7EA7;&#x5927;&#x5751;&#xFF1F;"></a>&#x4F60;&#x5728;&#x5DE5;&#x4F5C;&#x4E2D;&#x5355;&#x4E00;&#x7684;&#x3001;&#x56FA;&#x5B9A;&#x6570;&#x7684;&#x548C;&#x53EF;&#x53D8;&#x7684;&#x4E09;&#x79CD;&#x521B;&#x5EFA;&#x7EBF;&#x7A0B;&#x6C60;&#x7684;&#x65B9;&#x6CD5;&#xFF0C;&#x4F60;&#x7528;&#x54EA;&#x4E2A;&#x591A;&#xFF0C;&#x8D85;&#x7EA7;&#x5927;&#x5751;&#xFF1F;</h3><p>&#x5982;&#x679C;&#x8BFB;&#x8005;&#x5BF9;Java&#x4E2D;&#x7684;&#x963B;&#x585E;&#x961F;&#x5217;&#x6709;&#x6240;&#x4E86;&#x89E3;&#x7684;&#x8BDD;&#xFF0C;&#x770B;&#x5230;&#x8FD9;&#x91CC;&#x6216;&#x8BB8;&#x5C31;&#x80FD;&#x591F;&#x660E;&#x767D;&#x539F;&#x56E0;&#x4E86;&#x3002;</p><p>Java&#x4E2D;&#x7684;BlockingQueue&#x4E3B;&#x8981;&#x6709;&#x4E24;&#x79CD;&#x5B9E;&#x73B0;&#xFF0C;&#x5206;&#x522B;&#x662F;ArrayBlockingQueue &#x548C; LinkedBlockingQueue&#x3002;</p><p>ArrayBlockingQueue&#x662F;&#x4E00;&#x4E2A;&#x7528;&#x6570;&#x7EC4;&#x5B9E;&#x73B0;&#x7684;&#x6709;&#x754C;&#x963B;&#x585E;&#x961F;&#x5217;&#xFF0C;&#x5FC5;&#x987B;&#x8BBE;&#x7F6E;&#x5BB9;&#x91CF;&#x3002;</p><p>LinkedBlockingQueue&#x662F;&#x4E00;&#x4E2A;&#x7528;&#x94FE;&#x8868;&#x5B9E;&#x73B0;&#x7684;&#x6709;&#x754C;&#x963B;&#x585E;&#x961F;&#x5217;&#xFF0C;&#x5BB9;&#x91CF;&#x53EF;&#x4EE5;&#x9009;&#x62E9;&#x8FDB;&#x884C;&#x8BBE;&#x7F6E;&#xFF0C;&#x4E0D;&#x8BBE;&#x7F6E;&#x7684;&#x8BDD;&#xFF0C;&#x5C06;&#x662F;&#x4E00;&#x4E2A;&#x65E0;&#x8FB9;&#x754C;&#x7684;&#x963B;&#x585E;&#x961F;&#x5217;&#xFF0C;&#x6700;&#x5927;&#x957F;&#x5EA6;&#x4E3A;Integer.MAX_VALUE&#x3002;</p><p>&#x8FD9;&#x91CC;&#x7684;&#x95EE;&#x9898;&#x5C31;&#x51FA;&#x5728;&#xFF1A;&#x4E0D;&#x8BBE;&#x7F6E;&#x7684;&#x8BDD;&#xFF0C;&#x5C06;&#x662F;&#x4E00;&#x4E2A;&#x65E0;&#x8FB9;&#x754C;&#x7684;&#x963B;&#x585E;&#x961F;&#x5217;&#xFF0C;&#x6700;&#x5927;&#x957F;&#x5EA6;&#x4E3A;Integer.MAX_VALUE&#x3002;&#x4E5F;&#x5C31;&#x662F;&#x8BF4;&#xFF0C;&#x5982;&#x679C;&#x6211;&#x4EEC;&#x4E0D;&#x8BBE;&#x7F6E;LinkedBlockingQueue&#x7684;&#x5BB9;&#x91CF;&#x7684;&#x8BDD;&#xFF0C;&#x5176;&#x9ED8;&#x8BA4;&#x5BB9;&#x91CF;&#x5C06;&#x4F1A;&#x662F;Integer.MAX_VALUE&#x3002;</p><p>&#x800C;newFixedThreadPool&#x4E2D;&#x521B;&#x5EFA;LinkedBlockingQueue&#x65F6;&#xFF0C;&#x5E76;&#x672A;&#x6307;&#x5B9A;&#x5BB9;&#x91CF;&#x3002;&#x6B64;&#x65F6;&#xFF0C;LinkedBlockingQueue&#x5C31;&#x662F;&#x4E00;&#x4E2A;&#x65E0;&#x8FB9;&#x754C;&#x961F;&#x5217;&#xFF0C;&#x5BF9;&#x4E8E;&#x4E00;&#x4E2A;&#x65E0;&#x8FB9;&#x754C;&#x961F;&#x5217;&#x6765;&#x8BF4;&#xFF0C;&#x662F;&#x53EF;&#x4EE5;&#x4E0D;&#x65AD;&#x7684;&#x5411;&#x961F;&#x5217;&#x4E2D;&#x52A0;&#x5165;&#x4EFB;&#x52A1;&#x7684;&#xFF0C;&#x8FD9;&#x79CD;&#x60C5;&#x51B5;&#x4E0B;&#x5C31;&#x6709;&#x53EF;&#x80FD;&#x56E0;&#x4E3A;&#x4EFB;&#x52A1;&#x8FC7;&#x591A;&#x800C;&#x5BFC;&#x81F4;&#x5185;&#x5B58;&#x6EA2;&#x51FA;&#x95EE;&#x9898;&#x3002;</p><p>&#x4E0A;&#x9762;&#x63D0;&#x5230;&#x7684;&#x95EE;&#x9898;&#x4E3B;&#x8981;&#x4F53;&#x73B0;&#x5728;newFixedThreadPool&#x548C;newSingleThreadExecutor&#x4E24;&#x4E2A;&#x5DE5;&#x5382;&#x65B9;&#x6CD5;&#x4E0A;&#xFF0C;&#x5E76;&#x4E0D;&#x662F;&#x8BF4;newCachedThreadPool&#x548C;newScheduledThreadPool&#x8FD9;&#x4E24;&#x4E2A;&#x65B9;&#x6CD5;&#x5C31;&#x5B89;&#x5168;&#x4E86;&#xFF0C;&#x8FD9;&#x4E24;&#x79CD;&#x65B9;&#x5F0F;&#x521B;&#x5EFA;&#x7684;&#x6700;&#x5927;&#x7EBF;&#x7A0B;&#x6570;&#x53EF;&#x80FD;&#x662F;Integer.MAX_VALUE&#xFF0C;&#x800C;&#x521B;&#x5EFA;&#x8FD9;&#x4E48;&#x591A;&#x7EBF;&#x7A0B;&#xFF0C;&#x5FC5;&#x7136;&#x5C31;&#x6709;&#x53EF;&#x80FD;&#x5BFC;&#x81F4;OOM&#x3002;</p><h3 id="&#x4F60;&#x5728;&#x5DE5;&#x4F5C;&#x4E2D;&#x662F;&#x5982;&#x4F55;&#x4F7F;&#x7528;&#x7EBF;&#x7A0B;&#x6C60;&#x7684;&#xFF0C;&#x662F;&#x5426;&#x81EA;&#x5B9A;&#x4E49;&#x8FC7;&#x7EBF;&#x7A0B;&#x6C60;&#x4F7F;&#x7528;&#xFF1F;"><a href="#&#x4F60;&#x5728;&#x5DE5;&#x4F5C;&#x4E2D;&#x662F;&#x5982;&#x4F55;&#x4F7F;&#x7528;&#x7EBF;&#x7A0B;&#x6C60;&#x7684;&#xFF0C;&#x662F;&#x5426;&#x81EA;&#x5B9A;&#x4E49;&#x8FC7;&#x7EBF;&#x7A0B;&#x6C60;&#x4F7F;&#x7528;&#xFF1F;" class="headerlink" title="&#x4F60;&#x5728;&#x5DE5;&#x4F5C;&#x4E2D;&#x662F;&#x5982;&#x4F55;&#x4F7F;&#x7528;&#x7EBF;&#x7A0B;&#x6C60;&#x7684;&#xFF0C;&#x662F;&#x5426;&#x81EA;&#x5B9A;&#x4E49;&#x8FC7;&#x7EBF;&#x7A0B;&#x6C60;&#x4F7F;&#x7528;&#xFF1F;"></a>&#x4F60;&#x5728;&#x5DE5;&#x4F5C;&#x4E2D;&#x662F;&#x5982;&#x4F55;&#x4F7F;&#x7528;&#x7EBF;&#x7A0B;&#x6C60;&#x7684;&#xFF0C;&#x662F;&#x5426;&#x81EA;&#x5B9A;&#x4E49;&#x8FC7;&#x7EBF;&#x7A0B;&#x6C60;&#x4F7F;&#x7528;&#xFF1F;</h3><p>&#x81EA;&#x5B9A;&#x4E49;&#x7EBF;&#x7A0B;&#x6C60;</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ThreadPoolExecutorDemo</span> </span>{</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>{</span><br><span class="line">        Executor executor = <span class="keyword">new</span> ThreadPoolExecutor(<span class="number">2</span>, <span class="number">3</span>, <span class="number">1L</span>, TimeUnit.SECONDS,</span><br><span class="line">                <span class="keyword">new</span> LinkedBlockingQueue&lt;&gt;(<span class="number">5</span>), </span><br><span class="line">                Executors.defaultThreadFactory(), </span><br><span class="line">                <span class="keyword">new</span> ThreadPoolExecutor.DiscardPolicy());</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></table></figure><h3 id="&#x5408;&#x7406;&#x914D;&#x7F6E;&#x7EBF;&#x7A0B;&#x6C60;&#x4F60;&#x662F;&#x5982;&#x679C;&#x8003;&#x8651;&#x7684;&#xFF1F;"><a href="#&#x5408;&#x7406;&#x914D;&#x7F6E;&#x7EBF;&#x7A0B;&#x6C60;&#x4F60;&#x662F;&#x5982;&#x679C;&#x8003;&#x8651;&#x7684;&#xFF1F;" class="headerlink" title="&#x5408;&#x7406;&#x914D;&#x7F6E;&#x7EBF;&#x7A0B;&#x6C60;&#x4F60;&#x662F;&#x5982;&#x679C;&#x8003;&#x8651;&#x7684;&#xFF1F;"></a>&#x5408;&#x7406;&#x914D;&#x7F6E;&#x7EBF;&#x7A0B;&#x6C60;&#x4F60;&#x662F;&#x5982;&#x679C;&#x8003;&#x8651;&#x7684;&#xFF1F;</h3><ul><li>CPU &#x5BC6;&#x96C6;&#x578B;<ul><li>CPU &#x5BC6;&#x96C6;&#x7684;&#x610F;&#x601D;&#x662F;&#x8BE5;&#x4EFB;&#x52A1;&#x9700;&#x8981;&#x5927;&#x91CF;&#x7684;&#x8FD0;&#x7B97;&#xFF0C;&#x800C;&#x6CA1;&#x6709;&#x963B;&#x585E;&#xFF0C;CPU &#x4E00;&#x76F4;&#x5168;&#x901F;&#x8FD0;&#x884C;&#x3002;</li><li>CPU &#x5BC6;&#x96C6;&#x578B;&#x4EFB;&#x52A1;&#x5C3D;&#x53EF;&#x80FD;&#x7684;&#x5C11;&#x7684;&#x7EBF;&#x7A0B;&#x6570;&#x91CF;&#xFF0C;&#x4E00;&#x822C;&#x4E3A; CPU &#x6838;&#x6570; + 1 &#x4E2A;&#x7EBF;&#x7A0B;&#x7684;&#x7EBF;&#x7A0B;&#x6C60;&#x3002;</li></ul></li><li>IO &#x5BC6;&#x96C6;&#x578B;<ul><li>&#x7531;&#x4E8E; IO &#x5BC6;&#x96C6;&#x578B;&#x4EFB;&#x52A1;&#x7EBF;&#x7A0B;&#x5E76;&#x4E0D;&#x662F;&#x4E00;&#x76F4;&#x5728;&#x6267;&#x884C;&#x4EFB;&#x52A1;&#xFF0C;&#x53EF;&#x4EE5;&#x591A;&#x5206;&#x914D;&#x4E00;&#x70B9;&#x7EBF;&#x7A0B;&#x6570;&#xFF0C;&#x5982; CPU * 2 &#x3002;</li><li>&#x4E5F;&#x53EF;&#x4EE5;&#x4F7F;&#x7528;&#x516C;&#x5F0F;&#xFF1A;CPU &#x6838;&#x6570; / (1 - &#x963B;&#x585E;&#x7CFB;&#x6570;)&#xFF1B;&#x5176;&#x4E2D;&#x963B;&#x585E;&#x7CFB;&#x6570;&#x5728; 0.8 &#xFF5E; 0.9 &#x4E4B;&#x95F4;&#x3002;</li></ul></li></ul><h2 id="&#x6B7B;&#x9501;&#x7F16;&#x7801;&#x4EE5;&#x53CA;&#x5B9A;&#x4F4D;&#x5206;&#x6790;"><a href="#&#x6B7B;&#x9501;&#x7F16;&#x7801;&#x4EE5;&#x53CA;&#x5B9A;&#x4F4D;&#x5206;&#x6790;" class="headerlink" title="&#x6B7B;&#x9501;&#x7F16;&#x7801;&#x4EE5;&#x53CA;&#x5B9A;&#x4F4D;&#x5206;&#x6790;"></a>&#x6B7B;&#x9501;&#x7F16;&#x7801;&#x4EE5;&#x53CA;&#x5B9A;&#x4F4D;&#x5206;&#x6790;</h2><ul><li><p>&#x4EA7;&#x751F;&#x6B7B;&#x9501;&#x7684;&#x539F;&#x56E0;</p><ul><li>&#x6B7B;&#x9501;&#x662F;&#x6307;&#x4E24;&#x4E2A;&#x6216;&#x4E24;&#x4E2A;&#x4EE5;&#x4E0A;&#x7684;&#x8FDB;&#x7A0B;&#x5728;&#x6267;&#x884C;&#x8FC7;&#x7A0B;&#x4E2D;&#xFF0C;&#x56E0;&#x4E89;&#x593A;&#x8D44;&#x6E90;&#x800C;&#x9020;&#x6210;&#x7684;&#x4E00;&#x79CD;&#x76F8;&#x4E92;&#x7B49;&#x5F85;&#x7684;&#x73B0;&#x8C61;&#xFF0C;&#x5982;&#x679C;&#x65E0;&#x5916;&#x529B;&#x7684;&#x5E72;&#x6D89;&#x90A3;&#x5B83;&#x4EEC;&#x90FD;&#x5C06;&#x65E0;&#x6CD5;&#x63A8;&#x8FDB;&#x4E0B;&#x53BB;&#xFF0C;&#x5982;&#x679C;&#x7CFB;&#x7EDF;&#x7684;&#x8D44;&#x6E90;&#x5145;&#x8DB3;&#xFF0C;&#x8FDB;&#x7A0B;&#x7684;&#x8D44;&#x6E90;&#x8BF7;&#x6C42;&#x90FD;&#x80FD;&#x591F;&#x5F97;&#x5230;&#x6EE1;&#x8DB3;&#xFF0C;&#x6B7B;&#x9501;&#x51FA;&#x73B0;&#x7684;&#x53EF;&#x80FD;&#x6027;&#x5C31;&#x5F88;&#x4F4E;&#xFF0C;&#x5426;&#x5219;&#x5C31;&#x4F1A;&#x56E0;&#x4E89;&#x593A;&#x6709;&#x9650;&#x7684;&#x8D44;&#x6E90;&#x800C;&#x9677;&#x5165;&#x6B7B;&#x9501;&#x3002;</li></ul></li><li><p>&#x4EE3;&#x7801;</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">DeadLockDemo</span> </span>{</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>{</span><br><span class="line">        String lockA = <span class="string">&quot;lockA&quot;</span>;</span><br><span class="line">        String lockB = <span class="string">&quot;lockB&quot;</span>;</span><br><span class="line"></span><br><span class="line">        DeadLockDemo deadLockDemo = <span class="keyword">new</span> DeadLockDemo();</span><br><span class="line">        Executor executor = Executors.newFixedThreadPool(<span class="number">2</span>);</span><br><span class="line">        executor.execute(() -&gt; deadLockDemo.method(lockA, lockB));</span><br><span class="line">        executor.execute(() -&gt; deadLockDemo.method(lockB, lockA));</span><br><span class="line"></span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">method</span><span class="params">(String lock1, String lock2)</span> </span>{</span><br><span class="line">        <span class="keyword">synchronized</span> (lock1) {</span><br><span class="line">            System.out.println(Thread.currentThread().getName() + <span class="string">&quot;--&#x83B7;&#x53D6;&#x5230;&#xFF1A;&quot;</span> + lock1 + <span class="string">&quot;; &#x5C1D;&#x8BD5;&#x83B7;&#x53D6;&#xFF1A;&quot;</span> + lock2);</span><br><span class="line">            <span class="keyword">try</span> {</span><br><span class="line">                Thread.sleep(<span class="number">1000</span>);</span><br><span class="line">            } <span class="keyword">catch</span> (InterruptedException e) {</span><br><span class="line">                e.printStackTrace();</span><br><span class="line">            }</span><br><span class="line">            <span class="keyword">synchronized</span> (lock2) {</span><br><span class="line">                System.out.println(<span class="string">&quot;&#x83B7;&#x53D6;&#x5230;&#x4E24;&#x628A;&#x9501;!&quot;</span>);</span><br><span class="line">            }</span><br><span class="line">        }</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></table></figure></li><li><p>&#x89E3;&#x51B3;</p><ul><li><p>jps -l &#x547D;&#x4EE4;&#x67E5;&#x5B9A;&#x4F4D;&#x8FDB;&#x7A0B;&#x53F7;</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">28519 org.jetbrains.jps.cmdline.Launcher</span><br><span class="line">32376 com.intellij.idea.Main</span><br><span class="line">28521 com.cuzz.thread.DeadLockDemo</span><br><span class="line">27836 org.jetbrains.kotlin.daemon.KotlinCompileDaemon</span><br><span class="line">28591 sun.tools.jps.Jps</span><br></pre></td></tr></table></figure></li><li><p>jstack 28521 &#x627E;&#x5230;&#x6B7B;&#x9501;&#x67E5;&#x770B;</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line">2019-05-07 00:04:15</span><br><span class="line">Full thread dump Java HotSpot(TM) 64-Bit Server VM (25.191-b12 mixed mode):</span><br><span class="line"></span><br><span class="line">&quot;Attach Listener&quot; #13 daemon prio=9 os_prio=0 tid=0x00007f7acc001000 nid=0x702a waiting on condition [0x0000000000000000]</span><br><span class="line">   java.lang.Thread.State: RUNNABLE</span><br><span class="line">// ...</span><br><span class="line">Found one Java-level deadlock:</span><br><span class="line">=============================</span><br><span class="line">&quot;pool-1-thread-2&quot;:</span><br><span class="line">  waiting to lock monitor 0x00007f7ad4006478 (object 0x00000000d71f60b0, a java.lang.String),</span><br><span class="line">  which is held by &quot;pool-1-thread-1&quot;</span><br><span class="line">&quot;pool-1-thread-1&quot;:</span><br><span class="line">  waiting to lock monitor 0x00007f7ad4003be8 (object 0x00000000d71f60e8, a java.lang.String),</span><br><span class="line">  which is held by &quot;pool-1-thread-2&quot;</span><br><span class="line"></span><br><span class="line">Java stack information for the threads listed above:</span><br><span class="line">===================================================</span><br><span class="line">&quot;pool-1-thread-2&quot;:</span><br><span class="line">        at com.cuzz.thread.DeadLockDemo.method(DeadLockDemo.java:34)</span><br><span class="line">        - waiting to lock &lt;0x00000000d71f60b0&gt; (a java.lang.String)</span><br><span class="line">        - locked &lt;0x00000000d71f60e8&gt; (a java.lang.String)</span><br><span class="line">        at com.cuzz.thread.DeadLockDemo.lambda$main$1(DeadLockDemo.java:21)</span><br><span class="line">        at com.cuzz.thread.DeadLockDemo$$Lambda$2/2074407503.run(Unknown Source)</span><br><span class="line">        at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)</span><br><span class="line">        at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)</span><br><span class="line">        at java.lang.Thread.run(Thread.java:748)</span><br><span class="line">&quot;pool-1-thread-1&quot;:</span><br><span class="line">        at com.cuzz.thread.DeadLockDemo.method(DeadLockDemo.java:34)</span><br><span class="line">        - waiting to lock &lt;0x00000000d71f60e8&gt; (a java.lang.String)</span><br><span class="line">        - locked &lt;0x00000000d71f60b0&gt; (a java.lang.String)</span><br><span class="line">        at com.cuzz.thread.DeadLockDemo.lambda$main$0(DeadLockDemo.java:20)</span><br><span class="line">        at com.cuzz.thread.DeadLockDemo$$Lambda$1/558638686.run(Unknown Source)</span><br><span class="line">        at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)</span><br><span class="line">        at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)</span><br><span class="line">        at java.lang.Thread.run(Thread.java:748)</span><br><span class="line"></span><br><span class="line">Found 1 deadlock.</span><br></pre></td></tr></table></figure><p>&#x6700;&#x540E;&#x53D1;&#x73B0;&#x4E00;&#x4E2A;&#x6B7B;&#x9501;&#x3002;</p></li></ul></li></ul><h2 id="&#x540E;&#x7EED;"><a href="#&#x540E;&#x7EED;" class="headerlink" title="&#x540E;&#x7EED;"></a>&#x540E;&#x7EED;</h2><p><a href="http://blog.cuzz.site/2019/05/10/JVM&#x9762;&#x8BD5;/">JVM &#x9762;&#x8BD5;</a></p><h2 id="&#x53C2;&#x8003;&#x94FE;&#x63A5;"><a href="#&#x53C2;&#x8003;&#x94FE;&#x63A5;" class="headerlink" title="&#x53C2;&#x8003;&#x94FE;&#x63A5;"></a>&#x53C2;&#x8003;&#x94FE;&#x63A5;</h2><ul><li><a href="http://www.sohu.com/a/152785317_99908665" target="_blank" rel="noopener">Java&#x5185;&#x5B58;&#x6A21;&#x578B;-volatile </a></li></ul>]]></content>
    
    <summary type="html">
    
      &lt;h2 id=&quot;&amp;#x8BF7;&amp;#x8C08;&amp;#x8C08;&amp;#x4F60;&amp;#x5BF9;-volatile-&amp;#x7684;&amp;#x7406;&amp;#x89E3;&quot;&gt;&lt;a href=&quot;#&amp;#x8BF7;&amp;#x8C08;&amp;#x8C08;&amp;#x4F60;&amp;#x5BF9;-volatile-&amp;#x7684;&amp;#x7406;&amp;#x89E3;&quot; class=&quot;headerlink&quot; title=&quot;&amp;#x8BF7;&amp;#x8C08;&amp;#x8C08;&amp;#x4F60;&amp;#x5BF9; volatile &amp;#x7684;&amp;#x7406;&amp;#x89E3;&quot;&gt;&lt;/a&gt;&amp;#x8BF7;&amp;#x8C08;&amp;#x8C08;&amp;#x4F60;&amp;#x5BF9; volatile &amp;#x7684;&amp;#x7406;&amp;#x89E3;&lt;/h2&gt;&lt;h3 id=&quot;volatile-&amp;#x662F;-Java-&amp;#x865A;&amp;#x62DF;&amp;#x673A;&amp;#x63D0;&amp;#x4F9B;&amp;#x7684;&amp;#x8F7B;&amp;#x91CF;&amp;#x7EA7;&amp;#x7684;&amp;#x540C;&amp;#x6B65;&amp;#x673A;&amp;#x5236;&quot;&gt;&lt;a href=&quot;#volatile-&amp;#x662F;-Java-&amp;#x865A;&amp;#x62DF;&amp;#x673A;&amp;#x63D0;&amp;#x4F9B;&amp;#x7684;&amp;#x8F7B;&amp;#x91CF;&amp;#x7EA7;&amp;#x7684;&amp;#x540C;&amp;#x6B65;&amp;#x673A;&amp;#x5236;&quot; class=&quot;headerlink&quot; title=&quot;volatile &amp;#x662F; Java &amp;#x865A;&amp;#x62DF;&amp;#x673A;&amp;#x63D0;&amp;#x4F9B;&amp;#x7684;&amp;#x8F7B;&amp;#x91CF;&amp;#x7EA7;&amp;#x7684;&amp;#x540C;&amp;#x6B65;&amp;#x673A;&amp;#x5236;&quot;&gt;&lt;/a&gt;volatile &amp;#x662F; Java &amp;#x865A;&amp;#x62DF;&amp;#x673A;&amp;#x63D0;&amp;#x4F9B;&amp;#x7684;&amp;#x8F7B;&amp;#x91CF;&amp;#x7EA7;&amp;#x7684;&amp;#x540C;&amp;#x6B65;&amp;#x673A;&amp;#x5236;&lt;/h3&gt;&lt;ul&gt;
&lt;li&gt;&amp;#x4FDD;&amp;#x8BC1;&amp;#x53EF;&amp;#x89C1;&amp;#x6027;&lt;/li&gt;
&lt;li&gt;&amp;#x7981;&amp;#x6B62;&amp;#x6307;&amp;#x4EE4;&amp;#x6392;&amp;#x5E8F;&lt;/li&gt;
&lt;li&gt;&amp;#x4E0D;&amp;#x4FDD;&amp;#x8BC1;&amp;#x539F;&amp;#x5B50;&amp;#x6027;&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&quot;JMM&amp;#xFF08;Java-&amp;#x5185;&amp;#x5B58;&amp;#x6A21;&amp;#x578B;&amp;#xFF09;-&amp;#x4F60;&amp;#x8C08;&amp;#x8C08;&quot;&gt;&lt;a href=&quot;#JMM&amp;#xFF08;Java-&amp;#x5185;&amp;#x5B58;&amp;#x6A21;&amp;#x578B;&amp;#xFF09;-&amp;#x4F60;&amp;#x8C08;&amp;#x8C08;&quot; class=&quot;headerlink&quot; title=&quot;JMM&amp;#xFF08;Java &amp;#x5185;&amp;#x5B58;&amp;#x6A21;&amp;#x578B;&amp;#xFF09; &amp;#x4F60;&amp;#x8C08;&amp;#x8C08;&quot;&gt;&lt;/a&gt;JMM&amp;#xFF08;Java &amp;#x5185;&amp;#x5B58;&amp;#x6A21;&amp;#x578B;&amp;#xFF09; &amp;#x4F60;&amp;#x8C08;&amp;#x8C08;&lt;/h3&gt;&lt;h4 id=&quot;&amp;#x57FA;&amp;#x672C;&amp;#x6982;&amp;#x5FF5;&quot;&gt;&lt;a href=&quot;#&amp;#x57FA;&amp;#x672C;&amp;#x6982;&amp;#x5FF5;&quot; class=&quot;headerlink&quot; title=&quot;&amp;#x57FA;&amp;#x672C;&amp;#x6982;&amp;#x5FF5;&quot;&gt;&lt;/a&gt;&amp;#x57FA;&amp;#x672C;&amp;#x6982;&amp;#x5FF5;&lt;/h4&gt;&lt;ul&gt;
&lt;li&gt;JMM &amp;#x672C;&amp;#x8EAB;&amp;#x662F;&amp;#x4E00;&amp;#x79CD;&amp;#x62BD;&amp;#x8C61;&amp;#x7684;&amp;#x6982;&amp;#x5FF5;&amp;#x5E76;&amp;#x4E0D;&amp;#x662F;&amp;#x771F;&amp;#x5B9E;&amp;#x5B58;&amp;#x5728;&amp;#xFF0C;&amp;#x5B83;&amp;#x63CF;&amp;#x8FF0;&amp;#x7684;&amp;#x662F;&amp;#x4E00;&amp;#x7EC4;&amp;#x89C4;&amp;#x5B9A;&amp;#x6216;&amp;#x5219;&amp;#x89C4;&amp;#x8303;&amp;#xFF0C;&amp;#x901A;&amp;#x8FC7;&amp;#x8FD9;&amp;#x7EC4;&amp;#x89C4;&amp;#x8303;&amp;#x5B9A;&amp;#x4E49;&amp;#x4E86;&amp;#x7A0B;&amp;#x5E8F;&amp;#x4E2D;&amp;#x7684;&amp;#x8BBF;&amp;#x95EE;&amp;#x65B9;&amp;#x5F0F;&amp;#x3002;&lt;/li&gt;
&lt;li&gt;JMM &amp;#x540C;&amp;#x6B65;&amp;#x89C4;&amp;#x5B9A;&lt;ul&gt;
&lt;li&gt;&amp;#x7EBF;&amp;#x7A0B;&amp;#x89E3;&amp;#x9501;&amp;#x524D;&amp;#xFF0C;&amp;#x5FC5;&amp;#x987B;&amp;#x628A;&amp;#x5171;&amp;#x4EAB;&amp;#x53D8;&amp;#x91CF;&amp;#x7684;&amp;#x503C;&amp;#x5237;&amp;#x65B0;&amp;#x56DE;&amp;#x4E3B;&amp;#x5185;&amp;#x5B58;&lt;/li&gt;
&lt;li&gt;&amp;#x7EBF;&amp;#x7A0B;&amp;#x52A0;&amp;#x9501;&amp;#x524D;&amp;#xFF0C;&amp;#x5FC5;&amp;#x987B;&amp;#x8BFB;&amp;#x53D6;&amp;#x4E3B;&amp;#x5185;&amp;#x5B58;&amp;#x7684;&amp;#x6700;&amp;#x65B0;&amp;#x503C;&amp;#x5230;&amp;#x81EA;&amp;#x5DF1;&amp;#x7684;&amp;#x5DE5;&amp;#x4F5C;&amp;#x5185;&amp;#x5B58;&lt;/li&gt;
&lt;li&gt;&amp;#x52A0;&amp;#x9501;&amp;#x89E3;&amp;#x9501;&amp;#x662F;&amp;#x540C;&amp;#x4E00;&amp;#x628A;&amp;#x9501;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&amp;#x7531;&amp;#x4E8E; JVM &amp;#x8FD0;&amp;#x884C;&amp;#x7A0B;&amp;#x5E8F;&amp;#x7684;&amp;#x5B9E;&amp;#x4F53;&amp;#x662F;&amp;#x7EBF;&amp;#x7A0B;&amp;#xFF0C;&amp;#x800C;&amp;#x6BCF;&amp;#x4E2A;&amp;#x7EBF;&amp;#x7A0B;&amp;#x521B;&amp;#x5EFA;&amp;#x65F6; JVM &amp;#x90FD;&amp;#x4F1A;&amp;#x4E3A;&amp;#x5176;&amp;#x521B;&amp;#x5EFA;&amp;#x4E00;&amp;#x4E2A;&amp;#x5DE5;&amp;#x4F5C;&amp;#x5185;&amp;#x5B58;&amp;#xFF0C;&amp;#x5DE5;&amp;#x4F5C;&amp;#x5185;&amp;#x5B58;&amp;#x662F;&amp;#x6BCF;&amp;#x4E2A;&amp;#x7EBF;&amp;#x7A0B;&amp;#x7684;&amp;#x79C1;&amp;#x6709;&amp;#x6570;&amp;#x636E;&amp;#x533A;&amp;#x57DF;&amp;#xFF0C;&amp;#x800C; Java &amp;#x5185;&amp;#x5B58;&amp;#x6A21;&amp;#x578B;&amp;#x4E2D;&amp;#x89C4;&amp;#x5B9A;&amp;#x6240;&amp;#x6709;&amp;#x53D8;&amp;#x91CF;&amp;#x7684;&amp;#x50A8;&amp;#x5B58;&amp;#x5728;&amp;#x4E3B;&amp;#x5185;&amp;#x5B58;&amp;#xFF0C;&amp;#x4E3B;&amp;#x5185;&amp;#x5B58;&amp;#x662F;&amp;#x5171;&amp;#x4EAB;&amp;#x5185;&amp;#x5B58;&amp;#x533A;&amp;#x57DF;&amp;#xFF0C;&amp;#x6240;&amp;#x6709;&amp;#x7684;&amp;#x7EBF;&amp;#x7A0B;&amp;#x90FD;&amp;#x53EF;&amp;#x4EE5;&amp;#x8BBF;&amp;#x95EE;&amp;#xFF0C;&amp;#x4F46;&amp;#x7EBF;&amp;#x7A0B;&amp;#x5BF9;&amp;#x53D8;&amp;#x91CF;&amp;#x7684;&amp;#x64CD;&amp;#x4F5C;&amp;#xFF08;&amp;#x8BFB;&amp;#x53D6;&amp;#x8D4B;&amp;#x503C;&amp;#x7B49;&amp;#xFF09;&amp;#x5FC5;&amp;#x987B;&amp;#x90FD;&amp;#x5DE5;&amp;#x4F5C;&amp;#x5185;&amp;#x5B58;&amp;#x8FDB;&amp;#x884C;&amp;#x770B;&amp;#x3002;&lt;/li&gt;
&lt;li&gt;&amp;#x9996;&amp;#x5148;&amp;#x8981;&amp;#x5C06;&amp;#x53D8;&amp;#x91CF;&amp;#x4ECE;&amp;#x4E3B;&amp;#x5185;&amp;#x5B58;&amp;#x62F7;&amp;#x8D1D;&amp;#x7684;&amp;#x81EA;&amp;#x5DF1;&amp;#x7684;&amp;#x5DE5;&amp;#x4F5C;&amp;#x5185;&amp;#x5B58;&amp;#x7A7A;&amp;#x95F4;&amp;#xFF0C;&amp;#x7136;&amp;#x540E;&amp;#x5BF9;&amp;#x53D8;&amp;#x91CF;&amp;#x8FDB;&amp;#x884C;&amp;#x64CD;&amp;#x4F5C;&amp;#xFF0C;&amp;#x64CD;&amp;#x4F5C;&amp;#x5B8C;&amp;#x6210;&amp;#x540E;&amp;#x518D;&amp;#x5C06;&amp;#x53D8;&amp;#x91CF;&amp;#x5199;&amp;#x56DE;&amp;#x4E3B;&amp;#x5185;&amp;#x5B58;&amp;#xFF0C;&amp;#x4E0D;&amp;#x80FD;&amp;#x76F4;&amp;#x63A5;&amp;#x64CD;&amp;#x4F5C;&amp;#x4E3B;&amp;#x5185;&amp;#x5B58;&amp;#x4E2D;&amp;#x7684;&amp;#x53D8;&amp;#x91CF;&amp;#xFF0C;&amp;#x5DE5;&amp;#x4F5C;&amp;#x5185;&amp;#x5B58;&amp;#x4E2D;&amp;#x5B58;&amp;#x50A8;&amp;#x7740;&amp;#x4E3B;&amp;#x5185;&amp;#x5B58;&amp;#x4E2D;&amp;#x7684;&amp;#x53D8;&amp;#x91CF;&amp;#x526F;&amp;#x672C;&amp;#x62F7;&amp;#x8D1D;&amp;#xFF0C;&amp;#x524D;&amp;#x9762;&amp;#x8BF4;&amp;#x8FC7;&amp;#xFF0C;&amp;#x5DE5;&amp;#x4F5C;&amp;#x5185;&amp;#x5B58;&amp;#x662F;&amp;#x6BCF;&amp;#x4E2A;&amp;#x7EBF;&amp;#x7A0B;&amp;#x7684;&amp;#x79C1;&amp;#x6709;&amp;#x6570;&amp;#x636E;&amp;#x533A;&amp;#x57DF;&amp;#xFF0C;&amp;#x56E0;&amp;#x6B64;&amp;#x4E0D;&amp;#x540C;&amp;#x7684;&amp;#x7EBF;&amp;#x7A0B;&amp;#x95F4;&amp;#x65E0;&amp;#x6CD5;&amp;#x8BBF;&amp;#x95EE;&amp;#x5BF9;&amp;#x65B9;&amp;#x7684;&amp;#x5DE5;&amp;#x4F5C;&amp;#x5185;&amp;#x5B58;&amp;#xFF0C;&amp;#x7EBF;&amp;#x7A0B;&amp;#x95F4;&amp;#x7684;&amp;#x901A;&amp;#x4FE1;(&amp;#x4F20;&amp;#x503C;)&amp;#x5FC5;&amp;#x987B;&amp;#x901A;&amp;#x8FC7;&amp;#x4E3B;&amp;#x5185;&amp;#x5B58;&amp;#x6765;&amp;#x5B8C;&amp;#x6210;&amp;#x3002;&lt;/li&gt;
&lt;li&gt;&amp;#x5185;&amp;#x5B58;&amp;#x6A21;&amp;#x578B;&amp;#x56FE;&lt;br&gt;&lt;img src=&quot;/2019/04/16/Java&amp;#x5E76;&amp;#x53D1;&amp;#x7F16;&amp;#x7A0B;/&amp;#x641C;&amp;#x72D7;&amp;#x622A;&amp;#x56FE;20190416211412.png&quot; alt=&quot;&amp;#x641C;&amp;#x72D7;&amp;#x622A;&amp;#x56FE;20190416211412&quot;&gt;&lt;/li&gt;
&lt;/ul&gt;
    
    </summary>
    
      <category term="面试" scheme="http://blog.cuzz.site/categories/%E9%9D%A2%E8%AF%95/"/>
    
    
      <category term="并发编程" scheme="http://blog.cuzz.site/tags/%E5%B9%B6%E5%8F%91%E7%BC%96%E7%A8%8B/"/>
    
  </entry>
  
  <entry>
    <title>生产者消费者</title>
    <link href="http://blog.cuzz.site/2019/04/06/%E7%94%9F%E4%BA%A7%E8%80%85%E6%B6%88%E8%B4%B9%E8%80%85/"/>
    <id>http://blog.cuzz.site/2019/04/06/生产者消费者/</id>
    <published>2019-04-06T14:56:12.000Z</published>
    <updated>2019-07-16T11:43:31.365Z</updated>
    
    <content type="html"><![CDATA[<p>&#x7EF4;&#x57FA;&#x767E;&#x79D1;&#x89E3;&#x91CA;&#xFF1A;</p><blockquote><p>In <a href="https://en.wikipedia.org/wiki/Computing" target="_blank" rel="noopener">computing</a>, the <strong>producer&#x2013;consumer problem</strong><a href="https://en.wikipedia.org/wiki/Producer%E2%80%93consumer_problem#cite_note-ostep1-1" target="_blank" rel="noopener">[1]</a><a href="https://en.wikipedia.org/wiki/Producer%E2%80%93consumer_problem#cite_note-ostep2-2" target="_blank" rel="noopener">[2]</a> (also known as the <strong>bounded-buffer problem</strong>) is a classic example of a multi-<a href="https://en.wikipedia.org/wiki/Process_(computing" target="_blank" rel="noopener">process</a>) <a href="https://en.wikipedia.org/wiki/Synchronization_(computer_science" target="_blank" rel="noopener">synchronization</a>) problem. The problem describes two processes, the producer and the consumer, who share a common, fixed-size <a href="https://en.wikipedia.org/wiki/Buffer_(computer_science" target="_blank" rel="noopener">buffer</a>) used as a <a href="https://en.wikipedia.org/wiki/Queue_(data_structure" target="_blank" rel="noopener">queue</a>). The producer&#x2019;s job is to generate data, put it into the buffer, and start again. At the same time, the consumer is consuming the data (i.e., removing it from the buffer), one piece at a time. The problem is to make sure that the producer won&#x2019;t try to add data into the buffer if it&#x2019;s full and that the consumer won&#x2019;t try to remove data from an empty buffer. </p></blockquote><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.util.LinkedList;</span><br><span class="line"><span class="keyword">import</span> java.util.List;</span><br><span class="line"><span class="keyword">import</span> java.util.Random;</span><br><span class="line"><span class="keyword">import</span> java.util.concurrent.ExecutorService;</span><br><span class="line"><span class="keyword">import</span> java.util.concurrent.Executors;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Author</span>: cuzz</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Date</span>: 2019/4/6 13:03</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Description</span>: &#x751F;&#x4EA7;&#x8005;&#x6D88;&#x8D39;&#x8005;</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ProducerConsumerDemo</span> </span>{</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>{</span><br><span class="line">        Container container = <span class="keyword">new</span> Container();</span><br><span class="line">        ExecutorService executor = Executors.newFixedThreadPool(<span class="number">2</span>);</span><br><span class="line">        executor.execute(() -&gt; container.produce());</span><br><span class="line">        executor.execute(() -&gt; container.consume());</span><br><span class="line">        executor.shutdown();</span><br><span class="line">    }</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Container</span> </span>{</span><br><span class="line">    <span class="keyword">private</span> List&lt;Integer&gt; list = <span class="keyword">new</span> LinkedList&lt;&gt;();</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">final</span> <span class="keyword">int</span> MAX_SIZE = <span class="number">5</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> Random random = <span class="keyword">new</span> Random();</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">produce</span><span class="params">()</span> </span>{</span><br><span class="line">        <span class="keyword">while</span> (<span class="keyword">true</span>) {</span><br><span class="line">            <span class="keyword">synchronized</span> (<span class="keyword">this</span>) {</span><br><span class="line">                <span class="keyword">try</span> {</span><br><span class="line">                    <span class="keyword">while</span> (list.size() &gt;= MAX_SIZE) {</span><br><span class="line">                        wait();</span><br><span class="line">                    }</span><br><span class="line">                    <span class="keyword">int</span> i = random.nextInt();</span><br><span class="line">                    System.out.println(<span class="string">&quot;produce...&quot;</span> + i);</span><br><span class="line">                    list.add(i);</span><br><span class="line">                    notify();</span><br><span class="line">                    Thread.sleep(<span class="number">1000</span>);</span><br><span class="line">                } <span class="keyword">catch</span> (InterruptedException e) {</span><br><span class="line">                    e.printStackTrace();</span><br><span class="line">                }</span><br><span class="line">            }</span><br><span class="line">        }</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">consume</span><span class="params">()</span> </span>{</span><br><span class="line">        <span class="keyword">while</span> (<span class="keyword">true</span>) {</span><br><span class="line">            <span class="keyword">try</span> {</span><br><span class="line">                <span class="keyword">synchronized</span> (<span class="keyword">this</span>) {</span><br><span class="line">                    <span class="keyword">while</span> (list.isEmpty()) {</span><br><span class="line">                        wait();</span><br><span class="line">                    }</span><br><span class="line">                    <span class="keyword">int</span> i = list.remove(<span class="number">0</span>);</span><br><span class="line">                    System.out.println(<span class="string">&quot;consume...&quot;</span> + i);</span><br><span class="line">                    notify();</span><br><span class="line">                    Thread.sleep(<span class="number">1000</span>);</span><br><span class="line">                }</span><br><span class="line">            } <span class="keyword">catch</span> (InterruptedException e) {</span><br><span class="line">                e.printStackTrace();</span><br><span class="line">            }</span><br><span class="line">        }</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;&amp;#x7EF4;&amp;#x57FA;&amp;#x767E;&amp;#x79D1;&amp;#x89E3;&amp;#x91CA;&amp;#xFF1A;&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;In &lt;a href=&quot;https://en.wikipedia.org/wiki/Computing&quot; target=
      
    
    </summary>
    
      <category term="算法" scheme="http://blog.cuzz.site/categories/%E7%AE%97%E6%B3%95/"/>
    
    
      <category term="ProducerConsumer" scheme="http://blog.cuzz.site/tags/ProducerConsumer/"/>
    
  </entry>
  
  <entry>
    <title>LRUCache</title>
    <link href="http://blog.cuzz.site/2019/03/16/LRUCache/"/>
    <id>http://blog.cuzz.site/2019/03/16/LRUCache/</id>
    <published>2019-03-16T14:56:12.000Z</published>
    <updated>2019-07-16T11:43:31.284Z</updated>
    
    <content type="html"><![CDATA[<p>LRU&#xFF08;Least recently used&#xFF0C;&#x6700;&#x8FD1;&#x6700;&#x5C11;&#x4F7F;&#x7528;&#xFF09;&#x7B97;&#x6CD5;&#x6839;&#x636E;&#x6570;&#x636E;&#x7684;&#x5386;&#x53F2;&#x8BBF;&#x95EE;&#x8BB0;&#x5F55;&#x6765;&#x8FDB;&#x884C;&#x6DD8;&#x6C70;&#x6570;&#x636E;&#xFF0C;&#x5176;&#x6838;&#x5FC3;&#x601D;&#x60F3;&#x662F;&#x201C;&#x5982;&#x679C;&#x6570;&#x636E;&#x6700;&#x8FD1;&#x88AB;&#x8BBF;&#x95EE;&#x8FC7;&#xFF0C;&#x90A3;&#x4E48;&#x5C06;&#x6765;&#x88AB;&#x8BBF;&#x95EE;&#x7684;&#x51E0;&#x7387;&#x4E5F;&#x66F4;&#x9AD8;&#x201D; &#x3002;</p><p><img src="/2019/03/16/LRUCache/&#x641C;&#x72D7;&#x622A;&#x56FE;20190316173426.png" alt="&#x641C;&#x72D7;&#x622A;&#x56FE;20190316173426"></p><p>&#x4EE3;&#x7801;&#xFF1A;</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Author</span>: cuzz</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Date</span>: 2019/3/16 15:35</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Description</span>: LRU cache</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">LRUCache</span> </span>{</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> Map&lt;Integer, DLinkedList&gt; cache = <span class="keyword">new</span> HashMap&lt;&gt;();</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">int</span> count;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">int</span> capacity;</span><br><span class="line">    <span class="keyword">private</span> DLinkedList head, tail;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">LRUCache</span><span class="params">(<span class="keyword">int</span> capacity)</span> </span>{</span><br><span class="line">        <span class="keyword">this</span>.count = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">this</span>.capacity = capacity;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">this</span>.head = <span class="keyword">new</span> DLinkedList();</span><br><span class="line">        <span class="keyword">this</span>.tail = <span class="keyword">new</span> DLinkedList();</span><br><span class="line"></span><br><span class="line">        head.next = tail;</span><br><span class="line">        tail.pre = head;</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">get</span><span class="params">(<span class="keyword">int</span> key)</span> </span>{</span><br><span class="line">        DLinkedList node = cache.get(key);</span><br><span class="line">        <span class="keyword">if</span> (node == <span class="keyword">null</span>) {</span><br><span class="line">            <span class="keyword">return</span> -<span class="number">1</span>;</span><br><span class="line">        }</span><br><span class="line">        removeNode(node);</span><br><span class="line">        addHead(node);</span><br><span class="line">        <span class="keyword">return</span> node.value;</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">put</span><span class="params">(<span class="keyword">int</span> key, <span class="keyword">int</span> value)</span> </span>{</span><br><span class="line">        DLinkedList node = cache.get(key);</span><br><span class="line">        <span class="keyword">if</span> (node == <span class="keyword">null</span>) {</span><br><span class="line">            node = <span class="keyword">new</span> DLinkedList(key, value);</span><br><span class="line">            addHead(node);</span><br><span class="line">            cache.put(key, node);</span><br><span class="line">            count++;</span><br><span class="line">            <span class="keyword">if</span> (count &gt; capacity) {</span><br><span class="line">                DLinkedList preTail = tail.pre;</span><br><span class="line">                removeNode(preTail);</span><br><span class="line">                cache.remove(preTail.key);</span><br><span class="line">                count--;</span><br><span class="line">            }</span><br><span class="line">        } <span class="keyword">else</span> {</span><br><span class="line">            node.value = value;</span><br><span class="line">            removeNode(node);</span><br><span class="line">            addHead(node);</span><br><span class="line">        }</span><br><span class="line"></span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="comment">// &#x79FB;&#x9664;&#x7ED9;&#x5B9A;&#x7684;&#x7ED3;&#x70B9;</span></span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">removeNode</span><span class="params">(DLinkedList node)</span> </span>{</span><br><span class="line">        DLinkedList pre = node.pre;</span><br><span class="line">        DLinkedList next = node.next;</span><br><span class="line">        pre.next = next;</span><br><span class="line">        next.pre = pre;</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="comment">// &#x628A;&#x7ED3;&#x70B9;&#x6DFB;&#x52A0;&#x5934;&#x8282;&#x70B9;</span></span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">addHead</span><span class="params">(DLinkedList node)</span> </span>{</span><br><span class="line">        DLinkedList next = head.next;</span><br><span class="line">        head.next = node;</span><br><span class="line">        node.next = next;</span><br><span class="line">        next.pre = node;</span><br><span class="line">        node.pre = head;</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>{</span><br><span class="line">        LRUCache cache = <span class="keyword">new</span> LRUCache(<span class="number">2</span>);</span><br><span class="line">        cache.put(<span class="number">1</span>, <span class="number">1</span>);</span><br><span class="line">        cache.put(<span class="number">2</span>, <span class="number">2</span>);                    </span><br><span class="line">        System.out.println(cache.get(<span class="number">1</span>));   <span class="comment">// &#x8FD4;&#x56DE; 1</span></span><br><span class="line">        cache.put(<span class="number">3</span>, <span class="number">3</span>);                    <span class="comment">// &#x4F7F; 2 &#x4F5C;&#x5E9F;</span></span><br><span class="line">        System.out.println(cache.get(<span class="number">2</span>));   <span class="comment">// &#x8FD4;&#x56DE; -1</span></span><br><span class="line">        cache.put(<span class="number">4</span>, <span class="number">4</span>);                    <span class="comment">// &#x4F7F; 1 &#x4F5C;&#x5E9F;</span></span><br><span class="line">        System.out.println(cache.get(<span class="number">1</span>));   <span class="comment">// &#x8FD4;&#x56DE; -1 &#x672A;&#x627E;&#x5230;</span></span><br><span class="line">        System.out.println(cache.get(<span class="number">3</span>));   <span class="comment">// &#x8FD4;&#x56DE; 3</span></span><br><span class="line">        System.out.println(cache.get(<span class="number">4</span>));   <span class="comment">// &#x8FD4;&#x56DE; 4</span></span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">DLinkedList</span> </span>{</span><br><span class="line">    <span class="keyword">int</span> key;</span><br><span class="line">    <span class="keyword">int</span> value;</span><br><span class="line">    DLinkedList pre;</span><br><span class="line">    DLinkedList next;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">DLinkedList</span><span class="params">()</span> </span>{};</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">DLinkedList</span><span class="params">(<span class="keyword">int</span> key, <span class="keyword">int</span> value)</span> </span>{</span><br><span class="line">        <span class="keyword">this</span>.key = key;</span><br><span class="line">        <span class="keyword">this</span>.value = value;</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;LRU&amp;#xFF08;Least recently used&amp;#xFF0C;&amp;#x6700;&amp;#x8FD1;&amp;#x6700;&amp;#x5C11;&amp;#x4F7F;&amp;#x7528;&amp;#xFF09;&amp;#x7B97;&amp;#x6CD5;&amp;#x6839;&amp;#x636E;&amp;#x6570;&amp;#x
      
    
    </summary>
    
      <category term="算法" scheme="http://blog.cuzz.site/categories/%E7%AE%97%E6%B3%95/"/>
    
    
      <category term="LRUCache" scheme="http://blog.cuzz.site/tags/LRUCache/"/>
    
  </entry>
  
  <entry>
    <title>深入理解Java虚拟机（四）</title>
    <link href="http://blog.cuzz.site/2019/03/04/%E6%B7%B1%E5%85%A5%E7%90%86%E8%A7%A3Java%E8%99%9A%E6%8B%9F%E6%9C%BA%EF%BC%88%E5%9B%9B%EF%BC%89/"/>
    <id>http://blog.cuzz.site/2019/03/04/深入理解Java虚拟机（四）/</id>
    <published>2019-03-04T15:59:59.000Z</published>
    <updated>2019-08-12T12:03:26.853Z</updated>
    
    <content type="html"><![CDATA[<h2 id="synchronized-&#x5B57;&#x8282;&#x7801;&#x5206;&#x6790;"><a href="#synchronized-&#x5B57;&#x8282;&#x7801;&#x5206;&#x6790;" class="headerlink" title="synchronized &#x5B57;&#x8282;&#x7801;&#x5206;&#x6790;"></a>synchronized &#x5B57;&#x8282;&#x7801;&#x5206;&#x6790;</h2><p>&#x6211;&#x4EEC;&#x5148;&#x6765;&#x770B;&#x4E00;&#x4E0B;&#x4E00;&#x4E2A;&#x7B80;&#x5355;&#x7684;&#x65B9;&#x6CD5;</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Author</span>: cuzz</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Date</span>: 2019/3/4 13:34</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Description</span>:</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MyTest02</span> </span>{</span><br><span class="line">    <span class="keyword">int</span> x = <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setX</span><span class="params">(<span class="keyword">int</span> x)</span> </span>{</span><br><span class="line">        <span class="keyword">this</span>.x = x;</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></table></figure><p>&#x4F7F;&#x7528; <code>javap -v com.cuzz.jvm.bytecode.MyTest02</code> &#x547D;&#x4EE4;&#xFF0C;&#x627E;&#x5230; <code>setX</code> &#x65B9;&#x6CD5;</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">public void setX(int);</span><br><span class="line">  descriptor: (I)V</span><br><span class="line">  flags: ACC_PUBLIC</span><br><span class="line">  Code:</span><br><span class="line">    stack=2, locals=2, args_size=2</span><br><span class="line">       0: aload_0</span><br><span class="line">       1: iload_1</span><br><span class="line">       2: putfield      #2                  // Field x:I</span><br><span class="line">       5: return</span><br><span class="line">    LineNumberTable:</span><br><span class="line">      line 12: 0</span><br><span class="line">      line 13: 5</span><br><span class="line">    LocalVariableTable:</span><br><span class="line">      Start  Length  Slot  Name   Signature</span><br><span class="line">          0       6     0  this   Lcom/cuzz/jvm/bytecode/MyTest02;</span><br><span class="line">          0       6     1     x   I</span><br></pre></td></tr></table></figure><a id="more"></a><p>&#x5982;&#x679C;&#x6211;&#x4EEC;&#x5728;&#x65B9;&#x6CD5;&#x4E2D;&#x6DFB;&#x52A0; <code>synchronzied</code> &#x5173;&#x952E;&#x5B57;</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MyTest02</span> </span>{</span><br><span class="line">    <span class="keyword">int</span> x = <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">synchronized</span> <span class="keyword">void</span> <span class="title">setX</span><span class="params">(<span class="keyword">int</span> x)</span> </span>{</span><br><span class="line">        <span class="keyword">this</span>.x = x;</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></table></figure><p>&#x6211;&#x4EEC;&#x518D;&#x53CD;&#x7F16;&#x8BD1;&#x4E00;&#x4E0B;</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">public synchronized void setX(int);</span><br><span class="line">  descriptor: (I)V</span><br><span class="line">  flags: ACC_PUBLIC, ACC_SYNCHRONIZED</span><br><span class="line">  Code:</span><br><span class="line">    stack=2, locals=2, args_size=2</span><br><span class="line">       0: aload_0</span><br><span class="line">       1: iload_1</span><br><span class="line">       2: putfield      #2                  // Field x:I</span><br><span class="line">       5: return</span><br><span class="line">    LineNumberTable:</span><br><span class="line">      line 12: 0</span><br><span class="line">      line 13: 5</span><br><span class="line">    LocalVariableTable:</span><br><span class="line">      Start  Length  Slot  Name   Signature</span><br><span class="line">          0       6     0  this   Lcom/cuzz/jvm/bytecode/MyTest02;</span><br><span class="line">          0       6     1     x   I</span><br></pre></td></tr></table></figure><p>&#x5BF9;&#x6BD4;&#x8FD9;&#x4E24;&#x4E2A;&#x53CD;&#x7F16;&#x8BD1;&#x7684;&#x7ED3;&#x679C;&#xFF0C;&#x6211;&#x4EEC;&#x53D1;&#x73B0;&#x5728; flags &#x4E2D;&#x591A;&#x4E86; <code>ACC_SYNCHRONIZED</code>&#xFF0C;&#x4E0D;&#x4F1A;&#x51FA;&#x73B0; monitorenter &#x548C; monitorexit&#x3002;</p><p>&#x5982;&#x679C;&#x6211;&#x4EEC;&#x662F;&#x5728;&#x65B9;&#x6CD5;&#x4F53;&#x91CD;&#x6DFB;&#x52A0; <code>synchronized</code> &#x5173;&#x952E;&#x5B57;</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MyTest02</span> </span>{</span><br><span class="line">    String lock = <span class="string">&quot;lock&quot;</span>;</span><br><span class="line">    <span class="keyword">int</span> x = <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">getX</span><span class="params">()</span> </span>{</span><br><span class="line">        <span class="keyword">synchronized</span> (lock) {</span><br><span class="line">            <span class="keyword">return</span> x;</span><br><span class="line">        }</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></table></figure><p>&#x6211;&#x4EEC;&#x53CD;&#x7F16;&#x8BD1;&#x4E00;&#x4E0B; &#x627E;&#x5230; <code>getX</code> &#x65B9;&#x6CD5;</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line">public int getX();</span><br><span class="line">  descriptor: ()I</span><br><span class="line">  flags: ACC_PUBLIC</span><br><span class="line">  Code:</span><br><span class="line">    stack=2, locals=3, args_size=1</span><br><span class="line">       0: aload_0</span><br><span class="line">       1: getfield      #3                  // Field lock:Ljava/lang/String;</span><br><span class="line">       4: dup</span><br><span class="line">       5: astore_1</span><br><span class="line">       6: monitorenter</span><br><span class="line">       7: aload_0</span><br><span class="line">       8: getfield      #4                  // Field x:I</span><br><span class="line">      11: aload_1</span><br><span class="line">      12: monitorexit</span><br><span class="line">      13: ireturn</span><br><span class="line">      14: astore_2</span><br><span class="line">      15: aload_1</span><br><span class="line">      16: monitorexit</span><br><span class="line">      17: aload_2</span><br><span class="line">      18: athrow</span><br><span class="line">    Exception table:</span><br><span class="line">       from    to  target type</span><br><span class="line">           7    13    14   any</span><br><span class="line">          14    17    14   any</span><br><span class="line">    LineNumberTable:</span><br><span class="line">      line 17: 0</span><br><span class="line">      line 18: 7</span><br><span class="line">      line 19: 14</span><br><span class="line">    LocalVariableTable:</span><br><span class="line">      Start  Length  Slot  Name   Signature</span><br><span class="line">          0      19     0  this   Lcom/cuzz/jvm/bytecode/MyTest02;</span><br><span class="line">    StackMapTable: number_of_entries = 1</span><br><span class="line">      frame_type = 255 /* full_frame */</span><br><span class="line">        offset_delta = 14</span><br><span class="line">        locals = [ class com/cuzz/jvm/bytecode/MyTest02, class java/lang/Object ]</span><br><span class="line">        stack = [ class java/lang/Throwable ]</span><br></pre></td></tr></table></figure><p>&#x5728; 6 &#x4E2D;&#x51FA;&#x73B0; monitorenter&#xFF0C;&#x5728; 16 &#x4E2D;&#x51FA;&#x73B0; moniterexit</p>]]></content>
    
    <summary type="html">
    
      &lt;h2 id=&quot;synchronized-&amp;#x5B57;&amp;#x8282;&amp;#x7801;&amp;#x5206;&amp;#x6790;&quot;&gt;&lt;a href=&quot;#synchronized-&amp;#x5B57;&amp;#x8282;&amp;#x7801;&amp;#x5206;&amp;#x6790;&quot; class=&quot;headerlink&quot; title=&quot;synchronized &amp;#x5B57;&amp;#x8282;&amp;#x7801;&amp;#x5206;&amp;#x6790;&quot;&gt;&lt;/a&gt;synchronized &amp;#x5B57;&amp;#x8282;&amp;#x7801;&amp;#x5206;&amp;#x6790;&lt;/h2&gt;&lt;p&gt;&amp;#x6211;&amp;#x4EEC;&amp;#x5148;&amp;#x6765;&amp;#x770B;&amp;#x4E00;&amp;#x4E0B;&amp;#x4E00;&amp;#x4E2A;&amp;#x7B80;&amp;#x5355;&amp;#x7684;&amp;#x65B9;&amp;#x6CD5;&lt;/p&gt;
&lt;figure class=&quot;highlight java&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;/**&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt; * &lt;span class=&quot;doctag&quot;&gt;@Author&lt;/span&gt;: cuzz&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt; * &lt;span class=&quot;doctag&quot;&gt;@Date&lt;/span&gt;: 2019/3/4 13:34&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt; * &lt;span class=&quot;doctag&quot;&gt;@Description&lt;/span&gt;:&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt; */&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;class&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;title&quot;&gt;MyTest02&lt;/span&gt; &lt;/span&gt;{&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;int&lt;/span&gt; x = &lt;span class=&quot;number&quot;&gt;0&lt;/span&gt;;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;function&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;title&quot;&gt;setX&lt;/span&gt;&lt;span class=&quot;params&quot;&gt;(&lt;span class=&quot;keyword&quot;&gt;int&lt;/span&gt; x)&lt;/span&gt; &lt;/span&gt;{&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;keyword&quot;&gt;this&lt;/span&gt;.x = x;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    }&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;}&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;&amp;#x4F7F;&amp;#x7528; &lt;code&gt;javap -v com.cuzz.jvm.bytecode.MyTest02&lt;/code&gt; &amp;#x547D;&amp;#x4EE4;&amp;#xFF0C;&amp;#x627E;&amp;#x5230; &lt;code&gt;setX&lt;/code&gt; &amp;#x65B9;&amp;#x6CD5;&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;14&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;15&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;16&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;public void setX(int);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  descriptor: (I)V&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  flags: ACC_PUBLIC&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  Code:&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    stack=2, locals=2, args_size=2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;       0: aload_0&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;       1: iload_1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;       2: putfield      #2                  // Field x:I&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;       5: return&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    LineNumberTable:&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;      line 12: 0&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;      line 13: 5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    LocalVariableTable:&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;      Start  Length  Slot  Name   Signature&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;          0       6     0  this   Lcom/cuzz/jvm/bytecode/MyTest02;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;          0       6     1     x   I&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
    
    </summary>
    
      <category term="深入理解Java虚拟机" scheme="http://blog.cuzz.site/categories/%E6%B7%B1%E5%85%A5%E7%90%86%E8%A7%A3Java%E8%99%9A%E6%8B%9F%E6%9C%BA/"/>
    
    
      <category term="JVM" scheme="http://blog.cuzz.site/tags/JVM/"/>
    
  </entry>
  
  <entry>
    <title>Redis</title>
    <link href="http://blog.cuzz.site/2019/02/23/Redis/"/>
    <id>http://blog.cuzz.site/2019/02/23/Redis/</id>
    <published>2019-02-23T15:59:59.000Z</published>
    <updated>2019-08-12T12:03:26.851Z</updated>
    
    <content type="html"><![CDATA[<h2 id="&#x4EC0;&#x4E48;&#x662F;-Redis-&#xFF1F;"><a href="#&#x4EC0;&#x4E48;&#x662F;-Redis-&#xFF1F;" class="headerlink" title="&#x4EC0;&#x4E48;&#x662F; Redis &#xFF1F;"></a>&#x4EC0;&#x4E48;&#x662F; Redis &#xFF1F;</h2><p>Redis&#xFF0C;&#x5168;&#x79F0; Remote Dictionary Server&#xFF0C;&#x662F;&#x4E00;&#x4E2A;&#x57FA;&#x4E8E;&#x5185;&#x5B58;&#x7684;&#x9AD8;&#x6027;&#x80FD; Key-Value &#x6570;&#x636E;&#x5E93;&#x3002;</p><p>&#x53E6;&#x5916;&#xFF0C;Redis &#x5DF2;&#x7ECF;&#x6210;&#x4E3A;&#x4E92;&#x8054;&#x7F51;&#x516C;&#x53F8;&#x5728;&#x7F13;&#x5B58;&#x7EC4;&#x4EF6;&#x9009;&#x62E9;&#x7684;&#x552F;&#x4E00;&#xFF0C;&#x66F4;&#x591A;&#x7684;&#x5173;&#x6CE8;&#x70B9;&#x662F;&#xFF0C;&#x5982;&#x4F55;&#x4F7F;&#x7528;&#x597D; Redis &#x3002;</p><a id="more"></a><h3 id="Redis-&#x6709;&#x4EC0;&#x4E48;&#x4F18;&#x70B9;&#xFF1F;"><a href="#Redis-&#x6709;&#x4EC0;&#x4E48;&#x4F18;&#x70B9;&#xFF1F;" class="headerlink" title="Redis &#x6709;&#x4EC0;&#x4E48;&#x4F18;&#x70B9;&#xFF1F;"></a>Redis &#x6709;&#x4EC0;&#x4E48;&#x4F18;&#x70B9;&#xFF1F;</h3><p><strong>1&#x3001;&#x901F;&#x5EA6;&#x5FEB;</strong></p><p>&#x56E0;&#x4E3A;&#x6570;&#x636E;&#x5B58;&#x5728;&#x5185;&#x5B58;&#x4E2D;&#xFF0C;&#x7C7B;&#x4F3C;&#x4E8E; HashMap &#xFF0C;HashMap &#x7684;&#x4F18;&#x52BF;&#x5C31;&#x662F;&#x67E5;&#x627E;&#x548C;&#x64CD;&#x4F5C;&#x7684;&#x65F6;&#x95F4;&#x590D;&#x6742;&#x5EA6;&#x90FD;&#x662F;O (1) &#x3002;</p><blockquote><p>Redis &#x672C;&#x8D28;&#x4E0A;&#x662F;&#x4E00;&#x4E2A; Key-Value &#x7C7B;&#x578B;&#x7684;&#x5185;&#x5B58;&#x6570;&#x636E;&#x5E93;&#xFF0C;&#x5F88;&#x50CF;Memcached &#xFF0C;&#x6574;&#x4E2A;&#x6570;&#x636E;&#x5E93;&#x7EDF;&#x7EDF;&#x52A0;&#x8F7D;&#x5728;&#x5185;&#x5B58;&#x5F53;&#x4E2D;&#x8FDB;&#x884C;&#x64CD;&#x4F5C;&#xFF0C;&#x5B9A;&#x671F;&#x901A;&#x8FC7;&#x5F02;&#x6B65;&#x64CD;&#x4F5C;&#x628A;&#x6570;&#x636E;&#x5E93;&#x6570;&#x636E; flush &#x5230;&#x786C;&#x76D8;&#x4E0A;&#x8FDB;&#x884C;&#x4FDD;&#x5B58;&#x3002;</p><p>&#x56E0;&#x4E3A;&#x662F;&#x7EAF;&#x5185;&#x5B58;&#x64CD;&#x4F5C;&#xFF0C;Redis &#x7684;&#x6027;&#x80FD;&#x975E;&#x5E38;&#x51FA;&#x8272;&#xFF0C;&#x6BCF;&#x79D2;&#x53EF;&#x4EE5;&#x5904;&#x7406;&#x8D85;&#x8FC7; 10 &#x4E07;&#x6B21;&#x8BFB;&#x5199;&#x64CD;&#x4F5C;&#xFF0C;&#x662F;&#x5DF2;&#x77E5;&#x6027;&#x80FD;&#x6700;&#x5FEB;&#x7684; Key-Value &#x6570;&#x636E;&#x5E93;&#x3002;</p></blockquote><ul><li>&#x5982;&#x679C;&#x6211;&#x4EEC;&#x67E5;&#x770B;&#x5728;<a href="https://help.aliyun.com/document_detail/26350.html" target="_blank" rel="noopener">&#x963F;&#x91CC;&#x4E91;&#x9500;&#x552E;&#x7684; Redis &#x89C4;&#x683C;</a>&#xFF0C;&#x6700;&#x4F4E;&#x7684;&#x4E5F;&#x662F; 8W QPS &#x3002;</li></ul><p><strong>2&#x3001;&#x652F;&#x6301;&#x4E30;&#x5BCC;&#x6570;&#x636E;&#x7C7B;&#x578B;</strong></p><p>&#x652F;&#x6301; String &#xFF0C;List&#xFF0C;Set&#xFF0C;Sorted Set&#xFF0C;Hash &#x3002;</p><blockquote><p>Redis &#x7684;&#x51FA;&#x8272;&#x4E4B;&#x5904;&#x4E0D;&#x4EC5;&#x4EC5;&#x662F;&#x6027;&#x80FD;&#xFF0C;Redis &#x6700;&#x5927;&#x7684;&#x9B45;&#x529B;&#x662F;&#x652F;&#x6301;&#x4FDD;&#x5B58;&#x591A;&#x79CD;&#x6570;&#x636E;&#x7ED3;&#x6784;&#xFF0C;&#x6B64;&#x5916;&#x5355;&#x4E2A; Value &#x7684;&#x6700;&#x5927;&#x9650;&#x5236;&#x662F;1GB&#xFF0C;&#x4E0D;&#x50CF; Memcached&#x53EA;&#x80FD;&#x4FDD;&#x5B58;1MB&#x7684;&#x6570;&#x636E;&#xFF0C;&#x56E0;&#x6B64;Redis&#x53EF;&#x4EE5;&#x7528;&#x6765;&#x5B9E;&#x73B0;&#x5F88;&#x591A;&#x6709;&#x7528;&#x7684;&#x529F;&#x80FD;&#x3002;&#x6BD4;&#x65B9;&#x8BF4;&#xFF1A;</p><ul><li>&#x7528;&#x4ED6;&#x7684; List &#x6765;&#x505A; FIFO &#x53CC;&#x5411;&#x94FE;&#x8868;&#xFF0C;&#x5B9E;&#x73B0;&#x4E00;&#x4E2A;&#x8F7B;&#x91CF;&#x7EA7;&#x7684;&#x9AD8;&#x6027;&#x80FD;&#x6D88;&#x606F;&#x961F;&#x5217;&#x670D;&#x52A1;&#x3002;</li><li>&#x7528;&#x4ED6;&#x7684; Set &#x53EF;&#x4EE5;&#x505A;&#x9AD8;&#x6027;&#x80FD;&#x7684; tag &#x7CFB;&#x7EDF;&#x7B49;&#x7B49;&#x3002;</li></ul></blockquote><p><strong>3&#x3001;&#x4E30;&#x5BCC;&#x7684;&#x7279;&#x6027;</strong></p><ul><li>&#x8BA2;&#x9605;&#x53D1;&#x5E03; Pub / Sub &#x529F;&#x80FD;</li><li>Key &#x8FC7;&#x671F;&#x7B56;&#x7565;</li><li>&#x4E8B;&#x52A1;</li><li>&#x652F;&#x6301;&#x591A;&#x4E2A; DB</li><li>&#x8BA1;&#x6570;</li><li>&#x2026;</li></ul><p>&#x5E76;&#x4E14;&#x5728; Redis 5.0 &#x589E;&#x52A0;&#x4E86; Stream &#x529F;&#x80FD;&#xFF0C;&#x4E00;&#x4E2A;&#x65B0;&#x7684;&#x5F3A;&#x5927;&#x7684;&#x652F;&#x6301;&#x591A;&#x64AD;&#x7684;&#x53EF;&#x6301;&#x4E45;&#x5316;&#x7684;&#x6D88;&#x606F;&#x961F;&#x5217;&#xFF0C;&#x63D0;&#x4F9B;&#x7C7B;&#x4F3C; Kafka &#x7684;&#x529F;&#x80FD;&#x3002;</p><p><strong>4&#x3001;&#x6301;&#x4E45;&#x5316;&#x5B58;&#x50A8;</strong></p><p>Redis &#x63D0;&#x4F9B; RDB &#x548C; AOF &#x4E24;&#x79CD;&#x6570;&#x636E;&#x7684;&#x6301;&#x4E45;&#x5316;&#x5B58;&#x50A8;&#x65B9;&#x6848;&#xFF0C;&#x89E3;&#x51B3;&#x5185;&#x5B58;&#x6570;&#x636E;&#x5E93;&#x6700;&#x62C5;&#x5FC3;&#x7684;&#x4E07;&#x4E00; Redis &#x6302;&#x6389;&#xFF0C;&#x6570;&#x636E;&#x4F1A;&#x6D88;&#x5931;&#x6389;&#x3002;</p><h3 id="Redis-&#x6709;&#x4EC0;&#x4E48;&#x7F3A;&#x70B9;&#xFF1F;"><a href="#Redis-&#x6709;&#x4EC0;&#x4E48;&#x7F3A;&#x70B9;&#xFF1F;" class="headerlink" title="Redis &#x6709;&#x4EC0;&#x4E48;&#x7F3A;&#x70B9;&#xFF1F;"></a>Redis &#x6709;&#x4EC0;&#x4E48;&#x7F3A;&#x70B9;&#xFF1F;</h3><ul><li><p>&#x7531;&#x4E8E; Redis &#x662F;&#x5185;&#x5B58;&#x6570;&#x636E;&#x5E93;&#xFF0C;&#x6240;&#x4EE5;&#xFF0C;&#x5355;&#x53F0;&#x673A;&#x5668;&#xFF0C;&#x5B58;&#x50A8;&#x7684;&#x6570;&#x636E;&#x91CF;&#xFF0C;&#x8DDF;&#x673A;&#x5668;&#x672C;&#x8EAB;&#x7684;&#x5185;&#x5B58;&#x5927;&#x5C0F;&#x3002;&#x867D;&#x7136; Redis &#x672C;&#x8EAB;&#x6709; Key &#x8FC7;&#x671F;&#x7B56;&#x7565;&#xFF0C;&#x4F46;&#x662F;&#x8FD8;&#x662F;&#x9700;&#x8981;&#x63D0;&#x524D;&#x9884;&#x4F30;&#x548C;&#x8282;&#x7EA6;&#x5185;&#x5B58;&#x3002;&#x5982;&#x679C;&#x5185;&#x5B58;&#x589E;&#x957F;&#x8FC7;&#x5FEB;&#xFF0C;&#x9700;&#x8981;&#x5B9A;&#x671F;&#x5220;&#x9664;&#x6570;&#x636E;&#x3002;</p><blockquote><p>&#x53E6;&#x5916;&#xFF0C;&#x53EF;&#x4F7F;&#x7528; Redis Cluster&#x3001;Codis &#x7B49;&#x65B9;&#x6848;&#xFF0C;&#x5BF9; Redis &#x8FDB;&#x884C;&#x5206;&#x533A;&#xFF0C;&#x4ECE;&#x5355;&#x673A; Redis &#x53D8;&#x6210;&#x96C6;&#x7FA4; Redis &#x3002;</p></blockquote></li><li><p>&#x5982;&#x679C;&#x8FDB;&#x884C;&#x5B8C;&#x6574;&#x91CD;&#x540C;&#x6B65;&#xFF0C;&#x7531;&#x4E8E;&#x9700;&#x8981;&#x751F;&#x6210; RDB &#x6587;&#x4EF6;&#xFF0C;&#x5E76;&#x8FDB;&#x884C;&#x4F20;&#x8F93;&#xFF0C;&#x4F1A;&#x5360;&#x7528;&#x4E3B;&#x673A;&#x7684; CPU &#xFF0C;&#x5E76;&#x4F1A;&#x6D88;&#x8017;&#x73B0;&#x7F51;&#x7684;&#x5E26;&#x5BBD;&#x3002;&#x4E0D;&#x8FC7; Redis2.8 &#x7248;&#x672C;&#xFF0C;&#x5DF2;&#x7ECF;&#x6709;&#x90E8;&#x5206;&#x91CD;&#x540C;&#x6B65;&#x7684;&#x529F;&#x80FD;&#xFF0C;&#x4F46;&#x662F;&#x8FD8;&#x662F;&#x6709;&#x53EF;&#x80FD;&#x6709;&#x5B8C;&#x6574;&#x91CD;&#x540C;&#x6B65;&#x7684;&#x3002;&#x6BD4;&#x5982;&#xFF0C;&#x65B0;&#x4E0A;&#x7EBF;&#x7684;&#x5907;&#x673A;&#x3002;</p></li><li><p>&#x4FEE;&#x6539;&#x914D;&#x7F6E;&#x6587;&#x4EF6;&#xFF0C;&#x8FDB;&#x884C;&#x91CD;&#x542F;&#xFF0C;&#x5C06;&#x786C;&#x76D8;&#x4E2D;&#x7684;&#x6570;&#x636E;&#x52A0;&#x8F7D;&#x8FDB;&#x5185;&#x5B58;&#xFF0C;&#x65F6;&#x95F4;&#x6BD4;&#x8F83;&#x4E45;&#x3002;&#x5728;&#x8FD9;&#x4E2A;&#x8FC7;&#x7A0B;&#x4E2D;&#xFF0C;Redis &#x4E0D;&#x80FD;&#x63D0;&#x4F9B;&#x670D;&#x52A1;&#x3002;</p></li></ul><h2 id="Redis-&#x548C;-Memcached-&#x7684;&#x533A;&#x522B;&#x6709;&#x54EA;&#x4E9B;&#xFF1F;"><a href="#Redis-&#x548C;-Memcached-&#x7684;&#x533A;&#x522B;&#x6709;&#x54EA;&#x4E9B;&#xFF1F;" class="headerlink" title="Redis &#x548C; Memcached &#x7684;&#x533A;&#x522B;&#x6709;&#x54EA;&#x4E9B;&#xFF1F;"></a>Redis &#x548C; Memcached &#x7684;&#x533A;&#x522B;&#x6709;&#x54EA;&#x4E9B;&#xFF1F;</h2><p><strong>1&#x3001;Redis &#x652F;&#x6301;&#x590D;&#x6742;&#x7684;&#x6570;&#x636E;&#x7ED3;&#x6784;</strong></p><ul><li>Memcached &#x4EC5;&#x63D0;&#x4F9B;&#x7B80;&#x5355;&#x7684;&#x5B57;&#x7B26;&#x4E32;&#x3002;</li><li>Redis &#x63D0;&#x4F9B;&#x590D;&#x6742;&#x7684;&#x6570;&#x636E;&#x7ED3;&#x6784;&#xFF0C;&#x4E30;&#x5BCC;&#x7684;&#x6570;&#x636E;&#x64CD;&#x4F5C;&#x3002;</li></ul><p>&#x4E5F;&#x56E0;&#x4E3A; Redis &#x652F;&#x6301;&#x590D;&#x6742;&#x7684;&#x6570;&#x636E;&#x7ED3;&#x6784;&#xFF0C;Redis &#x5373;&#x4F7F;&#x5F80;&#x4E8E; Memcached &#x63A8;&#x51FA;&#xFF0C;&#x5374;&#x83B7;&#x5F97;&#x66F4;&#x591A;&#x5F00;&#x53D1;&#x8005;&#x7684;&#x9752;&#x7750;&#x3002;</p><p>Redis &#x76F8;&#x6BD4; Memcached &#x6765;&#x8BF4;&#xFF0C;&#x62E5;&#x6709;&#x66F4;&#x591A;&#x7684;&#x6570;&#x636E;&#x7ED3;&#x6784;&#xFF0C;&#x80FD;&#x652F;&#x6301;&#x66F4;&#x4E30;&#x5BCC;&#x7684;&#x6570;&#x636E;&#x64CD;&#x4F5C;&#x3002;&#x5982;&#x679C;&#x9700;&#x8981;&#x7F13;&#x5B58;&#x80FD;&#x591F;&#x652F;&#x6301;&#x66F4;&#x590D;&#x6742;&#x7684;&#x7ED3;&#x6784;&#x548C;&#x64CD;&#x4F5C;&#xFF0C;Redis &#x4F1A;&#x662F;&#x4E0D;&#x9519;&#x7684;&#x9009;&#x62E9;&#x3002;</p><p><strong>2&#x3001;Redis &#x539F;&#x751F;&#x652F;&#x6301;&#x96C6;&#x7FA4;&#x6A21;&#x5F0F;</strong></p><ul><li>&#x5728; Redis3.x &#x7248;&#x672C;&#x4E2D;&#xFF0C;&#x5B98;&#x65B9;&#x4FBF;&#x80FD;&#x652F;&#x6301; Cluster &#x6A21;&#x5F0F;&#x3002;</li><li>Memcached &#x6CA1;&#x6709;&#x539F;&#x751F;&#x7684;&#x96C6;&#x7FA4;&#x6A21;&#x5F0F;&#xFF0C;&#x9700;&#x8981;&#x4F9D;&#x9760;&#x5BA2;&#x6237;&#x7AEF;&#x6765;&#x5B9E;&#x73B0;&#x5F80;&#x96C6;&#x7FA4;&#x4E2D;&#x5206;&#x7247;&#x5199;&#x5165;&#x6570;&#x636E;&#x3002;</li></ul><p><strong>3&#x3001;&#x6027;&#x80FD;&#x5BF9;&#x6BD4;</strong></p><ul><li>Redis &#x53EA;&#x4F7F;&#x7528;&#x5355;&#x6838;&#xFF0C;&#x800C; Memcached &#x53EF;&#x4EE5;&#x4F7F;&#x7528;&#x591A;&#x6838;&#xFF0C;&#x6240;&#x4EE5;&#x5E73;&#x5747;&#x6BCF;&#x4E00;&#x4E2A;&#x6838;&#x4E0A; Redis&#x5728;&#x5B58;&#x50A8;&#x5C0F;&#x6570;&#x636E;&#x65F6;&#x6BD4; Memcached &#x6027;&#x80FD;&#x66F4;&#x9AD8;&#x3002;</li><li>&#x5728; 100k &#x4EE5;&#x4E0A;&#x7684;&#x6570;&#x636E;&#x4E2D;&#xFF0C;Memcached &#x6027;&#x80FD;&#x8981;&#x9AD8;&#x4E8E; Redis &#x3002;&#x867D;&#x7136; Redis &#x6700;&#x8FD1;&#x4E5F;&#x5728;&#x5B58;&#x50A8;&#x5927;&#x6570;&#x636E;&#x7684;&#x6027;&#x80FD;&#x4E0A;&#x8FDB;&#x884C;&#x4F18;&#x5316;&#xFF0C;&#x4F46;&#x662F;&#x6BD4;&#x8D77; Memcached&#xFF0C;&#x8FD8;&#x662F;&#x7A0D;&#x6709;&#x900A;&#x8272;&#x3002;</li></ul><p>&#x66F4;&#x591A;&#x5173;&#x4E8E;&#x6027;&#x80FD;&#x7684;&#x5BF9;&#x6BD4;&#xFF0C;&#x53EF;&#x4EE5;&#x770B;&#x770B; <a href="https://www.jianshu.com/p/34f90813d7c9" target="_blank" rel="noopener">&#x300A;Memcached &#x4E0E; Redis &#x7684;&#x5173;&#x952E;&#x6027;&#x80FD;&#x6307;&#x6807;&#x6BD4;&#x8F83;&#x300B;</a> &#x3002;</p><p><strong>4&#x3001;&#x5185;&#x5B58;&#x4F7F;&#x7528;&#x6548;&#x7387;&#x5BF9;&#x6BD4;</strong></p><ul><li>&#x7B80;&#x5355;&#x7684; Key-Value &#x5B58;&#x50A8;&#x7684;&#x8BDD;&#xFF0C;Memcached &#x7684;&#x5185;&#x5B58;&#x5229;&#x7528;&#x7387;&#x66F4;&#x9AD8;&#xFF0C;&#x53EF;&#x4EE5;&#x4F7F;&#x7528;&#x7C7B;&#x4F3C;&#x5185;&#x5B58;&#x6C60;&#x3002;</li><li><p>&#x5982;&#x679C; Redis &#x91C7;&#x7528; hash &#x7ED3;&#x6784;&#x6765;&#x505A; key-value &#x5B58;&#x50A8;&#xFF0C;&#x7531;&#x4E8E;&#x5176;&#x7EC4;&#x5408;&#x5F0F;&#x7684;&#x538B;&#x7F29;&#xFF0C; &#x5176;&#x5185;&#x5B58;&#x5229;&#x7528;&#x7387;&#x4F1A;&#x9AD8;&#x4E8E; Memcached &#x3002;</p></li><li><p>Redis &#x548C; Memcached &#x7684;&#x5185;&#x5B58;&#x7BA1;&#x7406;&#x65B9;&#x6CD5;&#x4E0D;&#x540C;&#xFF0C;Redis &#x91C7;&#x7528;&#x7684;&#x662F;&#x5305;&#x88C5;&#x7684; malloc/free &#xFF0C; &#x76F8;&#x8F83;&#x4E8E; Memcached &#x7684;&#x5185;&#x5B58;&#x7BA1;&#x7406;&#x65B9;&#x6CD5; tcmalloc / jmalloc &#x6765;&#x8BF4;&#xFF0C;&#x8981;&#x7B80;&#x5355;&#x5F88;&#x591A; &#x3002;</p></li></ul><p><strong>5&#x3001;&#x7F51;&#x7EDC; IO &#x6A21;&#x578B;</strong></p><ul><li>Memcached &#x662F;&#x591A;&#x7EBF;&#x7A0B;&#xFF0C;&#x975E;&#x963B;&#x585E; IO &#x590D;&#x7528;&#x7684;&#x7F51;&#x7EDC;&#x6A21;&#x578B;&#xFF0C;&#x539F;&#x578B;&#x4E0A;&#x63A5;&#x8FD1; Nignx &#x3002;</li><li>Redis &#x4F7F;&#x7528;&#x5355;&#x7EBF;&#x7A0B;&#x7684; IO &#x590D;&#x7528;&#x6A21;&#x578B;&#xFF0C;&#x81EA;&#x5DF1;&#x5C01;&#x88C5;&#x4E86;&#x4E00;&#x4E2A;&#x7B80;&#x5355;&#x7684; AeEvent &#x4E8B;&#x4EF6;&#x5904;&#x7406;&#x6846;&#x67B6;&#xFF0C;&#x4E3B;&#x8981;&#x5B9E;&#x73B0;&#x4E86; epoll, kqueue &#x548C; select &#xFF0C;&#x66F4;&#x63A5;&#x8FD1; Apache &#x65E9;&#x671F;&#x7684;&#x6A21;&#x5F0F;&#x3002;</li></ul><p>TODO &#x6709;&#x70B9;&#x770B;&#x4E0D;&#x61C2;&#xFF0C;&#x627E;&#x4E9A;&#x666E;&#x8868;&#x5F1F;&#x786E;&#x8BA4;&#x4E2D;&#x3002;</p><p><strong>6&#x3001;&#x6301;&#x4E45;&#x5316;&#x5B58;&#x50A8;</strong></p><ul><li>Memcached &#x4E0D;&#x652F;&#x6301;&#x6301;&#x4E45;&#x5316;&#x5B58;&#x50A8;&#xFF0C;&#x91CD;&#x542F;&#x65F6;&#xFF0C;&#x6570;&#x636E;&#x88AB;&#x6E05;&#x7A7A;&#x3002;</li><li>Redis &#x652F;&#x6301;&#x6301;&#x4E45;&#x5316;&#x5B58;&#x50A8;&#xFF0C;&#x91CD;&#x542F;&#x65F6;&#xFF0C;&#x53EF;&#x4EE5;&#x6062;&#x590D;&#x5DF2;&#x6301;&#x4E45;&#x5316;&#x7684;&#x6570;&#x636E;&#x3002;</li></ul><p>&#x4E5F;&#x63A8;&#x8350;&#x9605;&#x8BFB;&#x4E0B; <a href="https://www.imooc.com/article/23549" target="_blank" rel="noopener">&#x300A;&#x811A;&#x8E0F;&#x4E24;&#x53EA;&#x8239;&#x7684;&#x56F0;&#x60D1; - Memcached &#x4E0E; Redis&#x300B;</a> &#x3002;</p><h2 id="&#x8BF7;&#x8BF4;&#x8BF4;-Redis-&#x7684;&#x7EBF;&#x7A0B;&#x6A21;&#x578B;&#xFF1F;"><a href="#&#x8BF7;&#x8BF4;&#x8BF4;-Redis-&#x7684;&#x7EBF;&#x7A0B;&#x6A21;&#x578B;&#xFF1F;" class="headerlink" title="&#x8BF7;&#x8BF4;&#x8BF4; Redis &#x7684;&#x7EBF;&#x7A0B;&#x6A21;&#x578B;&#xFF1F;"></a>&#x8BF7;&#x8BF4;&#x8BF4; Redis &#x7684;&#x7EBF;&#x7A0B;&#x6A21;&#x578B;&#xFF1F;</h2><blockquote><p>&#x827F;&#x827F;&#xFF1A;&#x8FD9;&#x4E2A;&#x662F;&#x6211;&#x4ECE;&#x7F51;&#x7EDC;&#x4E0A;&#x627E;&#x7684;&#x8D44;&#x6599;&#xFF0C;&#x8BB2;&#x7684;&#x7070;&#x5E38;&#x4E0D;&#x9519;&#x3002;</p></blockquote><p>redis &#x5185;&#x90E8;&#x4F7F;&#x7528;&#x6587;&#x4EF6;&#x4E8B;&#x4EF6;&#x5904;&#x7406;&#x5668; <code>file event handler</code>&#xFF0C;&#x8FD9;&#x4E2A;&#x6587;&#x4EF6;&#x4E8B;&#x4EF6;&#x5904;&#x7406;&#x5668;&#x662F;&#x5355;&#x7EBF;&#x7A0B;&#x7684;&#xFF0C;&#x6240;&#x4EE5; redis &#x624D;&#x53EB;&#x505A;&#x5355;&#x7EBF;&#x7A0B;&#x7684;&#x6A21;&#x578B;&#x3002;&#x5B83;&#x91C7;&#x7528; IO &#x591A;&#x8DEF;&#x590D;&#x7528;&#x673A;&#x5236;&#x540C;&#x65F6;&#x76D1;&#x542C;&#x591A;&#x4E2A; socket&#xFF0C;&#x6839;&#x636E; socket &#x4E0A;&#x7684;&#x4E8B;&#x4EF6;&#x6765;&#x9009;&#x62E9;&#x5BF9;&#x5E94;&#x7684;&#x4E8B;&#x4EF6;&#x5904;&#x7406;&#x5668;&#x8FDB;&#x884C;&#x5904;&#x7406;&#x3002;</p><p>&#x6587;&#x4EF6;&#x4E8B;&#x4EF6;&#x5904;&#x7406;&#x5668;&#x7684;&#x7ED3;&#x6784;&#x5305;&#x542B; 4 &#x4E2A;&#x90E8;&#x5206;&#xFF1A;</p><ul><li>&#x591A;&#x4E2A; socket</li><li>IO &#x591A;&#x8DEF;&#x590D;&#x7528;&#x7A0B;&#x5E8F;</li><li>&#x6587;&#x4EF6;&#x4E8B;&#x4EF6;&#x5206;&#x6D3E;&#x5668;</li><li>&#x4E8B;&#x4EF6;&#x5904;&#x7406;&#x5668;&#xFF08;&#x8FDE;&#x63A5;&#x5E94;&#x7B54;&#x5904;&#x7406;&#x5668;&#x3001;&#x547D;&#x4EE4;&#x8BF7;&#x6C42;&#x5904;&#x7406;&#x5668;&#x3001;&#x547D;&#x4EE4;&#x56DE;&#x590D;&#x5904;&#x7406;&#x5668;&#xFF09;</li></ul><p>&#x591A;&#x4E2A; socket &#x53EF;&#x80FD;&#x4F1A;&#x5E76;&#x53D1;&#x4EA7;&#x751F;&#x4E0D;&#x540C;&#x7684;&#x64CD;&#x4F5C;&#xFF0C;&#x6BCF;&#x4E2A;&#x64CD;&#x4F5C;&#x5BF9;&#x5E94;&#x4E0D;&#x540C;&#x7684;&#x6587;&#x4EF6;&#x4E8B;&#x4EF6;&#xFF0C;&#x4F46;&#x662F; IO &#x591A;&#x8DEF;&#x590D;&#x7528;&#x7A0B;&#x5E8F;&#x4F1A;&#x76D1;&#x542C;&#x591A;&#x4E2A; socket&#xFF0C;&#x4F1A;&#x5C06; socket &#x4EA7;&#x751F;&#x7684;&#x4E8B;&#x4EF6;&#x653E;&#x5165;&#x961F;&#x5217;&#x4E2D;&#x6392;&#x961F;&#xFF0C;&#x4E8B;&#x4EF6;&#x5206;&#x6D3E;&#x5668;&#x6BCF;&#x6B21;&#x4ECE;&#x961F;&#x5217;&#x4E2D;&#x53D6;&#x51FA;&#x4E00;&#x4E2A;&#x4E8B;&#x4EF6;&#xFF0C;&#x628A;&#x8BE5;&#x4E8B;&#x4EF6;&#x4EA4;&#x7ED9;&#x5BF9;&#x5E94;&#x7684;&#x4E8B;&#x4EF6;&#x5904;&#x7406;&#x5668;&#x8FDB;&#x884C;&#x5904;&#x7406;&#x3002;</p><p>&#x6765;&#x770B;&#x5BA2;&#x6237;&#x7AEF;&#x4E0E; redis &#x7684;&#x4E00;&#x6B21;&#x901A;&#x4FE1;&#x8FC7;&#x7A0B;&#xFF1A;</p><p><img src="/2019/02/23/Redis/Redis\01.png" alt="redis-single-thread-model"></p><ul><li>&#x5BA2;&#x6237;&#x7AEF; socket01 &#x5411; redis &#x7684; server socket &#x8BF7;&#x6C42;&#x5EFA;&#x7ACB;&#x8FDE;&#x63A5;&#xFF0C;&#x6B64;&#x65F6; server socket &#x4F1A;&#x4EA7;&#x751F;&#x4E00;&#x4E2A; <code>AE_READABLE</code> &#x4E8B;&#x4EF6;&#xFF0C;IO &#x591A;&#x8DEF;&#x590D;&#x7528;&#x7A0B;&#x5E8F;&#x76D1;&#x542C;&#x5230; server socket &#x4EA7;&#x751F;&#x7684;&#x4E8B;&#x4EF6;&#x540E;&#xFF0C;&#x5C06;&#x8BE5;&#x4E8B;&#x4EF6;&#x538B;&#x5165;&#x961F;&#x5217;&#x4E2D;&#x3002;&#x6587;&#x4EF6;&#x4E8B;&#x4EF6;&#x5206;&#x6D3E;&#x5668;&#x4ECE;&#x961F;&#x5217;&#x4E2D;&#x83B7;&#x53D6;&#x8BE5;&#x4E8B;&#x4EF6;&#xFF0C;&#x4EA4;&#x7ED9;<strong>&#x8FDE;&#x63A5;&#x5E94;&#x7B54;&#x5904;&#x7406;&#x5668;</strong>&#x3002;&#x8FDE;&#x63A5;&#x5E94;&#x7B54;&#x5904;&#x7406;&#x5668;&#x4F1A;&#x521B;&#x5EFA;&#x4E00;&#x4E2A;&#x80FD;&#x4E0E;&#x5BA2;&#x6237;&#x7AEF;&#x901A;&#x4FE1;&#x7684; socket01&#xFF0C;&#x5E76;&#x5C06;&#x8BE5; socket01 &#x7684; <code>AE_READABLE</code> &#x4E8B;&#x4EF6;&#x4E0E;&#x547D;&#x4EE4;&#x8BF7;&#x6C42;&#x5904;&#x7406;&#x5668;&#x5173;&#x8054;&#x3002;</li><li>&#x5047;&#x8BBE;&#x6B64;&#x65F6;&#x5BA2;&#x6237;&#x7AEF;&#x53D1;&#x9001;&#x4E86;&#x4E00;&#x4E2A; <code>set key value</code> &#x8BF7;&#x6C42;&#xFF0C;&#x6B64;&#x65F6; redis &#x4E2D;&#x7684; socket01 &#x4F1A;&#x4EA7;&#x751F; <code>AE_READABLE</code> &#x4E8B;&#x4EF6;&#xFF0C;IO &#x591A;&#x8DEF;&#x590D;&#x7528;&#x7A0B;&#x5E8F;&#x5C06;&#x4E8B;&#x4EF6;&#x538B;&#x5165;&#x961F;&#x5217;&#xFF0C;&#x6B64;&#x65F6;&#x4E8B;&#x4EF6;&#x5206;&#x6D3E;&#x5668;&#x4ECE;&#x961F;&#x5217;&#x4E2D;&#x83B7;&#x53D6;&#x5230;&#x8BE5;&#x4E8B;&#x4EF6;&#xFF0C;&#x7531;&#x4E8E;&#x524D;&#x9762; socket01 &#x7684; <code>AE_READABLE</code> &#x4E8B;&#x4EF6;&#x5DF2;&#x7ECF;&#x4E0E;&#x547D;&#x4EE4;&#x8BF7;&#x6C42;&#x5904;&#x7406;&#x5668;&#x5173;&#x8054;&#xFF0C;&#x56E0;&#x6B64;&#x4E8B;&#x4EF6;&#x5206;&#x6D3E;&#x5668;&#x5C06;&#x4E8B;&#x4EF6;&#x4EA4;&#x7ED9;&#x547D;&#x4EE4;&#x8BF7;&#x6C42;&#x5904;&#x7406;&#x5668;&#x6765;&#x5904;&#x7406;&#x3002;&#x547D;&#x4EE4;&#x8BF7;&#x6C42;&#x5904;&#x7406;&#x5668;&#x8BFB;&#x53D6; socket01 &#x7684; <code>key value</code> &#x5E76;&#x5728;&#x81EA;&#x5DF1;&#x5185;&#x5B58;&#x4E2D;&#x5B8C;&#x6210; <code>key value</code> &#x7684;&#x8BBE;&#x7F6E;&#x3002;&#x64CD;&#x4F5C;&#x5B8C;&#x6210;&#x540E;&#xFF0C;&#x5B83;&#x4F1A;&#x5C06; socket01 &#x7684; <code>AE_WRITABLE</code> &#x4E8B;&#x4EF6;&#x4E0E;&#x4EE4;&#x56DE;&#x590D;&#x5904;&#x7406;&#x5668;&#x5173;&#x8054;&#x3002;</li><li>&#x5982;&#x679C;&#x6B64;&#x65F6;&#x5BA2;&#x6237;&#x7AEF;&#x51C6;&#x5907;&#x597D;&#x63A5;&#x6536;&#x8FD4;&#x56DE;&#x7ED3;&#x679C;&#x4E86;&#xFF0C;&#x90A3;&#x4E48; redis &#x4E2D;&#x7684; socket01 &#x4F1A;&#x4EA7;&#x751F;&#x4E00;&#x4E2A; <code>AE_WRITABLE</code> &#x4E8B;&#x4EF6;&#xFF0C;&#x540C;&#x6837;&#x538B;&#x5165;&#x961F;&#x5217;&#x4E2D;&#xFF0C;&#x4E8B;&#x4EF6;&#x5206;&#x6D3E;&#x5668;&#x627E;&#x5230;&#x76F8;&#x5173;&#x8054;&#x7684;&#x547D;&#x4EE4;&#x56DE;&#x590D;&#x5904;&#x7406;&#x5668;&#xFF0C;&#x7531;&#x547D;&#x4EE4;&#x56DE;&#x590D;&#x5904;&#x7406;&#x5668;&#x5BF9; socket01 &#x8F93;&#x5165;&#x672C;&#x6B21;&#x64CD;&#x4F5C;&#x7684;&#x4E00;&#x4E2A;&#x7ED3;&#x679C;&#xFF0C;&#x6BD4;&#x5982; <code>ok</code>&#xFF0C;&#x4E4B;&#x540E;&#x89E3;&#x9664; socket01 &#x7684; <code>AE_WRITABLE</code> &#x4E8B;&#x4EF6;&#x4E0E;&#x547D;&#x4EE4;&#x56DE;&#x590D;&#x5904;&#x7406;&#x5668;&#x7684;&#x5173;&#x8054;&#x3002;</li></ul><p>&#x8FD9;&#x6837;&#x4FBF;&#x5B8C;&#x6210;&#x4E86;&#x4E00;&#x6B21;&#x901A;&#x4FE1;&#x3002;&#x1F608; &#x8010;&#x5FC3;&#x7406;&#x89E3;&#x4E00;&#x4E0B;&#xFF0C;&#x7070;&#x5E38;&#x91CD;&#x8981;&#x3002;&#x5982;&#x679C;&#x8FD8;&#x662F;&#x4E0D;&#x80FD;&#x7406;&#x89E3;&#xFF0C;&#x53EF;&#x4EE5;&#x5728;&#x7F51;&#x7EDC;&#x4E0A;&#x641C;&#x4E00;&#x4E9B;&#x8D44;&#x6599;&#xFF0C;&#x5728;&#x7406;&#x89E3;&#x7406;&#x89E3;&#x3002;</p><h2 id="&#x4E3A;&#x4EC0;&#x4E48;-Redis-&#x5355;&#x7EBF;&#x7A0B;&#x6A21;&#x578B;&#x4E5F;&#x80FD;&#x6548;&#x7387;&#x8FD9;&#x4E48;&#x9AD8;&#xFF1F;"><a href="#&#x4E3A;&#x4EC0;&#x4E48;-Redis-&#x5355;&#x7EBF;&#x7A0B;&#x6A21;&#x578B;&#x4E5F;&#x80FD;&#x6548;&#x7387;&#x8FD9;&#x4E48;&#x9AD8;&#xFF1F;" class="headerlink" title="&#x4E3A;&#x4EC0;&#x4E48; Redis &#x5355;&#x7EBF;&#x7A0B;&#x6A21;&#x578B;&#x4E5F;&#x80FD;&#x6548;&#x7387;&#x8FD9;&#x4E48;&#x9AD8;&#xFF1F;"></a>&#x4E3A;&#x4EC0;&#x4E48; Redis &#x5355;&#x7EBF;&#x7A0B;&#x6A21;&#x578B;&#x4E5F;&#x80FD;&#x6548;&#x7387;&#x8FD9;&#x4E48;&#x9AD8;&#xFF1F;</h2><ul><li><p>1&#x3001;&#x7EAF;&#x5185;&#x5B58;&#x64CD;&#x4F5C;&#x3002;</p><blockquote><p>Redis &#x4E3A;&#x4E86;&#x8FBE;&#x5230;&#x6700;&#x5FEB;&#x7684;&#x8BFB;&#x5199;&#x901F;&#x5EA6;&#xFF0C;&#x5C06;&#x6570;&#x636E;&#x90FD;&#x8BFB;&#x5230;&#x5185;&#x5B58;&#x4E2D;&#xFF0C;&#x5E76;&#x901A;&#x8FC7;&#x5F02;&#x6B65;&#x7684;&#x65B9;&#x5F0F;&#x5C06;&#x6570;&#x636E;&#x5199;&#x5165;&#x78C1;&#x76D8;&#x3002;&#x6240;&#x4EE5; Redis &#x5177;&#x6709;&#x5FEB;&#x901F;&#x548C;&#x6570;&#x636E;&#x6301;&#x4E45;&#x5316;&#x7684;&#x7279;&#x5F81;&#x3002;</p><p>&#x5982;&#x679C;&#x4E0D;&#x5C06;&#x6570;&#x636E;&#x653E;&#x5728;&#x5185;&#x5B58;&#x4E2D;&#xFF0C;&#x78C1;&#x76D8; I/O &#x901F;&#x5EA6;&#x4E3A;&#x4E25;&#x91CD;&#x5F71;&#x54CD; Redis &#x7684;&#x6027;&#x80FD;&#x3002;</p></blockquote></li><li><p>2&#x3001;&#x6838;&#x5FC3;&#x662F;&#x57FA;&#x4E8E;&#x975E;&#x963B;&#x585E;&#x7684; IO &#x591A;&#x8DEF;&#x590D;&#x7528;&#x673A;&#x5236;&#x3002;</p></li><li><p>3&#x3001;&#x5355;&#x7EBF;&#x7A0B;&#x53CD;&#x800C;&#x907F;&#x514D;&#x4E86;&#x591A;&#x7EBF;&#x7A0B;&#x7684;&#x9891;&#x7E41;&#x4E0A;&#x4E0B;&#x6587;&#x5207;&#x6362;&#x95EE;&#x9898;&#x3002;</p><blockquote><p>Redis &#x5229;&#x7528;&#x961F;&#x5217;&#x6280;&#x672F;&#xFF0C;&#x5C06;&#x5E76;&#x53D1;&#x8BBF;&#x95EE;&#x53D8;&#x4E3A;&#x4E32;&#x884C;&#x8BBF;&#x95EE;&#xFF0C;&#x6D88;&#x9664;&#x4E86;&#x4F20;&#x7EDF;&#x6570;&#x636E;&#x5E93;&#x4E32;&#x884C;&#x63A7;&#x5236;&#x7684;&#x5F00;&#x9500;</p></blockquote></li><li><p>4&#x3001;Redis &#x5168;&#x7A0B;&#x4F7F;&#x7528; hash &#x7ED3;&#x6784;&#xFF0C;&#x8BFB;&#x53D6;&#x901F;&#x5EA6;&#x5FEB;&#xFF0C;&#x8FD8;&#x6709;&#x4E00;&#x4E9B;&#x7279;&#x6B8A;&#x7684;&#x6570;&#x636E;&#x7ED3;&#x6784;&#xFF0C;&#x5BF9;&#x6570;&#x636E;&#x5B58;&#x50A8;&#x8FDB;&#x884C;&#x4E86;&#x4F18;&#x5316;&#xFF0C;&#x5982;&#x538B;&#x7F29;&#x8868;&#xFF0C;&#x5BF9;&#x77ED;&#x6570;&#x636E;&#x8FDB;&#x884C;&#x538B;&#x7F29;&#x5B58;&#x50A8;&#xFF0C;&#x518D;&#x5982;&#xFF0C;&#x8DF3;&#x8868;&#xFF0C;&#x4F7F;&#x7528;&#x6709;&#x5E8F;&#x7684;&#x6570;&#x636E;&#x7ED3;&#x6784;&#x52A0;&#x5FEB;&#x8BFB;&#x53D6;&#x7684;&#x901F;&#x5EA6;&#x3002;</p></li></ul><h2 id="Redis-&#x6709;&#x51E0;&#x79CD;&#x6301;&#x4E45;&#x5316;&#x65B9;&#x5F0F;&#xFF1F;"><a href="#Redis-&#x6709;&#x51E0;&#x79CD;&#x6301;&#x4E45;&#x5316;&#x65B9;&#x5F0F;&#xFF1F;" class="headerlink" title="Redis &#x6709;&#x51E0;&#x79CD;&#x6301;&#x4E45;&#x5316;&#x65B9;&#x5F0F;&#xFF1F;"></a>Redis &#x6709;&#x51E0;&#x79CD;&#x6301;&#x4E45;&#x5316;&#x65B9;&#x5F0F;&#xFF1F;</h2><h3 id="&#x6301;&#x4E45;&#x5316;&#x65B9;&#x5F0F;"><a href="#&#x6301;&#x4E45;&#x5316;&#x65B9;&#x5F0F;" class="headerlink" title="&#x6301;&#x4E45;&#x5316;&#x65B9;&#x5F0F;"></a>&#x6301;&#x4E45;&#x5316;&#x65B9;&#x5F0F;</h3><p>Redis &#x63D0;&#x4F9B;&#x4E86;&#x4E24;&#x79CD;&#x65B9;&#x5F0F;&#xFF0C;&#x5B9E;&#x73B0;&#x6570;&#x636E;&#x7684;&#x6301;&#x4E45;&#x5316;&#x5230;&#x786C;&#x76D8;&#x3002;</p><ul><li>&#x3010;&#x5168;&#x91CF;&#x3011;RDB &#x6301;&#x4E45;&#x5316;&#xFF0C;&#x662F;&#x6307;&#x5728;&#x6307;&#x5B9A;&#x7684;&#x65F6;&#x95F4;&#x95F4;&#x9694;&#x5185;&#x5C06;&#x5185;&#x5B58;&#x4E2D;&#x7684;<strong>&#x6570;&#x636E;&#x96C6;&#x5FEB;&#x7167;</strong>&#x5199;&#x5165;&#x78C1;&#x76D8;&#x3002;&#x5B9E;&#x9645;&#x64CD;&#x4F5C;&#x8FC7;&#x7A0B;&#x662F;&#xFF0C;fork &#x4E00;&#x4E2A;&#x5B50;&#x8FDB;&#x7A0B;&#xFF0C;&#x5148;&#x5C06;&#x6570;&#x636E;&#x96C6;&#x5199;&#x5165;&#x4E34;&#x65F6;&#x6587;&#x4EF6;&#xFF0C;&#x5199;&#x5165;&#x6210;&#x529F;&#x540E;&#xFF0C;&#x518D;&#x66FF;&#x6362;&#x4E4B;&#x524D;&#x7684;&#x6587;&#x4EF6;&#xFF0C;&#x7528;&#x4E8C;&#x8FDB;&#x5236;&#x538B;&#x7F29;&#x5B58;&#x50A8;&#x3002;</li><li>&#x3010;&#x589E;&#x91CF;&#x3011;AOF&#x6301;&#x4E45;&#x5316;&#xFF0C;&#x4EE5;&#x65E5;&#x5FD7;&#x7684;&#x5F62;&#x5F0F;&#x8BB0;&#x5F55;&#x670D;&#x52A1;&#x5668;&#x6240;&#x5904;&#x7406;&#x7684;&#x6BCF;&#x4E00;&#x4E2A;<strong>&#x5199;&#x3001;&#x5220;&#x9664;&#x64CD;&#x4F5C;</strong>&#xFF0C;&#x67E5;&#x8BE2;&#x64CD;&#x4F5C;&#x4E0D;&#x4F1A;&#x8BB0;&#x5F55;&#xFF0C;&#x4EE5;&#x6587;&#x672C;&#x7684;&#x65B9;&#x5F0F;&#x8BB0;&#x5F55;&#xFF0C;&#x53EF;&#x4EE5;&#x6253;&#x5F00;&#x6587;&#x4EF6;&#x770B;&#x5230;&#x8BE6;&#x7EC6;&#x7684;&#x64CD;&#x4F5C;&#x8BB0;&#x5F55;&#x3002;</li></ul><h3 id="&#x4E8C;&#x8005;&#x7684;&#x533A;&#x522B;"><a href="#&#x4E8C;&#x8005;&#x7684;&#x533A;&#x522B;" class="headerlink" title="&#x4E8C;&#x8005;&#x7684;&#x533A;&#x522B;"></a>&#x4E8C;&#x8005;&#x7684;&#x533A;&#x522B;</h3><p>RDB&#x6301;&#x4E45;&#x5316;&#x662F;&#x6307;&#x5728;&#x6307;&#x5B9A;&#x7684;&#x65F6;&#x95F4;&#x95F4;&#x9694;&#x5185;&#x5C06;&#x5185;&#x5B58;&#x4E2D;&#x7684;&#x6570;&#x636E;&#x96C6;&#x5FEB;&#x7167;&#x5199;&#x5165;&#x78C1;&#x76D8;&#xFF0C;&#x5B9E;&#x9645;&#x64CD;&#x4F5C;&#x8FC7;&#x7A0B;&#x662F;fork&#x4E00;&#x4E2A;&#x5B50;&#x8FDB;&#x7A0B;&#xFF0C;&#x5148;&#x5C06;&#x6570;&#x636E;&#x96C6;&#x5199;&#x5165;&#x4E34;&#x65F6;&#x6587;&#x4EF6;&#xFF0C;&#x5199;&#x5165;&#x6210;&#x529F;&#x540E;&#xFF0C;&#x518D;&#x66FF;&#x6362;&#x4E4B;&#x524D;&#x7684;&#x6587;&#x4EF6;&#xFF0C;&#x7528;&#x4E8C;&#x8FDB;&#x5236;&#x538B;&#x7F29;&#x5B58;&#x50A8;&#x3002;</p><p><img src="/2019/02/23/Redis/Redis\388326-20170726161552843-904424952.png" alt="img"></p><p>AOF&#x6301;&#x4E45;&#x5316;&#x4EE5;&#x65E5;&#x5FD7;&#x7684;&#x5F62;&#x5F0F;&#x8BB0;&#x5F55;&#x670D;&#x52A1;&#x5668;&#x6240;&#x5904;&#x7406;&#x7684;&#x6BCF;&#x4E00;&#x4E2A;&#x5199;&#x3001;&#x5220;&#x9664;&#x64CD;&#x4F5C;&#xFF0C;&#x67E5;&#x8BE2;&#x64CD;&#x4F5C;&#x4E0D;&#x4F1A;&#x8BB0;&#x5F55;&#xFF0C;&#x4EE5;&#x6587;&#x672C;&#x7684;&#x65B9;&#x5F0F;&#x8BB0;&#x5F55;&#xFF0C;&#x53EF;&#x4EE5;&#x6253;&#x5F00;&#x6587;&#x4EF6;&#x770B;&#x5230;&#x8BE6;&#x7EC6;&#x7684;&#x64CD;&#x4F5C;&#x8BB0;&#x5F55;&#x3002;</p><p><img src="/2019/02/23/Redis/Redis\388326-20170726161604968-371688235.png" alt="img"></p><h3 id="&#x4E8C;&#x8005;&#x4F18;&#x7F3A;&#x70B9;"><a href="#&#x4E8C;&#x8005;&#x4F18;&#x7F3A;&#x70B9;" class="headerlink" title="&#x4E8C;&#x8005;&#x4F18;&#x7F3A;&#x70B9;"></a>&#x4E8C;&#x8005;&#x4F18;&#x7F3A;&#x70B9;</h3><p><strong>RDB&#x5B58;&#x5728;&#x54EA;&#x4E9B;&#x4F18;&#x52BF;&#x5462;&#xFF1F;</strong></p><ul><li>&#x4E00;&#x65E6;&#x91C7;&#x7528;&#x8BE5;&#x65B9;&#x5F0F;&#xFF0C;&#x90A3;&#x4E48;&#x4F60;&#x7684;&#x6574;&#x4E2A;Redis&#x6570;&#x636E;&#x5E93;&#x5C06;&#x53EA;&#x5305;&#x542B;&#x4E00;&#x4E2A;&#x6587;&#x4EF6;&#xFF0C;&#x8FD9;&#x5BF9;&#x4E8E;&#x6587;&#x4EF6;&#x5907;&#x4EFD;&#x800C;&#x8A00;&#x662F;&#x975E;&#x5E38;&#x5B8C;&#x7F8E;&#x7684;&#x3002;&#x6BD4;&#x5982;&#xFF0C;&#x4F60;&#x53EF;&#x80FD;&#x6253;&#x7B97;&#x6BCF;&#x4E2A;&#x5C0F;&#x65F6;&#x5F52;&#x6863;&#x4E00;&#x6B21;&#x6700;&#x8FD1;24&#x5C0F;&#x65F6;&#x7684;&#x6570;&#x636E;&#xFF0C;&#x540C;&#x65F6;&#x8FD8;&#x8981;&#x6BCF;&#x5929;&#x5F52;&#x6863;&#x4E00;&#x6B21;&#x6700;&#x8FD1;30&#x5929;&#x7684;&#x6570;&#x636E;&#x3002;&#x901A;&#x8FC7;&#x8FD9;&#x6837;&#x7684;&#x5907;&#x4EFD;&#x7B56;&#x7565;&#xFF0C;&#x4E00;&#x65E6;&#x7CFB;&#x7EDF;&#x51FA;&#x73B0;&#x707E;&#x96BE;&#x6027;&#x6545;&#x969C;&#xFF0C;&#x6211;&#x4EEC;&#x53EF;&#x4EE5;&#x975E;&#x5E38;&#x5BB9;&#x6613;&#x7684;&#x8FDB;&#x884C;&#x6062;&#x590D;&#x3002;</li><li>&#x5BF9;&#x4E8E;&#x707E;&#x96BE;&#x6062;&#x590D;&#x800C;&#x8A00;&#xFF0C;RDB&#x662F;&#x975E;&#x5E38;&#x4E0D;&#x9519;&#x7684;&#x9009;&#x62E9;&#x3002;&#x56E0;&#x4E3A;&#x6211;&#x4EEC;&#x53EF;&#x4EE5;&#x975E;&#x5E38;&#x8F7B;&#x677E;&#x7684;&#x5C06;&#x4E00;&#x4E2A;&#x5355;&#x72EC;&#x7684;&#x6587;&#x4EF6;&#x538B;&#x7F29;&#x540E;&#x518D;&#x8F6C;&#x79FB;&#x5230;&#x5176;&#x5B83;&#x5B58;&#x50A8;&#x4ECB;&#x8D28;&#x4E0A;&#x3002;</li><li>&#x6027;&#x80FD;&#x6700;&#x5927;&#x5316;&#x3002;&#x5BF9;&#x4E8E;Redis&#x7684;&#x670D;&#x52A1;&#x8FDB;&#x7A0B;&#x800C;&#x8A00;&#xFF0C;&#x5728;&#x5F00;&#x59CB;&#x6301;&#x4E45;&#x5316;&#x65F6;&#xFF0C;&#x5B83;&#x552F;&#x4E00;&#x9700;&#x8981;&#x505A;&#x7684;&#x53EA;&#x662F;fork&#x51FA;&#x5B50;&#x8FDB;&#x7A0B;&#xFF0C;&#x4E4B;&#x540E;&#x518D;&#x7531;&#x5B50;&#x8FDB;&#x7A0B;&#x5B8C;&#x6210;&#x8FD9;&#x4E9B;&#x6301;&#x4E45;&#x5316;&#x7684;&#x5DE5;&#x4F5C;&#xFF0C;&#x8FD9;&#x6837;&#x5C31;&#x53EF;&#x4EE5;&#x6781;&#x5927;&#x7684;&#x907F;&#x514D;&#x670D;&#x52A1;&#x8FDB;&#x7A0B;&#x6267;&#x884C;IO&#x64CD;&#x4F5C;&#x4E86;&#x3002;</li><li>&#x76F8;&#x6BD4;&#x4E8E;AOF&#x673A;&#x5236;&#xFF0C;&#x5982;&#x679C;&#x6570;&#x636E;&#x96C6;&#x5F88;&#x5927;&#xFF0C;RDB&#x7684;&#x542F;&#x52A8;&#x6548;&#x7387;&#x4F1A;&#x66F4;&#x9AD8;&#x3002;</li></ul><p><strong>RDB&#x53C8;&#x5B58;&#x5728;&#x54EA;&#x4E9B;&#x52A3;&#x52BF;&#x5462;&#xFF1F;</strong></p><ul><li>.&#x5982;&#x679C;&#x4F60;&#x60F3;&#x4FDD;&#x8BC1;&#x6570;&#x636E;&#x7684;&#x9AD8;&#x53EF;&#x7528;&#x6027;&#xFF0C;&#x5373;&#x6700;&#x5927;&#x9650;&#x5EA6;&#x7684;&#x907F;&#x514D;&#x6570;&#x636E;&#x4E22;&#x5931;&#xFF0C;&#x90A3;&#x4E48;RDB&#x5C06;&#x4E0D;&#x662F;&#x4E00;&#x4E2A;&#x5F88;&#x597D;&#x7684;&#x9009;&#x62E9;&#x3002;&#x56E0;&#x4E3A;&#x7CFB;&#x7EDF;&#x4E00;&#x65E6;&#x5728;&#x5B9A;&#x65F6;&#x6301;&#x4E45;&#x5316;&#x4E4B;&#x524D;&#x51FA;&#x73B0;&#x5B95;&#x673A;&#x73B0;&#x8C61;&#xFF0C;&#x6B64;&#x524D;&#x6CA1;&#x6709;&#x6765;&#x5F97;&#x53CA;&#x5199;&#x5165;&#x78C1;&#x76D8;&#x7684;&#x6570;&#x636E;&#x90FD;&#x5C06;&#x4E22;&#x5931;&#x3002;</li><li>&#x7531;&#x4E8E;RDB&#x662F;&#x901A;&#x8FC7;fork&#x5B50;&#x8FDB;&#x7A0B;&#x6765;&#x534F;&#x52A9;&#x5B8C;&#x6210;&#x6570;&#x636E;&#x6301;&#x4E45;&#x5316;&#x5DE5;&#x4F5C;&#x7684;&#xFF0C;&#x56E0;&#x6B64;&#xFF0C;&#x5982;&#x679C;&#x5F53;&#x6570;&#x636E;&#x96C6;&#x8F83;&#x5927;&#x65F6;&#xFF0C;&#x53EF;&#x80FD;&#x4F1A;&#x5BFC;&#x81F4;&#x6574;&#x4E2A;&#x670D;&#x52A1;&#x5668;&#x505C;&#x6B62;&#x670D;&#x52A1;&#x51E0;&#x767E;&#x6BEB;&#x79D2;&#xFF0C;&#x751A;&#x81F3;&#x662F;1&#x79D2;&#x949F;&#x3002;</li></ul><p><strong>AOF&#x7684;&#x4F18;&#x52BF;&#x6709;&#x54EA;&#x4E9B;&#x5462;&#xFF1F;</strong></p><ul><li>&#x8BE5;&#x673A;&#x5236;&#x53EF;&#x4EE5;&#x5E26;&#x6765;&#x66F4;&#x9AD8;&#x7684;&#x6570;&#x636E;&#x5B89;&#x5168;&#x6027;&#xFF0C;&#x5373;&#x6570;&#x636E;&#x6301;&#x4E45;&#x6027;&#x3002;Redis&#x4E2D;&#x63D0;&#x4F9B;&#x4E86;3&#x4E2D;&#x540C;&#x6B65;&#x7B56;&#x7565;&#xFF0C;&#x5373;&#x6BCF;&#x79D2;&#x540C;&#x6B65;&#x3001;&#x6BCF;&#x4FEE;&#x6539;&#x540C;&#x6B65;&#x548C;&#x4E0D;&#x540C;&#x6B65;&#x3002;&#x4E8B;&#x5B9E;&#x4E0A;&#xFF0C;&#x6BCF;&#x79D2;&#x540C;&#x6B65;&#x4E5F;&#x662F;&#x5F02;&#x6B65;&#x5B8C;&#x6210;&#x7684;&#xFF0C;&#x5176;&#x6548;&#x7387;&#x4E5F;&#x662F;&#x975E;&#x5E38;&#x9AD8;&#x7684;&#xFF0C;&#x6240;&#x5DEE;&#x7684;&#x662F;&#x4E00;&#x65E6;&#x7CFB;&#x7EDF;&#x51FA;&#x73B0;&#x5B95;&#x673A;&#x73B0;&#x8C61;&#xFF0C;&#x90A3;&#x4E48;&#x8FD9;&#x4E00;&#x79D2;&#x949F;&#x4E4B;&#x5185;&#x4FEE;&#x6539;&#x7684;&#x6570;&#x636E;&#x5C06;&#x4F1A;&#x4E22;&#x5931;&#x3002;&#x800C;&#x6BCF;&#x4FEE;&#x6539;&#x540C;&#x6B65;&#xFF0C;&#x6211;&#x4EEC;&#x53EF;&#x4EE5;&#x5C06;&#x5176;&#x89C6;&#x4E3A;&#x540C;&#x6B65;&#x6301;&#x4E45;&#x5316;&#xFF0C;&#x5373;&#x6BCF;&#x6B21;&#x53D1;&#x751F;&#x7684;&#x6570;&#x636E;&#x53D8;&#x5316;&#x90FD;&#x4F1A;&#x88AB;&#x7ACB;&#x5373;&#x8BB0;&#x5F55;&#x5230;&#x78C1;&#x76D8;&#x4E2D;&#x3002;&#x53EF;&#x4EE5;&#x9884;&#x89C1;&#xFF0C;&#x8FD9;&#x79CD;&#x65B9;&#x5F0F;&#x5728;&#x6548;&#x7387;&#x4E0A;&#x662F;&#x6700;&#x4F4E;&#x7684;&#x3002;&#x81F3;&#x4E8E;&#x65E0;&#x540C;&#x6B65;&#xFF0C;&#x65E0;&#x9700;&#x591A;&#x8A00;&#xFF0C;&#x6211;&#x60F3;&#x5927;&#x5BB6;&#x90FD;&#x80FD;&#x6B63;&#x786E;&#x7684;&#x7406;&#x89E3;&#x5B83;&#x3002;</li><li>&#x7531;&#x4E8E;&#x8BE5;&#x673A;&#x5236;&#x5BF9;&#x65E5;&#x5FD7;&#x6587;&#x4EF6;&#x7684;&#x5199;&#x5165;&#x64CD;&#x4F5C;&#x91C7;&#x7528;&#x7684;&#x662F;append&#x6A21;&#x5F0F;&#xFF0C;&#x56E0;&#x6B64;&#x5728;&#x5199;&#x5165;&#x8FC7;&#x7A0B;&#x4E2D;&#x5373;&#x4F7F;&#x51FA;&#x73B0;&#x5B95;&#x673A;&#x73B0;&#x8C61;&#xFF0C;&#x4E5F;&#x4E0D;&#x4F1A;&#x7834;&#x574F;&#x65E5;&#x5FD7;&#x6587;&#x4EF6;&#x4E2D;&#x5DF2;&#x7ECF;&#x5B58;&#x5728;&#x7684;&#x5185;&#x5BB9;&#x3002;&#x7136;&#x800C;&#x5982;&#x679C;&#x6211;&#x4EEC;&#x672C;&#x6B21;&#x64CD;&#x4F5C;&#x53EA;&#x662F;&#x5199;&#x5165;&#x4E86;&#x4E00;&#x534A;&#x6570;&#x636E;&#x5C31;&#x51FA;&#x73B0;&#x4E86;&#x7CFB;&#x7EDF;&#x5D29;&#x6E83;&#x95EE;&#x9898;&#xFF0C;&#x4E0D;&#x7528;&#x62C5;&#x5FC3;&#xFF0C;&#x5728;Redis&#x4E0B;&#x4E00;&#x6B21;&#x542F;&#x52A8;&#x4E4B;&#x524D;&#xFF0C;&#x6211;&#x4EEC;&#x53EF;&#x4EE5;&#x901A;&#x8FC7;redis-check-aof&#x5DE5;&#x5177;&#x6765;&#x5E2E;&#x52A9;&#x6211;&#x4EEC;&#x89E3;&#x51B3;&#x6570;&#x636E;&#x4E00;&#x81F4;&#x6027;&#x7684;&#x95EE;&#x9898;&#x3002;</li><li>&#x5982;&#x679C;&#x65E5;&#x5FD7;&#x8FC7;&#x5927;&#xFF0C;Redis&#x53EF;&#x4EE5;&#x81EA;&#x52A8;&#x542F;&#x7528;rewrite&#x673A;&#x5236;&#x3002;&#x5373;Redis&#x4EE5;append&#x6A21;&#x5F0F;&#x4E0D;&#x65AD;&#x7684;&#x5C06;&#x4FEE;&#x6539;&#x6570;&#x636E;&#x5199;&#x5165;&#x5230;&#x8001;&#x7684;&#x78C1;&#x76D8;&#x6587;&#x4EF6;&#x4E2D;&#xFF0C;&#x540C;&#x65F6;Redis&#x8FD8;&#x4F1A;&#x521B;&#x5EFA;&#x4E00;&#x4E2A;&#x65B0;&#x7684;&#x6587;&#x4EF6;&#x7528;&#x4E8E;&#x8BB0;&#x5F55;&#x6B64;&#x671F;&#x95F4;&#x6709;&#x54EA;&#x4E9B;&#x4FEE;&#x6539;&#x547D;&#x4EE4;&#x88AB;&#x6267;&#x884C;&#x3002;&#x56E0;&#x6B64;&#x5728;&#x8FDB;&#x884C;rewrite&#x5207;&#x6362;&#x65F6;&#x53EF;&#x4EE5;&#x66F4;&#x597D;&#x7684;&#x4FDD;&#x8BC1;&#x6570;&#x636E;&#x5B89;&#x5168;&#x6027;&#x3002;</li><li>AOF&#x5305;&#x542B;&#x4E00;&#x4E2A;&#x683C;&#x5F0F;&#x6E05;&#x6670;&#x3001;&#x6613;&#x4E8E;&#x7406;&#x89E3;&#x7684;&#x65E5;&#x5FD7;&#x6587;&#x4EF6;&#x7528;&#x4E8E;&#x8BB0;&#x5F55;&#x6240;&#x6709;&#x7684;&#x4FEE;&#x6539;&#x64CD;&#x4F5C;&#x3002;&#x4E8B;&#x5B9E;&#x4E0A;&#xFF0C;&#x6211;&#x4EEC;&#x4E5F;&#x53EF;&#x4EE5;&#x901A;&#x8FC7;&#x8BE5;&#x6587;&#x4EF6;&#x5B8C;&#x6210;&#x6570;&#x636E;&#x7684;&#x91CD;&#x5EFA;&#x3002;</li></ul><p><strong>AOF&#x7684;&#x52A3;&#x52BF;&#x6709;&#x54EA;&#x4E9B;&#x5462;&#xFF1F;</strong></p><ul><li>&#x5BF9;&#x4E8E;&#x76F8;&#x540C;&#x6570;&#x91CF;&#x7684;&#x6570;&#x636E;&#x96C6;&#x800C;&#x8A00;&#xFF0C;AOF&#x6587;&#x4EF6;&#x901A;&#x5E38;&#x8981;&#x5927;&#x4E8E;RDB&#x6587;&#x4EF6;&#x3002;RDB &#x5728;&#x6062;&#x590D;&#x5927;&#x6570;&#x636E;&#x96C6;&#x65F6;&#x7684;&#x901F;&#x5EA6;&#x6BD4; AOF &#x7684;&#x6062;&#x590D;&#x901F;&#x5EA6;&#x8981;&#x5FEB;&#x3002;</li><li>&#x6839;&#x636E;&#x540C;&#x6B65;&#x7B56;&#x7565;&#x7684;&#x4E0D;&#x540C;&#xFF0C;AOF&#x5728;&#x8FD0;&#x884C;&#x6548;&#x7387;&#x4E0A;&#x5F80;&#x5F80;&#x4F1A;&#x6162;&#x4E8E;RDB&#x3002;&#x603B;&#x4E4B;&#xFF0C;&#x6BCF;&#x79D2;&#x540C;&#x6B65;&#x7B56;&#x7565;&#x7684;&#x6548;&#x7387;&#x662F;&#x6BD4;&#x8F83;&#x9AD8;&#x7684;&#xFF0C;&#x540C;&#x6B65;&#x7981;&#x7528;&#x7B56;&#x7565;&#x7684;&#x6548;&#x7387;&#x548C;RDB&#x4E00;&#x6837;&#x9AD8;&#x6548;&#x3002;</li></ul><p>&#x4E8C;&#x8005;&#x9009;&#x62E9;&#x7684;&#x6807;&#x51C6;&#xFF0C;&#x5C31;&#x662F;&#x770B;&#x7CFB;&#x7EDF;&#x662F;&#x613F;&#x610F;&#x727A;&#x7272;&#x4E00;&#x4E9B;&#x6027;&#x80FD;&#xFF0C;&#x6362;&#x53D6;&#x66F4;&#x9AD8;&#x7684;&#x7F13;&#x5B58;&#x4E00;&#x81F4;&#x6027;&#xFF08;aof&#xFF09;&#xFF0C;&#x8FD8;&#x662F;&#x613F;&#x610F;&#x5199;&#x64CD;&#x4F5C;&#x9891;&#x7E41;&#x7684;&#x65F6;&#x5019;&#xFF0C;&#x4E0D;&#x542F;&#x7528;&#x5907;&#x4EFD;&#x6765;&#x6362;&#x53D6;&#x66F4;&#x9AD8;&#x7684;&#x6027;&#x80FD;&#xFF0C;&#x5F85;&#x624B;&#x52A8;&#x8FD0;&#x884C;save&#x7684;&#x65F6;&#x5019;&#xFF0C;&#x518D;&#x505A;&#x5907;&#x4EFD;&#xFF08;rdb&#xFF09;&#x3002;rdb&#x8FD9;&#x4E2A;&#x5C31;&#x66F4;&#x6709;&#x4E9B; eventually consistent &#x7684;&#x610F;&#x601D;&#x4E86;&#x3002;</p><h3 id="&#x5E38;&#x7528;&#x914D;&#x7F6E;"><a href="#&#x5E38;&#x7528;&#x914D;&#x7F6E;" class="headerlink" title="&#x5E38;&#x7528;&#x914D;&#x7F6E;"></a>&#x5E38;&#x7528;&#x914D;&#x7F6E;</h3><p><strong>RDB&#x6301;&#x4E45;&#x5316;&#x914D;&#x7F6E;</strong></p><p>Redis&#x4F1A;&#x5C06;&#x6570;&#x636E;&#x96C6;&#x7684;&#x5FEB;&#x7167;dump&#x5230;dump.rdb&#x6587;&#x4EF6;&#x4E2D;&#x3002;&#x6B64;&#x5916;&#xFF0C;&#x6211;&#x4EEC;&#x4E5F;&#x53EF;&#x4EE5;&#x901A;&#x8FC7;&#x914D;&#x7F6E;&#x6587;&#x4EF6;&#x6765;&#x4FEE;&#x6539;Redis&#x670D;&#x52A1;&#x5668;dump&#x5FEB;&#x7167;&#x7684;&#x9891;&#x7387;&#xFF0C;&#x5728;&#x6253;&#x5F00;6379.conf&#x6587;&#x4EF6;&#x4E4B;&#x540E;&#xFF0C;&#x6211;&#x4EEC;&#x641C;&#x7D22;save&#xFF0C;&#x53EF;&#x4EE5;&#x770B;&#x5230;&#x4E0B;&#x9762;&#x7684;&#x914D;&#x7F6E;&#x4FE1;&#x606F;&#xFF1A;</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">save 900 1         # &#x5728;900&#x79D2;(15&#x5206;&#x949F;)&#x4E4B;&#x540E;&#xFF0C;&#x5982;&#x679C;&#x81F3;&#x5C11;&#x6709;1&#x4E2A;key&#x53D1;&#x751F;&#x53D8;&#x5316;&#xFF0C;&#x5219;dump&#x5185;&#x5B58;&#x5FEB;&#x7167;&#x3002;</span><br><span class="line">save 300 10        # &#x5728;300&#x79D2;(5&#x5206;&#x949F;)&#x4E4B;&#x540E;&#xFF0C;&#x5982;&#x679C;&#x81F3;&#x5C11;&#x6709;10&#x4E2A;key&#x53D1;&#x751F;&#x53D8;&#x5316;&#xFF0C;&#x5219;dump&#x5185;&#x5B58;&#x5FEB;&#x7167;&#x3002;</span><br><span class="line">save 60 10000      # &#x5728;60&#x79D2;(1&#x5206;&#x949F;)&#x4E4B;&#x540E;&#xFF0C;&#x5982;&#x679C;&#x81F3;&#x5C11;&#x6709;10000&#x4E2A;key&#x53D1;&#x751F;&#x53D8;&#x5316;&#xFF0C;&#x5219;dump&#x5185;&#x5B58;&#x5FEB;&#x7167;&#x3002;</span><br></pre></td></tr></table></figure><p><strong>AOF&#x6301;&#x4E45;&#x5316;&#x914D;&#x7F6E;</strong></p><p>&#x5728;Redis&#x7684;&#x914D;&#x7F6E;&#x6587;&#x4EF6;&#x4E2D;&#x5B58;&#x5728;&#x4E09;&#x79CD;&#x540C;&#x6B65;&#x65B9;&#x5F0F;&#xFF0C;&#x5B83;&#x4EEC;&#x5206;&#x522B;&#x662F;&#xFF1A;</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">appendfsync always     # &#x6BCF;&#x6B21;&#x6709;&#x6570;&#x636E;&#x4FEE;&#x6539;&#x53D1;&#x751F;&#x65F6;&#x90FD;&#x4F1A;&#x5199;&#x5165;AOF&#x6587;&#x4EF6;&#x3002;</span><br><span class="line">appendfsync everysec   # &#x6BCF;&#x79D2;&#x949F;&#x540C;&#x6B65;&#x4E00;&#x6B21;&#xFF0C;&#x8BE5;&#x7B56;&#x7565;&#x4E3A;AOF&#x7684;&#x7F3A;&#x7701;&#x7B56;&#x7565;&#x3002;</span><br><span class="line">appendfsync no         # &#x4ECE;&#x4E0D;&#x540C;&#x6B65;&#x3002;&#x9AD8;&#x6548;&#x4F46;&#x662F;&#x6570;&#x636E;&#x4E0D;&#x4F1A;&#x88AB;&#x6301;&#x4E45;&#x5316;&#x3002;</span><br></pre></td></tr></table></figure><h3 id="&#x5982;&#x4F55;&#x9009;&#x62E9;"><a href="#&#x5982;&#x4F55;&#x9009;&#x62E9;" class="headerlink" title="&#x5982;&#x4F55;&#x9009;&#x62E9;"></a>&#x5982;&#x4F55;&#x9009;&#x62E9;</h3><ul><li><p>&#x4E0D;&#x8981;&#x4EC5;&#x4EC5;&#x4F7F;&#x7528; RDB&#xFF0C;&#x56E0;&#x4E3A;&#x90A3;&#x6837;&#x4F1A;&#x5BFC;&#x81F4;&#x4F60;&#x4E22;&#x5931;&#x5F88;&#x591A;&#x6570;&#x636E;</p></li><li><p>&#x4E5F;&#x4E0D;&#x8981;&#x4EC5;&#x4EC5;&#x4F7F;&#x7528; AOF&#xFF0C;&#x56E0;&#x4E3A;&#x90A3;&#x6837;&#x6709;&#x4E24;&#x4E2A;&#x95EE;&#x9898;&#xFF0C;&#x7B2C;&#x4E00;&#xFF0C;&#x4F60;&#x901A;&#x8FC7; AOF &#x505A;&#x51B7;&#x5907;&#xFF0C;&#x6CA1;&#x6709; RDB &#x505A;&#x51B7;&#x5907;&#xFF0C;&#x6765;&#x7684;&#x6062;&#x590D;&#x901F;&#x5EA6;&#x66F4;&#x5FEB;; &#x7B2C;&#x4E8C;&#xFF0C;RDB &#x6BCF;&#x6B21;&#x7B80;&#x5355;&#x7C97;&#x66B4;&#x751F;&#x6210;&#x6570;&#x636E;&#x5FEB;&#x7167;&#xFF0C;&#x66F4;&#x52A0;&#x5065;&#x58EE;&#xFF0C;&#x53EF;&#x4EE5;&#x907F;&#x514D; AOF &#x8FD9;&#x79CD;&#x590D;&#x6742;&#x7684;&#x5907;&#x4EFD;&#x548C;&#x6062;&#x590D;&#x673A;&#x5236;&#x7684; bug &#x3002;</p></li><li><p>Redis &#x652F;&#x6301;&#x540C;&#x65F6;&#x5F00;&#x542F;&#x5F00;&#x542F;&#x4E24;&#x79CD;&#x6301;&#x4E45;&#x5316;&#x65B9;&#x5F0F;&#xFF0C;&#x6211;&#x4EEC;&#x53EF;&#x4EE5;&#x7EFC;&#x5408;&#x4F7F;&#x7528; AOF &#x548C; RDB &#x4E24;&#x79CD;&#x6301;&#x4E45;&#x5316;&#x673A;&#x5236;&#xFF0C;&#x7528; AOF &#x6765;&#x4FDD;&#x8BC1;&#x6570;&#x636E;&#x4E0D;&#x4E22;&#x5931;&#xFF0C;&#x4F5C;&#x4E3A;&#x6570;&#x636E;&#x6062;&#x590D;&#x7684;&#x7B2C;&#x4E00;&#x9009;&#x62E9;; &#x7528; RDB &#x6765;&#x505A;&#x4E0D;&#x540C;&#x7A0B;&#x5EA6;&#x7684;&#x51B7;&#x5907;&#xFF0C;&#x5728; AOF &#x6587;&#x4EF6;&#x90FD;&#x4E22;&#x5931;&#x6216;&#x635F;&#x574F;&#x4E0D;&#x53EF;&#x7528;&#x7684;&#x65F6;&#x5019;&#xFF0C;&#x8FD8;&#x53EF;&#x4EE5;&#x4F7F;&#x7528; RDB &#x6765;&#x8FDB;&#x884C;&#x5FEB;&#x901F;&#x7684;&#x6570;&#x636E;&#x6062;&#x590D;&#x3002;</p><ul><li><p>&#x5982;&#x679C;&#x540C;&#x65F6;&#x4F7F;&#x7528; RDB &#x548C; AOF &#x4E24;&#x79CD;&#x6301;&#x4E45;&#x5316;&#x673A;&#x5236;&#xFF0C;&#x90A3;&#x4E48;&#x5728; Redis &#x91CD;&#x542F;&#x7684;&#x65F6;&#x5019;&#xFF0C;&#x4F1A;&#x4F7F;&#x7528; <strong>AOF</strong> &#x6765;&#x91CD;&#x65B0;&#x6784;&#x5EFA;&#x6570;&#x636E;&#xFF0C;&#x56E0;&#x4E3A; AOF &#x4E2D;&#x7684;<strong>&#x6570;&#x636E;&#x66F4;&#x52A0;&#x5B8C;&#x6574;</strong>&#x3002;</p><blockquote><p>&#x4E00;&#x822C;&#x6765;&#x8BF4;&#xFF0C; &#x5982;&#x679C;&#x60F3;&#x8FBE;&#x5230;&#x8DB3;&#x4EE5;&#x5AB2;&#x7F8E; PostgreSQL &#x7684;&#x6570;&#x636E;&#x5B89;&#x5168;&#x6027;&#xFF0C; &#x4F60;&#x5E94;&#x8BE5;&#x540C;&#x65F6;&#x4F7F;&#x7528;&#x4E24;&#x79CD;&#x6301;&#x4E45;&#x5316;&#x529F;&#x80FD;&#x3002;&#x5982;&#x679C;&#x4F60;&#x975E;&#x5E38;&#x5173;&#x5FC3;&#x4F60;&#x7684;&#x6570;&#x636E;&#xFF0C; &#x4F46;&#x4ECD;&#x7136;&#x53EF;&#x4EE5;&#x627F;&#x53D7;&#x6570;&#x5206;&#x949F;&#x4EE5;&#x5185;&#x7684;&#x6570;&#x636E;&#x4E22;&#x5931;&#xFF0C;&#x90A3;&#x4E48;&#x4F60;&#x53EF;&#x4EE5;&#x53EA;&#x4F7F;&#x7528; RDB &#x6301;&#x4E45;&#x5316;&#x3002;</p><p>&#x6709;&#x5F88;&#x591A;&#x7528;&#x6237;&#x90FD;&#x53EA;&#x4F7F;&#x7528; AOF &#x6301;&#x4E45;&#x5316;&#xFF0C;&#x4F46;&#x5E76;&#x4E0D;&#x63A8;&#x8350;&#x8FD9;&#x79CD;&#x65B9;&#x5F0F;&#xFF1A;&#x56E0;&#x4E3A;&#x5B9A;&#x65F6;&#x751F;&#x6210; RDB &#x5FEB;&#x7167;&#xFF08;snapshot&#xFF09;&#x975E;&#x5E38;&#x4FBF;&#x4E8E;&#x8FDB;&#x884C;&#x6570;&#x636E;&#x5E93;&#x5907;&#x4EFD;&#xFF0C; &#x5E76;&#x4E14; RDB &#x6062;&#x590D;&#x6570;&#x636E;&#x96C6;&#x7684;&#x901F;&#x5EA6;&#x4E5F;&#x8981;&#x6BD4;AOF&#x6062;&#x590D;&#x7684;&#x901F;&#x5EA6;&#x8981;&#x5FEB;&#xFF0C;&#x9664;&#x6B64;&#x4E4B;&#x5916;&#xFF0C;&#x4F7F;&#x7528; RDB &#x8FD8;&#x53EF;&#x4EE5;&#x907F;&#x514D;&#x4E4B;&#x524D;&#x63D0;&#x5230;&#x7684; AOF &#x7A0B;&#x5E8F;&#x7684; bug&#x3002;</p></blockquote></li></ul></li></ul><p>&#x5728; Redis4.0 &#x7248;&#x672C;&#x5F00;&#x59CB;&#xFF0C;&#x5141;&#x8BB8;&#x4F60;&#x4F7F;&#x7528; RDB-AOF &#x6DF7;&#x5408;&#x6301;&#x4E45;&#x5316;&#x65B9;&#x5F0F;&#xFF0C;&#x8BE6;&#x7EC6;&#x53EF;&#x89C1; <a href="https://yq.aliyun.com/articles/193034" target="_blank" rel="noopener">&#x300A;Redis4.0 &#x4E4B; RDB-AOF &#x6DF7;&#x5408;&#x6301;&#x4E45;&#x5316;&#x300B;</a> &#x3002;&#x4E5F;&#x56E0;&#x6B64;&#xFF0C;RDB &#x548C; AOF &#x540C;&#x65F6;&#x4F7F;&#x7528;&#xFF0C;&#x662F;&#x5E0C;&#x671B;&#x8FBE;&#x5230;&#x5B89;&#x5168;&#x7684;&#x6301;&#x4E45;&#x5316;&#x7684;&#x63A8;&#x8350;&#x65B9;&#x5F0F;&#x3002;</p><h3 id="&#x81EA;&#x52A8;&#x5316;&#x89E6;&#x53D1;-RDB-&#x6301;&#x4E45;&#x5316;&#x7684;&#x65B9;&#x5F0F;"><a href="#&#x81EA;&#x52A8;&#x5316;&#x89E6;&#x53D1;-RDB-&#x6301;&#x4E45;&#x5316;&#x7684;&#x65B9;&#x5F0F;" class="headerlink" title="&#x81EA;&#x52A8;&#x5316;&#x89E6;&#x53D1; RDB &#x6301;&#x4E45;&#x5316;&#x7684;&#x65B9;&#x5F0F;"></a>&#x81EA;&#x52A8;&#x5316;&#x89E6;&#x53D1; RDB &#x6301;&#x4E45;&#x5316;&#x7684;&#x65B9;&#x5F0F;</h3><ul><li>&#x6839;&#x636E; redis.conf &#x914D;&#x7F6E;&#x4E2D; SAVE m n &#x5B9A;&#x65F6;&#x89E6;&#x53D1;&#xFF08;&#x4F7F;&#x7528;&#x7684;BGSAVE&#xFF09;</li><li>&#x4E3B;&#x4ECE;&#x590D;&#x5236;&#x65F6;&#xFF0C;&#x4E3B;&#x8282;&#x70B9;&#x81EA;&#x52A8;&#x89E6;&#x53D1;</li><li>&#x6267;&#x884C; Debug Reload</li><li>&#x6267;&#x884C; Shutdown &#x4E14;&#x6CA1;&#x6709;&#x5F00;&#x542F; AOF &#x6301;&#x4E45;&#x5316;</li></ul><p>BGSAVE &#x539F;&#x7406;&#xFF1A;</p><p><img src="/2019/02/23/Redis/Redis\timg.jpg" alt="timg"></p><p><strong>&#x91CD;&#x8981;&#x77E5;&#x8BC6;&#xFF1A;</strong></p><ul><li>bgsave &#x505A;&#x955C;&#x50CF;&#x5168;&#x91CF;&#x6301;&#x4E45;&#x5316;&#xFF0C;AOF &#x505A;&#x589E;&#x91CF;&#x6301;&#x4E45;&#x5316;&#x3002;&#x56E0;&#x4E3A; bgsave &#x4F1A;&#x8017;&#x8D39;&#x8F83;&#x957F;&#x65F6;&#x95F4;&#xFF0C;&#x4E0D;&#x591F;&#x5B9E;&#x65F6;&#xFF0C;&#x5728;&#x505C;&#x673A;&#x7684;&#x65F6;&#x5019;&#x4F1A;&#x5BFC;&#x81F4;&#x5927;&#x91CF;&#x4E22;&#x5931;&#x6570;&#x636E;&#xFF0C;&#x6240;&#x4EE5;&#x9700;&#x8981; AOF &#x6765;&#x914D;&#x5408;&#x4F7F;&#x7528;&#x3002;&#x5728; Redis &#x5B9E;&#x4F8B;&#x91CD;&#x542F;&#x65F6;&#xFF0C;&#x4F1A;&#x4F7F;&#x7528; bgsave &#x6301;&#x4E45;&#x5316;&#x6587;&#x4EF6;&#x91CD;&#x65B0;&#x6784;&#x5EFA;&#x5185;&#x5B58;&#xFF0C;&#x518D;&#x4F7F;&#x7528; AOF &#x91CD;&#x653E;&#x8FD1;&#x671F;&#x7684;&#x64CD;&#x4F5C;&#x6307;&#x4EE4;&#x6765;&#x5B9E;&#x73B0;&#x5B8C;&#x6574;&#x6062;&#x590D;&#x91CD;&#x542F;&#x4E4B;&#x524D;&#x7684;&#x72B6;&#x6001;&#x3002;</li><li>&#x5BF9;&#x65B9;&#x8FFD;&#x95EE;&#x90A3;&#x5982;&#x679C;&#x7A81;&#x7136;&#x673A;&#x5668;&#x6389;&#x7535;&#x4F1A;&#x600E;&#x6837;&#xFF1F;&#x53D6;&#x51B3;&#x4E8E; AOF &#x65E5;&#x5FD7; sync &#x5C5E;&#x6027;&#x7684;&#x914D;&#x7F6E;&#xFF0C;&#x5982;&#x679C;&#x4E0D;&#x8981;&#x6C42;&#x6027;&#x80FD;&#xFF0C;&#x5728;&#x6BCF;&#x6761;&#x5199;&#x6307;&#x4EE4;&#x65F6;&#x90FD; sync &#x4E00;&#x4E0B;&#x78C1;&#x76D8;&#xFF0C;&#x5C31;&#x4E0D;&#x4F1A;&#x4E22;&#x5931;&#x6570;&#x636E;&#x3002;&#x4F46;&#x662F;&#x5728;&#x9AD8;&#x6027;&#x80FD;&#x7684;&#x8981;&#x6C42;&#x4E0B;&#x6BCF;&#x6B21;&#x90FD; sync &#x662F;&#x4E0D;&#x73B0;&#x5B9E;&#x7684;&#xFF0C;&#x4E00;&#x822C;&#x90FD;&#x4F7F;&#x7528;&#x5B9A;&#x65F6; sync &#xFF0C;&#x6BD4;&#x5982; 1 &#x79D2; 1 &#x6B21;&#xFF0C;&#x8FD9;&#x4E2A;&#x65F6;&#x5019;&#x6700;&#x591A;&#x5C31;&#x4F1A;&#x4E22;&#x5931; 1 &#x79D2;&#x7684;&#x6570;&#x636E;&#x3002;</li><li>&#x5BF9;&#x65B9;&#x8FFD;&#x95EE; bgsave &#x7684;&#x539F;&#x7406;&#x662F;&#x4EC0;&#x4E48;&#xFF1F;&#x4F60;&#x7ED9;&#x51FA;&#x4E24;&#x4E2A;&#x8BCD;&#x6C47;&#x5C31;&#x53EF;&#x4EE5;&#x4E86;&#xFF0C;fork &#x548C; cow &#x3002;fork &#x662F;&#x6307; Redis &#x901A;&#x8FC7;&#x521B;&#x5EFA;&#x5B50;&#x8FDB;&#x7A0B;&#x6765;&#x8FDB;&#x884C; bgsave &#x64CD;&#x4F5C;&#x3002;cow &#x6307;&#x7684;&#x662F; copy on write &#xFF0C;&#x5B50;&#x8FDB;&#x7A0B;&#x521B;&#x5EFA;&#x540E;&#xFF0C;&#x7236;&#x5B50;&#x8FDB;&#x7A0B;&#x5171;&#x4EAB;&#x6570;&#x636E;&#x6BB5;&#xFF0C;&#x7236;&#x8FDB;&#x7A0B;&#x7EE7;&#x7EED;&#x63D0;&#x4F9B;&#x8BFB;&#x5199;&#x670D;&#x52A1;&#xFF0C;&#x5199;&#x810F;&#x7684;&#x9875;&#x9762;&#x6570;&#x636E;&#x4F1A;&#x9010;&#x6E10;&#x548C;&#x5B50;&#x8FDB;&#x7A0B;&#x5206;&#x79BB;&#x5F00;&#x6765;&#x3002;</li></ul><h2 id="Redis-&#x6709;&#x51E0;&#x79CD;&#x6570;&#x636E;&#x201C;&#x8FC7;&#x671F;&#x201D;&#x7B56;&#x7565;&#xFF1F;"><a href="#Redis-&#x6709;&#x51E0;&#x79CD;&#x6570;&#x636E;&#x201C;&#x8FC7;&#x671F;&#x201D;&#x7B56;&#x7565;&#xFF1F;" class="headerlink" title="Redis &#x6709;&#x51E0;&#x79CD;&#x6570;&#x636E;&#x201C;&#x8FC7;&#x671F;&#x201D;&#x7B56;&#x7565;&#xFF1F;"></a>Redis &#x6709;&#x51E0;&#x79CD;&#x6570;&#x636E;&#x201C;&#x8FC7;&#x671F;&#x201D;&#x7B56;&#x7565;&#xFF1F;</h2><p>Redis &#x7684;&#x8FC7;&#x671F;&#x7B56;&#x7565;&#xFF0C;&#x5C31;&#x662F;&#x6307;&#x5F53; Redis &#x4E2D;&#x7F13;&#x5B58;&#x7684; key &#x8FC7;&#x671F;&#x4E86;&#xFF0C;Redis &#x5982;&#x4F55;&#x5904;&#x7406;&#x3002;</p><p>Redis &#x63D0;&#x4F9B;&#x4E86; 3 &#x79CD;&#x6570;&#x636E;&#x8FC7;&#x671F;&#x7B56;&#x7565;&#xFF1A;</p><ul><li>&#x88AB;&#x52A8;&#x5220;&#x9664;&#xFF1A;&#x5F53;&#x8BFB;/&#x5199;&#x4E00;&#x4E2A;&#x5DF2;&#x7ECF;&#x8FC7;&#x671F;&#x7684; key &#x65F6;&#xFF0C;&#x4F1A;&#x89E6;&#x53D1;&#x60F0;&#x6027;&#x5220;&#x9664;&#x7B56;&#x7565;&#xFF0C;&#x76F4;&#x63A5;&#x5220;&#x9664;&#x6389;&#x8FD9;&#x4E2A;&#x8FC7;&#x671F; key &#x3002;</li><li>&#x4E3B;&#x52A8;&#x5220;&#x9664;&#xFF1A;&#x7531;&#x4E8E;&#x60F0;&#x6027;&#x5220;&#x9664;&#x7B56;&#x7565;&#x65E0;&#x6CD5;&#x4FDD;&#x8BC1;&#x51B7;&#x6570;&#x636E;&#x88AB;&#x53CA;&#x65F6;&#x5220;&#x6389;&#xFF0C;&#x6240;&#x4EE5; Redis &#x4F1A;&#x5B9A;&#x671F;&#x4E3B;&#x52A8;&#x6DD8;&#x6C70;&#x4E00;&#x6279;&#x5DF2;&#x8FC7;&#x671F;&#x7684; key &#x3002;</li><li>&#x4E3B;&#x52A8;&#x5220;&#x9664;&#xFF1A;&#x5F53;&#x524D;&#x5DF2;&#x7528;&#x5185;&#x5B58;&#x8D85;&#x8FC7; maxmemory &#x9650;&#x5B9A;&#x65F6;&#xFF0C;&#x89E6;&#x53D1;&#x4E3B;&#x52A8;&#x6E05;&#x7406;&#x7B56;&#x7565;&#xFF0C;&#x5373; <a href="http://svip.iocoder.cn/Redis/Interview/#" target="_blank" rel="noopener">&#x300C;&#x6570;&#x636E;&#x201C;&#x6DD8;&#x6C70;&#x201D;&#x7B56;&#x7565;&#x300D;</a> &#x3002;</li></ul><p>&#x5728; Redis &#x4E2D;&#xFF0C;&#x540C;&#x65F6;&#x4F7F;&#x7528;&#x4E86;&#x4E0A;&#x8FF0; 3 &#x79CD;&#x7B56;&#x7565;&#xFF0C;&#x5373;&#x5B83;&#x4EEC;<strong>&#x975E;&#x4E92;&#x65A5;</strong>&#x7684;&#x3002;</p><p>&#x60F3;&#x8981;&#x8FDB;&#x4E00;&#x6B65;&#x4E86;&#x89E3;&#xFF0C;&#x53EF;&#x4EE5;&#x770B;&#x770B; <a href="https://www.cnblogs.com/chenpingzhao/p/5022467.html" target="_blank" rel="noopener">&#x300A;&#x5173;&#x4E8E; Redis &#x6570;&#x636E;&#x8FC7;&#x671F;&#x7B56;&#x7565;&#x300B;</a> &#x6587;&#x7AE0;&#x3002;</p><h2 id="Redis-&#x6709;&#x54EA;&#x51E0;&#x79CD;&#x6570;&#x636E;&#x201C;&#x6DD8;&#x6C70;&#x201D;&#x7B56;&#x7565;&#xFF1F;"><a href="#Redis-&#x6709;&#x54EA;&#x51E0;&#x79CD;&#x6570;&#x636E;&#x201C;&#x6DD8;&#x6C70;&#x201D;&#x7B56;&#x7565;&#xFF1F;" class="headerlink" title="Redis &#x6709;&#x54EA;&#x51E0;&#x79CD;&#x6570;&#x636E;&#x201C;&#x6DD8;&#x6C70;&#x201D;&#x7B56;&#x7565;&#xFF1F;"></a>Redis &#x6709;&#x54EA;&#x51E0;&#x79CD;&#x6570;&#x636E;&#x201C;&#x6DD8;&#x6C70;&#x201D;&#x7B56;&#x7565;&#xFF1F;</h2><p>Redis &#x5185;&#x5B58;&#x6570;&#x636E;&#x96C6;&#x5927;&#x5C0F;&#x4E0A;&#x5347;&#x5230;&#x4E00;&#x5B9A;&#x5927;&#x5C0F;&#x7684;&#x65F6;&#x5019;&#xFF0C;&#x5C31;&#x4F1A;&#x8FDB;&#x884C;&#x6570;&#x636E;&#x6DD8;&#x6C70;&#x7B56;&#x7565;&#x3002;</p><p>Redis &#x63D0;&#x4F9B;&#x4E86; 6 &#x79CD;&#x6570;&#x636E;&#x6DD8;&#x6C70;&#x7B56;&#x7565;&#xFF1A;</p><ol><li>volatile-lru</li><li>volatile-ttl</li><li>volatile-random</li><li>allkeys-lru</li><li>allkeys-random</li><li>no-enviction</li></ol><p>&#x5177;&#x4F53;&#x7684; <strong>&#x6BCF;&#x79CD;&#x6570;&#x636E;&#x6DD8;&#x6C70;&#x7B56;&#x7565;&#x7684;&#x5B9A;&#x4E49;</strong>&#xFF0C;&#x548C; <strong>&#x5982;&#x4F55;&#x9009;&#x62E9;&#x8BA8;&#x8BBA;&#x7B56;&#x7565;</strong>&#xFF0C;&#x53EF;&#x89C1; <a href="http://blog.720ui.com/2016/redis_action_02_maxmemory_policy/" target="_blank" rel="noopener">&#x300A;Redis&#x5B9E;&#x6218;&#xFF08;&#x4E8C;&#xFF09; &#x5185;&#x5B58;&#x6DD8;&#x6C70;&#x673A;&#x5236;&#x300B;</a> &#x3002;</p><p> <strong>Redis LRU &#x7B97;&#x6CD5;</strong></p><p>&#x53E6;&#x5916;&#xFF0C;Redis &#x7684; LRU &#x7B97;&#x6CD5;&#xFF0C;<strong>&#x5E76;&#x4E0D;&#x662F;&#x4E00;&#x4E2A;&#x4E25;&#x683C;&#x7684; LRU &#x5B9E;&#x73B0;</strong>&#x3002;&#x8FD9;&#x610F;&#x5473;&#x7740; Redis &#x4E0D;&#x80FD;&#x9009;&#x62E9;&#x6700;&#x4F73;&#x5019;&#x9009;&#x952E;&#x6765;&#x56DE;&#x6536;&#xFF0C;&#x4E5F;&#x5C31;&#x662F;&#x6700;&#x4E45;&#x672A;&#x88AB;&#x8BBF;&#x95EE;&#x7684;&#x90A3;&#x4E9B;&#x952E;&#x3002;&#x76F8;&#x53CD;&#xFF0C;Redis &#x4F1A;&#x5C1D;&#x8BD5;&#x6267;&#x884C;&#x4E00;&#x4E2A;&#x8FD1;&#x4F3C;&#x7684; LRU &#x7B97;&#x6CD5;&#xFF0C;&#x901A;&#x8FC7;&#x91C7;&#x6837;&#x4E00;&#x5C0F;&#x90E8;&#x5206;&#x952E;&#xFF0C;&#x7136;&#x540E;&#x5728;&#x91C7;&#x6837;&#x952E;&#x4E2D;&#x56DE;&#x6536;&#x6700;&#x9002;&#x5408;(&#x62E5;&#x6709;&#x6700;&#x4E45;&#x672A;&#x88AB;&#x8BBF;&#x95EE;&#x65F6;&#x95F4;)&#x7684;&#x90A3;&#x4E2A;&#x3002;</p><ul><li><p>&#x5177;&#x4F53;&#x7684;&#x53EF;&#x4EE5;&#x770B;&#x770B; <a href="http://ifeve.com/lru-cache/" target="_blank" rel="noopener">&#x300A;&#x4F7F;&#x7528; Redis &#x4F5C;&#x4E3A;&#x4E00;&#x4E2A; LRU &#x7F13;&#x5B58;&#x300B;</a> &#x6587;&#x7AE0;&#x3002;</p><p><strong>MySQL &#x91CC;&#x6709; 2000w &#x6570;&#x636E;&#xFF0C;Redis &#x4E2D;&#x53EA;&#x5B58; 20w &#x7684;&#x6570;&#x636E;&#xFF0C;&#x5982;&#x4F55;&#x4FDD;&#x8BC1; Redis &#x4E2D;&#x7684;&#x6570;&#x636E;&#x90FD;&#x662F;&#x70ED;&#x70B9;&#x6570;&#x636E;&#xFF1F;</strong></p></li></ul><blockquote><p>&#x827F;&#x827F;&#xFF1A;&#x8FD9;&#x4E2A;&#x662F;&#x4ECE;&#x7F51;&#x7EDC;&#x4E0A;&#x627E;&#x5230;&#x7684;&#x4E00;&#x4E2A;&#x795E;&#x5947;&#x7684;&#x95EE;&#x9898;&#xFF0C;&#x5E76;&#x4E14;&#x770B;&#x4E86;&#x7B54;&#x6848;&#x4E4B;&#x540E;&#xFF0C;&#x89C9;&#x5F97;&#x6709;&#x70B9;&#x83AB;&#x540D;&#x7684;&#x5BF9;&#x4E0D;&#x4E0A;&#x3002;</p><p>&#x6240;&#x4EE5;&#xFF0C;&#x611F;&#x89C9;&#x8FD9;&#x4E2A;&#x95EE;&#x9898;&#x7684;&#x76EE;&#x7684;&#x662F;&#xFF0C;&#x5982;&#x4F55;&#x4FDD;&#x8BC1;&#x70ED;&#x70B9;&#x6570;&#x636E;&#x4E0D;&#x8981;&#x88AB;&#x6DD8;&#x6C70;&#x3002;</p></blockquote><p>&#x5728; <a href="http://svip.iocoder.cn/Redis/Interview/#" target="_blank" rel="noopener">&#x300C;Redis &#x6709;&#x54EA;&#x51E0;&#x79CD;&#x6570;&#x636E;&#x201C;&#x6DD8;&#x6C70;&#x201D;&#x7B56;&#x7565;&#xFF1F;&#x300D;</a> &#x95EE;&#x9898;&#x4E2D;&#xFF0C;&#x6211;&#x4EEC;&#x5DF2;&#x7ECF;&#x770B;&#x5230;&#xFF0C;&#x201C;Redis &#x5185;&#x5B58;&#x6570;&#x636E;&#x96C6;&#x5927;&#x5C0F;&#x4E0A;&#x5347;&#x5230;&#x4E00;&#x5B9A;&#x5927;&#x5C0F;&#x7684;&#x65F6;&#x5019;&#xFF0C;&#x5C31;&#x4F1A;&#x8FDB;&#x884C;&#x6570;&#x636E;&#x6DD8;&#x6C70;&#x7B56;&#x7565;&#x3002;&#x201D; &#x3002;</p><p>&#x90A3;&#x4E48;&#xFF0C;&#x5982;&#x679C;&#x6211;&#x4EEC;&#x6B64;&#x65F6;&#x8981;&#x4FDD;&#x8BC1;&#x70ED;&#x70B9;&#x6570;&#x636E;&#x4E0D;&#x88AB;&#x6DD8;&#x6C70;&#xFF0C;&#x90A3;&#x4E48;&#x9700;&#x8981;&#x9009;&#x62E9; volatile-lru &#x6216; allkeys-lru &#x8FD9;&#x4E24;&#x4E2A;&#x57FA;&#x4E8E; LRU &#x7B97;&#x6CD5;&#x7684;&#x6DD8;&#x6C70;&#x7B56;&#x7565;&#x3002;</p><p>&#x76F8;&#x6BD4;&#x8F83;&#x6765;&#x8BF4;&#xFF0C;&#x6700;&#x7EC8;&#x4F1A;&#x9009;&#x62E9; allkeys-lru &#x6DD8;&#x6C70;&#x7B56;&#x7565;&#x3002;&#x539F;&#x56E0;&#x662F;&#xFF0C;&#x5982;&#x679C;&#x6211;&#x4EEC;&#x7684;&#x5E94;&#x7528;&#x5BF9;&#x7F13;&#x5B58;&#x7684;&#x8BBF;&#x95EE;&#x7B26;&#x5408;&#x5E42;&#x5F8B;&#x5206;&#x5E03;&#xFF0C;&#x4E5F;&#x5C31;&#x662F;&#x5B58;&#x5728;&#x76F8;&#x5BF9;&#x70ED;&#x70B9;&#x6570;&#x636E;&#xFF0C;&#x6216;&#x8005;&#x6211;&#x4EEC;&#x4E0D;&#x592A;&#x6E05;&#x695A;&#x6211;&#x4EEC;&#x5E94;&#x7528;&#x7684;&#x7F13;&#x5B58;&#x8BBF;&#x95EE;&#x5206;&#x5E03;&#x72B6;&#x51B5;&#xFF0C;&#x6211;&#x4EEC;&#x53EF;&#x4EE5;&#x9009;&#x62E9; allkeys-lru &#x7B56;&#x7565;&#x3002;</p><p> <strong>Redis &#x56DE;&#x6536;&#x8FDB;&#x7A0B;&#x5982;&#x4F55;&#x5DE5;&#x4F5C;&#x7684;&#xFF1F;</strong></p><p>&#x7406;&#x89E3;&#x56DE;&#x6536;&#x8FDB;&#x7A0B;&#x5982;&#x4F55;&#x5DE5;&#x4F5C;&#x662F;&#x975E;&#x5E38;&#x91CD;&#x8981;&#x7684;&#xFF1A;</p><ul><li>&#x4E00;&#x4E2A;&#x5BA2;&#x6237;&#x7AEF;&#x8FD0;&#x884C;&#x4E86;&#x65B0;&#x7684;&#x547D;&#x4EE4;&#xFF0C;&#x6DFB;&#x52A0;&#x4E86;&#x65B0;&#x7684;&#x6570;&#x636E;</li><li>Redis &#x68C0;&#x67E5;&#x5185;&#x5B58;&#x4F7F;&#x7528;&#x60C5;&#x51B5;&#xFF0C;&#x5982;&#x679C;&#x5927;&#x4E8E; maxmemory &#x7684;&#x9650;&#x5236;, &#x5219;&#x6839;&#x636E;&#x8BBE;&#x5B9A;&#x597D;&#x7684;&#x7B56;&#x7565;&#x8FDB;&#x884C;&#x56DE;&#x6536;&#x3002;</li><li>Redis &#x6267;&#x884C;&#x65B0;&#x547D;&#x4EE4;&#x2026;&#x2026;</li></ul><p>&#x6240;&#x4EE5;&#x6211;&#x4EEC;&#x4E0D;&#x65AD;&#x5730;&#x7A7F;&#x8D8A;&#x5185;&#x5B58;&#x9650;&#x5236;&#x7684;&#x8FB9;&#x754C;&#xFF0C;&#x901A;&#x8FC7;&#x4E0D;&#x65AD;&#x8FBE;&#x5230;&#x8FB9;&#x754C;&#x7136;&#x540E;&#x4E0D;&#x65AD;&#x5730;&#x56DE;&#x6536;&#x56DE;&#x5230;&#x8FB9;&#x754C;&#x4EE5;&#x4E0B;&#xFF08;&#x8DCC;&#x5B95;&#x8D77;&#x4F0F;&#xFF09;&#x3002;</p><h2 id="&#x5982;&#x679C;&#x6709;&#x5927;&#x91CF;&#x7684;-key-&#x9700;&#x8981;&#x8BBE;&#x7F6E;&#x540C;&#x4E00;&#x65F6;&#x95F4;&#x8FC7;&#x671F;&#xFF0C;&#x4E00;&#x822C;&#x9700;&#x8981;&#x6CE8;&#x610F;&#x4EC0;&#x4E48;&#xFF1F;"><a href="#&#x5982;&#x679C;&#x6709;&#x5927;&#x91CF;&#x7684;-key-&#x9700;&#x8981;&#x8BBE;&#x7F6E;&#x540C;&#x4E00;&#x65F6;&#x95F4;&#x8FC7;&#x671F;&#xFF0C;&#x4E00;&#x822C;&#x9700;&#x8981;&#x6CE8;&#x610F;&#x4EC0;&#x4E48;&#xFF1F;" class="headerlink" title="&#x5982;&#x679C;&#x6709;&#x5927;&#x91CF;&#x7684; key &#x9700;&#x8981;&#x8BBE;&#x7F6E;&#x540C;&#x4E00;&#x65F6;&#x95F4;&#x8FC7;&#x671F;&#xFF0C;&#x4E00;&#x822C;&#x9700;&#x8981;&#x6CE8;&#x610F;&#x4EC0;&#x4E48;&#xFF1F;"></a>&#x5982;&#x679C;&#x6709;&#x5927;&#x91CF;&#x7684; key &#x9700;&#x8981;&#x8BBE;&#x7F6E;&#x540C;&#x4E00;&#x65F6;&#x95F4;&#x8FC7;&#x671F;&#xFF0C;&#x4E00;&#x822C;&#x9700;&#x8981;&#x6CE8;&#x610F;&#x4EC0;&#x4E48;&#xFF1F;</h2><p>&#x5982;&#x679C;&#x5927;&#x91CF;&#x7684; key &#x8FC7;&#x671F;&#x65F6;&#x95F4;&#x8BBE;&#x7F6E;&#x7684;&#x8FC7;&#x4E8E;&#x96C6;&#x4E2D;&#xFF0C;&#x5230;&#x8FC7;&#x671F;&#x7684;&#x90A3;&#x4E2A;&#x65F6;&#x95F4;&#x70B9;&#xFF0C;Redis&#x53EF;&#x80FD;&#x4F1A;&#x51FA;&#x73B0;&#x77ED;&#x6682;&#x7684;&#x5361;&#x987F;&#x73B0;&#x8C61;&#x3002;</p><p>&#x4E00;&#x822C;&#x9700;&#x8981;&#x5728;&#x65F6;&#x95F4;&#x4E0A;&#x52A0;&#x4E00;&#x4E2A;&#x968F;&#x673A;&#x503C;&#xFF0C;&#x4F7F;&#x5F97;&#x8FC7;&#x671F;&#x65F6;&#x95F4;&#x5206;&#x6563;&#x4E00;&#x4E9B;&#x3002;</p><h2 id="Redis-&#x6709;&#x54EA;&#x4E9B;&#x6570;&#x636E;&#x7ED3;&#x6784;&#xFF1F;"><a href="#Redis-&#x6709;&#x54EA;&#x4E9B;&#x6570;&#x636E;&#x7ED3;&#x6784;&#xFF1F;" class="headerlink" title="Redis &#x6709;&#x54EA;&#x4E9B;&#x6570;&#x636E;&#x7ED3;&#x6784;&#xFF1F;"></a>Redis &#x6709;&#x54EA;&#x4E9B;&#x6570;&#x636E;&#x7ED3;&#x6784;&#xFF1F;</h2><p>&#x5982;&#x679C;&#x4F60;&#x662F; Redis &#x666E;&#x901A;&#x73A9;&#x5BB6;&#xFF0C;&#x53EF;&#x80FD;&#x4F60;&#x7684;&#x56DE;&#x7B54;&#x662F;&#x5982;&#x4E0B;&#x4E94;&#x79CD;&#x6570;&#x636E;&#x7ED3;&#x6784;&#xFF1A;</p><ul><li>&#x5B57;&#x7B26;&#x4E32; String</li><li>&#x5B57;&#x5178;Hash</li><li>&#x5217;&#x8868;List</li><li>&#x96C6;&#x5408;Set</li><li>&#x6709;&#x5E8F;&#x96C6;&#x5408; SortedSet</li></ul><p>&#x5982;&#x679C;&#x4F60;&#x662F; Redis &#x4E2D;&#x7EA7;&#x73A9;&#x5BB6;&#xFF0C;&#x8FD8;&#x9700;&#x8981;&#x52A0;&#x4E0A;&#x4E0B;&#x9762;&#x51E0;&#x79CD;&#x6570;&#x636E;&#x7ED3;&#x6784;&#xFF1A;</p><ul><li>HyperLogLog</li><li>Geo</li><li>Pub / Sub</li></ul><p>&#x5982;&#x679C;&#x4F60;&#x662F; Redis &#x9AD8;&#x7AEF;&#x73A9;&#x5BB6;&#xFF0C;&#x4F60;&#x53EF;&#x80FD;&#x73A9;&#x8FC7; Redis Module &#xFF0C;&#x53EF;&#x4EE5;&#x518D;&#x52A0;&#x4E0A;&#x4E0B;&#x9762;&#x51E0;&#x79CD;&#x6570;&#x636E;&#x7ED3;&#x6784;&#xFF1A;</p><ul><li>BloomFilter</li><li>RedisSearch</li><li>Redis-ML</li><li>JSON</li></ul><p>&#x53E6;&#x5916;&#xFF0C;&#x5728; Redis 5.0 &#x589E;&#x52A0;&#x4E86; Stream &#x529F;&#x80FD;&#xFF0C;&#x4E00;&#x4E2A;&#x65B0;&#x7684;&#x5F3A;&#x5927;&#x7684;&#x652F;&#x6301;&#x591A;&#x64AD;&#x7684;&#x53EF;&#x6301;&#x4E45;&#x5316;&#x7684;&#x6D88;&#x606F;&#x961F;&#x5217;&#xFF0C;&#x63D0;&#x4F9B;&#x7C7B;&#x4F3C; Kafka &#x7684;&#x529F;&#x80FD;&#x3002;&#x1F608; &#x9ED8;&#x9ED8;&#x8DDF;&#x9762;&#x8BD5;&#x5B98;&#x5728;&#x88C5;&#x4E00;&#x6CE2;&#x3002;</p><h2 id="&#x804A;&#x804A;-Redis-&#x4F7F;&#x7528;&#x573A;&#x666F;"><a href="#&#x804A;&#x804A;-Redis-&#x4F7F;&#x7528;&#x573A;&#x666F;" class="headerlink" title="&#x804A;&#x804A; Redis &#x4F7F;&#x7528;&#x573A;&#x666F;"></a>&#x804A;&#x804A; Redis &#x4F7F;&#x7528;&#x573A;&#x666F;</h2><p>Redis &#x53EF;&#x7528;&#x7684;&#x573A;&#x666F;&#x975E;&#x5E38;&#x4E4B;&#x591A;&#xFF1A;</p><ul><li>&#x6570;&#x636E;&#x7F13;&#x5B58;</li><li>&#x4F1A;&#x8BDD;&#x7F13;&#x5B58;</li><li>&#x65F6;&#x6548;&#x6027;&#x6570;&#x636E;</li><li>&#x8BBF;&#x95EE;&#x9891;&#x7387;</li><li>&#x8BA1;&#x6570;&#x5668;</li><li>&#x793E;&#x4EA4;&#x5217;&#x8868;</li><li>&#x8BB0;&#x5F55;&#x7528;&#x6237;&#x5224;&#x5B9A;&#x4FE1;&#x606F;</li><li>&#x4EA4;&#x96C6;&#x3001;&#x5E76;&#x96C6;&#x548C;&#x5DEE;&#x96C6;</li><li>&#x70ED;&#x95E8;&#x5217;&#x8868;&#x4E0E;&#x6392;&#x884C;&#x699C;</li><li>&#x6700;&#x65B0;&#x52A8;&#x6001;</li><li>&#x6D88;&#x606F;&#x961F;&#x5217;</li><li>&#x5206;&#x5E03;&#x5F0F;&#x9501;</li></ul><p>&#x8BE6;&#x7EC6;&#x7684;&#x4ECB;&#x7ECD;&#xFF0C;&#x53EF;&#x4EE5;&#x770B;&#x770B;&#x5982;&#x4E0B;&#x6587;&#x7AE0;&#xFF1A;</p><ul><li><a href="http://blog.720ui.com/2017/redis_core_use/" target="_blank" rel="noopener">&#x300A;&#x804A;&#x804A; Redis &#x4F7F;&#x7528;&#x573A;&#x666F;&#x300B;</a></li><li><a href="https://www.jianshu.com/p/af277c77b1c9" target="_blank" rel="noopener">&#x300A;Redis &#x5E94;&#x7528;&#x573A;&#x666F;&#x53CA;&#x5B9E;&#x4F8B;&#x300B;</a></li><li><a href="https://zhuanlan.zhihu.com/p/29665317" target="_blank" rel="noopener">&#x300A;Redis &#x5E38;&#x89C1;&#x7684;&#x5E94;&#x7528;&#x573A;&#x666F;&#x89E3;&#x6790;&#x300B;</a></li><li><a href="https://www.zhihu.com/question/19829601" target="_blank" rel="noopener">&#x300A;Redis &#x548C; Memcached &#x5404;&#x6709;&#x4EC0;&#x4E48;&#x4F18;&#x7F3A;&#x70B9;&#xFF0C;&#x4E3B;&#x8981;&#x7684;&#x5E94;&#x7528;&#x573A;&#x666F;&#x662F;&#x4EC0;&#x4E48;&#x6837;&#x7684;&#xFF1F;&#x300B;</a></li></ul><p><strong>&#x8BF7;&#x7528; Redis &#x548C;&#x4EFB;&#x610F;&#x8BED;&#x8A00;&#x5B9E;&#x73B0;&#x4E00;&#x6BB5;&#x6076;&#x610F;&#x767B;&#x5F55;&#x4FDD;&#x62A4;&#x7684;&#x4EE3;&#x7801;&#xFF0C;&#x9650;&#x5236; 1 &#x5C0F;&#x65F6;&#x5185;&#x6BCF;&#x7528;&#x6237; Id &#x6700;&#x591A;&#x53EA;&#x80FD;&#x767B;&#x5F55; 5 &#x6B21;&#x3002;</strong></p><p>&#x7528;&#x5217;&#x8868;&#x5B9E;&#x73B0;&#xFF0C;&#x5217;&#x8868;&#x4E2D;&#x6BCF;&#x4E2A;&#x5143;&#x7D20;&#x4EE3;&#x8868;&#x767B;&#x9646;&#x65F6;&#x95F4;&#xFF0C;&#x53EA;&#x8981;&#x6700;&#x540E;&#x7684;&#x7B2C; 5 &#x6B21;&#x767B;&#x9646;&#x65F6;&#x95F4;&#x548C;&#x73B0;&#x5728;&#x65F6;&#x95F4;&#x5DEE;&#x4E0D;&#x8D85;&#x8FC7; 1 &#x5C0F;&#x65F6;&#x5C31;&#x7981;&#x6B62;&#x767B;&#x9646;&#x3002;</p><p>&#x5177;&#x4F53;&#x7684;&#x4EE3;&#x7801;&#x5B9E;&#x73B0;&#xFF0C;&#x53EF;&#x4EE5;&#x770B;&#x770B; <a href="https://www.jianshu.com/p/e3abbfc59d77" target="_blank" rel="noopener">&#x300A;&#x4E00;&#x9053; Redis &#x9762;&#x8BD5;&#x9898;&#x300B;</a> &#x3002;</p><h2 id="Redis-&#x652F;&#x6301;&#x7684;-Java-&#x5BA2;&#x6237;&#x7AEF;&#x90FD;&#x6709;&#x54EA;&#x4E9B;&#xFF1F;"><a href="#Redis-&#x652F;&#x6301;&#x7684;-Java-&#x5BA2;&#x6237;&#x7AEF;&#x90FD;&#x6709;&#x54EA;&#x4E9B;&#xFF1F;" class="headerlink" title="Redis &#x652F;&#x6301;&#x7684; Java &#x5BA2;&#x6237;&#x7AEF;&#x90FD;&#x6709;&#x54EA;&#x4E9B;&#xFF1F;"></a>Redis &#x652F;&#x6301;&#x7684; Java &#x5BA2;&#x6237;&#x7AEF;&#x90FD;&#x6709;&#x54EA;&#x4E9B;&#xFF1F;</h2><p>&#x4F7F;&#x7528;&#x6BD4;&#x8F83;&#x5E7F;&#x6CDB;&#x7684;&#x6709;&#x4E09;&#x4E2A; Java &#x5BA2;&#x6237;&#x7AEF;&#xFF1A;</p><ul><li><p>Redisson</p><blockquote><p>Redisson &#xFF0C;&#x662F;&#x4E00;&#x4E2A;&#x9AD8;&#x7EA7;&#x7684;&#x5206;&#x5E03;&#x5F0F;&#x534F;&#x8C03; Redis &#x5BA2;&#x670D;&#x7AEF;&#xFF0C;&#x80FD;&#x5E2E;&#x52A9;&#x7528;&#x6237;&#x5728;&#x5206;&#x5E03;&#x5F0F;&#x73AF;&#x5883;&#x4E2D;&#x8F7B;&#x677E;&#x5B9E;&#x73B0;&#x4E00;&#x4E9B; Java &#x7684;&#x5BF9;&#x8C61; (Bloom filter, BitSet, Set, SetMultimap, ScoredSortedSet, SortedSet, Map, ConcurrentMap, List, ListMultimap, Queue, BlockingQueue, Deque, BlockingDeque, Semaphore, Lock, ReadWriteLock, AtomicLong, CountDownLatch, Publish / Subscribe, HyperLogLog)&#x3002;</p></blockquote></li><li><p>Jedis</p><blockquote><p>Jedis &#x662F; Redis &#x7684; Java &#x5B9E;&#x73B0;&#x7684;&#x5BA2;&#x6237;&#x7AEF;&#xFF0C;&#x5176; API &#x63D0;&#x4F9B;&#x4E86;&#x6BD4;&#x8F83;&#x5168;&#x9762;&#x7684; Redis &#x547D;&#x4EE4;&#x7684;&#x652F;&#x6301;&#x3002;</p><p>Redisson &#x5B9E;&#x73B0;&#x4E86;&#x5206;&#x5E03;&#x5F0F;&#x548C;&#x53EF;&#x6269;&#x5C55;&#x7684; Java &#x6570;&#x636E;&#x7ED3;&#x6784;&#xFF0C;&#x548C; Jedis &#x76F8;&#x6BD4;&#xFF0C;Jedis &#x529F;&#x80FD;&#x8F83;&#x4E3A;&#x7B80;&#x5355;&#xFF0C;&#x4E0D;&#x652F;&#x6301;&#x5B57;&#x7B26;&#x4E32;&#x64CD;&#x4F5C;&#xFF0C;&#x4E0D;&#x652F;&#x6301;&#x6392;&#x5E8F;&#x3001;&#x4E8B;&#x52A1;&#x3001;&#x7BA1;&#x9053;&#x3001;&#x5206;&#x533A;&#x7B49; Redis &#x7279;&#x6027;&#x3002;</p><p>Redisson &#x7684;&#x5B97;&#x65E8;&#x662F;&#x4FC3;&#x8FDB;&#x4F7F;&#x7528;&#x8005;&#x5BF9; Redis &#x7684;&#x5173;&#x6CE8;&#x5206;&#x79BB;&#xFF0C;&#x4ECE;&#x800C;&#x8BA9;&#x4F7F;&#x7528;&#x8005;&#x80FD;&#x591F;&#x5C06;&#x7CBE;&#x529B;&#x66F4;&#x96C6;&#x4E2D;&#x5730;&#x653E;&#x5728;&#x5904;&#x7406;&#x4E1A;&#x52A1;&#x903B;&#x8F91;&#x4E0A;&#x3002;</p></blockquote></li><li><p>Lettuce</p><blockquote><p>Lettuce &#x662F;&#x4E00;&#x4E2A;&#x53EF;&#x4F38;&#x7F29;&#x7EBF;&#x7A0B;&#x5B89;&#x5168;&#x7684; Redis &#x5BA2;&#x6237;&#x7AEF;&#x3002;&#x591A;&#x4E2A;&#x7EBF;&#x7A0B;&#x53EF;&#x4EE5;&#x5171;&#x4EAB;&#x540C;&#x4E00;&#x4E2A; RedisConnection &#x3002;&#x5B83;&#x5229;&#x7528;&#x4F18;&#x79C0; Netty NIO &#x6846;&#x67B6;&#x6765;&#x9AD8;&#x6548;&#x5730;&#x7BA1;&#x7406;&#x591A;&#x4E2A;&#x8FDE;&#x63A5;&#x3002;</p></blockquote></li></ul><p>Redis &#x5B98;&#x65B9;&#x63A8;&#x8350;&#x4F7F;&#x7528; Redisson &#x6216; Jedis &#x3002;</p><p>Spring Boot 2.x &#x5185;&#x7F6E;&#x4F7F;&#x7528; Lettuce &#x3002;</p><h2 id="&#x5982;&#x4F55;&#x4F7F;&#x7528;-Redis-&#x5B9E;&#x73B0;&#x5206;&#x5E03;&#x5F0F;&#x9501;&#xFF1F;"><a href="#&#x5982;&#x4F55;&#x4F7F;&#x7528;-Redis-&#x5B9E;&#x73B0;&#x5206;&#x5E03;&#x5F0F;&#x9501;&#xFF1F;" class="headerlink" title="&#x5982;&#x4F55;&#x4F7F;&#x7528; Redis &#x5B9E;&#x73B0;&#x5206;&#x5E03;&#x5F0F;&#x9501;&#xFF1F;"></a>&#x5982;&#x4F55;&#x4F7F;&#x7528; Redis &#x5B9E;&#x73B0;&#x5206;&#x5E03;&#x5F0F;&#x9501;&#xFF1F;</h2><p> <strong>&#x65B9;&#x6848;&#x4E00;&#xFF1A;set &#x6307;&#x4EE4;</strong></p><p>&#x5148;&#x62FF; setnx &#x6765;&#x4E89;&#x62A2;&#x9501;&#xFF0C;&#x62A2;&#x5230;&#x4E4B;&#x540E;&#xFF0C;&#x518D;&#x7528; expire &#x7ED9;&#x9501;&#x52A0;&#x4E00;&#x4E2A;&#x8FC7;&#x671F;&#x65F6;&#x95F4;&#x9632;&#x6B62;&#x9501;&#x5FD8;&#x8BB0;&#x4E86;&#x91CA;&#x653E;&#x3002;</p><ul><li>&#x8FD9;&#x65F6;&#x5019;&#x5BF9;&#x65B9;&#x4F1A;&#x544A;&#x8BC9;&#x4F60;&#x8BF4;&#x4F60;&#x56DE;&#x7B54;&#x5F97;&#x4E0D;&#x9519;&#xFF0C;&#x7136;&#x540E;&#x63A5;&#x7740;&#x95EE;&#x5982;&#x679C;&#x5728; setnx &#x4E4B;&#x540E;&#x6267;&#x884C; expire &#x4E4B;&#x524D;&#x8FDB;&#x7A0B;&#x610F;&#x5916; crash &#x6216;&#x8005;&#x8981;&#x91CD;&#x542F;&#x7EF4;&#x62A4;&#x4E86;&#xFF0C;&#x90A3;&#x4F1A;&#x600E;&#x4E48;&#x6837;&#xFF1F;</li><li>&#x8FD9;&#x65F6;&#x5019;&#x4F60;&#x8981;&#x7ED9;&#x4E88;&#x60CA;&#x8BB6;&#x7684;&#x53CD;&#x9988;&#xFF1A;&#x5509;&#xFF0C;&#x662F;&#x5594;&#xFF0C;&#x8FD9;&#x4E2A;&#x9501;&#x5C31;&#x6C38;&#x8FDC;&#x5F97;&#x4E0D;&#x5230;&#x91CA;&#x653E;&#x4E86;&#x3002;&#x7D27;&#x63A5;&#x7740;&#x4F60;&#x9700;&#x8981;&#x6293;&#x4E00;&#x6293;&#x81EA;&#x5DF1;&#x5F97;&#x8111;&#x888B;&#xFF0C;&#x6545;&#x4F5C;&#x601D;&#x8003;&#x7247;&#x523B;&#xFF0C;&#x597D;&#x50CF;&#x63A5;&#x4E0B;&#x6765;&#x7684;&#x7ED3;&#x679C;&#x662F;&#x4F60;&#x4E3B;&#x52A8;&#x601D;&#x8003;&#x51FA;&#x6765;&#x7684;&#xFF0C;&#x7136;&#x540E;&#x56DE;&#x7B54;&#xFF1A;&#x6211;&#x8BB0;&#x5F97; set &#x6307;&#x4EE4;&#x6709;&#x975E;&#x5E38;&#x590D;&#x6742;&#x7684;&#x53C2;&#x6570;&#xFF0C;&#x8FD9;&#x4E2A;&#x5E94;&#x8BE5;&#x662F;&#x53EF;&#x4EE5;&#x540C;&#x65F6;&#x628A; setnx &#x548C; expire &#x5408;&#x6210;&#x4E00;&#x6761;&#x6307;&#x4EE4;&#x6765;&#x7528;&#x7684;&#xFF01;&#x5BF9;&#x65B9;&#x8FD9;&#x65F6;&#x4F1A;&#x663E;&#x9732;&#x7B11;&#x5BB9;&#xFF0C;&#x5FC3;&#x91CC;&#x5F00;&#x59CB;&#x9ED8;&#x5FF5;&#xFF1A;&#x6441;&#xFF0C;&#x8FD9;&#x5C0F;&#x5B50;&#x8FD8;&#x4E0D;&#x9519;&#x3002;</li></ul><p>&#x6240;&#x4EE5;&#xFF0C;&#x6211;&#x4EEC;&#x53EF;&#x4EE5;&#x4F7F;&#x7528; <strong>set</strong> &#x6307;&#x4EE4;&#xFF0C;&#x5B9E;&#x73B0;&#x5206;&#x5E03;&#x5F0F;&#x9501;&#x3002;&#x6307;&#x4EE4;&#x5982;&#x4E0B;&#xFF1A;</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">SET key value [EX seconds] [PX milliseconds] [NX|XX]</span><br></pre></td></tr></table></figure><ul><li>&#x53EF;&#x4EE5;&#x4F7F;&#x7528; <code>SET key value EX seconds NX</code> &#x547D;&#x4EE4;&#xFF0C;&#x5C1D;&#x8BD5;&#x83B7;&#x5F97;&#x9501;&#x3002;</li><li>&#x5177;&#x4F53;&#x7684;&#x5B9E;&#x73B0;&#xFF0C;&#x53EF;&#x4EE5;&#x53C2;&#x8003; <a href="https://wudashan.cn/2017/10/23/Redis-Distributed-Lock-Implement/" target="_blank" rel="noopener">&#x300A;Redis &#x5206;&#x5E03;&#x5F0F;&#x9501;&#x7684;&#x6B63;&#x786E;&#x5B9E;&#x73B0;&#x65B9;&#x5F0F;&#xFF08;Java&#x7248;&#xFF09;&#x300B;</a> &#x6587;&#x7AE0;&#x3002;</li></ul><p><strong>&#x65B9;&#x6848;&#x4E8C;&#xFF1A;redlock</strong></p><p>set &#x6307;&#x4EE4;&#x7684;&#x65B9;&#x6848;&#xFF0C;&#x9002;&#x5408;&#x7528;&#x4E8E;&#x5728;&#x5355;&#x673A; Redis &#x8282;&#x70B9;&#x7684;&#x573A;&#x666F;&#x4E0B;&#xFF0C;&#x5728;&#x591A; Redis &#x8282;&#x70B9;&#x7684;&#x573A;&#x666F;&#x4E0B;&#xFF0C;&#x4F1A;&#x5B58;&#x5728;&#x5206;&#x5E03;&#x5F0F;&#x9501;&#x4E22;&#x5931;&#x7684;&#x95EE;&#x9898;&#x3002;&#x6240;&#x4EE5;&#xFF0C;Redis &#x4F5C;&#x8005; Antirez &#x57FA;&#x4E8E;&#x5206;&#x5E03;&#x5F0F;&#x73AF;&#x5883;&#x4E0B;&#x63D0;&#x51FA;&#x4E86;&#x4E00;&#x79CD;&#x66F4;&#x9AD8;&#x7EA7;&#x7684;&#x5206;&#x5E03;&#x5F0F;&#x9501;&#x7684;&#x5B9E;&#x73B0;&#x65B9;&#x5F0F;&#xFF1A;Redlock &#x3002;</p><p>&#x5177;&#x4F53;&#x7684;&#x65B9;&#x6848;&#xFF0C;&#x80D6;&#x53CB;&#x53EF;&#x4EE5;&#x770B;&#x770B;&#x8001;&#x53CB;&#x98DE;&#x54E5;&#x7684;&#x4E24;&#x7BC7;&#x535A;&#x5BA2;&#xFF1A;</p><ul><li><a href="https://mp.weixin.qq.com/s/JLEzNqQsx-Lec03eAsXFOQ" target="_blank" rel="noopener">&#x300A;Redlock&#xFF1A;Redis&#x5206;&#x5E03;&#x5F0F;&#x9501;&#x6700;&#x725B;&#x903C;&#x7684;&#x5B9E;&#x73B0;&#x300B;</a></li><li><a href="https://www.jianshu.com/p/f302aa345ca8" target="_blank" rel="noopener">&#x300A;Redisson &#x5B9E;&#x73B0; Redis &#x5206;&#x5E03;&#x5F0F;&#x9501;&#x7684; N &#x79CD;&#x59FF;&#x52BF;&#x300B;</a></li></ul><p> <strong>&#x5BF9;&#x6BD4; Zookeeper &#x5206;&#x5E03;&#x5F0F;&#x9501;</strong></p><ul><li>&#x4ECE;&#x53EF;&#x9760;&#x6027;&#x4E0A;&#x6765;&#x8BF4;&#xFF0C;Zookeeper &#x5206;&#x5E03;&#x5F0F;&#x9501;&#x597D;&#x4E8E; Redis &#x5206;&#x5E03;&#x5F0F;&#x9501;&#x3002;</li><li>&#x4ECE;&#x6027;&#x80FD;&#x4E0A;&#x6765;&#x8BF4;&#xFF0C;Redis &#x5206;&#x5E03;&#x5F0F;&#x9501;&#x597D;&#x4E8E; Zookeeper &#x5206;&#x5E03;&#x5F0F;&#x9501;&#x3002;</li></ul><p>&#x6240;&#x4EE5;&#xFF0C;&#x6CA1;&#x6709;&#x7EDD;&#x5BF9;&#x7684;&#x597D;&#x574F;&#xFF0C;&#x53EF;&#x4EE5;&#x6839;&#x636E;&#x81EA;&#x5DF1;&#x7684;&#x4E1A;&#x52A1;&#x6765;&#x5177;&#x4F53;&#x9009;&#x62E9;&#x3002;</p><h2 id="&#x5982;&#x4F55;&#x4F7F;&#x7528;-Redis-&#x5B9E;&#x73B0;&#x6D88;&#x606F;&#x961F;&#x5217;&#xFF1F;"><a href="#&#x5982;&#x4F55;&#x4F7F;&#x7528;-Redis-&#x5B9E;&#x73B0;&#x6D88;&#x606F;&#x961F;&#x5217;&#xFF1F;" class="headerlink" title="&#x5982;&#x4F55;&#x4F7F;&#x7528; Redis &#x5B9E;&#x73B0;&#x6D88;&#x606F;&#x961F;&#x5217;&#xFF1F;"></a>&#x5982;&#x4F55;&#x4F7F;&#x7528; Redis &#x5B9E;&#x73B0;&#x6D88;&#x606F;&#x961F;&#x5217;&#xFF1F;</h2><p>&#x4E00;&#x822C;&#x4F7F;&#x7528; list &#x7ED3;&#x6784;&#x4F5C;&#x4E3A;&#x961F;&#x5217;&#xFF0C;rpush &#x751F;&#x4EA7;&#x6D88;&#x606F;&#xFF0C;lpop &#x6D88;&#x8D39;&#x6D88;&#x606F;&#x3002;&#x5F53; lpop &#x6CA1;&#x6709;&#x6D88;&#x606F;&#x7684;&#x65F6;&#x5019;&#xFF0C;&#x8981;&#x9002;&#x5F53; sleep &#x4E00;&#x4F1A;&#x518D;&#x91CD;&#x8BD5;&#x3002;</p><ul><li>&#x5982;&#x679C;&#x5BF9;&#x65B9;&#x8FFD;&#x95EE;&#x53EF;&#x4E0D;&#x53EF;&#x4EE5;&#x4E0D;&#x7528; sleep &#x5462;&#xFF1F;list &#x8FD8;&#x6709;&#x4E2A;&#x6307;&#x4EE4;&#x53EB; blpop &#xFF0C;&#x5728;&#x6CA1;&#x6709;&#x6D88;&#x606F;&#x7684;&#x65F6;&#x5019;&#xFF0C;&#x5B83;&#x4F1A;&#x963B;&#x585E;&#x4F4F;&#x76F4;&#x5230;&#x6D88;&#x606F;&#x5230;&#x6765;&#x3002;</li><li>&#x5982;&#x679C;&#x5BF9;&#x65B9;&#x8FFD;&#x95EE;&#x80FD;&#x4E0D;&#x80FD;&#x751F;&#x4EA7;&#x4E00;&#x6B21;&#x6D88;&#x8D39;&#x591A;&#x6B21;&#x5462;&#xFF1F;&#x4F7F;&#x7528; pub / sub &#x4E3B;&#x9898;&#x8BA2;&#x9605;&#x8005;&#x6A21;&#x5F0F;&#xFF0C;&#x53EF;&#x4EE5;&#x5B9E;&#x73B0; 1:N &#x7684;&#x6D88;&#x606F;&#x961F;&#x5217;&#x3002;</li><li>&#x5982;&#x679C;&#x5BF9;&#x65B9;&#x8FFD;&#x95EE; pub / sub &#x6709;&#x4EC0;&#x4E48;&#x7F3A;&#x70B9;&#xFF1F;&#x5728;&#x6D88;&#x8D39;&#x8005;&#x4E0B;&#x7EBF;&#x7684;&#x60C5;&#x51B5;&#x4E0B;&#xFF0C;&#x751F;&#x4EA7;&#x7684;&#x6D88;&#x606F;&#x4F1A;&#x4E22;&#x5931;&#xFF0C;&#x5F97;&#x4F7F;&#x7528;&#x4E13;&#x4E1A;&#x7684;&#x6D88;&#x606F;&#x961F;&#x5217;&#x5982; rabbitmq &#x7B49;&#x3002;</li><li>&#x5982;&#x679C;&#x5BF9;&#x65B9;&#x8FFD;&#x95EE; redis &#x5982;&#x4F55;&#x5B9E;&#x73B0;&#x5EF6;&#x65F6;&#x961F;&#x5217;&#xFF1F;&#x6211;&#x4F30;&#x8BA1;&#x73B0;&#x5728;&#x4F60;&#x5F88;&#x60F3;&#x628A;&#x9762;&#x8BD5;&#x5B98;&#x4E00;&#x68D2;&#x6253;&#x6B7B;&#x5982;&#x679C;&#x4F60;&#x624B;&#x4E0A;&#x6709;&#x4E00;&#x6839;&#x68D2;&#x7403;&#x68CD;&#x7684;&#x8BDD;&#xFF0C;&#x600E;&#x4E48;&#x95EE;&#x7684;&#x8FD9;&#x4E48;&#x8BE6;&#x7EC6;&#x3002;&#x4F46;&#x662F;&#x4F60;&#x5F88;&#x514B;&#x5236;&#xFF0C;&#x7136;&#x540E;&#x795E;&#x6001;&#x81EA;&#x82E5;&#x7684;&#x56DE;&#x7B54;&#x9053;&#xFF1A;&#x4F7F;&#x7528; sortedset &#xFF0C;&#x62FF;&#x65F6;&#x95F4;&#x6233;&#x4F5C;&#x4E3A; score &#xFF0C;&#x6D88;&#x606F;&#x5185;&#x5BB9;&#x4F5C;&#x4E3A; key &#x8C03;&#x7528; zadd &#x6765;&#x751F;&#x4EA7;&#x6D88;&#x606F;&#xFF0C;&#x6D88;&#x8D39;&#x8005;&#x7528; zrangebyscore &#x6307;&#x4EE4;&#x83B7;&#x53D6; N &#x79D2;&#x4E4B;&#x524D;&#x7684;&#x6570;&#x636E;&#x8F6E;&#x8BE2;&#x8FDB;&#x884C;&#x5904;&#x7406;&#x3002;</li></ul><p>&#x5230;&#x8FD9;&#x91CC;&#xFF0C;&#x9762;&#x8BD5;&#x5B98;&#x6697;&#x5730;&#x91CC;&#x5DF2;&#x7ECF;&#x5BF9;&#x4F60;&#x7AD6;&#x8D77;&#x4E86;&#x5927;&#x62C7;&#x6307;&#x3002;&#x4F46;&#x662F;&#x4ED6;&#x4E0D;&#x77E5;&#x9053;&#x7684;&#x662F;&#x6B64;&#x523B;&#x4F60;&#x5374;&#x7AD6;&#x8D77;&#x4E86;&#x4E2D;&#x6307;&#xFF0C;&#x5728;&#x6905;&#x5B50;&#x80CC;&#x540E;&#x3002;</p><p>&#x5F53;&#x7136;&#xFF0C;&#x5B9E;&#x9645;&#x4E0A; Redis &#x771F;&#x7684;&#x771F;&#x7684;&#x771F;&#x7684;&#x4E0D;&#x63A8;&#x8350;&#x4F5C;&#x4E3A;&#x6D88;&#x606F;&#x961F;&#x5217;&#x4F7F;&#x7528;&#xFF0C;&#x5B83;&#x6700;&#x591A;&#x53EA;&#x662F;&#x6D88;&#x606F;&#x961F;&#x5217;&#x7684;&#x5B58;&#x50A8;&#x5C42;&#xFF0C;&#x4E0A;&#x5C42;&#x7684;&#x903B;&#x8F91;&#xFF0C;&#x8FD8;&#x9700;&#x8981;&#x505A;&#x5927;&#x91CF;&#x7684;&#x5C01;&#x88C5;&#x548C;&#x652F;&#x6301;&#x3002;</p><p>&#x53E6;&#x5916;&#xFF0C;&#x5728; Redis 5.0 &#x589E;&#x52A0;&#x4E86; Stream &#x529F;&#x80FD;&#xFF0C;&#x4E00;&#x4E2A;&#x65B0;&#x7684;&#x5F3A;&#x5927;&#x7684;&#x652F;&#x6301;&#x591A;&#x64AD;&#x7684;&#x53EF;&#x6301;&#x4E45;&#x5316;&#x7684;&#x6D88;&#x606F;&#x961F;&#x5217;&#xFF0C;&#x63D0;&#x4F9B;&#x7C7B;&#x4F3C; Kafka &#x7684;&#x529F;&#x80FD;&#x3002;</p><h2 id="&#x4EC0;&#x4E48;&#x662F;-Redis-Pipelining-&#xFF1F;"><a href="#&#x4EC0;&#x4E48;&#x662F;-Redis-Pipelining-&#xFF1F;" class="headerlink" title="&#x4EC0;&#x4E48;&#x662F; Redis Pipelining &#xFF1F;"></a>&#x4EC0;&#x4E48;&#x662F; Redis Pipelining &#xFF1F;</h2><p>&#x4E00;&#x6B21;&#x8BF7;&#x6C42;/&#x54CD;&#x5E94;&#x670D;&#x52A1;&#x5668;&#x80FD;&#x5B9E;&#x73B0;&#x5904;&#x7406;&#x65B0;&#x7684;&#x8BF7;&#x6C42;&#x5373;&#x4F7F;&#x65E7;&#x7684;&#x8BF7;&#x6C42;&#x8FD8;&#x672A;&#x88AB;&#x54CD;&#x5E94;&#x3002;&#x8FD9;&#x6837;&#x5C31;&#x53EF;&#x4EE5;&#x5C06;&#x591A;&#x4E2A;&#x547D;&#x4EE4;&#x53D1;&#x9001;&#x5230;&#x670D;&#x52A1;&#x5668;&#xFF0C;&#x800C;&#x4E0D;&#x7528;&#x7B49;&#x5F85;&#x56DE;&#x590D;&#xFF0C;&#x6700;&#x540E;&#x5728;&#x4E00;&#x4E2A;&#x6B65;&#x9AA4;&#x4E2D;&#x8BFB;&#x53D6;&#x8BE5;&#x7B54;&#x590D;&#x3002;</p><p>&#x8FD9;&#x5C31;&#x662F;&#x7BA1;&#x9053;&#xFF08;pipelining&#xFF09;&#xFF0C;&#x662F;&#x4E00;&#x79CD;&#x51E0;&#x5341;&#x5E74;&#x6765;&#x5E7F;&#x6CDB;&#x4F7F;&#x7528;&#x7684;&#x6280;&#x672F;&#x3002;&#x4F8B;&#x5982;&#x8BB8;&#x591A; POP3 &#x534F;&#x8BAE;&#x5DF2;&#x7ECF;&#x5B9E;&#x73B0;&#x652F;&#x6301;&#x8FD9;&#x4E2A;&#x529F;&#x80FD;&#xFF0C;&#x5927;&#x5927;&#x52A0;&#x5FEB;&#x4E86;&#x4ECE;&#x670D;&#x52A1;&#x5668;&#x4E0B;&#x8F7D;&#x65B0;&#x90AE;&#x4EF6;&#x7684;&#x8FC7;&#x7A0B;&#x3002;</p><p>Redis &#x5F88;&#x65E9;&#x5C31;&#x652F;&#x6301;&#x7BA1;&#x9053;&#xFF08;<a href="http://redis.cn/topics/pipelining.html" target="_blank" rel="noopener">pipelining</a>&#xFF09;&#x6280;&#x672F;&#xFF0C;&#x56E0;&#x6B64;&#x65E0;&#x8BBA;&#x4F60;&#x8FD0;&#x884C;&#x7684;&#x662F;&#x4EC0;&#x4E48;&#x7248;&#x672C;&#xFF0C;&#x4F60;&#x90FD;&#x53EF;&#x4EE5;&#x4F7F;&#x7528;&#x7BA1;&#x9053;&#xFF08;pipelining&#xFF09;&#x64CD;&#x4F5C; Redis&#x3002;</p><p> <strong>Redis &#x5982;&#x4F55;&#x505A;&#x5927;&#x91CF;&#x6570;&#x636E;&#x63D2;&#x5165;&#xFF1F;</strong></p><p>Redis2.6 &#x5F00;&#x59CB;&#xFF0C;Redis-cli &#x652F;&#x6301;&#x4E00;&#x79CD;&#x65B0;&#x7684;&#x88AB;&#x79F0;&#x4E4B;&#x4E3A; pipe mode &#x7684;&#x65B0;&#x6A21;&#x5F0F;&#x7528;&#x4E8E;&#x6267;&#x884C;&#x5927;&#x91CF;&#x6570;&#x636E;&#x63D2;&#x5165;&#x5DE5;&#x4F5C;&#x3002;</p><p>&#x5177;&#x4F53;&#x53EF;&#x89C1; <a href="http://www.redis.cn/topics/mass-insert.html" target="_blank" rel="noopener">&#x300A;Redis &#x5927;&#x91CF;&#x6570;&#x636E;&#x63D2;&#x5165;&#x300B;</a> &#x6587;&#x7AE0;&#x3002;</p><h2 id="&#x4EC0;&#x4E48;&#x662F;-Redis-&#x4E8B;&#x52A1;&#xFF1F;"><a href="#&#x4EC0;&#x4E48;&#x662F;-Redis-&#x4E8B;&#x52A1;&#xFF1F;" class="headerlink" title="&#x4EC0;&#x4E48;&#x662F; Redis &#x4E8B;&#x52A1;&#xFF1F;"></a>&#x4EC0;&#x4E48;&#x662F; Redis &#x4E8B;&#x52A1;&#xFF1F;</h2><p>&#x548C;&#x4F17;&#x591A;&#x5176;&#x5B83;&#x6570;&#x636E;&#x5E93;&#x4E00;&#x6837;&#xFF0C;Redis &#x4F5C;&#x4E3A; NoSQL &#x6570;&#x636E;&#x5E93;&#x4E5F;&#x540C;&#x6837;&#x63D0;&#x4F9B;&#x4E86;&#x4E8B;&#x52A1;&#x673A;&#x5236;&#x3002;&#x5728;Redis&#x4E2D;&#xFF0C;MULTI / EXEC / DISCARD / WATCH &#x8FD9;&#x56DB;&#x4E2A;&#x547D;&#x4EE4;&#x662F;&#x6211;&#x4EEC;&#x5B9E;&#x73B0;&#x4E8B;&#x52A1;&#x7684;&#x57FA;&#x77F3;&#x3002;&#x76F8;&#x4FE1;&#x5BF9;&#x6709;&#x5173;&#x7CFB;&#x578B;&#x6570;&#x636E;&#x5E93;&#x5F00;&#x53D1;&#x7ECF;&#x9A8C;&#x7684;&#x5F00;&#x53D1;&#x8005;&#x800C;&#x8A00;&#x8FD9;&#x4E00;&#x6982;&#x5FF5;&#x5E76;&#x4E0D;&#x964C;&#x751F;&#xFF0C;&#x5373;&#x4FBF;&#x5982;&#x6B64;&#xFF0C;&#x6211;&#x4EEC;&#x8FD8;&#x662F;&#x4F1A;&#x7B80;&#x8981;&#x7684;&#x5217;&#x51FA; Redis &#x4E2D;&#x4E8B;&#x52A1;&#x7684;&#x5B9E;&#x73B0;&#x7279;&#x5F81;&#xFF1A;</p><ul><li><p>1&#x3001;&#x5728;&#x4E8B;&#x52A1;&#x4E2D;&#x7684;&#x6240;&#x6709;&#x547D;&#x4EE4;&#x90FD;&#x5C06;&#x4F1A;&#x88AB;&#x4E32;&#x884C;&#x5316;&#x7684;&#x987A;&#x5E8F;&#x6267;&#x884C;&#xFF0C;&#x4E8B;&#x52A1;&#x6267;&#x884C;&#x671F;&#x95F4;&#xFF0C;Redis &#x4E0D;&#x4F1A;&#x518D;&#x4E3A;&#x5176;&#x5B83;&#x5BA2;&#x6237;&#x7AEF;&#x7684;&#x8BF7;&#x6C42;&#x63D0;&#x4F9B;&#x4EFB;&#x4F55;&#x670D;&#x52A1;&#xFF0C;&#x4ECE;&#x800C;&#x4FDD;&#x8BC1;&#x4E86;&#x4E8B;&#x7269;&#x4E2D;&#x7684;&#x6240;&#x6709;&#x547D;&#x4EE4;&#x88AB;&#x539F;&#x5B50;&#x7684;&#x6267;&#x884C;&#x3002;</p></li><li><p>2&#x3001;&#x548C;&#x5173;&#x7CFB;&#x578B;&#x6570;&#x636E;&#x5E93;&#x4E2D;&#x7684;&#x4E8B;&#x52A1;&#x76F8;&#x6BD4;&#xFF0C;&#x5728; Redis &#x4E8B;&#x52A1;&#x4E2D;&#x5982;&#x679C;&#x6709;&#x67D0;&#x4E00;&#x6761;&#x547D;&#x4EE4;&#x6267;&#x884C;&#x5931;&#x8D25;&#xFF0C;&#x5176;&#x540E;&#x7684;&#x547D;&#x4EE4;&#x4ECD;&#x7136;&#x4F1A;&#x88AB;&#x7EE7;&#x7EED;&#x6267;&#x884C;&#x3002;</p></li><li><p>3&#x3001;&#x6211;&#x4EEC;&#x53EF;&#x4EE5;&#x901A;&#x8FC7; MULTI &#x547D;&#x4EE4;&#x5F00;&#x542F;&#x4E00;&#x4E2A;&#x4E8B;&#x52A1;&#xFF0C;&#x6709;&#x5173;&#x7CFB;&#x578B;&#x6570;&#x636E;&#x5E93;&#x5F00;&#x53D1;&#x7ECF;&#x9A8C;&#x7684;&#x4EBA;&#x53EF;&#x4EE5;&#x5C06;&#x5176;&#x7406;&#x89E3;&#x4E3A; <code>&quot;BEGIN TRANSACTION&quot;</code> &#x8BED;&#x53E5;&#x3002;&#x5728;&#x8BE5;&#x8BED;&#x53E5;&#x4E4B;&#x540E;&#x6267;&#x884C;&#x7684;&#x547D;&#x4EE4;&#x90FD;&#xFF0C;&#x5C06;&#x88AB;&#x89C6;&#x4E3A;&#x4E8B;&#x52A1;&#x4E4B;&#x5185;&#x7684;&#x64CD;&#x4F5C;&#xFF0C;&#x6700;&#x540E;&#x6211;&#x4EEC;&#x53EF;&#x4EE5;&#x901A;&#x8FC7;&#x6267;&#x884C; EXEC / DISCARD &#x547D;&#x4EE4;&#x6765;&#x63D0;&#x4EA4; / &#x56DE;&#x6EDA;&#x8BE5;&#x4E8B;&#x52A1;&#x5185;&#x7684;&#x6240;&#x6709;&#x64CD;&#x4F5C;&#x3002;&#x8FD9;&#x4E24;&#x4E2A; Redis &#x547D;&#x4EE4;&#xFF0C;&#x53EF;&#x88AB;&#x89C6;&#x4E3A;&#x7B49;&#x540C;&#x4E8E;&#x5173;&#x7CFB;&#x578B;&#x6570;&#x636E;&#x5E93;&#x4E2D;&#x7684; COMMIT / ROLLBACK &#x8BED;&#x53E5;&#x3002;</p></li><li><p>4&#x3001;&#x5728;&#x4E8B;&#x52A1;&#x5F00;&#x542F;&#x4E4B;&#x524D;&#xFF0C;&#x5982;&#x679C;&#x5BA2;&#x6237;&#x7AEF;&#x4E0E;&#x670D;&#x52A1;&#x5668;&#x4E4B;&#x95F4;&#x51FA;&#x73B0;&#x901A;&#x8BAF;&#x6545;&#x969C;&#x5E76;&#x5BFC;&#x81F4;&#x7F51;&#x7EDC;&#x65AD;&#x5F00;&#xFF0C;&#x5176;&#x540E;&#x6240;&#x6709;&#x5F85;&#x6267;&#x884C;&#x7684;&#x8BED;&#x53E5;&#x90FD;&#x5C06;&#x4E0D;&#x4F1A;&#x88AB;&#x670D;&#x52A1;&#x5668;&#x6267;&#x884C;&#x3002;&#x7136;&#x800C;&#x5982;&#x679C;&#x7F51;&#x7EDC;&#x4E2D;&#x65AD;&#x4E8B;&#x4EF6;&#x662F;&#x53D1;&#x751F;&#x5728;&#x5BA2;&#x6237;&#x7AEF;&#x6267;&#x884C; EXEC &#x547D;&#x4EE4;&#x4E4B;&#x540E;&#xFF0C;&#x90A3;&#x4E48;&#x8BE5;&#x4E8B;&#x52A1;&#x4E2D;&#x7684;&#x6240;&#x6709;&#x547D;&#x4EE4;&#x90FD;&#x4F1A;&#x88AB;&#x670D;&#x52A1;&#x5668;&#x6267;&#x884C;&#x3002;</p></li><li><p>5&#x3001;&#x5F53;&#x4F7F;&#x7528; Append-Only &#x6A21;&#x5F0F;&#x65F6;&#xFF0C;Redis &#x4F1A;&#x901A;&#x8FC7;&#x8C03;&#x7528;&#x7CFB;&#x7EDF;&#x51FD;&#x6570; write &#x5C06;&#x8BE5;&#x4E8B;&#x52A1;&#x5185;&#x7684;&#x6240;&#x6709;&#x5199;&#x64CD;&#x4F5C;&#x5728;&#x672C;&#x6B21;&#x8C03;&#x7528;&#x4E2D;&#x5168;&#x90E8;&#x5199;&#x5165;&#x78C1;&#x76D8;&#x3002;&#x7136;&#x800C;&#x5982;&#x679C;&#x5728;&#x5199;&#x5165;&#x7684;&#x8FC7;&#x7A0B;&#x4E2D;&#x51FA;&#x73B0;&#x7CFB;&#x7EDF;&#x5D29;&#x6E83;&#xFF0C;&#x5982;&#x7535;&#x6E90;&#x6545;&#x969C;&#x5BFC;&#x81F4;&#x7684;&#x5B95;&#x673A;&#xFF0C;&#x90A3;&#x4E48;&#x6B64;&#x65F6;&#x4E5F;&#x8BB8;&#x53EA;&#x6709;&#x90E8;&#x5206;&#x6570;&#x636E;&#x88AB;&#x5199;&#x5165;&#x5230;&#x78C1;&#x76D8;&#xFF0C;&#x800C;&#x53E6;&#x5916;&#x4E00;&#x90E8;&#x5206;&#x6570;&#x636E;&#x5374;&#x5DF2;&#x7ECF;&#x4E22;&#x5931;&#x3002;</p><blockquote><p>Redis &#x670D;&#x52A1;&#x5668;&#x4F1A;&#x5728;&#x91CD;&#x65B0;&#x542F;&#x52A8;&#x65F6;&#x6267;&#x884C;&#x4E00;&#x7CFB;&#x5217;&#x5FC5;&#x8981;&#x7684;&#x4E00;&#x81F4;&#x6027;&#x68C0;&#x6D4B;&#xFF0C;&#x4E00;&#x65E6;&#x53D1;&#x73B0;&#x7C7B;&#x4F3C;&#x95EE;&#x9898;&#xFF0C;&#x5C31;&#x4F1A;&#x7ACB;&#x5373;&#x9000;&#x51FA;&#x5E76;&#x7ED9;&#x51FA;&#x76F8;&#x5E94;&#x7684;&#x9519;&#x8BEF;&#x63D0;&#x793A;&#x3002;&#x6B64;&#x65F6;&#xFF0C;&#x6211;&#x4EEC;&#x5C31;&#x8981;&#x5145;&#x5206;&#x5229;&#x7528; Redis &#x5DE5;&#x5177;&#x5305;&#x4E2D;&#x63D0;&#x4F9B;&#x7684; redis-check-aof &#x5DE5;&#x5177;&#xFF0C;&#x8BE5;&#x5DE5;&#x5177;&#x53EF;&#x4EE5;&#x5E2E;&#x52A9;&#x6211;&#x4EEC;&#x5B9A;&#x4F4D;&#x5230;&#x6570;&#x636E;&#x4E0D;&#x4E00;&#x81F4;&#x7684;&#x9519;&#x8BEF;&#xFF0C;&#x5E76;&#x5C06;&#x5DF2;&#x7ECF;&#x5199;&#x5165;&#x7684;&#x90E8;&#x5206;&#x6570;&#x636E;&#x8FDB;&#x884C;&#x56DE;&#x6EDA;&#x3002;&#x4FEE;&#x590D;&#x4E4B;&#x540E;&#x6211;&#x4EEC;&#x5C31;&#x53EF;&#x4EE5;&#x518D;&#x6B21;&#x91CD;&#x65B0;&#x542F;&#x52A8;Redis&#x670D;&#x52A1;&#x5668;&#x4E86;&#x3002;</p></blockquote></li></ul><p><strong>&#x5982;&#x4F55;&#x5B9E;&#x73B0; Redis CAS &#x64CD;&#x4F5C;&#xFF1F;</strong></p><p>&#x5728; Redis &#x7684;&#x4E8B;&#x52A1;&#x4E2D;&#xFF0C;WATCH &#x547D;&#x4EE4;&#x53EF;&#x7528;&#x4E8E;&#x63D0;&#x4F9B;CAS(check-and-set)&#x529F;&#x80FD;&#x3002;</p><p>&#x5047;&#x8BBE;&#x6211;&#x4EEC;&#x901A;&#x8FC7; WATCH &#x547D;&#x4EE4;&#x5728;&#x4E8B;&#x52A1;&#x6267;&#x884C;&#x4E4B;&#x524D;&#x76D1;&#x63A7;&#x4E86;&#x591A;&#x4E2A; keys &#xFF0C;&#x5018;&#x82E5;&#x5728; WATCH &#x4E4B;&#x540E;&#x6709;&#x4EFB;&#x4F55; Key &#x7684;&#x503C;&#x53D1;&#x751F;&#x4E86;&#x53D8;&#x5316;&#xFF0C;EXEC &#x547D;&#x4EE4;&#x6267;&#x884C;&#x7684;&#x4E8B;&#x52A1;&#x90FD;&#x5C06;&#x88AB;&#x653E;&#x5F03;&#xFF0C;&#x540C;&#x65F6;&#x8FD4;&#x56DE; <code>nil</code> &#x5E94;&#x7B54;&#x4EE5;&#x901A;&#x77E5;&#x8C03;&#x7528;&#x8005;&#x4E8B;&#x52A1;&#x6267;&#x884C;&#x5931;&#x8D25;&#x3002;</p><p>&#x5177;&#x4F53;&#x7684;&#x793A;&#x4F8B;&#xFF0C;&#x53EF;&#x4EE5;&#x770B;&#x770B; <a href="https://www.jianshu.com/p/0244a875aa26" target="_blank" rel="noopener">&#x300A;Redis &#x4E8B;&#x52A1;&#x9501; CAS &#x5B9E;&#x73B0;&#x4EE5;&#x53CA;&#x6DF1;&#x5165;&#x8BEF;&#x533A;&#x300B;</a> &#x3002;</p><h2 id="Redis-&#x96C6;&#x7FA4;&#x90FD;&#x6709;&#x54EA;&#x4E9B;&#x65B9;&#x6848;&#xFF1F;"><a href="#Redis-&#x96C6;&#x7FA4;&#x90FD;&#x6709;&#x54EA;&#x4E9B;&#x65B9;&#x6848;&#xFF1F;" class="headerlink" title="Redis &#x96C6;&#x7FA4;&#x90FD;&#x6709;&#x54EA;&#x4E9B;&#x65B9;&#x6848;&#xFF1F;"></a>Redis &#x96C6;&#x7FA4;&#x90FD;&#x6709;&#x54EA;&#x4E9B;&#x65B9;&#x6848;&#xFF1F;</h2><p>Redis &#x96C6;&#x7FA4;&#x65B9;&#x6848;&#x5982;&#x4E0B;&#xFF1A;</p><ul><li>1&#x3001;Redis Sentinel</li><li>2&#x3001;Redis Cluster</li><li>3&#x3001;Twemproxy</li><li>4&#x3001;Codis</li><li>5&#x3001;&#x5BA2;&#x6237;&#x7AEF;&#x5206;&#x7247;</li></ul><p>&#x5173;&#x4E8E;&#x524D;&#x56DB;&#x79CD;&#xFF0C;&#x53EF;&#x4EE5;&#x770B;&#x770B; <a href="http://blog.720ui.com/2016/redis_action_04_cluster/" target="_blank" rel="noopener">&#x300A;Redis &#x5B9E;&#x6218;&#xFF08;&#x56DB;&#xFF09;&#x96C6;&#x7FA4;&#x673A;&#x5236;&#x300B;</a> &#x8FD9;&#x7BC7;&#x6587;&#x7AE0;&#x3002;</p><p>&#x5173;&#x4E8E;&#x6700;&#x540E;&#x4E00;&#x79CD;&#xFF0C;&#x5BA2;&#x6237;&#x7AEF;&#x5206;&#x7247;&#xFF0C;&#x5728; Redis Cluster &#x51FA;&#x73B0;&#x4E4B;&#x524D;&#x4F7F;&#x7528;&#x8F83;&#x591A;&#xFF0C;&#x76EE;&#x524D;&#x5DF2;&#x7ECF;&#x4F7F;&#x7528;&#x6BD4;&#x8F83;&#x5C11;&#x4E86;&#x3002;&#x5B9E;&#x73B0;&#x65B9;&#x5F0F;&#x5982;&#x4E0B;&#xFF1A;</p><blockquote><p>&#x5728;&#x4E1A;&#x52A1;&#x4EE3;&#x7801;&#x5C42;&#x5B9E;&#x73B0;&#xFF0C;&#x8D77;&#x51E0;&#x4E2A;&#x6BEB;&#x65E0;&#x5173;&#x8054;&#x7684; Redis &#x5B9E;&#x4F8B;&#xFF0C;&#x5728;&#x4EE3;&#x7801;&#x5C42;&#xFF0C;&#x5BF9; Key &#x8FDB;&#x884C; hash &#x8BA1;&#x7B97;&#xFF0C;&#x7136;&#x540E;&#x53BB;&#x5BF9;&#x5E94;&#x7684; Redis &#x5B9E;&#x4F8B;&#x64CD;&#x4F5C;&#x6570;&#x636E;&#x3002;</p><p>&#x8FD9;&#x79CD;&#x65B9;&#x5F0F;&#x5BF9; hash &#x5C42;&#x4EE3;&#x7801;&#x8981;&#x6C42;&#x6BD4;&#x8F83;&#x9AD8;&#xFF0C;&#x8003;&#x8651;&#x90E8;&#x5206;&#x5305;&#x62EC;&#xFF0C;&#x8282;&#x70B9;&#x5931;&#x6548;&#x540E;&#x7684;&#x66FF;&#x4EE3;&#x7B97;&#x6CD5;&#x65B9;&#x6848;&#xFF0C;&#x6570;&#x636E;&#x9707;&#x8361;&#x540E;&#x7684;&#x81EA;&#x52A8;&#x811A;&#x672C;&#x6062;&#x590D;&#xFF0C;&#x5B9E;&#x4F8B;&#x7684;&#x76D1;&#x63A7;&#xFF0C;&#x7B49;&#x7B49;&#x3002;</p></blockquote><p><strong>&#x9009;&#x62E9;</strong></p><p>&#x76EE;&#x524D;&#x4E00;&#x822C;&#x5728;&#x9009;&#x578B;&#x4E0A;&#x6765;&#x8BF4;&#xFF1A;</p><ul><li>&#x4F53;&#x91CF;&#x8F83;&#x5C0F;&#x65F6;&#xFF0C;&#x9009;&#x62E9; Redis Sentinel &#xFF0C;&#x5355;&#x4E3B; Redis &#x8DB3;&#x4EE5;&#x652F;&#x6491;&#x4E1A;&#x52A1;&#x3002;</li><li><p>&#x4F53;&#x91CF;&#x8F83;&#x5927;&#x65F6;&#xFF0C;&#x9009;&#x62E9; Redis Cluster &#xFF0C;&#x901A;&#x8FC7;&#x5206;&#x7247;&#xFF0C;&#x4F7F;&#x7528;&#x66F4;&#x591A;&#x5185;&#x5B58;&#x3002;</p><p><strong>Redis &#x96C6;&#x7FA4;&#x5982;&#x4F55;&#x6269;&#x5BB9;&#xFF1F;</strong></p></li></ul><blockquote><p>&#x8FD9;&#x4E2A;&#x95EE;&#x9898;&#xFF0C;&#x827F;&#x827F;&#x4E86;&#x89E3;&#x7684;&#x4E5F;&#x4E0D;&#x662F;&#x5F88;&#x591A;&#xFF0C;&#x5EFA;&#x8BAE;&#x5728;&#x641C;&#x7D22;&#x6709;&#x4EC0;&#x4E48;&#x65B9;&#x6848;&#x3002;</p></blockquote><ul><li>&#x5982;&#x679C; Redis &#x88AB;&#x5F53;&#x505A;<strong>&#x7F13;&#x5B58;</strong>&#x4F7F;&#x7528;&#xFF0C;&#x4F7F;&#x7528;&#x4E00;&#x81F4;&#x6027;&#x54C8;&#x5E0C;&#x5B9E;&#x73B0;&#x52A8;&#x6001;&#x6269;&#x5BB9;&#x7F29;&#x5BB9;&#x3002;</li><li>&#x5982;&#x679C; Redis &#x88AB;&#x5F53;&#x505A;&#x4E00;&#x4E2A;<strong>&#x6301;&#x4E45;&#x5316;&#x5B58;</strong>&#x50A8;&#x4F7F;&#x7528;&#xFF0C;&#x5FC5;&#x987B;&#x4F7F;&#x7528;&#x56FA;&#x5B9A;&#x7684; keys-to-nodes &#x6620;&#x5C04;&#x5173;&#x7CFB;&#xFF0C;&#x8282;&#x70B9;&#x7684;&#x6570;&#x91CF;&#x4E00;&#x65E6;&#x786E;&#x5B9A;&#x4E0D;&#x80FD;&#x53D8;&#x5316;&#x3002;&#x5426;&#x5219;&#x7684;&#x8BDD;(&#x5373;Redis &#x8282;&#x70B9;&#x9700;&#x8981;&#x52A8;&#x6001;&#x53D8;&#x5316;&#x7684;&#x60C5;&#x51B5;&#xFF09;&#xFF0C;&#x5FC5;&#x987B;&#x4F7F;&#x7528;&#x53EF;&#x4EE5;&#x5728;&#x8FD0;&#x884C;&#x65F6;&#x8FDB;&#x884C;&#x6570;&#x636E;&#x518D;&#x5E73;&#x8861;&#x7684;&#x4E00;&#x5957;&#x7CFB;&#x7EDF;&#xFF0C;&#x800C;&#x5F53;&#x524D;&#x53EA;&#x6709; Redis Cluster&#x3001;Codis &#x53EF;&#x4EE5;&#x505A;&#x5230;&#x8FD9;&#x6837;&#x3002;</li></ul><h2 id="&#x4EC0;&#x4E48;&#x662F;-Redis-&#x4E3B;&#x4ECE;&#x540C;&#x6B65;&#xFF1F;"><a href="#&#x4EC0;&#x4E48;&#x662F;-Redis-&#x4E3B;&#x4ECE;&#x540C;&#x6B65;&#xFF1F;" class="headerlink" title="&#x4EC0;&#x4E48;&#x662F; Redis &#x4E3B;&#x4ECE;&#x540C;&#x6B65;&#xFF1F;"></a>&#x4EC0;&#x4E48;&#x662F; Redis &#x4E3B;&#x4ECE;&#x540C;&#x6B65;&#xFF1F;</h2><p><strong>Redis &#x4E3B;&#x4ECE;&#x540C;&#x6B65;</strong></p><p>Redis &#x7684;&#x4E3B;&#x4ECE;&#x540C;&#x6B65;(replication)&#x673A;&#x5236;&#xFF0C;&#x5141;&#x8BB8; Slave &#x4ECE; Master &#x90A3;&#x91CC;&#xFF0C;&#x901A;&#x8FC7;&#x7F51;&#x7EDC;&#x4F20;&#x8F93;&#x62F7;&#x8D1D;&#x5230;&#x5B8C;&#x6574;&#x7684;&#x6570;&#x636E;&#x5907;&#x4EFD;&#xFF0C;&#x4ECE;&#x800C;&#x8FBE;&#x5230;&#x4E3B;&#x4ECE;&#x673A;&#x5236;&#x3002;</p><ul><li>&#x4E3B;&#x6570;&#x636E;&#x5E93;&#x53EF;&#x4EE5;&#x8FDB;&#x884C;&#x8BFB;&#x5199;&#x64CD;&#x4F5C;&#xFF0C;&#x5F53;&#x53D1;&#x751F;&#x5199;&#x64CD;&#x4F5C;&#x7684;&#x65F6;&#x5019;&#x81EA;&#x52A8;&#x5C06;&#x6570;&#x636E;&#x540C;&#x6B65;&#x5230;&#x4ECE;&#x6570;&#x636E;&#x5E93;&#xFF0C;&#x800C;&#x4ECE;&#x6570;&#x636E;&#x5E93;&#x4E00;&#x822C;&#x662F;&#x53EA;&#x8BFB;&#x7684;&#xFF0C;&#x5E76;&#x63A5;&#x6536;&#x4E3B;&#x6570;&#x636E;&#x5E93;&#x540C;&#x6B65;&#x8FC7;&#x6765;&#x7684;&#x6570;&#x636E;&#x3002;</li><li>&#x4E00;&#x4E2A;&#x4E3B;&#x6570;&#x636E;&#x5E93;&#x53EF;&#x4EE5;&#x6709;&#x591A;&#x4E2A;&#x4ECE;&#x6570;&#x636E;&#x5E93;&#xFF0C;&#x800C;&#x4E00;&#x4E2A;&#x4ECE;&#x6570;&#x636E;&#x5E93;&#x53EA;&#x80FD;&#x6709;&#x4E00;&#x4E2A;&#x4E3B;&#x6570;&#x636E;&#x5E93;&#x3002;</li><li>&#x7B2C;&#x4E00;&#x6B21;&#x540C;&#x6B65;&#x65F6;&#xFF0C;&#x4E3B;&#x8282;&#x70B9;&#x505A;&#x4E00;&#x6B21; bgsave &#x64CD;&#x4F5C;&#xFF0C;&#x5E76;&#x540C;&#x65F6;&#x5C06;&#x540E;&#x7EED;&#x4FEE;&#x6539;&#x64CD;&#x4F5C;&#x8BB0;&#x5F55;&#x5230;&#x5185;&#x5B58; buffer &#xFF0C;&#x5F85;&#x5B8C;&#x6210;&#x540E;&#x5C06; RDB &#x6587;&#x4EF6;&#x5168;&#x91CF;&#x540C;&#x6B65;&#x5230;&#x590D;&#x5236;&#x8282;&#x70B9;&#xFF0C;&#x590D;&#x5236;&#x8282;&#x70B9;&#x63A5;&#x53D7;&#x5B8C;&#x6210;&#x540E;&#x5C06; RDB &#x955C;&#x50CF;&#x52A0;&#x8F7D;&#x5230;&#x5185;&#x5B58;&#x3002;&#x52A0;&#x8F7D;&#x5B8C;&#x6210;&#x540E;&#xFF0C;&#x518D;&#x901A;&#x77E5;&#x4E3B;&#x8282;&#x70B9;&#x5C06;&#x671F;&#x95F4;&#x4FEE;&#x6539;&#x7684;&#x64CD;&#x4F5C;&#x8BB0;&#x5F55;&#x540C;&#x6B65;&#x5230;&#x590D;&#x5236;&#x8282;&#x70B9;&#x8FDB;&#x884C;&#x91CD;&#x653E;&#x5C31;&#x5B8C;&#x6210;&#x4E86;&#x540C;&#x6B65;&#x8FC7;&#x7A0B;&#x3002;</li></ul><p><strong>&#x597D;&#x5904;</strong></p><p>&#x901A;&#x8FC7; Redis &#x7684;&#x590D;&#x5236;&#x529F;&#xFF0C;&#x80FD;&#x53EF;&#x4EE5;&#x5F88;&#x597D;&#x7684;&#x5B9E;&#x73B0;&#x6570;&#x636E;&#x5E93;&#x7684;&#x8BFB;&#x5199;&#x5206;&#x79BB;&#xFF0C;&#x63D0;&#x9AD8;&#x670D;&#x52A1;&#x5668;&#x7684;&#x8D1F;&#x8F7D;&#x80FD;&#x529B;&#x3002;&#x4E3B;&#x6570;&#x636E;&#x5E93;&#x4E3B;&#x8981;&#x8FDB;&#x884C;&#x5199;&#x64CD;&#x4F5C;&#xFF0C;&#x800C;&#x4ECE;&#x6570;&#x636E;&#x5E93;&#x8D1F;&#x8D23;&#x8BFB;&#x64CD;&#x4F5C;&#x3002;</p><p>Redis &#x4E3B;&#x4ECE;&#x540C;&#x6B65;&#xFF0C;&#x662F;&#x5F88;&#x591A; Redis &#x96C6;&#x7FA4;&#x65B9;&#x6848;&#x7684;&#x57FA;&#x7840;&#xFF0C;&#x4F8B;&#x5982; Redis Sentinel&#x3001;Redis Cluster &#x7B49;&#x7B49;&#x3002;</p><p>&#x66F4;&#x591A;&#x8BE6;&#x7EC6;&#xFF0C;&#x53EF;&#x4EE5;&#x770B;&#x770B; <a href="https://github.com/doocs/advanced-java/blob/master/docs/high-concurrency/redis-master-slave.md" target="_blank" rel="noopener">&#x300A;Redis &#x4E3B;&#x4ECE;&#x67B6;&#x6784;&#x300B;</a> &#x3002;</p><h2 id="&#x5982;&#x4F55;&#x4F7F;&#x7528;-Redis-Sentinel-&#x5B9E;&#x73B0;&#x9AD8;&#x53EF;&#x7528;&#xFF1F;"><a href="#&#x5982;&#x4F55;&#x4F7F;&#x7528;-Redis-Sentinel-&#x5B9E;&#x73B0;&#x9AD8;&#x53EF;&#x7528;&#xFF1F;" class="headerlink" title="&#x5982;&#x4F55;&#x4F7F;&#x7528; Redis Sentinel &#x5B9E;&#x73B0;&#x9AD8;&#x53EF;&#x7528;&#xFF1F;"></a>&#x5982;&#x4F55;&#x4F7F;&#x7528; Redis Sentinel &#x5B9E;&#x73B0;&#x9AD8;&#x53EF;&#x7528;&#xFF1F;</h2><p>&#x53EF;&#x4EE5;&#x770B;&#x770B; <a href="https://github.com/doocs/advanced-java/blob/master/docs/high-concurrency/redis-sentinel.md" target="_blank" rel="noopener">&#x300A;Redis &#x54E8;&#x5175;&#x96C6;&#x7FA4;&#x5B9E;&#x73B0;&#x9AD8;&#x53EF;&#x7528;&#x300B;</a> &#x3002;</p><h2 id="&#x5982;&#x679C;&#x4F7F;&#x7528;-Redis-Cluster-&#x5B9E;&#x73B0;&#x9AD8;&#x53EF;&#x7528;&#xFF1F;"><a href="#&#x5982;&#x679C;&#x4F7F;&#x7528;-Redis-Cluster-&#x5B9E;&#x73B0;&#x9AD8;&#x53EF;&#x7528;&#xFF1F;" class="headerlink" title="&#x5982;&#x679C;&#x4F7F;&#x7528; Redis Cluster &#x5B9E;&#x73B0;&#x9AD8;&#x53EF;&#x7528;&#xFF1F;"></a>&#x5982;&#x679C;&#x4F7F;&#x7528; Redis Cluster &#x5B9E;&#x73B0;&#x9AD8;&#x53EF;&#x7528;&#xFF1F;</h2><p>&#x53EF;&#x4EE5;&#x770B;&#x770B;</p><ul><li><a href="http://redis.cn/topics/cluster-tutorial.html" target="_blank" rel="noopener">&#x300A;Redis &#x96C6;&#x7FA4;&#x6559;&#x7A0B;&#x300B;</a> &#x5B8C;&#x6574;&#x7248;</li><li><a href="https://github.com/doocs/advanced-java/blob/master/docs/high-concurrency/redis-cluster.md" target="_blank" rel="noopener">&#x300A;Redis &#x96C6;&#x7FA4;&#x6A21;&#x5F0F;&#x7684;&#x5DE5;&#x4F5C;&#x539F;&#x7406;&#x80FD;&#x8BF4;&#x4E00;&#x4E0B;&#x4E48;&#xFF1F;&#x300B;</a> &#x7CBE;&#x7B80;&#x7248;</li></ul><p><strong>&#x8BF4;&#x8BF4; Redis &#x54C8;&#x5E0C;&#x69FD;&#x7684;&#x6982;&#x5FF5;&#xFF1F;</strong></p><p>Redis Cluster &#x6CA1;&#x6709;&#x4F7F;&#x7528;&#x4E00;&#x81F4;&#x6027; hash &#xFF0C;&#x800C;&#x662F;&#x5F15;&#x5165;&#x4E86;&#x54C8;&#x5E0C;&#x69FD;&#x7684;&#x6982;&#x5FF5;&#x3002;</p><p>Redis &#x96C6;&#x7FA4;&#x6709; 16384 &#x4E2A;&#x54C8;&#x5E0C;&#x69FD;&#xFF0C;&#x6BCF;&#x4E2A; key &#x901A;&#x8FC7; CRC16 &#x6821;&#x9A8C;&#x540E;&#x5BF9; 16384 &#x53D6;&#x6A21;&#x6765;&#x51B3;&#x5B9A;&#x653E;&#x7F6E;&#x54EA;&#x4E2A;&#x69FD;&#xFF0C;&#x96C6;&#x7FA4;&#x7684;&#x6BCF;&#x4E2A;&#x8282;&#x70B9;&#x8D1F;&#x8D23;&#x4E00;&#x90E8;&#x5206; hash &#x69FD;&#x3002;</p><p>&#x56E0;&#x4E3A;&#x6700;&#x5927;&#x662F; 16384 &#x4E2A;&#x54C8;&#x5E0C;&#x69FD;&#xFF0C;&#x6240;&#x4EE5;&#x8003;&#x8651; Redis &#x96C6;&#x7FA4;&#x4E2D;&#x7684;&#x6BCF;&#x4E2A;&#x8282;&#x70B9;&#x90FD;&#x80FD;&#x5206;&#x914D;&#x5230;&#x4E00;&#x4E2A;&#x54C8;&#x5E0C;&#x69FD;&#xFF0C;&#x6240;&#x4EE5;&#x6700;&#x591A;&#x652F;&#x6301; 16384 &#x4E2A; Redis &#x8282;&#x70B9;&#x3002;</p><p> <strong>Redis Cluster &#x7684;&#x4E3B;&#x4ECE;&#x590D;&#x5236;&#x6A21;&#x578B;&#x662F;&#x600E;&#x6837;&#x7684;&#xFF1F;</strong></p><p>&#x4E3A;&#x4E86;&#x4F7F;&#x5728;&#x90E8;&#x5206;&#x8282;&#x70B9;&#x5931;&#x8D25;&#x6216;&#x8005;&#x5927;&#x90E8;&#x5206;&#x8282;&#x70B9;&#x65E0;&#x6CD5;&#x901A;&#x4FE1;&#x7684;&#x60C5;&#x51B5;&#x4E0B;&#x96C6;&#x7FA4;&#x4ECD;&#x7136;&#x53EF;&#x7528;&#xFF0C;&#x6240;&#x4EE5;&#x96C6;&#x7FA4;&#x4F7F;&#x7528;&#x4E86;<strong>&#x4E3B;&#x4ECE;&#x590D;&#x5236;</strong>&#x6A21;&#x578B;&#xFF0C;&#x6BCF;&#x4E2A;&#x8282;&#x70B9;&#x90FD;&#x4F1A;&#x6709; N-1 &#x4E2A;&#x590D;&#x5236;&#x8282;&#x70B9;&#x3002;</p><p>&#x6240;&#x4EE5;&#xFF0C;Redis Cluster &#x53EF;&#x4EE5;&#x8BF4;&#x662F; Redis Sentinel &#x5E26;&#x5206;&#x7247;&#x7684;&#x52A0;&#x5F3A;&#x7248;&#x3002;&#x4E5F;&#x53EF;&#x4EE5;&#x8BF4;&#xFF1A;</p><ul><li>Redis Sentinel &#x7740;&#x773C;&#x4E8E;&#x9AD8;&#x53EF;&#x7528;&#xFF0C;&#x5728; master &#x5B95;&#x673A;&#x65F6;&#x4F1A;&#x81EA;&#x52A8;&#x5C06; slave &#x63D0;&#x5347;&#x4E3A; master &#xFF0C;&#x7EE7;&#x7EED;&#x63D0;&#x4F9B;&#x670D;&#x52A1;&#x3002;</li><li>Redis Cluster &#x7740;&#x773C;&#x4E8E;&#x6269;&#x5C55;&#x6027;&#xFF0C;&#x5728;&#x5355;&#x4E2A; Redis &#x5185;&#x5B58;&#x4E0D;&#x8DB3;&#x65F6;&#xFF0C;&#x4F7F;&#x7528;Cluster &#x8FDB;&#x884C;&#x5206;&#x7247;&#x5B58;&#x50A8;&#x3002;</li></ul><p><strong>Redis Cluster &#x65B9;&#x6848;&#x4EC0;&#x4E48;&#x60C5;&#x51B5;&#x4E0B;&#x4F1A;&#x5BFC;&#x81F4;&#x6574;&#x4E2A;&#x96C6;&#x7FA4;&#x4E0D;&#x53EF;&#x7528;&#xFF1F;</strong></p><p>&#x6709; A&#xFF0C;B&#xFF0C;C &#x4E09;&#x4E2A;&#x8282;&#x70B9;&#x7684;&#x96C6;&#x7FA4;&#xFF0C;&#x5728;&#x6CA1;&#x6709;&#x590D;&#x5236;&#x6A21;&#x578B;&#x7684;&#x60C5;&#x51B5;&#x4E0B;&#xFF0C;&#x5982;&#x679C;&#x8282;&#x70B9; B &#x5B95;&#x673A;&#x4E86;&#xFF0C;&#x90A3;&#x4E48;&#x6574;&#x4E2A;&#x96C6;&#x7FA4;&#x5C31;&#x4F1A;&#x4EE5;&#x4E3A;&#x7F3A;&#x5C11; 5501-11000 &#x8FD9;&#x4E2A;&#x8303;&#x56F4;&#x7684;&#x69FD;&#x800C;&#x4E0D;&#x53EF;&#x7528;&#x3002;</p><p> <strong>Redis Cluster &#x4F1A;&#x6709;&#x5199;&#x64CD;&#x4F5C;&#x4E22;&#x5931;&#x5417;&#xFF1F;&#x4E3A;&#x4EC0;&#x4E48;&#xFF1F;</strong></p><p>Redis &#x5E76;&#x4E0D;&#x80FD;&#x4FDD;&#x8BC1;&#x6570;&#x636E;&#x7684;&#x5F3A;&#x4E00;&#x81F4;&#x6027;&#xFF0C;&#x800C;&#x662F;&#x3010;&#x5F02;&#x6B65;&#x590D;&#x5236;&#x3011;&#xFF0C;&#x8FD9;&#x610F;&#x5473;&#x8FD9;&#x5728;&#x5B9E;&#x9645;&#x4E2D;&#x96C6;&#x7FA4;&#x5728;&#x7279;&#x5B9A;&#x7684;&#x6761;&#x4EF6;&#x4E0B;&#x53EF;&#x80FD;&#x4F1A;&#x4E22;&#x5931;&#x5199;&#x64CD;&#x4F5C;&#x3002;</p><p><strong>Redis &#x96C6;&#x7FA4;&#x5982;&#x4F55;&#x9009;&#x62E9;&#x6570;&#x636E;&#x5E93;&#xFF1F;</strong></p><p>Redis &#x96C6;&#x7FA4;&#x76EE;&#x524D;&#x65E0;&#x6CD5;&#x505A;&#x6570;&#x636E;&#x5E93;&#x9009;&#x62E9;&#xFF0C;&#x9ED8;&#x8BA4;&#x5728; 0 &#x6570;&#x636E;&#x5E93;&#x3002;</p><p><strong>&#x8BF7;&#x8BF4;&#x8BF4;&#x751F;&#x4EA7;&#x73AF;&#x5883;&#x4E2D;&#x7684; Redis &#x662F;&#x600E;&#x4E48;&#x90E8;&#x7F72;&#x7684;&#xFF1F;</strong></p><blockquote><p>&#x91CD;&#x70B9;&#x95EE;&#x9898;&#xFF0C;&#x4ED4;&#x7EC6;&#x7406;&#x89E3;&#x3002;</p></blockquote><ul><li>Redis Cluster&#xFF0C;10 &#x53F0;&#x673A;&#x5668;&#xFF0C;5 &#x53F0;&#x673A;&#x5668;&#x90E8;&#x7F72;&#x4E86; redis &#x4E3B;&#x5B9E;&#x4F8B;&#xFF0C;&#x53E6;&#x5916; 5 &#x53F0;&#x673A;&#x5668;&#x90E8;&#x7F72;&#x4E86; redis &#x7684;&#x4ECE;&#x5B9E;&#x4F8B;&#xFF0C;&#x6BCF;&#x4E2A;&#x4E3B;&#x5B9E;&#x4F8B;&#x6302;&#x4E86;&#x4E00;&#x4E2A;&#x4ECE;&#x5B9E;&#x4F8B;&#xFF0C;5 &#x4E2A;&#x8282;&#x70B9;&#x5BF9;&#x5916;&#x63D0;&#x4F9B;&#x8BFB;&#x5199;&#x670D;&#x52A1;&#xFF0C;&#x6BCF;&#x4E2A;&#x8282;&#x70B9;&#x7684;&#x8BFB;&#x5199;&#x9AD8;&#x5CF0; qps &#x53EF;&#x80FD;&#x53EF;&#x4EE5;&#x8FBE;&#x5230;&#x6BCF;&#x79D2; 5 &#x4E07;&#xFF0C;5 &#x53F0;&#x673A;&#x5668;&#x6700;&#x591A;&#x662F; 25 &#x4E07;&#x8BFB;&#x5199;&#x8BF7;&#x6C42;&#x6BCF;&#x79D2;&#x3002;</li><li>&#x673A;&#x5668;&#x662F;&#x4EC0;&#x4E48;&#x914D;&#x7F6E;&#xFF1F;32G &#x5185;&#x5B58; + 8 &#x6838; CPU + 1T &#x78C1;&#x76D8;&#xFF0C;&#x4F46;&#x662F;&#x5206;&#x914D;&#x7ED9; Redis &#x8FDB;&#x7A0B;&#x7684;&#x662F; 10g &#x5185;&#x5B58;&#xFF0C;&#x4E00;&#x822C;&#x7EBF;&#x4E0A;&#x751F;&#x4EA7;&#x73AF;&#x5883;&#xFF0C;Redis &#x7684;&#x5185;&#x5B58;&#x5C3D;&#x91CF;&#x4E0D;&#x8981;&#x8D85;&#x8FC7; 10g&#xFF0C;&#x8D85;&#x8FC7; 10g &#x53EF;&#x80FD;&#x4F1A;&#x6709;&#x95EE;&#x9898;&#x3002;&#x90A3;&#x4E48;&#xFF0C;5 &#x53F0;&#x673A;&#x5668;&#x5BF9;&#x5916;&#x63D0;&#x4F9B;&#x8BFB;&#x5199;&#xFF0C;&#x4E00;&#x5171;&#x6709; 50g &#x5185;&#x5B58;&#x3002;</li><li>&#x56E0;&#x4E3A;&#x6BCF;&#x4E2A;&#x4E3B;&#x5B9E;&#x4F8B;&#x90FD;&#x6302;&#x4E86;&#x4E00;&#x4E2A;&#x4ECE;&#x5B9E;&#x4F8B;&#xFF0C;&#x6240;&#x4EE5;&#x662F;&#x9AD8;&#x53EF;&#x7528;&#x7684;&#xFF0C;&#x4EFB;&#x4F55;&#x4E00;&#x4E2A;&#x4E3B;&#x5B9E;&#x4F8B;&#x5B95;&#x673A;&#xFF0C;&#x90FD;&#x4F1A;&#x81EA;&#x52A8;&#x6545;&#x969C;&#x8FC1;&#x79FB;&#xFF0C;Redis &#x4ECE;&#x5B9E;&#x4F8B;&#x4F1A;&#x81EA;&#x52A8;&#x53D8;&#x6210;&#x4E3B;&#x5B9E;&#x4F8B;&#x7EE7;&#x7EED;&#x63D0;&#x4F9B;&#x8BFB;&#x5199;&#x670D;&#x52A1;&#x3002;</li><li>&#x4F60;&#x5F80;&#x5185;&#x5B58;&#x91CC;&#x5199;&#x7684;&#x662F;&#x4EC0;&#x4E48;&#x6570;&#x636E;&#xFF1F;&#x6BCF;&#x6761;&#x6570;&#x636E;&#x7684;&#x5927;&#x5C0F;&#x662F;&#x591A;&#x5C11;&#xFF1F;&#x5546;&#x54C1;&#x6570;&#x636E;&#xFF0C;&#x6BCF;&#x6761;&#x6570;&#x636E;&#x662F; 10kb &#x3002;100 &#x6761;&#x6570;&#x636E;&#x662F; 1mb &#xFF0C;10 &#x4E07;&#x6761;&#x6570;&#x636E;&#x662F; 1g &#x3002;&#x5E38;&#x9A7B;&#x5185;&#x5B58;&#x7684;&#x662F; 200 &#x4E07;&#x6761;&#x5546;&#x54C1;&#x6570;&#x636E;&#xFF0C;&#x5360;&#x7528;&#x5185;&#x5B58;&#x662F; 20g&#xFF0C;&#x4EC5;&#x4EC5;&#x4E0D;&#x5230;&#x603B;&#x5185;&#x5B58;&#x7684; 50%&#x3002;&#x76EE;&#x524D;&#x9AD8;&#x5CF0;&#x671F;&#x6BCF;&#x79D2;&#x5C31;&#x662F; 3500 &#x5DE6;&#x53F3;&#x7684;&#x8BF7;&#x6C42;&#x91CF;&#x3002;</li><li>&#x5176;&#x5B9E;&#x5927;&#x578B;&#x7684;&#x516C;&#x53F8;&#xFF0C;&#x4F1A;&#x6709;&#x57FA;&#x7840;&#x67B6;&#x6784;&#x7684; team &#x8D1F;&#x8D23;&#x7F13;&#x5B58;&#x96C6;&#x7FA4;&#x7684;&#x8FD0;&#x7EF4;&#x3002;</li></ul><h2 id="&#x4EC0;&#x4E48;&#x662F;-Redis-&#x5206;&#x533A;&#xFF1F;"><a href="#&#x4EC0;&#x4E48;&#x662F;-Redis-&#x5206;&#x533A;&#xFF1F;" class="headerlink" title="&#x4EC0;&#x4E48;&#x662F; Redis &#x5206;&#x533A;&#xFF1F;"></a>&#x4EC0;&#x4E48;&#x662F; Redis &#x5206;&#x533A;&#xFF1F;</h2><blockquote><p>&#x8FD9;&#x4E2A;&#x95EE;&#x9898;&#xFF0C;&#x548C; <a href="http://svip.iocoder.cn/Redis/Interview/#" target="_blank" rel="noopener">&#x300C;Redis &#x96C6;&#x7FA4;&#x90FD;&#x6709;&#x54EA;&#x4E9B;&#x65B9;&#x6848;&#xFF1F;&#x300D;</a> &#x662F;&#x540C;&#x7C7B;&#x95EE;&#x9898;&#x3002;</p></blockquote><p> &#x5173;&#x4E8E;&#x5982;&#x4E0B;&#x56DB;&#x4E2A;&#x95EE;&#x9898;&#xFF0C;&#x76F4;&#x63A5;&#x770B; <a href="http://www.runoob.com/redis/redis-partitioning.html" target="_blank" rel="noopener">&#x300A;Redis &#x5206;&#x533A;&#x300B;</a> &#x6587;&#x7AE0;&#x3002;</p><ul><li>Redis &#x5206;&#x533A;&#x662F;&#x4EC0;&#x4E48;&#xFF1F;</li><li>&#x5206;&#x533A;&#x7684;&#x4F18;&#x52BF;&#xFF1F;</li><li>&#x5206;&#x533A;&#x7684;&#x4E0D;&#x8DB3;&#xFF1F;</li><li>&#x5206;&#x533A;&#x7C7B;&#x578B;&#xFF1F;</li></ul><p>&#x53EF;&#x80FD;&#x6709;&#x80D6;&#x53CB;&#x4F1A;&#x61F5;&#x903C;&#xFF0C;&#x53C8;&#x662F; Redis &#x4E3B;&#x4ECE;&#x590D;&#x5236;&#xFF0C;&#x53C8;&#x662F; Redis &#x5206;&#x533A;&#xFF0C;&#x53C8;&#x662F; Redis &#x96C6;&#x7FA4;&#x3002;&#x50BB;&#x50BB;&#x5206;&#x4E0D;&#x6E05;&#x554A;&#xFF01;</p><ul><li>Redis &#x5206;&#x533A;&#x662F;&#x4E00;&#x79CD;&#x6A21;&#x5F0F;&#xFF0C;&#x5C06;&#x6570;&#x636E;&#x5206;&#x533A;&#x5230;&#x4E0D;&#x540C;&#x7684; Redis &#x8282;&#x70B9;&#x4E0A;&#xFF0C;&#x800C; Redis &#x96C6;&#x7FA4;&#x7684; Redis Cluster&#x3001;Twemproxy&#x3001;Codis&#x3001;&#x5BA2;&#x6237;&#x7AEF;&#x5206;&#x7247;( &#x4E0D;&#x5305;&#x62EC; Redis Sentinel ) &#x8FD9;&#x56DB;&#x79CD;&#x65B9;&#x6848;&#xFF0C;&#x662F; Redis &#x5206;&#x533A;&#x7684;&#x5177;&#x4F53;&#x5B9E;&#x73B0;&#x3002;</li><li>Redis &#x6BCF;&#x4E2A;&#x5206;&#x533A;&#xFF0C;&#x5982;&#x679C;&#x60F3;&#x8981;&#x5B9E;&#x73B0;&#x9AD8;&#x53EF;&#x7528;&#xFF0C;&#x9700;&#x8981;&#x4F7F;&#x7528;&#x5230; Redis &#x4E3B;&#x4ECE;&#x590D;&#x5236;&#x3002;</li></ul><p><strong>&#x4F60;&#x77E5;&#x9053;&#x6709;&#x54EA;&#x4E9B; Redis &#x5206;&#x533A;&#x5B9E;&#x73B0;&#x65B9;&#x6848;</strong>&#xFF1F;</p><p>Redis &#x5206;&#x533A;&#x65B9;&#x6848;&#xFF0C;&#x4E3B;&#x8981;&#x5206;&#x6210;&#x4E24;&#x79CD;&#x7C7B;&#x578B;&#xFF1A;</p><ul><li>&#x5BA2;&#x6237;&#x7AEF;&#x5206;&#x533A;&#xFF0C;&#x5C31;&#x662F;&#x5728;&#x5BA2;&#x6237;&#x7AEF;&#x5C31;&#x5DF2;&#x7ECF;&#x51B3;&#x5B9A;&#x6570;&#x636E;&#x4F1A;&#x88AB;&#x5B58;&#x50A8;&#x5230;&#x54EA;&#x4E2A; Redis &#x8282;&#x70B9;&#x6216;&#x8005;&#x4ECE;&#x54EA;&#x4E2A; Redis &#x8282;&#x70B9;&#x8BFB;&#x53D6;&#x3002;&#x5927;&#x591A;&#x6570;&#x5BA2;&#x6237;&#x7AEF;&#x5DF2;&#x7ECF;&#x5B9E;&#x73B0;&#x4E86;&#x5BA2;&#x6237;&#x7AEF;&#x5206;&#x533A;&#x3002;<ul><li>&#x6848;&#x4F8B;&#xFF1A;Redis Cluster &#x548C;&#x5BA2;&#x6237;&#x7AEF;&#x5206;&#x533A;&#x3002;</li></ul></li><li>&#x4EE3;&#x7406;&#x5206;&#x533A;&#xFF0C;&#x610F;&#x5473;&#x7740;&#x5BA2;&#x6237;&#x7AEF;&#x5C06;&#x8BF7;&#x6C42;&#x53D1;&#x9001;&#x7ED9;&#x4EE3;&#x7406;&#xFF0C;&#x7136;&#x540E;&#x4EE3;&#x7406;&#x51B3;&#x5B9A;&#x53BB;&#x54EA;&#x4E2A;&#x8282;&#x70B9;&#x5199;&#x6570;&#x636E;&#x6216;&#x8005;&#x8BFB;&#x6570;&#x636E;&#x3002;&#x4EE3;&#x7406;&#x6839;&#x636E;&#x5206;&#x533A;&#x89C4;&#x5219;&#x51B3;&#x5B9A;&#x8BF7;&#x6C42;&#x54EA;&#x4E9B; Redis &#x5B9E;&#x4F8B;&#xFF0C;&#x7136;&#x540E;&#x6839;&#x636E; Redis &#x7684;&#x54CD;&#x5E94;&#x7ED3;&#x679C;&#x8FD4;&#x56DE;&#x7ED9;&#x5BA2;&#x6237;&#x7AEF;&#x3002; <ul><li>&#x6848;&#x4F8B;&#xFF1A;Twemproxy &#x548C; Codis &#x3002;</li></ul></li></ul><p>&#x67E5;&#x8BE2;&#x8DEF;&#x7531;(Query routing)&#x7684;&#x610F;&#x601D;&#xFF0C;&#x662F;&#x5BA2;&#x6237;&#x7AEF;&#x968F;&#x673A;&#x5730;&#x8BF7;&#x6C42;&#x4EFB;&#x610F;&#x4E00;&#x4E2A; Redis &#x5B9E;&#x4F8B;&#xFF0C;&#x7136;&#x540E;&#x7531; Redis &#x5C06;&#x8BF7;&#x6C42;&#x8F6C;&#x53D1;&#x7ED9;&#x6B63;&#x786E;&#x7684; Redis &#x8282;&#x70B9;&#x3002;Redis Cluster &#x5B9E;&#x73B0;&#x4E86;&#x4E00;&#x79CD;&#x6DF7;&#x5408;&#x5F62;&#x5F0F;&#x7684;&#x67E5;&#x8BE2;&#x8DEF;&#x7531;&#xFF0C;&#x4F46;&#x5E76;&#x4E0D;&#x662F;&#x76F4;&#x63A5;&#x5C06;&#x8BF7;&#x6C42;&#x4ECE;&#x4E00;&#x4E2A;Redis &#x8282;&#x70B9;&#x8F6C;&#x53D1;&#x5230;&#x53E6;&#x4E00;&#x4E2A; Redis &#x8282;&#x70B9;&#xFF0C;&#x800C;&#x662F;&#x5728;&#x5BA2;&#x6237;&#x7AEF;&#x7684;&#x5E2E;&#x52A9;&#x4E0B;&#x76F4;&#x63A5; redirect &#x5230;&#x6B63;&#x786E;&#x7684; Redis &#x8282;&#x70B9;&#x3002;</p><p><strong>&#x5206;&#x5E03;&#x5F0F; Redis &#x662F;&#x524D;&#x671F;&#x505A;&#x8FD8;&#x662F;&#x540E;&#x671F;&#x89C4;&#x6A21;&#x4E0A;&#x6765;&#x4E86;&#x518D;&#x505A;&#x597D;&#xFF1F;&#x4E3A;&#x4EC0;&#x4E48;&#xFF1F;&#xFF1F;</strong></p><p>&#x5982;&#x4E0B;&#x662F;&#x7F51;&#x7EDC;&#x4E0A;&#x7684;&#x4E00;&#x4E2A;&#x5927;&#x7B54;&#x6848;&#xFF1A;</p><blockquote><p>&#x65E2;&#x7136; Redis &#x662F;&#x5982;&#x6B64;&#x7684;&#x8F7B;&#x91CF;&#xFF08;&#x5355;&#x5B9E;&#x4F8B;&#x53EA;&#x4F7F;&#x7528;1M&#x5185;&#x5B58;&#xFF09;&#xFF0C;&#x4E3A;&#x9632;&#x6B62;&#x4EE5;&#x540E;&#x7684;&#x6269;&#x5BB9;&#xFF0C;&#x6700;&#x597D;&#x7684;&#x529E;&#x6CD5;&#x5C31;&#x662F;&#x4E00;&#x5F00;&#x59CB;&#x5C31;&#x542F;&#x52A8;&#x8F83;&#x591A;&#x5B9E;&#x4F8B;&#x3002;&#x5373;&#x4FBF;&#x4F60;&#x53EA;&#x6709;&#x4E00;&#x53F0;&#x670D;&#x52A1;&#x5668;&#xFF0C;&#x4F60;&#x4E5F;&#x53EF;&#x4EE5;&#x4E00;&#x5F00;&#x59CB;&#x5C31;&#x8BA9; Redis &#x4EE5;&#x5206;&#x5E03;&#x5F0F;&#x7684;&#x65B9;&#x5F0F;&#x8FD0;&#x884C;&#xFF0C;&#x4F7F;&#x7528;&#x5206;&#x533A;&#xFF0C;&#x5728;&#x540C;&#x4E00;&#x53F0;&#x670D;&#x52A1;&#x5668;&#x4E0A;&#x542F;&#x52A8;&#x591A;&#x4E2A;&#x5B9E;&#x4F8B;&#x3002;</p><p>&#x4E00;&#x5F00;&#x59CB;&#x5C31;&#x591A;&#x8BBE;&#x7F6E;&#x51E0;&#x4E2A; Redis &#x5B9E;&#x4F8B;&#xFF0C;&#x4F8B;&#x5982; 32 &#x6216;&#x8005; 64 &#x4E2A;&#x5B9E;&#x4F8B;&#xFF0C;&#x5BF9;&#x5927;&#x591A;&#x6570;&#x7528;&#x6237;&#x6765;&#x8BF4;&#x8FD9;&#x64CD;&#x4F5C;&#x8D77;&#x6765;&#x53EF;&#x80FD;&#x6BD4;&#x8F83;&#x9EBB;&#x70E6;&#xFF0C;&#x4F46;&#x662F;&#x4ECE;&#x957F;&#x4E45;&#x6765;&#x770B;&#x505A;&#x8FD9;&#x70B9;&#x727A;&#x7272;&#x662F;&#x503C;&#x5F97;&#x7684;&#x3002;</p><p>&#x8FD9;&#x6837;&#x7684;&#x8BDD;&#xFF0C;&#x5F53;&#x4F60;&#x7684;&#x6570;&#x636E;&#x4E0D;&#x65AD;&#x589E;&#x957F;&#xFF0C;&#x9700;&#x8981;&#x66F4;&#x591A;&#x7684; Redis &#x670D;&#x52A1;&#x5668;&#x65F6;&#xFF0C;&#x4F60;&#x9700;&#x8981;&#x505A;&#x7684;&#x5C31;&#x662F;&#x4EC5;&#x4EC5;&#x5C06; Redis &#x5B9E;&#x4F8B;&#x4ECE;&#x4E00;&#x53F0;&#x670D;&#x52A1;&#x8FC1;&#x79FB;&#x5230;&#x53E6;&#x5916;&#x4E00;&#x53F0;&#x670D;&#x52A1;&#x5668;&#x800C;&#x5DF2;&#xFF08;&#x800C;&#x4E0D;&#x7528;&#x8003;&#x8651;&#x91CD;&#x65B0;&#x5206;&#x533A;&#x7684;&#x95EE;&#x9898;&#xFF09;&#x3002;&#x4E00;&#x65E6;&#x4F60;&#x6DFB;&#x52A0;&#x4E86;&#x53E6;&#x4E00;&#x53F0;&#x670D;&#x52A1;&#x5668;&#xFF0C;&#x4F60;&#x9700;&#x8981;&#x5C06;&#x4F60;&#x4E00;&#x534A;&#x7684; Redis &#x5B9E;&#x4F8B;&#x4ECE;&#x7B2C;&#x4E00;&#x53F0;&#x673A;&#x5668;&#x8FC1;&#x79FB;&#x5230;&#x7B2C;&#x4E8C;&#x53F0;&#x673A;&#x5668;&#x3002;</p></blockquote><ul><li>&#x548C;&#x98DE;&#x54E5;&#x6C9F;&#x901A;&#x4E86;&#x4E0B;&#xFF0C;&#x8FD9;&#x4E2A;&#x64CD;&#x4F5C;&#x4E0D;&#x662F;&#x5F88;&#x5408;&#x7406;&#x3002;</li><li>&#x65E0;&#x8BBA;&#x600E;&#x4E48;&#x8BF4;&#xFF0C;&#x5EFA;&#x8BAE;&#xFF0C;&#x9700;&#x8981;&#x642D;&#x5EFA;&#x4E0B; Redis Sentinel &#x9AD8;&#x53EF;&#x7528;&#xFF0C;&#x81F3;&#x4E8E;&#x62D3;&#x5C55;&#x6027;&#xFF0C;&#x6839;&#x636E;&#x81EA;&#x5DF1;&#x7684;&#x60C5;&#x51B5;&#xFF0C;&#x662F;&#x5426;&#x4F7F;&#x7528; Redis Cluster &#x96C6;&#x7FA4;</li></ul><h2 id="Redis-&#x6709;&#x54EA;&#x4E9B;&#x91CD;&#x8981;&#x7684;&#x5065;&#x5EB7;&#x6307;&#x6807;&#xFF1F;"><a href="#Redis-&#x6709;&#x54EA;&#x4E9B;&#x91CD;&#x8981;&#x7684;&#x5065;&#x5EB7;&#x6307;&#x6807;&#xFF1F;" class="headerlink" title="Redis &#x6709;&#x54EA;&#x4E9B;&#x91CD;&#x8981;&#x7684;&#x5065;&#x5EB7;&#x6307;&#x6807;&#xFF1F;"></a>Redis &#x6709;&#x54EA;&#x4E9B;&#x91CD;&#x8981;&#x7684;&#x5065;&#x5EB7;&#x6307;&#x6807;&#xFF1F;</h2><p>&#x63A8;&#x8350;&#x9605;&#x8BFB; <a href="https://mp.weixin.qq.com/s/D_khsApGkRckEoV75pYpDA" target="_blank" rel="noopener">&#x300A;Redis &#x51E0;&#x4E2A;&#x91CD;&#x8981;&#x7684;&#x5065;&#x5EB7;&#x6307;&#x6807;&#x300B;</a></p><ul><li>&#x5B58;&#x6D3B;&#x60C5;&#x51B5;</li><li>&#x8FDE;&#x63A5;&#x6570;</li><li>&#x963B;&#x585E;&#x5BA2;&#x6237;&#x7AEF;&#x6570;&#x91CF;</li><li>&#x4F7F;&#x7528;&#x5185;&#x5B58;&#x5CF0;&#x503C;</li><li>&#x5185;&#x5B58;&#x788E;&#x7247;&#x7387;</li><li>&#x7F13;&#x5B58;&#x547D;&#x4E2D;&#x7387;</li><li>OPS</li><li>&#x6301;&#x4E45;&#x5316;</li><li>&#x5931;&#x6548;KEY</li><li>&#x6162;&#x65E5;&#x5FD7;</li></ul><p><strong>&#x5982;&#x4F55;&#x63D0;&#x9AD8; Redis &#x547D;&#x4E2D;&#x7387;&#xFF1F;</strong></p><p>&#x63A8;&#x8350;&#x9605;&#x8BFB; <a href="http://www.cnblogs.com/shamo89/p/8383915.html" target="_blank" rel="noopener">&#x300A;&#x5982;&#x4F55;&#x63D0;&#x9AD8;&#x7F13;&#x5B58;&#x547D;&#x4E2D;&#x7387;&#xFF08;Redis&#xFF09;&#x300B;</a> &#x3002;</p><h2 id="&#x600E;&#x4E48;&#x4F18;&#x5316;-Redis-&#x7684;&#x5185;&#x5B58;&#x5360;&#x7528;"><a href="#&#x600E;&#x4E48;&#x4F18;&#x5316;-Redis-&#x7684;&#x5185;&#x5B58;&#x5360;&#x7528;" class="headerlink" title="&#x600E;&#x4E48;&#x4F18;&#x5316; Redis &#x7684;&#x5185;&#x5B58;&#x5360;&#x7528;"></a>&#x600E;&#x4E48;&#x4F18;&#x5316; Redis &#x7684;&#x5185;&#x5B58;&#x5360;&#x7528;</h2><p>&#x63A8;&#x8350;&#x9605;&#x8BFB; <a href="https://www.jianshu.com/p/8677603d3865" target="_blank" rel="noopener">&#x300A;Redis &#x7684;&#x5185;&#x5B58;&#x4F18;&#x5316;&#x300B;</a></p><ul><li>redisObject &#x5BF9;&#x8C61;</li><li>&#x7F29;&#x51CF;&#x952E;&#x503C;&#x5BF9;&#x8C61;</li><li>&#x5171;&#x4EAB;&#x5BF9;&#x8C61;&#x6C60;</li><li>&#x5B57;&#x7B26;&#x4E32;&#x4F18;&#x5316;</li><li>&#x7F16;&#x7801;&#x4F18;&#x5316;</li><li><p>&#x63A7;&#x5236; key &#x7684;&#x6570;&#x91CF;</p><p><strong>&#x4E00;&#x4E2A; Redis &#x5B9E;&#x4F8B;&#x6700;&#x591A;&#x80FD;&#x5B58;&#x653E;&#x591A;&#x5C11;&#x7684; keys&#xFF1F;List&#x3001;Set&#x3001;Sorted Set &#x4ED6;&#x4EEC;&#x6700;&#x591A;&#x80FD;&#x5B58;&#x653E;&#x591A;&#x5C11;&#x5143;&#x7D20;&#xFF1F;</strong></p></li></ul><p>&#x4E00;&#x4E2A; Redis &#x5B9E;&#x4F8B;&#xFF0C;&#x6700;&#x591A;&#x80FD;&#x5B58;&#x653E;&#x591A;&#x5C11;&#x7684; keys &#xFF0C;List&#x3001;Set&#x3001;Sorted Set &#x4ED6;&#x4EEC;&#x6700;&#x591A;&#x80FD;&#x5B58;&#x653E;&#x591A;&#x5C11;&#x5143;&#x7D20;&#x3002;</p><p>&#x7406;&#x8BBA;&#x4E0A;&#xFF0C;Redis &#x53EF;&#x4EE5;&#x5904;&#x7406;&#x591A;&#x8FBE; 2^32 &#x7684; keys &#xFF0C;&#x5E76;&#x4E14;&#x5728;&#x5B9E;&#x9645;&#x4E2D;&#x8FDB;&#x884C;&#x4E86;&#x6D4B;&#x8BD5;&#xFF0C;&#x6BCF;&#x4E2A;&#x5B9E;&#x4F8B;&#x81F3;&#x5C11;&#x5B58;&#x653E;&#x4E86; 2 &#x4EBF; 5 &#x5343;&#x4E07;&#x7684; keys&#x3002;</p><p>&#x4EFB;&#x4F55; list&#x3001;set&#x3001;&#x548C; sorted set &#x90FD;&#x53EF;&#x4EE5;&#x653E; 2^32 &#x4E2A;&#x5143;&#x7D20;&#x3002;</p><p><strong>&#x5047;&#x5982; Redis &#x91CC;&#x9762;&#x6709; 1 &#x4EBF;&#x4E2A; key&#xFF0C;&#x5176;&#x4E2D;&#x6709; 10w &#x4E2A; key &#x662F;&#x4EE5;&#x67D0;&#x4E2A;&#x56FA;&#x5B9A;&#x7684;&#x5DF2;&#x77E5;&#x7684;&#x524D;&#x7F00;&#x5F00;&#x5934;&#x7684;&#xFF0C;&#x5982;&#x679C;&#x5C06;&#x5B83;&#x4EEC;&#x5168;&#x90E8;&#x627E;&#x51FA;&#x6765;&#xFF1F;</strong></p><p>&#x4F7F;&#x7528; keys &#x6307;&#x4EE4;&#x53EF;&#x4EE5;&#x626B;&#x51FA;&#x6307;&#x5B9A;&#x6A21;&#x5F0F;&#x7684; key &#x5217;&#x8868;&#x3002;</p><ul><li>&#x5BF9;&#x65B9;&#x63A5;&#x7740;&#x8FFD;&#x95EE;&#xFF1A;&#x5982;&#x679C;&#x8FD9;&#x4E2A; Redis &#x6B63;&#x5728;&#x7ED9;&#x7EBF;&#x4E0A;&#x7684;&#x4E1A;&#x52A1;&#x63D0;&#x4F9B;&#x670D;&#x52A1;&#xFF0C;&#x90A3;&#x4F7F;&#x7528;keys&#x6307;&#x4EE4;&#x4F1A;&#x6709;&#x4EC0;&#x4E48;&#x95EE;&#x9898;&#xFF1F;</li><li>&#x8FD9;&#x4E2A;&#x65F6;&#x5019;&#x4F60;&#x8981;&#x56DE;&#x7B54; Redis &#x5173;&#x952E;&#x7684;&#x4E00;&#x4E2A;&#x7279;&#x6027;&#xFF1A;Redis &#x7684;&#x5355;&#x7EBF;&#x7A0B;&#x7684;&#x3002;keys &#x6307;&#x4EE4;&#x4F1A;&#x5BFC;&#x81F4;&#x7EBF;&#x7A0B;&#x963B;&#x585E;&#x4E00;&#x6BB5;&#x65F6;&#x95F4;&#xFF0C;&#x7EBF;&#x4E0A;&#x670D;&#x52A1;&#x4F1A;&#x505C;&#x987F;&#xFF0C;&#x76F4;&#x5230;&#x6307;&#x4EE4;&#x6267;&#x884C;&#x5B8C;&#x6BD5;&#xFF0C;&#x670D;&#x52A1;&#x624D;&#x80FD;&#x6062;&#x590D;&#x3002;&#x8FD9;&#x4E2A;&#x65F6;&#x5019;&#x53EF;&#x4EE5;&#x4F7F;&#x7528; scan &#x6307;&#x4EE4;&#xFF0C;scan &#x6307;&#x4EE4;&#x53EF;&#x4EE5;&#x65E0;&#x963B;&#x585E;&#x7684;&#x63D0;&#x53D6;&#x51FA;&#x6307;&#x5B9A;&#x6A21;&#x5F0F;&#x7684; key &#x5217;&#x8868;&#xFF0C;&#x4F46;&#x662F;&#x4F1A;&#x6709;&#x4E00;&#x5B9A;&#x7684;&#x91CD;&#x590D;&#x6982;&#x7387;&#xFF0C;&#x5728;&#x5BA2;&#x6237;&#x7AEF;&#x505A;&#x4E00;&#x6B21;&#x53BB;&#x91CD;&#x5C31;&#x53EF;&#x4EE5;&#x4E86;&#xFF0C;&#x4F46;&#x662F;&#x6574;&#x4F53;&#x6240;&#x82B1;&#x8D39;&#x7684;&#x65F6;&#x95F4;&#x4F1A;&#x6BD4;&#x76F4;&#x63A5;&#x7528; keys &#x6307;&#x4EE4;&#x957F;&#x3002;</li></ul><h2 id="Redis-&#x5E38;&#x89C1;&#x7684;&#x6027;&#x80FD;&#x95EE;&#x9898;&#x90FD;&#x6709;&#x54EA;&#x4E9B;&#xFF1F;&#x5982;&#x4F55;&#x89E3;&#x51B3;&#xFF1F;"><a href="#Redis-&#x5E38;&#x89C1;&#x7684;&#x6027;&#x80FD;&#x95EE;&#x9898;&#x90FD;&#x6709;&#x54EA;&#x4E9B;&#xFF1F;&#x5982;&#x4F55;&#x89E3;&#x51B3;&#xFF1F;" class="headerlink" title="Redis &#x5E38;&#x89C1;&#x7684;&#x6027;&#x80FD;&#x95EE;&#x9898;&#x90FD;&#x6709;&#x54EA;&#x4E9B;&#xFF1F;&#x5982;&#x4F55;&#x89E3;&#x51B3;&#xFF1F;"></a>Redis &#x5E38;&#x89C1;&#x7684;&#x6027;&#x80FD;&#x95EE;&#x9898;&#x90FD;&#x6709;&#x54EA;&#x4E9B;&#xFF1F;&#x5982;&#x4F55;&#x89E3;&#x51B3;&#xFF1F;</h2><p><strong>1&#x3001;Master &#x6700;&#x597D;&#x4E0D;&#x8981;&#x505A;&#x4EFB;&#x4F55;&#x6301;&#x4E45;&#x5316;&#x5DE5;&#x4F5C;&#xFF0C;&#x5982; RDB &#x5185;&#x5B58;&#x5FEB;&#x7167;&#x548C; AOF &#x65E5;&#x5FD7;&#x6587;&#x4EF6;&#x3002;</strong></p><ul><li>Master &#x5199;&#x5185;&#x5B58;&#x5FEB;&#x7167;&#xFF0C;save &#x547D;&#x4EE4;&#x8C03;&#x5EA6; rdbSave &#x51FD;&#x6570;&#xFF0C;&#x4F1A;&#x963B;&#x585E;&#x4E3B;&#x7EBF;&#x7A0B;&#x7684;&#x5DE5;&#x4F5C;&#xFF0C;&#x5F53;&#x5FEB;&#x7167;&#x6BD4;&#x8F83;&#x5927;&#x65F6;&#x5BF9;&#x6027;&#x80FD;&#x5F71;&#x54CD;&#x662F;&#x975E;&#x5E38;&#x5927;&#x7684;&#xFF0C;&#x4F1A;&#x95F4;&#x65AD;&#x6027;&#x6682;&#x505C;&#x670D;&#x52A1;&#xFF0C;&#x6240;&#x4EE5; Master &#x6700;&#x597D;&#x4E0D;&#x8981;&#x5199;&#x5185;&#x5B58;&#x5FEB;&#x7167;&#x3002;</li><li>Master AOF &#x6301;&#x4E45;&#x5316;&#xFF0C;&#x5982;&#x679C;&#x4E0D;&#x91CD;&#x5199; AOF &#x6587;&#x4EF6;&#xFF0C;&#x8FD9;&#x4E2A;&#x6301;&#x4E45;&#x5316;&#x65B9;&#x5F0F;&#x5BF9;&#x6027;&#x80FD;&#x7684;&#x5F71;&#x54CD;&#x662F;&#x6700;&#x5C0F;&#x7684;&#xFF0C;&#x4F46;&#x662F; AOF &#x6587;&#x4EF6;&#x4F1A;&#x4E0D;&#x65AD;&#x589E;&#x5927;&#xFF0C;AOF &#x6587;&#x4EF6;&#x8FC7;&#x5927;&#x4F1A;&#x5F71;&#x54CD; Master &#x91CD;&#x542F;&#x7684;&#x6062;&#x590D;&#x901F;&#x5EA6;&#x3002;</li><li>&#x6240;&#x4EE5;&#xFF0C;Master &#x6700;&#x597D;&#x4E0D;&#x8981;&#x505A;&#x4EFB;&#x4F55;&#x6301;&#x4E45;&#x5316;&#x5DE5;&#x4F5C;&#xFF0C;&#x5305;&#x62EC;&#x5185;&#x5B58;&#x5FEB;&#x7167;&#x548C; AOF &#x65E5;&#x5FD7;&#x6587;&#x4EF6;&#xFF0C;&#x7279;&#x522B;&#x662F;&#x4E0D;&#x8981;&#x542F;&#x7528;&#x5185;&#x5B58;&#x5FEB;&#x7167;&#x505A;&#x6301;&#x4E45;&#x5316;&#x3002;&#x5982;&#x679C;&#x6570;&#x636E;&#x6BD4;&#x8F83;&#x5173;&#x952E;&#xFF0C;&#x67D0;&#x4E2A; Slave &#x5F00;&#x542F;AOF&#x5907;&#x4EFD;&#x6570;&#x636E;&#xFF0C;&#x7B56;&#x7565;&#x4E3A;&#x6BCF;&#x79D2;&#x540C;&#x6B65;&#x4E00;&#x6B21;</li></ul><p><strong>2&#x3001;Master &#x8C03;&#x7528; BGREWRITEAOF &#x91CD;&#x5199; AOF &#x6587;&#x4EF6;&#xFF0C;AOF &#x5728;&#x91CD;&#x5199;&#x7684;&#x65F6;&#x5019;&#x4F1A;&#x5360;&#x5927;&#x91CF;&#x7684; CPU &#x548C;&#x5185;&#x5B58;&#x8D44;&#x6E90;&#xFF0C;&#x5BFC;&#x81F4;&#x670D;&#x52A1; load &#x8FC7;&#x9AD8;&#xFF0C;&#x51FA;&#x73B0;&#x77ED;&#x6682;&#x670D;&#x52A1;&#x6682;&#x505C;&#x73B0;&#x8C61;&#x3002;</strong> </p><p><strong>3&#x3001;&#x5C3D;&#x91CF;&#x907F;&#x514D;&#x5728;&#x538B;&#x529B;&#x5F88;&#x5927;&#x7684;&#x4E3B;&#x5E93;&#x4E0A;&#x589E;&#x52A0;&#x4ECE;&#x5E93;&#x3002;</strong> </p><p><strong>4&#x3001;&#x4E3B;&#x4ECE;&#x590D;&#x5236;&#x4E0D;&#x8981;&#x7528;&#x56FE;&#x72B6;&#x7ED3;&#x6784;&#xFF0C;&#x7528;&#x5355;&#x5411;&#x94FE;&#x8868;&#x7ED3;&#x6784;&#x66F4;&#x4E3A;&#x7A33;&#x5B9A;&#xFF0C;&#x5373;&#xFF1A;<code>Master &lt;- Slave1 &lt;- Slave2 &lt;- Slave3...</code> &#x3002;</strong> </p><ul><li>&#x8FD9;&#x6837;&#x7684;&#x7ED3;&#x6784;&#xFF0C;&#x4E5F;&#x65B9;&#x4FBF;&#x89E3;&#x51B3;&#x5355;&#x70B9;&#x6545;&#x969C;&#x95EE;&#x9898;&#xFF0C;&#x5B9E;&#x73B0; Slave &#x5BF9; Master &#x7684;&#x66FF;&#x6362;&#x3002;&#x5982;&#x679C; Master&#x6302;&#x4E86;&#xFF0C;&#x53EF;&#x4EE5;&#x7ACB;&#x523B;&#x542F;&#x7528; Slave1 &#x505A; Master &#xFF0C;&#x5176;&#x4ED6;&#x4E0D;&#x53D8;&#x3002;</li></ul><p><strong>5&#x3001;Redis &#x4E3B;&#x4ECE;&#x590D;&#x5236;&#x7684;&#x6027;&#x80FD;&#x95EE;&#x9898;&#xFF0C;&#x4E3A;&#x4E86;&#x4E3B;&#x4ECE;&#x590D;&#x5236;&#x7684;&#x901F;&#x5EA6;&#x548C;&#x8FDE;&#x63A5;&#x7684;&#x7A33;&#x5B9A;&#x6027;&#xFF0C;Slave &#x548C; Master &#x6700;&#x597D;&#x5728;&#x540C;&#x4E00;&#x4E2A;&#x5C40;&#x57DF;&#x7F51;&#x5185;&#x3002;</strong></p><hr><p>&#x548C;&#x98DE;&#x54E5;&#x6C9F;&#x901A;&#x8FC7;&#x540E;&#xFF0C;&#x4ED6;&#x4EEC;&#x4E3B;&#x8282;&#x70B9;&#x5F00;&#x542F; AOF &#xFF0C;&#x4ECE;&#x8282;&#x70B9;&#x5F00;&#x542F; AOF + RDB &#x3002;</p><p>&#x548C;&#x6653;&#x5CF0;&#x6C9F;&#x901A;&#x540E;&#xFF0C;&#x4ED6;&#x4EEC;&#x4E3B;&#x8282;&#x70B9;&#x5F00;&#x542F; AOF &#xFF0C;&#x4ECE;&#x8282;&#x70B9;&#x5F00;&#x542F; RDB &#x5C45;&#x591A;&#xFF0C;&#x4E5F;&#x6709;&#x5F00;&#x542F; AOF + RDB &#x7684;&#x3002;</p><h2 id="&#x4FEE;&#x6539;&#x914D;&#x7F6E;&#x4E0D;&#x91CD;&#x542F;-Redis-&#x4F1A;&#x5B9E;&#x65F6;&#x751F;&#x6548;&#x5417;&#xFF1F;"><a href="#&#x4FEE;&#x6539;&#x914D;&#x7F6E;&#x4E0D;&#x91CD;&#x542F;-Redis-&#x4F1A;&#x5B9E;&#x65F6;&#x751F;&#x6548;&#x5417;&#xFF1F;" class="headerlink" title="&#x4FEE;&#x6539;&#x914D;&#x7F6E;&#x4E0D;&#x91CD;&#x542F; Redis &#x4F1A;&#x5B9E;&#x65F6;&#x751F;&#x6548;&#x5417;&#xFF1F;"></a>&#x4FEE;&#x6539;&#x914D;&#x7F6E;&#x4E0D;&#x91CD;&#x542F; Redis &#x4F1A;&#x5B9E;&#x65F6;&#x751F;&#x6548;&#x5417;&#xFF1F;</h2><p>&#x9488;&#x5BF9;&#x8FD0;&#x884C;&#x5B9E;&#x4F8B;&#xFF0C;&#x6709;&#x8BB8;&#x591A;&#x914D;&#x7F6E;&#x9009;&#x9879;&#x53EF;&#x4EE5;&#x901A;&#x8FC7; <code>CONFIG SET</code> &#x547D;&#x4EE4;&#x8FDB;&#x884C;&#x4FEE;&#x6539;&#xFF0C;&#x800C;&#x65E0;&#x9700;&#x6267;&#x884C;&#x4EFB;&#x4F55;&#x5F62;&#x5F0F;&#x7684;&#x91CD;&#x542F;&#x3002;</p><p>&#x4ECE; Redis 2.2 &#x5F00;&#x59CB;&#xFF0C;&#x53EF;&#x4EE5;&#x4ECE; AOF &#x5207;&#x6362;&#x5230; RDB &#x7684;&#x5FEB;&#x7167;&#x6301;&#x4E45;&#x6027;&#x6216;&#x5176;&#x4ED6;&#x65B9;&#x5F0F;&#x800C;&#x4E0D;&#x9700;&#x8981;&#x91CD;&#x542F; Redis&#x3002;&#x68C0;&#x7D22; <code>CONFIG GET *</code> &#x547D;&#x4EE4;&#x83B7;&#x53D6;&#x66F4;&#x591A;&#x4FE1;&#x606F;&#x3002;</p><p>&#x4F46;&#x5076;&#x5C14;&#x91CD;&#x65B0;&#x542F;&#x52A8;&#x662F;&#x5FC5;&#x987B;&#x7684;&#xFF0C;&#x5982;&#x4E3A;&#x5347;&#x7EA7; Redis &#x7A0B;&#x5E8F;&#x5230;&#x65B0;&#x7684;&#x7248;&#x672C;&#xFF0C;&#x6216;&#x8005;&#x5F53;&#x4F60;&#x9700;&#x8981;&#x4FEE;&#x6539;&#x67D0;&#x4E9B;&#x76EE;&#x524D; CONFIG &#x547D;&#x4EE4;&#x8FD8;&#x4E0D;&#x652F;&#x6301;&#x7684;&#x914D;&#x7F6E;&#x53C2;&#x6570;&#x7684;&#x65F6;&#x5019;&#x3002;</p><h2 id="&#x5176;&#x4ED6;&#x95EE;&#x9898;"><a href="#&#x5176;&#x4ED6;&#x95EE;&#x9898;" class="headerlink" title="&#x5176;&#x4ED6;&#x95EE;&#x9898;"></a>&#x5176;&#x4ED6;&#x95EE;&#x9898;</h2><p>&#x6709;&#x4E9B;&#x6BD4;&#x8F83;&#x51F6;&#x6B8B;&#x7684;&#x9762;&#x8BD5;&#x5B98;&#xFF0C;&#x53EF;&#x80FD;&#x4F1A;&#x95EE;&#x6211;&#x4EEC;&#x4E00;&#x4E9B; Redis &#x6570;&#x636E;&#x7ED3;&#x6784;&#x7684;&#x95EE;&#x9898;&#xFF0C;&#x4F8B;&#x5982;&#xFF1A;</p><ul><li><p>Skiplist &#x63D2;&#x5165;&#x548C;&#x67E5;&#x8BE2;&#x539F;&#x7406;&#xFF1F;</p></li><li><p>&#x538B;&#x7F29;&#x5217;&#x8868;&#x7684;&#x539F;&#x7406;&#xFF1F;</p></li><li><p>Redis &#x5E95;&#x5C42;&#x4E3A;&#x4EC0;&#x4E48;&#x4F7F;&#x7528;&#x8DF3;&#x8DC3;&#x8868;&#x800C;&#x4E0D;&#x662F;&#x7EA2;&#x9ED1;&#x6811;&#xFF1F;</p><blockquote><p>&#x8DF3;&#x8DC3;&#x8868;&#x5728;&#x8303;&#x56F4;&#x67E5;&#x627E;&#x7684;&#x65F6;&#x5019;&#x6027;&#x80FD;&#x6BD4;&#x8F83;&#x9AD8;&#x3002;</p></blockquote></li></ul><h2 id="&#x53C2;&#x8003;&#x94FE;&#x63A5;"><a href="#&#x53C2;&#x8003;&#x94FE;&#x63A5;" class="headerlink" title="&#x53C2;&#x8003;&#x94FE;&#x63A5;"></a>&#x53C2;&#x8003;&#x94FE;&#x63A5;</h2><ul><li><a href="http://svip.iocoder.cn/Redis/Interview/" target="_blank" rel="noopener">&#x7CBE;&#x5C3D; Redis &#x9762;&#x8BD5;&#x9898; </a></li></ul>]]></content>
    
    <summary type="html">
    
      &lt;h2 id=&quot;&amp;#x4EC0;&amp;#x4E48;&amp;#x662F;-Redis-&amp;#xFF1F;&quot;&gt;&lt;a href=&quot;#&amp;#x4EC0;&amp;#x4E48;&amp;#x662F;-Redis-&amp;#xFF1F;&quot; class=&quot;headerlink&quot; title=&quot;&amp;#x4EC0;&amp;#x4E48;&amp;#x662F; Redis &amp;#xFF1F;&quot;&gt;&lt;/a&gt;&amp;#x4EC0;&amp;#x4E48;&amp;#x662F; Redis &amp;#xFF1F;&lt;/h2&gt;&lt;p&gt;Redis&amp;#xFF0C;&amp;#x5168;&amp;#x79F0; Remote Dictionary Server&amp;#xFF0C;&amp;#x662F;&amp;#x4E00;&amp;#x4E2A;&amp;#x57FA;&amp;#x4E8E;&amp;#x5185;&amp;#x5B58;&amp;#x7684;&amp;#x9AD8;&amp;#x6027;&amp;#x80FD; Key-Value &amp;#x6570;&amp;#x636E;&amp;#x5E93;&amp;#x3002;&lt;/p&gt;
&lt;p&gt;&amp;#x53E6;&amp;#x5916;&amp;#xFF0C;Redis &amp;#x5DF2;&amp;#x7ECF;&amp;#x6210;&amp;#x4E3A;&amp;#x4E92;&amp;#x8054;&amp;#x7F51;&amp;#x516C;&amp;#x53F8;&amp;#x5728;&amp;#x7F13;&amp;#x5B58;&amp;#x7EC4;&amp;#x4EF6;&amp;#x9009;&amp;#x62E9;&amp;#x7684;&amp;#x552F;&amp;#x4E00;&amp;#xFF0C;&amp;#x66F4;&amp;#x591A;&amp;#x7684;&amp;#x5173;&amp;#x6CE8;&amp;#x70B9;&amp;#x662F;&amp;#xFF0C;&amp;#x5982;&amp;#x4F55;&amp;#x4F7F;&amp;#x7528;&amp;#x597D; Redis &amp;#x3002;&lt;/p&gt;
    
    </summary>
    
      <category term="面试" scheme="http://blog.cuzz.site/categories/%E9%9D%A2%E8%AF%95/"/>
    
    
      <category term="转载" scheme="http://blog.cuzz.site/tags/%E8%BD%AC%E8%BD%BD/"/>
    
      <category term="Redis" scheme="http://blog.cuzz.site/tags/Redis/"/>
    
  </entry>
  
  <entry>
    <title>Java后端核心知识</title>
    <link href="http://blog.cuzz.site/2019/02/23/Java%E5%90%8E%E7%AB%AF%E6%A0%B8%E5%BF%83%E7%9F%A5%E8%AF%86/"/>
    <id>http://blog.cuzz.site/2019/02/23/Java后端核心知识/</id>
    <published>2019-02-23T15:59:59.000Z</published>
    <updated>2019-07-16T11:43:31.273Z</updated>
    
    <content type="html"><![CDATA[<h2 id="&#x7B97;&#x6CD5;"><a href="#&#x7B97;&#x6CD5;" class="headerlink" title="&#x7B97;&#x6CD5;"></a>&#x7B97;&#x6CD5;</h2><h3 id="&#x5251;&#x6307;-Offer-&#x9898;&#x89E3;"><a href="#&#x5251;&#x6307;-Offer-&#x9898;&#x89E3;" class="headerlink" title="&#x5251;&#x6307; Offer &#x9898;&#x89E3;"></a>&#x5251;&#x6307; Offer &#x9898;&#x89E3;</h3><h3 id="Leetcode-&#x9898;&#x89E3;"><a href="#Leetcode-&#x9898;&#x89E3;" class="headerlink" title="Leetcode &#x9898;&#x89E3;"></a>Leetcode &#x9898;&#x89E3;</h3><h3 id="&#x7B97;&#x6CD5;-1"><a href="#&#x7B97;&#x6CD5;-1" class="headerlink" title="&#x7B97;&#x6CD5;"></a>&#x7B97;&#x6CD5;</h3><h2 id="&#x64CD;&#x4F5C;&#x7CFB;&#x7EDF;"><a href="#&#x64CD;&#x4F5C;&#x7CFB;&#x7EDF;" class="headerlink" title="&#x64CD;&#x4F5C;&#x7CFB;&#x7EDF;"></a>&#x64CD;&#x4F5C;&#x7CFB;&#x7EDF;</h2><h3 id="&#x8BA1;&#x7B97;&#x673A;&#x64CD;&#x4F5C;&#x7CFB;&#x7EDF;"><a href="#&#x8BA1;&#x7B97;&#x673A;&#x64CD;&#x4F5C;&#x7CFB;&#x7EDF;" class="headerlink" title="&#x8BA1;&#x7B97;&#x673A;&#x64CD;&#x4F5C;&#x7CFB;&#x7EDF;"></a>&#x8BA1;&#x7B97;&#x673A;&#x64CD;&#x4F5C;&#x7CFB;&#x7EDF;</h3><h3 id="Linux"><a href="#Linux" class="headerlink" title="Linux"></a>Linux</h3><h2 id="&#x7F51;&#x7EDC;"><a href="#&#x7F51;&#x7EDC;" class="headerlink" title="&#x7F51;&#x7EDC;"></a>&#x7F51;&#x7EDC;</h2><h3 id="&#x8BA1;&#x7B97;&#x673A;&#x7F51;&#x7EDC;"><a href="#&#x8BA1;&#x7B97;&#x673A;&#x7F51;&#x7EDC;" class="headerlink" title="&#x8BA1;&#x7B97;&#x673A;&#x7F51;&#x7EDC;"></a>&#x8BA1;&#x7B97;&#x673A;&#x7F51;&#x7EDC;</h3><h3 id="HTTP"><a href="#HTTP" class="headerlink" title="HTTP"></a>HTTP</h3><ul><li><a href="https://hpbn.co/brief-history-of-http/" target="_blank" rel="noopener">Brief History of HTTP</a></li></ul><h3 id="Socket"><a href="#Socket" class="headerlink" title="Socket"></a>Socket</h3><h2 id="&#x9762;&#x5411;&#x5BF9;&#x8C61;"><a href="#&#x9762;&#x5411;&#x5BF9;&#x8C61;" class="headerlink" title="&#x9762;&#x5411;&#x5BF9;&#x8C61;"></a>&#x9762;&#x5411;&#x5BF9;&#x8C61;</h2><h3 id="&#x8BBE;&#x8BA1;&#x6A21;&#x5F0F;"><a href="#&#x8BBE;&#x8BA1;&#x6A21;&#x5F0F;" class="headerlink" title="&#x8BBE;&#x8BA1;&#x6A21;&#x5F0F;"></a>&#x8BBE;&#x8BA1;&#x6A21;&#x5F0F;</h3><h3 id="&#x9762;&#x5411;&#x5BF9;&#x8C61;&#x601D;&#x60F3;"><a href="#&#x9762;&#x5411;&#x5BF9;&#x8C61;&#x601D;&#x60F3;" class="headerlink" title="&#x9762;&#x5411;&#x5BF9;&#x8C61;&#x601D;&#x60F3;"></a>&#x9762;&#x5411;&#x5BF9;&#x8C61;&#x601D;&#x60F3;</h3><h2 id="&#x6570;&#x636E;&#x5E93;"><a href="#&#x6570;&#x636E;&#x5E93;" class="headerlink" title="&#x6570;&#x636E;&#x5E93;"></a>&#x6570;&#x636E;&#x5E93;</h2><h3 id="&#x6570;&#x636E;&#x5E93;&#x7CFB;&#x7EDF;&#x539F;&#x7406;"><a href="#&#x6570;&#x636E;&#x5E93;&#x7CFB;&#x7EDF;&#x539F;&#x7406;" class="headerlink" title="&#x6570;&#x636E;&#x5E93;&#x7CFB;&#x7EDF;&#x539F;&#x7406;"></a>&#x6570;&#x636E;&#x5E93;&#x7CFB;&#x7EDF;&#x539F;&#x7406;</h3><h3 id="SQL"><a href="#SQL" class="headerlink" title="SQL"></a>SQL</h3><h3 id="Leetcode-Database-&#x9898;&#x89E3;"><a href="#Leetcode-Database-&#x9898;&#x89E3;" class="headerlink" title="Leetcode-Database &#x9898;&#x89E3;"></a>Leetcode-Database &#x9898;&#x89E3;</h3><h3 id="MySQL"><a href="#MySQL" class="headerlink" title="MySQL"></a>MySQL</h3><ul><li><a href="https://www.cnblogs.com/xdyixia/p/9066489.html" target="_blank" rel="noopener">MySQL&#x6570;&#x636E;&#x7C7B;&#x578B;&#x53CA;&#x540E;&#x9762;&#x5C0F;&#x62EC;&#x53F7;&#x7684;&#x610F;&#x4E49;</a></li></ul><h3 id="Redis"><a href="#Redis" class="headerlink" title="Redis"></a>Redis</h3><h2 id="Java"><a href="#Java" class="headerlink" title="Java"></a>Java</h2><h3 id="Java-&#x57FA;&#x7840;"><a href="#Java-&#x57FA;&#x7840;" class="headerlink" title="Java &#x57FA;&#x7840;"></a>Java &#x57FA;&#x7840;</h3><ul><li><a href="https://github.com/javagrowing/JGrowing/blob/master/Java%E5%9F%BA%E7%A1%80/%E8%81%8A%E8%81%8A%E5%BC%95%E7%94%A8%E5%92%8CThreadlocal%E7%9A%84%E9%82%A3%E4%BA%9B%E4%BA%8B.md" target="_blank" rel="noopener">&#x804A;&#x804A;&#x5F15;&#x7528;&#x548C;Threadlocal&#x7684;&#x90A3;&#x4E9B;&#x4E8B; </a></li></ul><h3 id="Java-&#x5BB9;&#x5668;"><a href="#Java-&#x5BB9;&#x5668;" class="headerlink" title="Java &#x5BB9;&#x5668;"></a>Java &#x5BB9;&#x5668;</h3><h3 id="Java-&#x5E76;&#x53D1;"><a href="#Java-&#x5E76;&#x53D1;" class="headerlink" title="Java &#x5E76;&#x53D1;"></a>Java &#x5E76;&#x53D1;</h3><ul><li><p><a href="http://www.importnew.com/18126.html" target="_blank" rel="noopener">Java&#x5E76;&#x53D1;&#x7F16;&#x7A0B;&#xFF1A;volatile&#x5173;&#x952E;&#x5B57;&#x89E3;&#x6790;</a></p></li><li><p><a href="https://juejin.im/post/5c0528fcf265da610f637b7d" target="_blank" rel="noopener">&#x5927;&#x767D;&#x8BDD;&#x804A;&#x804A;Java&#x5E76;&#x53D1;&#x9762;&#x8BD5;&#x95EE;&#x9898;&#x4E4B;volatile&#x5230;&#x5E95;&#x662F;&#x4EC0;&#x4E48;&#xFF1F;</a></p></li><li><p><a href="https://juejin.im/post/5c062c87e51d451dbc21801b" target="_blank" rel="noopener">&#x5927;&#x767D;&#x8BDD;&#x804A;&#x804A;Java&#x5E76;&#x53D1;&#x9762;&#x8BD5;&#x95EE;&#x9898;&#x4E4B;Java 8&#x5982;&#x4F55;&#x4F18;&#x5316;CAS&#x6027;&#x80FD;&#xFF1F;</a></p></li><li><p><a href="https://juejin.im/post/5c07e59cf265da617464a09c" target="_blank" rel="noopener">&#x5927;&#x767D;&#x8BDD;&#x804A;&#x804A;Java&#x5E76;&#x53D1;&#x9762;&#x8BD5;&#x95EE;&#x9898;&#x4E4B;&#x8C08;&#x8C08;&#x4F60;&#x5BF9;AQS&#x7684;&#x7406;&#x89E3;&#xFF1F;</a></p></li><li><p><a href="https://juejin.im/post/5c091259f265da61171c86b4" target="_blank" rel="noopener">&#x5927;&#x767D;&#x8BDD;&#x804A;&#x804A;Java&#x5E76;&#x53D1;&#x9762;&#x8BD5;&#x95EE;&#x9898;&#x4E4B;&#x516C;&#x5E73;&#x9501;&#x4E0E;&#x975E;&#x516C;&#x5E73;&#x9501;&#x662F;&#x5565;&#xFF1F;</a></p></li><li><p><a href="https://juejin.im/post/5c0c8540e51d451dbe4fdd83" target="_blank" rel="noopener">&#x5927;&#x767D;&#x8BDD;&#x804A;&#x804A;Java&#x5E76;&#x53D1;&#x9762;&#x8BD5;&#x95EE;&#x9898;&#x4E4B;&#x5FAE;&#x670D;&#x52A1;&#x6CE8;&#x518C;&#x4E2D;&#x5FC3;&#x7684;&#x8BFB;&#x5199;&#x9501;&#x4F18;&#x5316;</a> </p></li></ul><h3 id="Java-&#x865A;&#x62DF;&#x673A;"><a href="#Java-&#x865A;&#x62DF;&#x673A;" class="headerlink" title="Java &#x865A;&#x62DF;&#x673A;"></a>Java &#x865A;&#x62DF;&#x673A;</h3><ul><li><a href="https://blog.csdn.net/jisuanjiguoba/article/details/80156781" target="_blank" rel="noopener"> JVM&#x4E2D;&#x7684;&#x65B0;&#x751F;&#x4EE3;&#x548C;&#x8001;&#x5E74;&#x4EE3;&#xFF08;Eden&#x7A7A;&#x95F4;&#x3001;&#x4E24;&#x4E2A;Survior&#x7A7A;&#x95F4;&#xFF09; </a></li><li><a href="https://blog.csdn.net/scdn_cp/article/details/86491792" target="_blank" rel="noopener">Java&#x5BF9;&#x8C61;&#x7ED3;&#x6784;&#x4E0E;&#x9501;&#x5B9E;&#x73B0;&#x539F;&#x7406;&#x53CA;MarkWord&#x8BE6;&#x89E3;</a></li></ul><h3 id="Java-I-O"><a href="#Java-I-O" class="headerlink" title="Java I/O"></a>Java I/O</h3><ul><li><a href="https://www.ibm.com/developerworks/cn/education/java/j-nio/j-nio.html" target="_blank" rel="noopener">NIO &#x5165;&#x95E8;</a></li></ul><h2 id="&#x6846;&#x67B6;"><a href="#&#x6846;&#x67B6;" class="headerlink" title="&#x6846;&#x67B6;"></a>&#x6846;&#x67B6;</h2><h3 id="Spring"><a href="#Spring" class="headerlink" title="Spring"></a>Spring</h3><ul><li><a href="https://segmentfault.com/a/1190000013341344" target="_blank" rel="noopener">Spring&#x4E8B;&#x52A1;&#x4F20;&#x64AD;&#x884C;&#x4E3A;&#x8BE6;&#x89E3;</a></li></ul><h2 id="&#x4E2D;&#x95F4;&#x4EF6;"><a href="#&#x4E2D;&#x95F4;&#x4EF6;" class="headerlink" title="&#x4E2D;&#x95F4;&#x4EF6;"></a>&#x4E2D;&#x95F4;&#x4EF6;</h2><h3 id="Netty"><a href="#Netty" class="headerlink" title="Netty"></a>Netty</h3><ul><li><p><a href="https://medium.com/@xunnan.xu/its-all-about-buffers-zero-copy-mmap-and-java-nio-50f2a1bfc05c" target="_blank" rel="noopener">It&#x2019;s all about buffers: zero-copy, mmap and Java NIO</a></p></li><li><p><a href="https://developer.ibm.com/articles/j-zerocopy/" target="_blank" rel="noopener">Efficient data transfer through zero copy</a></p></li><li><p><a href="http://gee.cs.oswego.edu/dl/cpjslides/nio.pdf" target="_blank" rel="noopener">Scalable IO in Java </a></p></li><li><a href="https://www.jianshu.com/p/1ccbc6a348db" target="_blank" rel="noopener">Netty &#x90A3;&#x4E9B;&#x4E8B;&#x513F; &#x2014;&#x2014;&#x2014; Reactor&#x6A21;&#x5F0F;&#x8BE6;&#x89E3;</a></li></ul><h2 id="&#x7CFB;&#x7EDF;&#x8BBE;&#x8BA1;"><a href="#&#x7CFB;&#x7EDF;&#x8BBE;&#x8BA1;" class="headerlink" title="&#x7CFB;&#x7EDF;&#x8BBE;&#x8BA1;"></a>&#x7CFB;&#x7EDF;&#x8BBE;&#x8BA1;</h2><h3 id="&#x7CFB;&#x7EDF;&#x8BBE;&#x8BA1;&#x57FA;&#x7840;"><a href="#&#x7CFB;&#x7EDF;&#x8BBE;&#x8BA1;&#x57FA;&#x7840;" class="headerlink" title="&#x7CFB;&#x7EDF;&#x8BBE;&#x8BA1;&#x57FA;&#x7840;"></a>&#x7CFB;&#x7EDF;&#x8BBE;&#x8BA1;&#x57FA;&#x7840;</h3><h3 id="&#x5206;&#x5E03;&#x5F0F;"><a href="#&#x5206;&#x5E03;&#x5F0F;" class="headerlink" title="&#x5206;&#x5E03;&#x5F0F;"></a>&#x5206;&#x5E03;&#x5F0F;</h3><h3 id="&#x96C6;&#x7FA4;"><a href="#&#x96C6;&#x7FA4;" class="headerlink" title="&#x96C6;&#x7FA4;"></a>&#x96C6;&#x7FA4;</h3><h3 id="&#x653B;&#x51FB;&#x6280;&#x672F;"><a href="#&#x653B;&#x51FB;&#x6280;&#x672F;" class="headerlink" title="&#x653B;&#x51FB;&#x6280;&#x672F;"></a>&#x653B;&#x51FB;&#x6280;&#x672F;</h3><h3 id="&#x7F13;&#x5B58;"><a href="#&#x7F13;&#x5B58;" class="headerlink" title="&#x7F13;&#x5B58;"></a>&#x7F13;&#x5B58;</h3><h3 id="&#x6D88;&#x606F;&#x961F;&#x5217;"><a href="#&#x6D88;&#x606F;&#x961F;&#x5217;" class="headerlink" title="&#x6D88;&#x606F;&#x961F;&#x5217;"></a>&#x6D88;&#x606F;&#x961F;&#x5217;</h3><h2 id="&#x5DE5;&#x5177;"><a href="#&#x5DE5;&#x5177;" class="headerlink" title="&#x5DE5;&#x5177;"></a>&#x5DE5;&#x5177;</h2><h3 id="Git"><a href="#Git" class="headerlink" title="Git"></a>Git</h3><h3 id="Docker"><a href="#Docker" class="headerlink" title="Docker"></a>Docker</h3><h3 id="&#x6784;&#x5EFA;&#x5DE5;&#x5177;"><a href="#&#x6784;&#x5EFA;&#x5DE5;&#x5177;" class="headerlink" title="&#x6784;&#x5EFA;&#x5DE5;&#x5177;"></a>&#x6784;&#x5EFA;&#x5DE5;&#x5177;</h3><h3 id="&#x6B63;&#x5219;&#x8868;&#x8FBE;&#x5F0F;"><a href="#&#x6B63;&#x5219;&#x8868;&#x8FBE;&#x5F0F;" class="headerlink" title="&#x6B63;&#x5219;&#x8868;&#x8FBE;&#x5F0F;"></a>&#x6B63;&#x5219;&#x8868;&#x8FBE;&#x5F0F;</h3>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h2 id=&quot;&amp;#x7B97;&amp;#x6CD5;&quot;&gt;&lt;a href=&quot;#&amp;#x7B97;&amp;#x6CD5;&quot; class=&quot;headerlink&quot; title=&quot;&amp;#x7B97;&amp;#x6CD5;&quot;&gt;&lt;/a&gt;&amp;#x7B97;&amp;#x6CD5;&lt;/h2&gt;&lt;h3 id=&quot;&amp;#x5251;&amp;
      
    
    </summary>
    
      <category term="知识图谱" scheme="http://blog.cuzz.site/categories/%E7%9F%A5%E8%AF%86%E5%9B%BE%E8%B0%B1/"/>
    
    
      <category term="博客" scheme="http://blog.cuzz.site/tags/%E5%8D%9A%E5%AE%A2/"/>
    
  </entry>
  
  <entry>
    <title>数据库</title>
    <link href="http://blog.cuzz.site/2019/02/22/%E6%95%B0%E6%8D%AE%E5%BA%93/"/>
    <id>http://blog.cuzz.site/2019/02/22/数据库/</id>
    <published>2019-02-22T15:59:59.000Z</published>
    <updated>2019-07-16T11:43:31.326Z</updated>
    
    <content type="html"><![CDATA[<h2 id="&#x6570;&#x636E;&#x5E93;&#x67B6;&#x6784;"><a href="#&#x6570;&#x636E;&#x5E93;&#x67B6;&#x6784;" class="headerlink" title="&#x6570;&#x636E;&#x5E93;&#x67B6;&#x6784;"></a>&#x6570;&#x636E;&#x5E93;&#x67B6;&#x6784;</h2><p>&#x6570;&#x636E;&#x5E93;&#x67B6;&#x6784;&#x53EF;&#x4EE5;&#x5206;&#x4E3A;&#x5B58;&#x50A8;&#x6587;&#x4EF6;&#x7CFB;&#x7EDF;&#x548C;&#x7A0B;&#x5E8F;&#x5B9E;&#x4F8B;&#x4E24;&#x5927;&#x5757;&#xFF0C;&#x800C;&#x7A0B;&#x5E8F;&#x5B9E;&#x4F8B;&#x6839;&#x636E;&#x4E0D;&#x540C;&#x7684;&#x529F;&#x80FD;&#x53C8;&#x53EF;&#x4EE5;&#x5206;&#x4E3A;&#x5982;&#x4E0B;&#x5C0F;&#x6A21;&#x5757;&#x3002;</p><p><img src="/2019/02/22/&#x6570;&#x636E;&#x5E93;/&#x6570;&#x636E;&#x5E93;\1550644570798.png" alt="1550644570798"></p><h2 id="&#x7D22;&#x5F15;&#x6A21;&#x5757;"><a href="#&#x7D22;&#x5F15;&#x6A21;&#x5757;" class="headerlink" title="&#x7D22;&#x5F15;&#x6A21;&#x5757;"></a>&#x7D22;&#x5F15;&#x6A21;&#x5757;</h2><p>&#x5E38;&#x89C1;&#x7684;&#x95EE;&#x9898;&#x6709;&#xFF1A;</p><ul><li>&#x4E3A;&#x4EC0;&#x4E48;&#x8981;&#x4F7F;&#x7528;&#x7D22;&#x5F15;</li><li>&#x4EC0;&#x4E48;&#x6837;&#x7684;&#x4FE1;&#x606F;&#x80FD;&#x6210;&#x4E3A;&#x7D22;&#x5F15;</li><li>&#x7D22;&#x5F15;&#x7684;&#x6570;&#x636E;&#x7ED3;&#x6784;</li><li>&#x5BC6;&#x96C6;&#x7D22;&#x5F15;&#x548C;&#x7A00;&#x758F;&#x7D22;&#x5F15;&#x7684;&#x533A;&#x522B;</li></ul><h3 id="&#x4E3A;&#x4EC0;&#x4E48;&#x8981;&#x4F7F;&#x7528;&#x7D22;&#x5F15;"><a href="#&#x4E3A;&#x4EC0;&#x4E48;&#x8981;&#x4F7F;&#x7528;&#x7D22;&#x5F15;" class="headerlink" title="&#x4E3A;&#x4EC0;&#x4E48;&#x8981;&#x4F7F;&#x7528;&#x7D22;&#x5F15;"></a>&#x4E3A;&#x4EC0;&#x4E48;&#x8981;&#x4F7F;&#x7528;&#x7D22;&#x5F15;</h3><p>&#x4F7F;&#x7528;&#x7D22;&#x5F15;&#x5C31;&#x50CF;&#x67E5;&#x5B57;&#x5178;&#x4E00;&#x6837;&#xFF0C;&#x53EF;&#x4EE5;&#x5FEB;&#x901F;&#x67E5;&#x8BE2;&#x6570;&#x636E;</p><h3 id="&#x4EC0;&#x4E48;&#x6837;&#x7684;&#x4FE1;&#x606F;&#x80FD;&#x6210;&#x4E3A;&#x7D22;&#x5F15;"><a href="#&#x4EC0;&#x4E48;&#x6837;&#x7684;&#x4FE1;&#x606F;&#x80FD;&#x6210;&#x4E3A;&#x7D22;&#x5F15;" class="headerlink" title="&#x4EC0;&#x4E48;&#x6837;&#x7684;&#x4FE1;&#x606F;&#x80FD;&#x6210;&#x4E3A;&#x7D22;&#x5F15;"></a>&#x4EC0;&#x4E48;&#x6837;&#x7684;&#x4FE1;&#x606F;&#x80FD;&#x6210;&#x4E3A;&#x7D22;&#x5F15;</h3><p>&#x4E3B;&#x952E;&#x3001;&#x552F;&#x4E00;&#x952E;&#x4EE5;&#x53CA;&#x666E;&#x901A;&#x952E;&#x7B49;</p><h3 id="&#x7D22;&#x5F15;&#x7684;&#x6570;&#x636E;&#x7ED3;&#x6784;"><a href="#&#x7D22;&#x5F15;&#x7684;&#x6570;&#x636E;&#x7ED3;&#x6784;" class="headerlink" title="&#x7D22;&#x5F15;&#x7684;&#x6570;&#x636E;&#x7ED3;&#x6784;"></a>&#x7D22;&#x5F15;&#x7684;&#x6570;&#x636E;&#x7ED3;&#x6784;</h3><ul><li>&#x751F;&#x6210;&#x7D22;&#x5F15;&#xFF0C;&#x5EFA;&#x7ACB;&#x4E8C;&#x53C9;&#x67E5;&#x627E;&#x6811;&#x8FDB;&#x884C;&#x4E8C;&#x5206;&#x67E5;&#x627E;</li><li>&#x751F;&#x6210;&#x7D22;&#x5F15;&#xFF0C;&#x5EFA;&#x7ACB; B Tree &#x7ED3;&#x6784;&#x7ED3;&#x6784;&#x8FDB;&#x884C;&#x67E5;&#x627E;</li><li>&#x751F;&#x6210;&#x7D22;&#x5F15;&#xFF0C;&#x5EFA;&#x7ACB; B+ Tree &#x7ED3;&#x6784;&#x8FDB;&#x884C;&#x67E5;&#x627E;</li><li>&#x751F;&#x6210;&#x7D22;&#x5F15;&#xFF0C;&#x5EFA;&#x7ACB; Hash &#x7ED3;&#x6784;&#x8FDB;&#x884C;&#x67E5;&#x627E;</li></ul><h4 id="&#x4EC0;&#x4E48;&#x662F;-B-Tree-&#x7D22;&#x5F15;&#xFF1F;"><a href="#&#x4EC0;&#x4E48;&#x662F;-B-Tree-&#x7D22;&#x5F15;&#xFF1F;" class="headerlink" title="&#x4EC0;&#x4E48;&#x662F; B Tree &#x7D22;&#x5F15;&#xFF1F;"></a>&#x4EC0;&#x4E48;&#x662F; B Tree &#x7D22;&#x5F15;&#xFF1F;</h4><p>B-Tree &#x662F;&#x4E3A;&#x78C1;&#x76D8;&#x7B49;&#x5916;&#x5B58;&#x50A8;&#x8BBE;&#x5907;&#x8BBE;&#x8BA1;&#x7684;&#x4E00;&#x79CD;&#x5E73;&#x8861;&#x67E5;&#x627E;&#x6811;&#x3002;&#x56E0;&#x6B64;&#x5728;&#x8BB2; B-Tree &#x4E4B;&#x524D;&#x5148;&#x4E86;&#x89E3;&#x4E0B;&#x78C1;&#x76D8;&#x7684;&#x76F8;&#x5173;&#x77E5;&#x8BC6;&#x3002;</p><ul><li><p>&#x7CFB;&#x7EDF;&#x4ECE;&#x78C1;&#x76D8;&#x8BFB;&#x53D6;&#x6570;&#x636E;&#x5230;&#x5185;&#x5B58;&#x65F6;&#x662F;&#x4EE5;&#x78C1;&#x76D8;&#x5757;&#xFF08;block&#xFF09;&#x4E3A;&#x57FA;&#x672C;&#x5355;&#x4F4D;&#x7684;&#xFF0C;&#x4F4D;&#x4E8E;&#x540C;&#x4E00;&#x4E2A;&#x78C1;&#x76D8;&#x5757;&#x4E2D;&#x7684;&#x6570;&#x636E;&#x4F1A;&#x88AB;&#x4E00;&#x6B21;&#x6027;&#x8BFB;&#x53D6;&#x51FA;&#x6765;&#xFF0C;&#x800C;&#x4E0D;&#x662F;&#x9700;&#x8981;&#x4EC0;&#x4E48;&#x53D6;&#x4EC0;&#x4E48;&#x3002;</p></li><li><p>InnoDB&#x5B58;&#x50A8;&#x5F15;&#x64CE;&#x4E2D;&#x6709;&#x9875;&#xFF08;Page&#xFF09;&#x7684;&#x6982;&#x5FF5;&#xFF0C;&#x9875;&#x662F;&#x5176;&#x78C1;&#x76D8;&#x7BA1;&#x7406;&#x7684;&#x6700;&#x5C0F;&#x5355;&#x4F4D;&#x3002;InnoDB &#x5B58;&#x50A8;&#x5F15;&#x64CE;&#x4E2D;&#x9ED8;&#x8BA4;&#x6BCF;&#x4E2A;&#x9875;&#x7684;&#x5927;&#x5C0F;&#x4E3A; 16 KB&#xFF0C;&#x53EF;&#x901A;&#x8FC7;&#x53C2;&#x6570; innodb_page_size &#x5C06;&#x9875;&#x7684;&#x5927;&#x5C0F;&#x8BBE;&#x7F6E;&#x4E3A; 4K&#x3001;8K&#x3001;16K &#xFF0C;&#x5728; MySQL &#x4E2D;&#x53EF;&#x901A;&#x8FC7;&#x5982;&#x4E0B;&#x547D;&#x4EE4;&#x67E5;&#x770B;&#x9875;&#x7684;&#x5927;&#x5C0F;&#xFF1A;</p><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; show variables like &apos;innodb_page_size&apos;;</span><br></pre></td></tr></table></figure></li><li><p>&#x800C;&#x7CFB;&#x7EDF;&#x4E00;&#x4E2A;&#x78C1;&#x76D8;&#x5757;&#x7684;&#x5B58;&#x50A8;&#x7A7A;&#x95F4;&#x5F80;&#x5F80;&#x6CA1;&#x6709;&#x8FD9;&#x4E48;&#x5927;&#xFF0C;&#x56E0;&#x6B64; InnoDB &#x6BCF;&#x6B21;&#x7533;&#x8BF7;&#x78C1;&#x76D8;&#x7A7A;&#x95F4;&#x65F6;&#x90FD;&#x4F1A;&#x662F;&#x82E5;&#x5E72;&#x5730;&#x5740;&#x8FDE;&#x7EED;&#x78C1;&#x76D8;&#x5757;&#x6765;&#x8FBE;&#x5230;&#x9875;&#x7684;&#x5927;&#x5C0F; 16KB &#x3002;InnoDB &#x5728;&#x628A;&#x78C1;&#x76D8;&#x6570;&#x636E;&#x8BFB;&#x5165;&#x5230;&#x78C1;&#x76D8;&#x65F6;&#x4F1A;&#x4EE5;&#x9875;&#x4E3A;&#x57FA;&#x672C;&#x5355;&#x4F4D;&#xFF0C;&#x5728;&#x67E5;&#x8BE2;&#x6570;&#x636E;&#x65F6;&#x5982;&#x679C;&#x4E00;&#x4E2A;&#x9875;&#x4E2D;&#x7684;&#x6BCF;&#x6761;&#x6570;&#x636E;&#x90FD;&#x80FD;&#x6709;&#x52A9;&#x4E8E;&#x5B9A;&#x4F4D;&#x6570;&#x636E;&#x8BB0;&#x5F55;&#x7684;&#x4F4D;&#x7F6E;&#xFF0C;&#x8FD9;&#x5C06;&#x4F1A;&#x51CF;&#x5C11;&#x78C1;&#x76D8; I/O &#x6B21;&#x6570;&#xFF0C;&#x63D0;&#x9AD8;&#x67E5;&#x8BE2;&#x6548;&#x7387;&#x3002;</p></li></ul><p>B-Tree &#x7ED3;&#x6784;&#x7684;&#x6570;&#x636E;&#x53EF;&#x4EE5;&#x8BA9;&#x7CFB;&#x7EDF;&#x9AD8;&#x6548;&#x7684;&#x627E;&#x5230;&#x6570;&#x636E;&#x6240;&#x5728;&#x7684;&#x78C1;&#x76D8;&#x5757;&#x3002;&#x4E3A;&#x4E86;&#x63CF;&#x8FF0;B-Tree&#xFF0C;&#x9996;&#x5148;&#x5B9A;&#x4E49;&#x4E00;&#x6761;&#x8BB0;&#x5F55;&#x4E3A;&#x4E00;&#x4E2A;&#x4E8C;&#x5143;&#x7EC4; [key, data] &#xFF0C;key &#x4E3A;&#x8BB0;&#x5F55;&#x7684;&#x952E;&#x503C;&#xFF0C;&#x5BF9;&#x5E94;&#x8868;&#x4E2D;&#x7684;&#x4E3B;&#x952E;&#x503C;&#xFF0C;data &#x4E3A;&#x4E00;&#x884C;&#x8BB0;&#x5F55;&#x4E2D;&#x9664;&#x4E3B;&#x952E;&#x5916;&#x7684;&#x6570;&#x636E;&#x3002;&#x5BF9;&#x4E8E;&#x4E0D;&#x540C;&#x7684;&#x8BB0;&#x5F55;&#xFF0C;key&#x503C;&#x4E92;&#x4E0D;&#x76F8;&#x540C;&#x3002;</p><p>&#x4E00;&#x68F5; m &#x9636;&#x7684; B-Tree &#x6709;&#x5982;&#x4E0B;&#x7279;&#x6027;&#xFF1A;</p><ul><li>&#x6BCF;&#x4E2A;&#x8282;&#x70B9;&#x6700;&#x591A;&#x6709; m &#x4E2A;&#x5B69;&#x5B50;<ul><li>&#x9664;&#x4E86;&#x6839;&#x8282;&#x70B9;&#x548C;&#x53F6;&#x5B50;&#x8282;&#x70B9;&#x5916;&#xFF0C;&#x5176;&#x5B83;&#x6BCF;&#x4E2A;&#x8282;&#x70B9;&#x81F3;&#x5C11;&#x6709; Ceil(m/2) &#x4E2A;&#x5B69;&#x5B50;</li><li>&#x82E5;&#x6839;&#x8282;&#x70B9;&#x4E0D;&#x662F;&#x53F6;&#x5B50;&#x8282;&#x70B9;&#xFF0C;&#x5219;&#x81F3;&#x5C11;&#x6709; 2 &#x4E2A;&#x5B69;&#x5B50;</li></ul></li><li>&#x6240;&#x6709;&#x53F6;&#x5B50;&#x8282;&#x70B9;&#x90FD;&#x5728;&#x540C;&#x4E00;&#x5C42;&#xFF0C;&#x4E14;&#x4E0D;&#x5305;&#x542B;&#x5176;&#x5B83;&#x5173;&#x952E;&#x5B57;&#x4FE1;&#x606F;</li><li>&#x6BCF;&#x4E2A;&#x975E;&#x53F6;&#x5B50;&#x8282;&#x70B9;&#x5305;&#x542B; n &#x4E2A;&#x5173;&#x952E;&#x5B57;&#x4FE1;&#x606F;&#xFF08;P0,P1,&#x2026;Pn, k1,&#x2026;kn&#xFF09;<ul><li>&#x5173;&#x952E;&#x5B57;&#x7684;&#x4E2A;&#x6570; n &#x6EE1;&#x8DB3;&#xFF1A;ceil(m/2)-1 &lt;= n &lt;= m-1</li><li>ki(i=1,&#x2026;n) &#x4E3A;&#x5173;&#x952E;&#x5B57;&#xFF0C;&#x4E14;&#x5173;&#x952E;&#x5B57;&#x5347;&#x5E8F;&#x6392;&#x5E8F;</li><li>Pi(i=0,&#x2026;n) &#x4E3A;&#x6307;&#x5411;&#x5B50;&#x6811;&#x6839;&#x8282;&#x70B9;&#x7684;&#x6307;&#x9488;&#x3002;P(i-1) &#x6307;&#x5411;&#x7684;&#x5B50;&#x6811;&#x7684;&#x6240;&#x6709;&#x8282;&#x70B9;&#x5173;&#x952E;&#x5B57;&#x5747;&#x5C0F;&#x4E8E; ki &#xFF0C;&#x4F46;&#x90FD;&#x5927;&#x4E8E; k(i-1) </li></ul></li></ul><p>B-Tree &#x4E2D;&#x7684;&#x6BCF;&#x4E2A;&#x8282;&#x70B9;&#x6839;&#x636E;&#x5B9E;&#x9645;&#x60C5;&#x51B5;&#x53EF;&#x4EE5;&#x5305;&#x542B;&#x5927;&#x91CF;&#x7684;&#x5173;&#x952E;&#x5B57;&#x4FE1;&#x606F;&#x548C;&#x5206;&#x652F;&#xFF0C;&#x5982;&#x4E0B;&#x56FE;&#x6240;&#x793A;&#x4E3A;&#x4E00;&#x4E2A; 3 &#x9636;&#x7684; B-Tree&#xFF1A;</p><p><img src="/2019/02/22/&#x6570;&#x636E;&#x5E93;/&#x6570;&#x636E;&#x5E93;\84ea509fa091a10add4e7614e6cb37db" alt="B-Tree &#x7684;&#x7ED3;&#x6784;"></p><ul><li>&#x6BCF;&#x4E2A;&#x8282;&#x70B9;&#x5360;&#x7528;&#x4E00;&#x4E2A;&#x76D8;&#x5757;&#x7684;&#x78C1;&#x76D8;&#x7A7A;&#x95F4;&#xFF0C;&#x4E00;&#x4E2A;&#x8282;&#x70B9;&#x4E0A;&#x6709;&#x4E24;&#x4E2A;&#x5347;&#x5E8F;&#x6392;&#x5E8F;&#x7684; key &#x548C;&#x4E09;&#x4E2A;&#x6307;&#x5411;&#x5B50;&#x6811;&#x6839;&#x8282;&#x70B9;&#x7684; point &#xFF0C;point &#x5B58;&#x50A8;&#x7684;&#x662F;&#x5B50;&#x8282;&#x70B9;&#x6240;&#x5728;&#x78C1;&#x76D8;&#x5757;&#x7684;&#x5730;&#x5740;&#x3002;&#x4E24;&#x4E2A; key &#x5212;&#x5206;&#x6210;&#x7684;&#x4E09;&#x4E2A;&#x8303;&#x56F4;&#x57DF;&#xFF0C;&#x5BF9;&#x5E94;&#x4E09;&#x4E2A; point &#x6307;&#x5411;&#x7684;&#x5B50;&#x6811;&#x7684;&#x6570;&#x636E;&#x7684;&#x8303;&#x56F4;&#x57DF;&#x3002;</li><li>&#x4EE5;&#x6839;&#x8282;&#x70B9;&#x4E3A;&#x4F8B;&#xFF0C;key &#x4E3A; 17 &#x548C; 35 &#xFF0C;P1 &#x6307;&#x9488;&#x6307;&#x5411;&#x7684;&#x5B50;&#x6811;&#x7684;&#x6570;&#x636E;&#x8303;&#x56F4;&#x4E3A;&#x5C0F;&#x4E8E; 17 &#xFF0C;P2 &#x6307;&#x9488;&#x6307;&#x5411;&#x7684;&#x5B50;&#x6811;&#x7684;&#x6570;&#x636E;&#x8303;&#x56F4;&#x4E3A; [17~35] &#xFF0C;P3 &#x6307;&#x9488;&#x6307;&#x5411;&#x7684;&#x5B50;&#x6811;&#x7684;&#x6570;&#x636E;&#x8303;&#x56F4;&#x4E3A;&#x5927;&#x4E8E; 35 &#x3002;</li></ul><p>&#x6A21;&#x62DF;&#x67E5;&#x627E; key &#x4E3A; 29 &#x7684;&#x8FC7;&#x7A0B;&#xFF1A;</p><ul><li>1&#x3001;&#x6839;&#x636E;&#x6839;&#x8282;&#x70B9;&#x627E;&#x5230;&#x78C1;&#x76D8;&#x5757; 1 &#xFF0C;&#x8BFB;&#x5165;&#x5185;&#x5B58;&#x3002;&#x3010;&#x78C1;&#x76D8;I/O&#x64CD;&#x4F5C;&#x7B2C;1&#x6B21;&#x3011;</li><li>2&#x3001;&#x6BD4;&#x8F83; key 29 &#x5728;&#x533A;&#x95F4;&#xFF08;17,35&#xFF09;&#xFF0C;&#x627E;&#x5230;&#x78C1;&#x76D8;&#x5757; 1 &#x7684;&#x6307;&#x9488; P2 &#x3002;</li><li>3&#x3001;&#x6839;&#x636E; P2 &#x6307;&#x9488;&#x627E;&#x5230;&#x78C1;&#x76D8;&#x5757; 3 &#xFF0C;&#x8BFB;&#x5165;&#x5185;&#x5B58;&#x3002;&#x3010;&#x78C1;&#x76D8;I/O&#x64CD;&#x4F5C;&#x7B2C;2&#x6B21;&#x3011;</li><li>4&#x3001;&#x6BD4;&#x8F83; key 29 &#x5728;&#x533A;&#x95F4;&#xFF08;26,30&#xFF09;&#xFF0C;&#x627E;&#x5230;&#x78C1;&#x76D8;&#x5757;3&#x7684;&#x6307;&#x9488;P2&#x3002;</li><li>5&#x3001;&#x6839;&#x636E; P2 &#x6307;&#x9488;&#x627E;&#x5230;&#x78C1;&#x76D8;&#x5757; 8 &#xFF0C;&#x8BFB;&#x5165;&#x5185;&#x5B58;&#x3002;&#x3010;&#x78C1;&#x76D8;I/O&#x64CD;&#x4F5C;&#x7B2C;3&#x6B21;&#x3011;</li><li>6&#x3001;&#x5728;&#x78C1;&#x76D8;&#x5757; 8 &#x4E2D;&#x7684; key &#x5217;&#x8868;&#x4E2D;&#x627E;&#x5230; eky 29 &#x3002;</li></ul><p>&#x5206;&#x6790;&#x4E0A;&#x9762;&#x8FC7;&#x7A0B;&#xFF0C;&#x53D1;&#x73B0;&#x9700;&#x8981; 3 &#x6B21;&#x78C1;&#x76D8; I/O &#x64CD;&#x4F5C;&#xFF0C;&#x548C; 3 &#x6B21;&#x5185;&#x5B58;&#x67E5;&#x627E;&#x64CD;&#x4F5C;&#x3002;&#x7531;&#x4E8E;&#x5185;&#x5B58;&#x4E2D;&#x7684; key &#x662F;&#x4E00;&#x4E2A;&#x6709;&#x5E8F;&#x8868;&#x7ED3;&#x6784;&#xFF0C;&#x53EF;&#x4EE5;&#x5229;&#x7528;&#x4E8C;&#x5206;&#x6CD5;&#x67E5;&#x627E;&#x63D0;&#x9AD8;&#x6548;&#x7387;&#x3002;&#x800C; 3 &#x6B21;&#x78C1;&#x76D8; I/O &#x64CD;&#x4F5C;&#x662F;&#x5F71;&#x54CD;&#x6574;&#x4E2A; B-Tree &#x67E5;&#x627E;&#x6548;&#x7387;&#x7684;&#x51B3;&#x5B9A;&#x56E0;&#x7D20;&#x3002;B-Tree &#x76F8;&#x5BF9;&#x4E8E; AVLTree &#x7F29;&#x51CF;&#x4E86;&#x8282;&#x70B9;&#x4E2A;&#x6570;&#xFF0C;&#x4F7F;&#x6BCF;&#x6B21;&#x78C1;&#x76D8; I/O &#x53D6;&#x5230;&#x5185;&#x5B58;&#x7684;&#x6570;&#x636E;&#x90FD;&#x53D1;&#x6325;&#x4E86;&#x4F5C;&#x7528;&#xFF0C;&#x4ECE;&#x800C;&#x63D0;&#x9AD8;&#x4E86;&#x67E5;&#x8BE2;&#x6548;&#x7387;&#x3002;</p><h4 id="&#x4EC0;&#x4E48;&#x662F;-B-Tree-&#x7D22;&#x5F15;&#xFF1F;-1"><a href="#&#x4EC0;&#x4E48;&#x662F;-B-Tree-&#x7D22;&#x5F15;&#xFF1F;-1" class="headerlink" title="&#x4EC0;&#x4E48;&#x662F; B+Tree &#x7D22;&#x5F15;&#xFF1F;"></a>&#x4EC0;&#x4E48;&#x662F; B+Tree &#x7D22;&#x5F15;&#xFF1F;</h4><p>B+Tree &#x662F;&#x5728; B-Tree &#x57FA;&#x7840;&#x4E0A;&#x7684;&#x4E00;&#x79CD;&#x4F18;&#x5316;&#xFF0C;&#x4F7F;&#x5176;&#x66F4;&#x9002;&#x5408;&#x5B9E;&#x73B0;&#x5916;&#x5B58;&#x50A8;&#x7D22;&#x5F15;&#x7ED3;&#x6784;&#xFF0C;InnoDB&#x5B58;&#x50A8;&#x5F15;&#x64CE;&#x5C31;&#x662F;&#x7528; B+Tree &#x5B9E;&#x73B0;&#x5176;&#x7D22;&#x5F15;&#x7ED3;&#x6784;&#x3002;</p><p>&#x4ECE;&#x4E0A;&#x4E00;&#x8282;&#x4E2D;&#x7684; B-Tree &#x7ED3;&#x6784;&#x56FE;&#x4E2D;&#x53EF;&#x4EE5;&#x770B;&#x5230;&#xFF0C;&#x6BCF;&#x4E2A;&#x8282;&#x70B9;&#x4E2D;&#x4E0D;&#x4EC5;&#x5305;&#x542B;&#x6570;&#x636E;&#x7684; key &#x503C;&#xFF0C;&#x8FD8;&#x6709; data &#x503C;&#x3002;&#x800C;&#x6BCF;&#x4E00;&#x4E2A;&#x9875;&#x7684;&#x5B58;&#x50A8;&#x7A7A;&#x95F4;&#x662F;&#x6709;&#x9650;&#x7684;&#xFF0C;&#x5982;&#x679C; data &#x6570;&#x636E;&#x8F83;&#x5927;&#x65F6;&#x5C06;&#x4F1A;&#x5BFC;&#x81F4;&#x6BCF;&#x4E2A;&#x8282;&#x70B9;&#xFF08;&#x5373;&#x4E00;&#x4E2A;&#x9875;&#xFF09;&#x80FD;&#x5B58;&#x50A8;&#x7684; key &#x7684;&#x6570;&#x91CF;&#x5F88;&#x5C0F;&#xFF0C;&#x5F53;&#x5B58;&#x50A8;&#x7684;&#x6570;&#x636E;&#x91CF;&#x5F88;&#x5927;&#x65F6;&#x540C;&#x6837;&#x4F1A;&#x5BFC;&#x81F4; B-Tree &#x7684;&#x6DF1;&#x5EA6;&#x8F83;&#x5927;&#xFF0C;&#x589E;&#x5927;&#x67E5;&#x8BE2;&#x65F6;&#x7684;&#x78C1;&#x76D8; I/O &#x6B21;&#x6570;&#xFF0C;&#x8FDB;&#x800C;&#x5F71;&#x54CD;&#x67E5;&#x8BE2;&#x6548;&#x7387;&#x3002;&#x5728; B+Tree &#x4E2D;&#xFF0C;&#x6240;&#x6709;&#x6570;&#x636E;&#x8BB0;&#x5F55;&#x8282;&#x70B9;&#x90FD;&#x662F;&#x6309;&#x7167;&#x952E;&#x503C;&#x5927;&#x5C0F;&#x987A;&#x5E8F;&#x5B58;&#x653E;&#x5728;&#x540C;&#x4E00;&#x5C42;&#x7684;&#x53F6;&#x5B50;&#x8282;&#x70B9;&#x4E0A;&#xFF0C;&#x800C;&#x975E;&#x53F6;&#x5B50;&#x8282;&#x70B9;&#x4E0A;&#x53EA;&#x5B58;&#x50A8; key &#x503C;&#x4FE1;&#x606F;&#xFF0C;&#x8FD9;&#x6837;&#x53EF;&#x4EE5;&#x5927;&#x5927;&#x52A0;&#x5927;&#x6BCF;&#x4E2A;&#x8282;&#x70B9;&#x5B58;&#x50A8;&#x7684; key &#x503C;&#x6570;&#x91CF;&#xFF0C;&#x964D;&#x4F4E; B+Tree &#x7684;&#x9AD8;&#x5EA6;&#x3002;</p><p>B+Tree &#x76F8;&#x5BF9;&#x4E8E; B-Tree &#x6709;&#x51E0;&#x70B9;&#x4E0D;&#x540C;&#xFF1A;</p><ul><li>&#x975E;&#x53F6;&#x5B50;&#x8282;&#x70B9;&#x53EA;&#x5B58;&#x50A8;&#x952E;&#x503C;&#x4FE1;&#x606F;&#x3002;</li><li>&#x6240;&#x6709;&#x53F6;&#x5B50;&#x8282;&#x70B9;&#x4E4B;&#x95F4;&#x90FD;&#x6709;&#x4E00;&#x4E2A;&#x94FE;&#x6307;&#x9488;&#x3002;</li><li>&#x6570;&#x636E;&#x8BB0;&#x5F55;&#x90FD;&#x5B58;&#x653E;&#x5728;&#x53F6;&#x5B50;&#x8282;&#x70B9;&#x4E2D;&#x3002;</li></ul><p><strong>B+ Tree &#x66F4;&#x9002;&#x5408;&#x7528;&#x6765;&#x505A;&#x5B58;&#x50A8;&#x7D22;&#x5F15;</strong>&#xFF1A;</p><ul><li>B+ &#x6570;&#x7684;&#x78C1;&#x76D8;&#x8BFB;&#x5199;&#x4EE3;&#x4EF7;&#x66F4;&#x4F4E;</li><li>B+ &#x6570;&#x7684;&#x67E5;&#x8BE2;&#x6548;&#x7387;&#x66F4;&#x52A0;&#x7A33;&#x5B9A;</li><li>B+ &#x6570;&#x66F4;&#x6709;&#x5229;&#x4E8E;&#x5BF9;&#x6570;&#x636E;&#x5E93;&#x7684;&#x626B;&#x63CF;&#xFF08;&#x8303;&#x56F4;&#x67E5;&#x8BE2;&#xFF09;</li></ul><p>&#x5C06;&#x4E0A;&#x4E00;&#x8282;&#x4E2D;&#x7684; B-Tree &#x4F18;&#x5316;&#xFF0C;&#x7531;&#x4E8E; B+Tree &#x7684;&#x975E;&#x53F6;&#x5B50;&#x8282;&#x70B9;&#x53EA;&#x5B58;&#x50A8;&#x952E;&#x503C;&#x4FE1;&#x606F;&#xFF0C;&#x5047;&#x8BBE;&#x6BCF;&#x4E2A;&#x78C1;&#x76D8;&#x5757;&#x80FD;&#x5B58;&#x50A8; 4 &#x4E2A;&#x952E;&#x503C;&#x53CA;&#x6307;&#x9488;&#x4FE1;&#x606F;&#xFF0C;&#x5219;&#x53D8;&#x6210; B+Tree &#x540E;&#x5176;&#x7ED3;&#x6784;&#x5982;&#x4E0B;&#x56FE;&#x6240;&#x793A;&#xFF1A;</p><p><img src="/2019/02/22/&#x6570;&#x636E;&#x5E93;/&#x6570;&#x636E;&#x5E93;\259d196856a231aff5e3cf1505848af4" alt="B+Tree &#x7684;&#x7ED3;&#x6784;"></p><blockquote><p>&#x78C1;&#x76D8;&#x5757;4&#x4E2D;&#x7684;10&#x6570;&#x636E;&#xFF0C;&#x753B;&#x9519;&#x4E86;&#xFF0C;&#x8303;&#x56F4;&#x5728;[K[i], K[i+1])&#xFF0C;&#x5DE6;&#x95ED;&#x53F3;&#x5F00;</p></blockquote><ul><li>&#x901A;&#x5E38;&#x5728; B+Tree &#x4E0A;&#x6709;&#x4E24;&#x4E2A;&#x5934;&#x6307;&#x9488;&#xFF0C;&#x4E00;&#x4E2A;&#x6307;&#x5411;&#x6839;&#x8282;&#x70B9;&#xFF0C;&#x53E6;&#x4E00;&#x4E2A;&#x6307;&#x5411;&#x5173;&#x952E;&#x5B57;&#x6700;&#x5C0F;&#x7684;&#x53F6;&#x5B50;&#x8282;&#x70B9;&#xFF0C;&#x800C;&#x4E14;&#x6240;&#x6709;&#x53F6;&#x5B50;&#x8282;&#x70B9;&#xFF08;&#x5373;&#x6570;&#x636E;&#x8282;&#x70B9;&#xFF09;&#x4E4B;&#x95F4;&#x662F;&#x4E00;&#x79CD;&#x94FE;&#x5F0F;&#x73AF;&#x7ED3;&#x6784;&#x3002;&#x56E0;&#x6B64;&#x53EF;&#x4EE5;&#x5BF9; B+Tree &#x8FDB;&#x884C;&#x4E24;&#x79CD;&#x67E5;&#x627E;&#x8FD0;&#x7B97;&#xFF1A;&#x4E00;&#x79CD;&#x662F;&#x5BF9;&#x4E8E;&#x4E3B;&#x952E;&#x7684;&#x8303;&#x56F4;&#x67E5;&#x627E;&#x548C;&#x5206;&#x9875;&#x67E5;&#x627E;&#xFF0C;&#x53E6;&#x4E00;&#x79CD;&#x662F;&#x4ECE;&#x6839;&#x8282;&#x70B9;&#x5F00;&#x59CB;&#xFF0C;&#x8FDB;&#x884C;&#x968F;&#x673A;&#x67E5;&#x627E;&#x3002;</li></ul><p>&#x53EF;&#x80FD;&#x4E0A;&#x9762;&#x4F8B;&#x5B50;&#x4E2D;&#x53EA;&#x6709; 22 &#x6761;&#x6570;&#x636E;&#x8BB0;&#x5F55;&#xFF0C;&#x770B;&#x4E0D;&#x51FA; B+Tree &#x7684;&#x4F18;&#x70B9;&#xFF0C;&#x4E0B;&#x9762;&#x505A;&#x4E00;&#x4E2A;&#x63A8;&#x7B97;&#xFF1A;</p><ul><li>InnoDB &#x5B58;&#x50A8;&#x5F15;&#x64CE;&#x4E2D;&#x9875;&#x7684;&#x5927;&#x5C0F;&#x4E3A; 16KB&#xFF0C;&#x4E00;&#x822C;&#x8868;&#x7684;&#x4E3B;&#x952E;&#x7C7B;&#x578B;&#x4E3A; INT&#xFF08;&#x5360;&#x7528;4&#x4E2A;&#x5B57;&#x8282;&#xFF09; &#x6216; BIGINT&#xFF08;&#x5360;&#x7528;8&#x4E2A;&#x5B57;&#x8282;&#xFF09;&#xFF0C;&#x6307;&#x9488;&#x7C7B;&#x578B;&#x4E5F;&#x4E00;&#x822C;&#x4E3A; 4 &#x6216; 8 &#x4E2A;&#x5B57;&#x8282;&#xFF0C;&#x4E5F;&#x5C31;&#x662F;&#x8BF4;&#x4E00;&#x4E2A;&#x9875;&#xFF08;B+Tree &#x4E2D;&#x7684;&#x4E00;&#x4E2A;&#x8282;&#x70B9;&#xFF09;&#x4E2D;&#x5927;&#x6982;&#x5B58;&#x50A8; 16KB/(8B+8B)=1K &#x4E2A;&#x952E;&#x503C;&#xFF08;&#x56E0;&#x4E3A;&#x662F;&#x4F30;&#x503C;&#xFF0C;&#x4E3A;&#x65B9;&#x4FBF;&#x8BA1;&#x7B97;&#xFF0C;&#x8FD9;&#x91CC;&#x7684; K &#x53D6;&#x503C;&#x4E3A;&#x3016;10&#x3017;^3&#xFF09;&#x3002;&#x4E5F;&#x5C31;&#x662F;&#x8BF4;&#x4E00;&#x4E2A;&#x6DF1;&#x5EA6;&#x4E3A; 3 &#x7684; B+Tree &#x7D22;&#x5F15;&#x53EF;&#x4EE5;&#x7EF4;&#x62A4;10^3 <em>10^3</em> 10^3 = 10&#x4EBF; &#x6761;&#x8BB0;&#x5F55;&#x3002;</li><li>&#x5B9E;&#x9645;&#x60C5;&#x51B5;&#x4E2D;&#x6BCF;&#x4E2A;&#x8282;&#x70B9;&#x53EF;&#x80FD;&#x4E0D;&#x80FD;&#x586B;&#x5145;&#x6EE1;&#xFF0C;&#x56E0;&#x6B64;&#x5728;&#x6570;&#x636E;&#x5E93;&#x4E2D;&#xFF0C;B+Tree &#x7684;&#x9AD8;&#x5EA6;&#x4E00;&#x822C;&#x90FD;&#x5728; 2~4 &#x5C42;&#x3002;MySQL &#x7684; InnoDB &#x5B58;&#x50A8;&#x5F15;&#x64CE;&#x5728;&#x8BBE;&#x8BA1;&#x65F6;&#x662F;&#x5C06;&#x6839;&#x8282;&#x70B9;&#x5E38;&#x9A7B;&#x5185;&#x5B58;&#x7684;&#xFF0C;&#x4E5F;&#x5C31;&#x662F;&#x8BF4;&#x67E5;&#x627E;&#x67D0;&#x4E00;&#x952E;&#x503C;&#x7684;&#x884C;&#x8BB0;&#x5F55;&#x65F6;&#x6700;&#x591A;&#x53EA;&#x9700;&#x8981; 1~3 &#x6B21;&#x78C1;&#x76D8; I/O &#x64CD;&#x4F5C;&#x3002;</li></ul><h4 id="&#x4EC0;&#x4E48;&#x662F;-hash-&#x7D22;&#x5F15;&#xFF1F;"><a href="#&#x4EC0;&#x4E48;&#x662F;-hash-&#x7D22;&#x5F15;&#xFF1F;" class="headerlink" title="&#x4EC0;&#x4E48;&#x662F; hash &#x7D22;&#x5F15;&#xFF1F;"></a>&#x4EC0;&#x4E48;&#x662F; hash &#x7D22;&#x5F15;&#xFF1F;</h4><p>&#x57FA;&#x4E8E;&#x54C8;&#x5E0C;&#x8868;&#x5B9E;&#x73B0;&#xFF0C;&#x4F18;&#x70B9;&#x662F;&#x67E5;&#x627E;&#x975E;&#x5E38;&#x5FEB;&#x3002;&#x5982;&#x4E0B;&#x56FE; &#xFF1A;</p><p><img src="/2019/02/22/&#x6570;&#x636E;&#x5E93;/&#x6570;&#x636E;&#x5E93;\20190107191452541898.png" alt="20190107191452541898"></p><p>&#x54C8;&#x5E0C;&#x7D22;&#x5F15;&#x5C31;&#x662F;&#x91C7;&#x7528;&#x4E00;&#x5B9A;&#x7684;&#x54C8;&#x5E0C;&#x7B97;&#x6CD5;&#xFF0C;&#x5C06;&#x952E;&#x503C;&#x6362;&#x7B97;&#x6210;&#x65B0;&#x7684;&#x54C8;&#x5E0C;&#x503C;&#xFF0C;&#x68C0;&#x7D22;&#x65F6;&#x4E0D;&#x9700;&#x8981;&#x60F3;B+Tree&#x90A3;&#x6837;&#x4ECE;&#x6839;&#x7ED3;&#x70B9;&#x5F00;&#x59CB;&#x67E5;&#x627E;&#xFF0C;&#x800C;&#x662F;&#x7ECF;&#x8FC7;&#x8BA1;&#x7B97;&#x76F4;&#x63A5;&#x5B9A;&#x4F4D;&#xFF0C;&#x6240;&#x4EE5;&#x901F;&#x5EA6;&#x5F88;&#x5FEB;&#x3002;</p><p>&#x4F46;&#x662F;&#x4E5F;&#x6709;&#x9650;&#x5236;&#xFF1A;</p><ul><li>&#x53EA;&#x652F;&#x6301;&#x7CBE;&#x786E;&#x67E5;&#x627E;&#xFF0C;&#x4E0D;&#x80FD;&#x7528;&#x4E8E;&#x90E8;&#x5206;&#x67E5;&#x627E;&#x548C;&#x8303;&#x56F4;&#x67E5;&#x627E;&#x3002;&#x65E0;&#x6CD5;&#x6392;&#x5E8F;&#x548C;&#x5206;&#x7EC4;&#x3002;&#x56E0;&#x4E3A;&#x539F;&#x6765;&#x6709;&#x5E8F;&#x7684;&#x952E;&#x503C;&#x7ECF;&#x8FC7;&#x54C8;&#x5E0C;&#x7B97;&#x6CD5;&#x5F88;&#x53EF;&#x80FD;&#x6253;&#x4E71;&#x3002;</li><li>&#x5982;&#x679C;&#x54C8;&#x5E0C;&#x51B2;&#x7A81;&#x5F88;&#x591A;&#xFF0C;&#x67E5;&#x627E;&#x901F;&#x5EA6;&#x5F88;&#x6162;&#x3002;&#x6BD4;&#x5982;&#x5728;&#x6709;&#x5927;&#x91CF;&#x91CD;&#x590D;&#x952E;&#x503C;&#x7684;&#x60C5;&#x51B5;&#x4E0B;&#x3002;</li><li>&#x4E0D;&#x80FD;&#x5229;&#x7528;&#x90E8;&#x5206;&#x7D22;&#x5F15;&#x67E5;&#x8BE2;</li><li>&#x4E0D;&#x80FD;</li></ul><h3 id="&#x805A;&#x96C6;&#x7D22;&#x5F15;&#x4E0E;&#x975E;&#x805A;&#x96C6;&#x7D22;&#x5F15;"><a href="#&#x805A;&#x96C6;&#x7D22;&#x5F15;&#x4E0E;&#x975E;&#x805A;&#x96C6;&#x7D22;&#x5F15;" class="headerlink" title="&#x805A;&#x96C6;&#x7D22;&#x5F15;&#x4E0E;&#x975E;&#x805A;&#x96C6;&#x7D22;&#x5F15;"></a>&#x805A;&#x96C6;&#x7D22;&#x5F15;&#x4E0E;&#x975E;&#x805A;&#x96C6;&#x7D22;&#x5F15;</h3><p><img src="/2019/02/22/&#x6570;&#x636E;&#x5E93;/&#x6570;&#x636E;&#x5E93;\1550731169166.png" alt="1550731169166"></p><h3 id="MyISAM-&#x7D22;&#x5F15;&#x4E0E;-InnoDB-&#x7D22;&#x5F15;&#x7684;&#x533A;&#x522B;&#xFF1F;"><a href="#MyISAM-&#x7D22;&#x5F15;&#x4E0E;-InnoDB-&#x7D22;&#x5F15;&#x7684;&#x533A;&#x522B;&#xFF1F;" class="headerlink" title="MyISAM &#x7D22;&#x5F15;&#x4E0E; InnoDB &#x7D22;&#x5F15;&#x7684;&#x533A;&#x522B;&#xFF1F;"></a>MyISAM &#x7D22;&#x5F15;&#x4E0E; InnoDB &#x7D22;&#x5F15;&#x7684;&#x533A;&#x522B;&#xFF1F;</h3><ul><li>InnoDB &#x7D22;&#x5F15;&#x662F;&#x805A;&#x7C07;&#x7D22;&#x5F15;&#xFF0C;MyISAM &#x7D22;&#x5F15;&#x662F;&#x975E;&#x805A;&#x7C07;&#x7D22;&#x5F15;&#x3002;</li><li>InnoDB &#x7684;&#x4E3B;&#x952E;&#x7D22;&#x5F15;&#x7684;&#x53F6;&#x5B50;&#x8282;&#x70B9;&#x5B58;&#x50A8;&#x7740;&#x884C;&#x6570;&#x636E;&#xFF0C;&#x56E0;&#x6B64;&#x4E3B;&#x952E;&#x7D22;&#x5F15;&#x975E;&#x5E38;&#x9AD8;&#x6548;&#x3002;</li><li>MyISAM &#x7D22;&#x5F15;&#x7684;&#x53F6;&#x5B50;&#x8282;&#x70B9;&#x5B58;&#x50A8;&#x7684;&#x662F;&#x884C;&#x6570;&#x636E;&#x5730;&#x5740;&#xFF0C;&#x9700;&#x8981;&#x518D;&#x5BFB;&#x5740;&#x4E00;&#x6B21;&#x624D;&#x80FD;&#x5F97;&#x5230;&#x6570;&#x636E;&#x3002;</li><li>InnoDB &#x975E;&#x4E3B;&#x952E;&#x7D22;&#x5F15;&#x7684;&#x53F6;&#x5B50;&#x8282;&#x70B9;&#x5B58;&#x50A8;&#x7684;&#x662F;&#x4E3B;&#x952E;&#x548C;&#x5176;&#x4ED6;&#x5E26;&#x7D22;&#x5F15;&#x7684;&#x5217;&#x6570;&#x636E;&#xFF0C;&#x56E0;&#x6B64;&#x67E5;&#x8BE2;&#x65F6;&#x505A;&#x5230;&#x8986;&#x76D6;&#x7D22;&#x5F15;&#x4F1A;&#x975E;&#x5E38;&#x9AD8;&#x6548;</li></ul><h3 id="&#x5982;&#x4F55;&#x5B9A;&#x4F4D;&#x5E76;&#x4F18;&#x5316;&#x6162;&#x67E5;&#x8BE2;&#x7684;-Sql"><a href="#&#x5982;&#x4F55;&#x5B9A;&#x4F4D;&#x5E76;&#x4F18;&#x5316;&#x6162;&#x67E5;&#x8BE2;&#x7684;-Sql" class="headerlink" title="&#x5982;&#x4F55;&#x5B9A;&#x4F4D;&#x5E76;&#x4F18;&#x5316;&#x6162;&#x67E5;&#x8BE2;&#x7684; Sql"></a>&#x5982;&#x4F55;&#x5B9A;&#x4F4D;&#x5E76;&#x4F18;&#x5316;&#x6162;&#x67E5;&#x8BE2;&#x7684; Sql</h3><p>&#x9700;&#x8981;&#x5177;&#x4F53;&#x573A;&#x666F;&#x5177;&#x4F53;&#x5206;&#x6790;&#xFF0C;&#x5176;&#x5927;&#x81F4;&#x601D;&#x8DEF;</p><ul><li>&#x6839;&#x636E;&#x6162;&#x65E5;&#x5FD7;&#x5B9A;&#x4F4D;&#x5230;&#x6162;&#x67E5;&#x8BE2;&#x7684; sql</li><li>&#x4F7F;&#x7528; explain &#x7B49;&#x5DE5;&#x5177;&#x5206;&#x6790; sql</li><li>&#x4FEE;&#x6539; sql &#x6216;&#x8005;&#x5C3D;&#x91CF;&#x8BA9; sql &#x8D70;&#x7D22;&#x5F15;</li></ul><h4 id="&#x5B9A;&#x4F4D;&#x6162;&#x67E5;&#x8BE2;sql"><a href="#&#x5B9A;&#x4F4D;&#x6162;&#x67E5;&#x8BE2;sql" class="headerlink" title="&#x5B9A;&#x4F4D;&#x6162;&#x67E5;&#x8BE2;sql"></a>&#x5B9A;&#x4F4D;&#x6162;&#x67E5;&#x8BE2;sql</h4><p>&#x5F00;&#x542F;&#x6162;&#x67E5;&#x8BE2;&#x65E5;&#x5FD7;&#x5373;&#x53EF; </p><p>&#x6587;&#x4EF6;&#x65B9;&#x5F0F;&#x914D;&#x7F6E; MySQL &#x6162;&#x67E5;&#x8BE2;&#x7684;&#x65B9;&#x6CD5;&#xFF1A;</p><ul><li>&#x67E5;&#x8BE2; MySQL &#x6162;&#x67E5;&#x8BE2;&#x72B6;&#x6001;&#x7684;&#x65B9;&#x6CD5;&#xFF1A; </li></ul><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SHOW</span> <span class="keyword">VARIABLES</span> <span class="keyword">LIKE</span> <span class="string">&apos;%query%&apos;</span>;</span><br></pre></td></tr></table></figure><ul><li>&#x5728; mysql &#x914D;&#x7F6E;&#x6587;&#x4EF6; my.cnf &#x4E2D;&#x589E;&#x52A0;&#xFF1A; </li></ul><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">log-slow-queries=/opt/data/slowquery.log</span><br><span class="line">long_query_time=2 </span><br><span class="line">log-queries-not-using-indexes</span><br></pre></td></tr></table></figure><ul><li>&#x547D;&#x4EE4;&#x65B9;&#x5F0F;&#x914D;&#x7F6E; MySQL &#x6162;&#x67E5;&#x8BE2;&#x7684;&#x65B9;&#x6CD5;&#xFF1A;</li></ul><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">set</span> <span class="keyword">global</span> slow_query_log=<span class="keyword">on</span>; </span><br><span class="line"><span class="keyword">set</span> <span class="keyword">global</span> long_query_time=<span class="number">1</span>; </span><br><span class="line"><span class="keyword">set</span> <span class="keyword">global</span> slow_query_log_file=&#x2018;/opt/<span class="keyword">data</span>/slow_query.log&#x2019;;</span><br></pre></td></tr></table></figure><ul><li>&#x89E3;&#x6790; MySQL &#x6162;&#x67E5;&#x8BE2;&#x65E5;&#x5FD7;&#x7684;&#x65B9;&#x6CD5;&#xFF0C;&#x6309;&#x7167; sql &#x6267;&#x884C;&#x65F6;&#x95F4;&#x6700;&#x957F;&#x7684;&#x524D; 20 &#x6761; sql&#xFF1A;</li></ul><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mysqldumpslow -s t -t 20 -g &apos;select&apos; /opt/data/slowquery.log</span><br></pre></td></tr></table></figure><p>&#x5728; log &#x4E2D;&#x5C31;&#x80FD;&#x627E;&#x5230;&#x6162;&#x67E5;&#x8BE2;&#x7684; sql&#x3002;</p><h4 id="Explian-&#x5173;&#x952E;&#x5B57;"><a href="#Explian-&#x5173;&#x952E;&#x5B57;" class="headerlink" title="Explian &#x5173;&#x952E;&#x5B57;"></a>Explian &#x5173;&#x952E;&#x5B57;</h4><ul><li><p>Explain&#x547D;&#x4EE4;&#x5728;&#x89E3;&#x51B3;&#x6570;&#x636E;&#x5E93;&#x6027;&#x80FD;&#x4E0A;&#x662F;&#x7B2C;&#x4E00;&#x63A8;&#x8350;&#x4F7F;&#x7528;&#x547D;&#x4EE4;&#xFF0C;&#x5927;&#x90E8;&#x5206;&#x7684;&#x6027;&#x80FD;&#x95EE;&#x9898;&#x53EF;&#x4EE5;&#x901A;&#x8FC7;&#x6B64;&#x547D;&#x4EE4;&#x6765;&#x7B80;&#x5355;&#x7684;&#x89E3;&#x51B3;&#xFF0C;Explain&#x53EF;&#x4EE5;&#x7528;&#x6765;&#x67E5;&#x770B;SQL&#x8BED;&#x53E5;&#x7684;&#x6267;&#x884C;&#x6548; &#x679C;&#xFF0C;&#x53EF;&#x4EE5;&#x5E2E;&#x52A9;&#x9009;&#x62E9;&#x66F4;&#x597D;&#x7684;&#x7D22;&#x5F15;&#x548C;&#x4F18;&#x5316;&#x67E5;&#x8BE2;&#x8BED;&#x53E5;&#xFF0C;&#x5199;&#x51FA;&#x66F4;&#x597D;&#x7684;&#x4F18;&#x5316;&#x8BED;&#x53E5;&#x3002;</p><p>Explain&#x8BED;&#x6CD5;&#xFF1A;explain select &#x2026; from &#x2026; [where &#x2026;]</p><p>&#x4F8B;&#x5982;&#xFF1A;explain select * from news;</p><p>&#x8F93;&#x51FA;&#xFF1A;</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">+----+-------------+-------+-------+-------------------+---------+---------+-------+------</span><br><span class="line">| id | select_type | table | type  | possible_keys | key | key_len | ref | rows | Extra |</span><br><span class="line">+----+-------------+-------+-------+-------------------+---------+---------+-------+------</span><br></pre></td></tr></table></figure><p>&#x4E0B;&#x9762;&#x5BF9;&#x5404;&#x4E2A;&#x5C5E;&#x6027;&#x8FDB;&#x884C;&#x4E86;&#x89E3;&#xFF1A;</p><p>1&#x3001;id&#xFF1A;&#x8FD9;&#x662F;SELECT&#x7684;&#x67E5;&#x8BE2;&#x5E8F;&#x5217;&#x53F7;</p><p>2&#x3001;select_type&#xFF1A;select_type&#x5C31;&#x662F;select&#x7684;&#x7C7B;&#x578B;&#xFF0C;&#x53EF;&#x4EE5;&#x6709;&#x4EE5;&#x4E0B;&#x51E0;&#x79CD;&#xFF1A;</p><blockquote><p>SIMPLE&#xFF1A;&#x7B80;&#x5355;SELECT(&#x4E0D;&#x4F7F;&#x7528;UNION&#x6216;&#x5B50;&#x67E5;&#x8BE2;&#x7B49;)</p><p>PRIMARY&#xFF1A;&#x6700;&#x5916;&#x9762;&#x7684;SELECT</p><p>UNION&#xFF1A;UNION&#x4E2D;&#x7684;&#x7B2C;&#x4E8C;&#x4E2A;&#x6216;&#x540E;&#x9762;&#x7684;SELECT&#x8BED;&#x53E5;</p><p>DEPENDENT UNION&#xFF1A;UNION&#x4E2D;&#x7684;&#x7B2C;&#x4E8C;&#x4E2A;&#x6216;&#x540E;&#x9762;&#x7684;SELECT&#x8BED;&#x53E5;&#xFF0C;&#x53D6;&#x51B3;&#x4E8E;&#x5916;&#x9762;&#x7684;&#x67E5;&#x8BE2;</p><p>UNION RESULT&#xFF1A;UNION&#x7684;&#x7ED3;&#x679C;&#x3002;</p><p>SUBQUERY&#xFF1A;&#x5B50;&#x67E5;&#x8BE2;&#x4E2D;&#x7684;&#x7B2C;&#x4E00;&#x4E2A;SELECT</p><p>DEPENDENT SUBQUERY&#xFF1A;&#x5B50;&#x67E5;&#x8BE2;&#x4E2D;&#x7684;&#x7B2C;&#x4E00;&#x4E2A;SELECT&#xFF0C;&#x53D6;&#x51B3;&#x4E8E;&#x5916;&#x9762;&#x7684;&#x67E5;&#x8BE2;</p><p>DERIVED&#xFF1A;&#x5BFC;&#x51FA;&#x8868;&#x7684;SELECT(FROM&#x5B50;&#x53E5;&#x7684;&#x5B50;&#x67E5;&#x8BE2;)</p></blockquote><p>3&#x3001;table&#xFF1A;&#x663E;&#x793A;&#x8FD9;&#x4E00;&#x884C;&#x7684;&#x6570;&#x636E;&#x662F;&#x5173;&#x4E8E;&#x54EA;&#x5F20;&#x8868;&#x7684;</p><p>4&#x3001;type&#xFF1A;&#x8FD9;&#x5217;&#x6700;&#x91CD;&#x8981;&#xFF0C;&#x663E;&#x793A;&#x4E86;&#x8FDE;&#x63A5;&#x4F7F;&#x7528;&#x4E86;&#x54EA;&#x79CD;&#x7C7B;&#x522B;,&#x6709;&#x65E0;&#x4F7F;&#x7528;&#x7D22;&#x5F15;&#xFF0C;&#x662F;&#x4F7F;&#x7528;Explain&#x547D;&#x4EE4;&#x5206;&#x6790;&#x6027;&#x80FD;&#x74F6;&#x9888;&#x7684;&#x5173;&#x952E;&#x9879;&#x4E4B;&#x4E00;&#x3002;</p><blockquote><p>&#x7ED3;&#x679C;&#x503C;&#x4ECE;&#x597D;&#x5230;&#x574F;&#x4F9D;&#x6B21;&#x662F;&#xFF1A;</p><p>system &gt; const &gt; eq_ref &gt; ref &gt; fulltext &gt; ref_or_null &gt; index_merge &gt; unique_subquery &gt; index_subquery &gt; range &gt; index &gt; ALL</p><p>&#x4E00;&#x822C;&#x6765;&#x8BF4;&#xFF0C;&#x5F97;&#x4FDD;&#x8BC1;&#x67E5;&#x8BE2;&#x81F3;&#x5C11;&#x8FBE;&#x5230;range&#x7EA7;&#x522B;&#xFF0C;&#x6700;&#x597D;&#x80FD;&#x8FBE;&#x5230;ref&#xFF0C;&#x5426;&#x5219;&#x5C31;&#x53EF;&#x80FD;&#x4F1A;&#x51FA;&#x73B0;&#x6027;&#x80FD;&#x95EE;&#x9898;&#x3002;</p></blockquote><p>5&#x3001;possible_keys&#xFF1A;&#x5217;&#x6307;&#x51FA;MySQL&#x80FD;&#x4F7F;&#x7528;&#x54EA;&#x4E2A;&#x7D22;&#x5F15;&#x5728;&#x8BE5;&#x8868;&#x4E2D;&#x627E;&#x5230;&#x884C;</p><p>6&#x3001;key&#xFF1A;&#x663E;&#x793A;MySQL&#x5B9E;&#x9645;&#x51B3;&#x5B9A;&#x4F7F;&#x7528;&#x7684;&#x952E;&#xFF08;&#x7D22;&#x5F15;&#xFF09;&#x3002;&#x5982;&#x679C;&#x6CA1;&#x6709;&#x9009;&#x62E9;&#x7D22;&#x5F15;&#xFF0C;&#x952E;&#x662F;NULL</p><p>7&#x3001;key_len&#xFF1A;&#x663E;&#x793A;MySQL&#x51B3;&#x5B9A;&#x4F7F;&#x7528;&#x7684;&#x952E;&#x957F;&#x5EA6;&#x3002;&#x5982;&#x679C;&#x952E;&#x662F;NULL&#xFF0C;&#x5219;&#x957F;&#x5EA6;&#x4E3A;NULL&#x3002;&#x4F7F;&#x7528;&#x7684;&#x7D22;&#x5F15;&#x7684;&#x957F;&#x5EA6;&#x3002;&#x5728;&#x4E0D;&#x635F;&#x5931;&#x7CBE;&#x786E;&#x6027;&#x7684;&#x60C5;&#x51B5;&#x4E0B;&#xFF0C;&#x957F;&#x5EA6;&#x8D8A;&#x77ED;&#x8D8A;&#x597D;</p><p>8&#x3001;ref&#xFF1A;&#x663E;&#x793A;&#x4F7F;&#x7528;&#x54EA;&#x4E2A;&#x5217;&#x6216;&#x5E38;&#x6570;&#x4E0E;key&#x4E00;&#x8D77;&#x4ECE;&#x8868;&#x4E2D;&#x9009;&#x62E9;&#x884C;&#x3002;</p><p>9&#x3001;rows&#xFF1A;&#x663E;&#x793A;MySQL&#x8BA4;&#x4E3A;&#x5B83;&#x6267;&#x884C;&#x67E5;&#x8BE2;&#x65F6;&#x5FC5;&#x987B;&#x68C0;&#x67E5;&#x7684;&#x884C;&#x6570;&#x3002;</p><p>10&#x3001;Extra&#xFF1A;&#x5305;&#x542B;MySQL&#x89E3;&#x51B3;&#x67E5;&#x8BE2;&#x7684;&#x8BE6;&#x7EC6;&#x4FE1;&#x606F;&#xFF0C;&#x4E5F;&#x662F;&#x5173;&#x952E;&#x53C2;&#x8003;&#x9879;&#x4E4B;&#x4E00;&#x3002;</p><blockquote><p>Distinct<br>&#x4E00;&#x65E6;MYSQL&#x627E;&#x5230;&#x4E86;&#x4E0E;&#x884C;&#x76F8;&#x8054;&#x5408;&#x5339;&#x914D;&#x7684;&#x884C;&#xFF0C;&#x5C31;&#x4E0D;&#x518D;&#x641C;&#x7D22;&#x4E86;</p><p>Not exists<br>MYSQL &#x4F18;&#x5316;&#x4E86;LEFT JOIN&#xFF0C;&#x4E00;&#x65E6;&#x5B83;&#x627E;&#x5230;&#x4E86;&#x5339;&#x914D;LEFT JOIN&#x6807;&#x51C6;&#x7684;&#x884C;&#xFF0C;</p><p>&#x5C31;&#x4E0D;&#x518D;&#x641C;&#x7D22;&#x4E86;</p><p>Range checked for each</p><p>Record&#xFF08;index map:#&#xFF09;<br>&#x6CA1;&#x6709;&#x627E;&#x5230;&#x7406;&#x60F3;&#x7684;&#x7D22;&#x5F15;&#xFF0C;&#x56E0;&#x6B64;&#x5BF9;&#x4E8E;&#x4ECE;&#x524D;&#x9762;&#x8868;&#x4E2D;&#x6765;&#x7684;&#x6BCF;&#x4E00; &#x4E2A;&#x884C;&#x7EC4;&#x5408;&#xFF0C;MYSQL&#x68C0;&#x67E5;&#x4F7F;&#x7528;&#x54EA;&#x4E2A;&#x7D22;&#x5F15;&#xFF0C;&#x5E76;&#x7528;&#x5B83;&#x6765;&#x4ECE;&#x8868;&#x4E2D;&#x8FD4;&#x56DE;&#x884C;&#x3002;&#x8FD9;&#x662F;&#x4F7F;&#x7528;&#x7D22;&#x5F15;&#x7684;&#x6700;&#x6162;&#x7684;&#x8FDE;&#x63A5;&#x4E4B;&#x4E00;</p><p>Using filesort<br>&#x770B; &#x5230;&#x8FD9;&#x4E2A;&#x7684;&#x65F6;&#x5019;&#xFF0C;&#x67E5;&#x8BE2;&#x5C31;&#x9700;&#x8981;&#x4F18;&#x5316;&#x4E86;&#x3002;MYSQL&#x9700;&#x8981;&#x8FDB;&#x884C;&#x989D;&#x5916;&#x7684;&#x6B65;&#x9AA4;&#x6765;&#x53D1;&#x73B0;&#x5982;&#x4F55;&#x5BF9;&#x8FD4;&#x56DE;&#x7684;&#x884C;&#x6392;&#x5E8F;&#x3002;&#x5B83;&#x6839;&#x636E;&#x8FDE;&#x63A5;&#x7C7B;&#x578B;&#x4EE5;&#x53CA;&#x5B58;&#x50A8;&#x6392;&#x5E8F;&#x952E;&#x503C;&#x548C;&#x5339;&#x914D;&#x6761;&#x4EF6;&#x7684;&#x5168;&#x90E8;&#x884C;&#x7684;&#x884C;&#x6307;&#x9488;&#x6765; &#x6392;&#x5E8F;&#x5168;&#x90E8;&#x884C;</p><p>Using index<br>&#x5217;&#x6570;&#x636E;&#x662F;&#x4ECE;&#x4EC5;&#x4EC5;&#x4F7F;&#x7528;&#x4E86;&#x7D22;&#x5F15;&#x4E2D;&#x7684;&#x4FE1;&#x606F;&#x800C;&#x6CA1;&#x6709;&#x8BFB;&#x53D6;&#x5B9E;&#x9645;&#x7684;&#x884C;&#x52A8;&#x7684;&#x8868;&#x8FD4;&#x56DE;&#x7684;&#xFF0C;&#x8FD9;&#x53D1;&#x751F;&#x5728;&#x5BF9;&#x8868; &#x7684;&#x5168;&#x90E8;&#x7684;&#x8BF7;&#x6C42;&#x5217;&#x90FD;&#x662F;&#x540C;&#x4E00;&#x4E2A;&#x7D22;&#x5F15;&#x7684;&#x90E8;&#x5206;&#x7684;&#x65F6;&#x5019;</p><p>Using temporary<br>&#x770B;&#x5230;&#x8FD9;&#x4E2A;&#x7684;&#x65F6;&#x5019;&#xFF0C;&#x67E5;&#x8BE2;&#x9700;&#x8981;&#x4F18;&#x5316;&#x4E86;&#x3002;&#x8FD9; &#x91CC;&#xFF0C;MYSQL&#x9700;&#x8981;&#x521B;&#x5EFA;&#x4E00;&#x4E2A;&#x4E34;&#x65F6;&#x8868;&#x6765;&#x5B58;&#x50A8;&#x7ED3;&#x679C;&#xFF0C;&#x8FD9;&#x901A;&#x5E38;&#x53D1;&#x751F;&#x5728;&#x5BF9;&#x4E0D;&#x540C;&#x7684;&#x5217;&#x96C6;&#x8FDB;&#x884C;ORDER BY&#x4E0A;&#xFF0C;&#x800C;&#x4E0D;&#x662F;GROUP BY&#x4E0A;</p><p>Using where<br>&#x4F7F;&#x7528;&#x4E86;WHERE&#x4ECE;&#x53E5;&#x6765;&#x9650;&#x5236;&#x54EA;&#x4E9B;&#x884C;&#x5C06;&#x4E0E;&#x4E0B;&#x4E00;&#x5F20;&#x8868;&#x5339;&#x914D;&#x6216;&#x8005;&#x662F;&#x8FD4;&#x56DE;&#x7ED9;&#x7528;&#x6237;&#x3002;&#x5982;&#x679C;&#x4E0D;&#x60F3;&#x8FD4;&#x56DE;&#x8868;&#x4E2D;&#x7684;&#x5168;&#x90E8;&#x884C;&#xFF0C;&#x5E76;&#x4E14;&#x8FDE;&#x63A5;&#x7C7B;&#x578B;ALL&#x6216;index&#xFF0C; &#x8FD9;&#x5C31;&#x4F1A;&#x53D1;&#x751F;&#xFF0C;&#x6216;&#x8005;&#x662F;&#x67E5;&#x8BE2;&#x6709;&#x95EE;&#x9898;</p></blockquote><p>&#x5176;&#x4ED6;&#x4E00;&#x4E9B;Tip&#xFF1A;</p><p>&#x5F53;type &#x663E;&#x793A;&#x4E3A; &#x201C;index&#x201D; &#x65F6;&#xFF0C;&#x5E76;&#x4E14;Extra&#x663E;&#x793A;&#x4E3A; &#x201C;Using Index&#x201D;&#xFF0C; &#x8868;&#x660E;&#x4F7F;&#x7528;&#x4E86;&#x8986;&#x76D6;&#x7D22;&#x5F15;&#x3002;</p></li></ul><h3 id="&#x8054;&#x5408;&#x7D22;&#x5F15;&#x7684;&#x6700;&#x5DE6;&#x5339;&#x914D;&#x539F;&#x5219;&#x7684;&#x6210;&#x56E0;"><a href="#&#x8054;&#x5408;&#x7D22;&#x5F15;&#x7684;&#x6700;&#x5DE6;&#x5339;&#x914D;&#x539F;&#x5219;&#x7684;&#x6210;&#x56E0;" class="headerlink" title="&#x8054;&#x5408;&#x7D22;&#x5F15;&#x7684;&#x6700;&#x5DE6;&#x5339;&#x914D;&#x539F;&#x5219;&#x7684;&#x6210;&#x56E0;"></a>&#x8054;&#x5408;&#x7D22;&#x5F15;&#x7684;&#x6700;&#x5DE6;&#x5339;&#x914D;&#x539F;&#x5219;&#x7684;&#x6210;&#x56E0;</h3><p>&#x770B;&#x770B;&#x5982;&#x4E0B;&#x535A;&#x5BA2;&#x5373;&#x53EF;</p><ul><li><a href="https://www.jianshu.com/p/b7911e0394b0" target="_blank" rel="noopener">&#x8054;&#x5408;&#x7D22;&#x5F15;&#x7684;&#x6700;&#x5DE6;&#x524D;&#x7F00;&#x5339;&#x914D;&#x539F;&#x5219;</a></li><li><a href="https://www.zhihu.com/question/36996520/answer/93256153" target="_blank" rel="noopener">mysql&#x7D22;&#x5F15;&#x6700;&#x5DE6;&#x5339;&#x914D;&#x539F;&#x5219;&#x7684;&#x7406;&#x89E3;?</a></li></ul><h3 id="&#x7D22;&#x5F15;&#x662F;&#x5EFA;&#x7ACB;&#x5F97;&#x8D8A;&#x591A;&#x8D8A;&#x597D;&#x7684;&#x5417;"><a href="#&#x7D22;&#x5F15;&#x662F;&#x5EFA;&#x7ACB;&#x5F97;&#x8D8A;&#x591A;&#x8D8A;&#x597D;&#x7684;&#x5417;" class="headerlink" title="&#x7D22;&#x5F15;&#x662F;&#x5EFA;&#x7ACB;&#x5F97;&#x8D8A;&#x591A;&#x8D8A;&#x597D;&#x7684;&#x5417;"></a>&#x7D22;&#x5F15;&#x662F;&#x5EFA;&#x7ACB;&#x5F97;&#x8D8A;&#x591A;&#x8D8A;&#x597D;&#x7684;&#x5417;</h3><ul><li>&#x6570;&#x636E;&#x91CF;&#x5C0F;&#x7684;&#x8868;&#x4E0D;&#x9700;&#x8981;&#x5EFA;&#x7ACB;&#x7D22;&#x5F15;&#xFF0C;&#x5EFA;&#x7ACB;&#x4F1A;&#x589E;&#x52A0;&#x989D;&#x5916;&#x7684;&#x7D22;&#x5F15;&#x5F00;&#x9500;</li><li>&#x6570;&#x636E;&#x53D8;&#x66F4;&#x9700;&#x8981;&#x7EF4;&#x62A4;&#x7D22;&#x5F15;&#xFF0C;&#x56E0;&#x6B64;&#x66F4;&#x591A;&#x7684;&#x7D22;&#x5F15;&#x610F;&#x5473;&#x7740;&#x66F4;&#x591A;&#x7684;&#x7EF4;&#x62A4;&#x6210;&#x672C;</li><li>&#x66F4;&#x591A;&#x7684;&#x7D22;&#x5F15;&#x610F;&#x5473;&#x7740;&#x4E5F;&#x9700;&#x8981;&#x66F4;&#x591A;&#x7684;&#x7A7A;&#x95F4;</li></ul><h2 id="&#x9501;&#x6A21;&#x5757;"><a href="#&#x9501;&#x6A21;&#x5757;" class="headerlink" title="&#x9501;&#x6A21;&#x5757;"></a>&#x9501;&#x6A21;&#x5757;</h2><h3 id="&#x5E38;&#x89C1;&#x95EE;&#x9898;"><a href="#&#x5E38;&#x89C1;&#x95EE;&#x9898;" class="headerlink" title="&#x5E38;&#x89C1;&#x95EE;&#x9898;"></a>&#x5E38;&#x89C1;&#x95EE;&#x9898;</h3><ul><li>MyISAM &#x4E0E; InnoDB &#x5173;&#x4E8E;&#x9501;&#x65B9;&#x9762;&#x7684;&#x533A;&#x522B;&#x662F;&#x4EC0;&#x4E48;</li><li>&#x6570;&#x636E;&#x5E93;&#x4E8B;&#x52A1;&#x7684;&#x56DB;&#x5927;&#x7279;&#x6027;</li><li>&#x4E8B;&#x52A1;&#x9694;&#x79BB;&#x7EA7;&#x522B;&#x4EE5;&#x53CA;&#x5404;&#x7EA7;&#x522B;&#x4E0B;&#x7684;&#x5E76;&#x53D1;&#x8BBF;&#x95EE;&#x95EE;&#x9898;</li><li>InnoDB &#x53EF;&#x91CD;&#x590D;&#x8BFB;&#x9694;&#x79BB;&#x7EA7;&#x522B;&#x4E0B;&#x5982;&#x4F55;&#x907F;&#x514D;&#x5E7B;&#x8BFB;</li><li>RC&#x3001;RR &#x7EA7;&#x522B;&#x4E0B;&#x7684; InnoDB &#x7684;&#x975E;&#x5835;&#x585E;&#x5982;&#x679C;&#x5B9E;&#x73B0;</li></ul><h3 id="MyISAM-&#x4E0E;-InnoDB-&#x5173;&#x4E8E;&#x9501;&#x65B9;&#x9762;&#x7684;&#x533A;&#x522B;&#x662F;&#x4EC0;&#x4E48;"><a href="#MyISAM-&#x4E0E;-InnoDB-&#x5173;&#x4E8E;&#x9501;&#x65B9;&#x9762;&#x7684;&#x533A;&#x522B;&#x662F;&#x4EC0;&#x4E48;" class="headerlink" title="MyISAM &#x4E0E; InnoDB &#x5173;&#x4E8E;&#x9501;&#x65B9;&#x9762;&#x7684;&#x533A;&#x522B;&#x662F;&#x4EC0;&#x4E48;"></a>MyISAM &#x4E0E; InnoDB &#x5173;&#x4E8E;&#x9501;&#x65B9;&#x9762;&#x7684;&#x533A;&#x522B;&#x662F;&#x4EC0;&#x4E48;</h3><ul><li>MyISAM &#x9ED8;&#x8BA4;&#x7528;&#x7684;&#x662F;&#x8868;&#x7EA7;&#x9501;&#xFF0C;&#x4E0D;&#x652F;&#x6301;&#x884C;&#x7EA7;&#x9501;</li><li>InnoDB &#x9ED8;&#x8BA4;&#x7528;&#x7684;&#x662F;&#x884C;&#x7EA7;&#x9501;&#xFF0C;&#x4E5F;&#x652F;&#x6301;&#x8868;&#x7EA7;&#x9501;</li></ul><h3 id="&#x6570;&#x636E;&#x5E93;&#x9501;&#x7684;&#x5206;&#x7C7B;"><a href="#&#x6570;&#x636E;&#x5E93;&#x9501;&#x7684;&#x5206;&#x7C7B;" class="headerlink" title="&#x6570;&#x636E;&#x5E93;&#x9501;&#x7684;&#x5206;&#x7C7B;"></a>&#x6570;&#x636E;&#x5E93;&#x9501;&#x7684;&#x5206;&#x7C7B;</h3><ul><li>&#x6309;&#x9501;&#x7684;&#x7C92;&#x5EA6;&#x5212;&#x5206;&#xFF0C;&#x53EF;&#x5206;&#x4E3A;&#x8868;&#x7EA7;&#x9501;&#x3001;&#x884C;&#x7EA7;&#x9501;&#x548C;&#x9875;&#x7EA7;&#x9501;</li><li>&#x6309;&#x9501;&#x7684;&#x7EA7;&#x522B;&#x5212;&#x5206;&#xFF0C;&#x53EF;&#x5206;&#x4E3A;&#x5171;&#x4EAB;&#x9501;&#x548C;&#x6392;&#x4ED6;&#x9501;</li><li>&#x6309;&#x52A0;&#x9501;&#x7684;&#x65B9;&#x5F0F;&#x5212;&#x5206;&#xFF0C;&#x53EF;&#x5206;&#x4E3A;&#x81EA;&#x52A8;&#x9501;&#x548C;&#x663E;&#x793A;&#x9501;</li><li>&#x6309;&#x64CD;&#x4F5C;&#x5212;&#x5206;&#xFF0C;&#x53EF;&#x5206;&#x4E3A; DML &#x9501;&#x548C; DDL &#x9501;</li><li>&#x6309;&#x4F7F;&#x7528;&#x65B9;&#x5F0F;&#x5212;&#x5206;&#xFF0C;&#x53EF;&#x5206;&#x4E3A;&#x4E50;&#x89C2;&#x9501;&#x548C;&#x60B2;&#x89C2;&#x9501;</li></ul><h3 id="ACID"><a href="#ACID" class="headerlink" title="ACID"></a>ACID</h3><h4 id="1-&#x539F;&#x5B50;&#x6027;&#xFF08;Atomicity&#xFF09;"><a href="#1-&#x539F;&#x5B50;&#x6027;&#xFF08;Atomicity&#xFF09;" class="headerlink" title="1. &#x539F;&#x5B50;&#x6027;&#xFF08;Atomicity&#xFF09;"></a>1. &#x539F;&#x5B50;&#x6027;&#xFF08;Atomicity&#xFF09;</h4><p>&#x4E8B;&#x52A1;&#x88AB;&#x89C6;&#x4E3A;&#x4E0D;&#x53EF;&#x5206;&#x5272;&#x7684;&#x6700;&#x5C0F;&#x5355;&#x5143;&#xFF0C;&#x4E8B;&#x52A1;&#x7684;&#x6240;&#x6709;&#x64CD;&#x4F5C;&#x8981;&#x4E48;&#x5168;&#x90E8;&#x63D0;&#x4EA4;&#x6210;&#x529F;&#xFF0C;&#x8981;&#x4E48;&#x5168;&#x90E8;&#x5931;&#x8D25;&#x56DE;&#x6EDA;&#x3002;</p><p>&#x56DE;&#x6EDA;&#x53EF;&#x4EE5;&#x7528;&#x56DE;&#x6EDA;&#x65E5;&#x5FD7;&#x6765;&#x5B9E;&#x73B0;&#xFF0C;&#x56DE;&#x6EDA;&#x65E5;&#x5FD7;&#x8BB0;&#x5F55;&#x7740;&#x4E8B;&#x52A1;&#x6240;&#x6267;&#x884C;&#x7684;&#x4FEE;&#x6539;&#x64CD;&#x4F5C;&#xFF0C;&#x5728;&#x56DE;&#x6EDA;&#x65F6;&#x53CD;&#x5411;&#x6267;&#x884C;&#x8FD9;&#x4E9B;&#x4FEE;&#x6539;&#x64CD;&#x4F5C;&#x5373;&#x53EF;&#x3002;</p><h4 id="2-&#x4E00;&#x81F4;&#x6027;&#xFF08;Consistency&#xFF09;"><a href="#2-&#x4E00;&#x81F4;&#x6027;&#xFF08;Consistency&#xFF09;" class="headerlink" title="2. &#x4E00;&#x81F4;&#x6027;&#xFF08;Consistency&#xFF09;"></a>2. &#x4E00;&#x81F4;&#x6027;&#xFF08;Consistency&#xFF09;</h4><p>&#x6570;&#x636E;&#x5E93;&#x5728;&#x4E8B;&#x52A1;&#x6267;&#x884C;&#x524D;&#x540E;&#x90FD;&#x4FDD;&#x6301;&#x4E00;&#x81F4;&#x6027;&#x72B6;&#x6001;&#x3002;&#x5728;&#x4E00;&#x81F4;&#x6027;&#x72B6;&#x6001;&#x4E0B;&#xFF0C;&#x6240;&#x6709;&#x4E8B;&#x52A1;&#x5BF9;&#x4E00;&#x4E2A;&#x6570;&#x636E;&#x7684;&#x8BFB;&#x53D6;&#x7ED3;&#x679C;&#x90FD;&#x662F;&#x76F8;&#x540C;&#x7684;&#x3002;</p><h4 id="3-&#x9694;&#x79BB;&#x6027;&#xFF08;Isolation&#xFF09;"><a href="#3-&#x9694;&#x79BB;&#x6027;&#xFF08;Isolation&#xFF09;" class="headerlink" title="3. &#x9694;&#x79BB;&#x6027;&#xFF08;Isolation&#xFF09;"></a>3. &#x9694;&#x79BB;&#x6027;&#xFF08;Isolation&#xFF09;</h4><p>&#x4E00;&#x4E2A;&#x4E8B;&#x52A1;&#x6240;&#x505A;&#x7684;&#x4FEE;&#x6539;&#x5728;&#x6700;&#x7EC8;&#x63D0;&#x4EA4;&#x4EE5;&#x524D;&#xFF0C;&#x5BF9;&#x5176;&#x5B83;&#x4E8B;&#x52A1;&#x662F;&#x4E0D;&#x53EF;&#x89C1;&#x7684;&#x3002;</p><h4 id="4-&#x6301;&#x4E45;&#x6027;&#xFF08;Durability&#xFF09;"><a href="#4-&#x6301;&#x4E45;&#x6027;&#xFF08;Durability&#xFF09;" class="headerlink" title="4. &#x6301;&#x4E45;&#x6027;&#xFF08;Durability&#xFF09;"></a>4. &#x6301;&#x4E45;&#x6027;&#xFF08;Durability&#xFF09;</h4><p>&#x4E00;&#x65E6;&#x4E8B;&#x52A1;&#x63D0;&#x4EA4;&#xFF0C;&#x5219;&#x5176;&#x6240;&#x505A;&#x7684;&#x4FEE;&#x6539;&#x5C06;&#x4F1A;&#x6C38;&#x8FDC;&#x4FDD;&#x5B58;&#x5230;&#x6570;&#x636E;&#x5E93;&#x4E2D;&#x3002;&#x5373;&#x4F7F;&#x7CFB;&#x7EDF;&#x53D1;&#x751F;&#x5D29;&#x6E83;&#xFF0C;&#x4E8B;&#x52A1;&#x6267;&#x884C;&#x7684;&#x7ED3;&#x679C;&#x4E5F;&#x4E0D;&#x80FD;&#x4E22;&#x5931;&#x3002;</p><p>&#x4F7F;&#x7528;&#x91CD;&#x505A;&#x65E5;&#x5FD7;&#x6765;&#x4FDD;&#x8BC1;&#x6301;&#x4E45;&#x6027;&#x3002;</p><h3 id="&#x5E76;&#x53D1;&#x4E00;&#x81F4;&#x6027;&#x95EE;&#x9898;"><a href="#&#x5E76;&#x53D1;&#x4E00;&#x81F4;&#x6027;&#x95EE;&#x9898;" class="headerlink" title="&#x5E76;&#x53D1;&#x4E00;&#x81F4;&#x6027;&#x95EE;&#x9898;"></a>&#x5E76;&#x53D1;&#x4E00;&#x81F4;&#x6027;&#x95EE;&#x9898;</h3><p>&#x5728;&#x5E76;&#x53D1;&#x73AF;&#x5883;&#x4E0B;&#xFF0C;&#x4E8B;&#x52A1;&#x7684;&#x9694;&#x79BB;&#x6027;&#x5F88;&#x96BE;&#x4FDD;&#x8BC1;&#xFF0C;&#x56E0;&#x6B64;&#x4F1A;&#x51FA;&#x73B0;&#x5F88;&#x591A;&#x5E76;&#x53D1;&#x4E00;&#x81F4;&#x6027;&#x95EE;&#x9898;&#x3002;</p><h4 id="&#x4E22;&#x5931;&#x4FEE;&#x6539;"><a href="#&#x4E22;&#x5931;&#x4FEE;&#x6539;" class="headerlink" title="&#x4E22;&#x5931;&#x4FEE;&#x6539;"></a>&#x4E22;&#x5931;&#x4FEE;&#x6539;</h4><p>T1 &#x548C; T2 &#x4E24;&#x4E2A;&#x4E8B;&#x52A1;&#x90FD;&#x5BF9;&#x4E00;&#x4E2A;&#x6570;&#x636E;&#x8FDB;&#x884C;&#x4FEE;&#x6539;&#xFF0C;T1 &#x5148;&#x4FEE;&#x6539;&#xFF0C;T2 &#x968F;&#x540E;&#x4FEE;&#x6539;&#xFF0C;T2 &#x7684;&#x4FEE;&#x6539;&#x8986;&#x76D6;&#x4E86; T1 &#x7684;&#x4FEE;&#x6539;&#x3002;</p><p><img src="/2019/02/22/&#x6570;&#x636E;&#x5E93;/&#x6570;&#x636E;&#x5E93;\26a7c9df-22f6-4df4-845a-745c053ab2e5.jpg" alt="26a7c9df-22f6-4df4-845a-745c053ab2e5"></p><h4 id="&#x8BFB;&#x810F;&#x6570;&#x636E;"><a href="#&#x8BFB;&#x810F;&#x6570;&#x636E;" class="headerlink" title="&#x8BFB;&#x810F;&#x6570;&#x636E;"></a>&#x8BFB;&#x810F;&#x6570;&#x636E;</h4><p>T1 &#x4FEE;&#x6539;&#x4E00;&#x4E2A;&#x6570;&#x636E;&#xFF0C;T2 &#x968F;&#x540E;&#x8BFB;&#x53D6;&#x8FD9;&#x4E2A;&#x6570;&#x636E;&#x3002;&#x5982;&#x679C; T1 &#x64A4;&#x9500;&#x4E86;&#x8FD9;&#x6B21;&#x4FEE;&#x6539;&#xFF0C;&#x90A3;&#x4E48; T2 &#x8BFB;&#x53D6;&#x7684;&#x6570;&#x636E;&#x662F;&#x810F;&#x6570;&#x636E;&#x3002;</p><p><img src="/2019/02/22/&#x6570;&#x636E;&#x5E93;/&#x6570;&#x636E;&#x5E93;\bab0fba6-38e4-45f7-b34d-3edaad43810f.jpg" alt="bab0fba6-38e4-45f7-b34d-3edaad43810f"></p><h4 id="&#x4E0D;&#x53EF;&#x91CD;&#x590D;&#x8BFB;"><a href="#&#x4E0D;&#x53EF;&#x91CD;&#x590D;&#x8BFB;" class="headerlink" title="&#x4E0D;&#x53EF;&#x91CD;&#x590D;&#x8BFB;"></a>&#x4E0D;&#x53EF;&#x91CD;&#x590D;&#x8BFB;</h4><p>T2 &#x8BFB;&#x53D6;&#x4E00;&#x4E2A;&#x6570;&#x636E;&#xFF0C;T1 &#x5BF9;&#x8BE5;&#x6570;&#x636E;&#x505A;&#x4E86;&#x4FEE;&#x6539;&#x3002;&#x5982;&#x679C; T2 &#x518D;&#x6B21;&#x8BFB;&#x53D6;&#x8FD9;&#x4E2A;&#x6570;&#x636E;&#xFF0C;&#x6B64;&#x65F6;&#x8BFB;&#x53D6;&#x7684;&#x7ED3;&#x679C;&#x548C;&#x7B2C;&#x4E00;&#x6B21;&#x8BFB;&#x53D6;&#x7684;&#x7ED3;&#x679C;&#x4E0D;&#x540C;&#x3002;</p><p><img src="/2019/02/22/&#x6570;&#x636E;&#x5E93;/&#x6570;&#x636E;&#x5E93;\43bf0957-0386-4c09-9ad7-e163c5b62559.jpg" alt="43bf0957-0386-4c09-9ad7-e163c5b62559"></p><h4 id="&#x5E7B;&#x5F71;&#x8BFB;"><a href="#&#x5E7B;&#x5F71;&#x8BFB;" class="headerlink" title="&#x5E7B;&#x5F71;&#x8BFB;"></a>&#x5E7B;&#x5F71;&#x8BFB;</h4><p>T1 &#x8BFB;&#x53D6;&#x67D0;&#x4E2A;&#x8303;&#x56F4;&#x7684;&#x6570;&#x636E;&#xFF0C;T2 &#x5728;&#x8FD9;&#x4E2A;&#x8303;&#x56F4;&#x5185;&#x63D2;&#x5165;&#x65B0;&#x7684;&#x6570;&#x636E;&#xFF0C;T1 &#x518D;&#x6B21;&#x8BFB;&#x53D6;&#x8FD9;&#x4E2A;&#x8303;&#x56F4;&#x7684;&#x6570;&#x636E;&#xFF0C;&#x6B64;&#x65F6;&#x8BFB;&#x53D6;&#x7684;&#x7ED3;&#x679C;&#x548C;&#x548C;&#x7B2C;&#x4E00;&#x6B21;&#x8BFB;&#x53D6;&#x7684;&#x7ED3;&#x679C;&#x4E0D;&#x540C;&#x3002;</p><p><img src="/2019/02/22/&#x6570;&#x636E;&#x5E93;/&#x6570;&#x636E;&#x5E93;\2959e455-e6cb-4461-aeb3-e319fe5c41db.jpg" alt="2959e455-e6cb-4461-aeb3-e319fe5c41db"></p><h3 id="&#x9694;&#x79BB;&#x7EA7;&#x522B;"><a href="#&#x9694;&#x79BB;&#x7EA7;&#x522B;" class="headerlink" title="&#x9694;&#x79BB;&#x7EA7;&#x522B;"></a>&#x9694;&#x79BB;&#x7EA7;&#x522B;</h3><h4 id="&#x672A;&#x63D0;&#x4EA4;&#x8BFB;&#xFF08;READ-UNCOMMITTED&#xFF09;"><a href="#&#x672A;&#x63D0;&#x4EA4;&#x8BFB;&#xFF08;READ-UNCOMMITTED&#xFF09;" class="headerlink" title="&#x672A;&#x63D0;&#x4EA4;&#x8BFB;&#xFF08;READ UNCOMMITTED&#xFF09;"></a>&#x672A;&#x63D0;&#x4EA4;&#x8BFB;&#xFF08;READ UNCOMMITTED&#xFF09;</h4><p>&#x4E8B;&#x52A1;&#x4E2D;&#x7684;&#x4FEE;&#x6539;&#xFF0C;&#x5373;&#x4F7F;&#x6CA1;&#x6709;&#x63D0;&#x4EA4;&#xFF0C;&#x5BF9;&#x5176;&#x5B83;&#x4E8B;&#x52A1;&#x4E5F;&#x662F;&#x53EF;&#x89C1;&#x7684;&#x3002;</p><h4 id="&#x63D0;&#x4EA4;&#x8BFB;&#xFF08;READ-COMMITTED&#xFF09;"><a href="#&#x63D0;&#x4EA4;&#x8BFB;&#xFF08;READ-COMMITTED&#xFF09;" class="headerlink" title="&#x63D0;&#x4EA4;&#x8BFB;&#xFF08;READ COMMITTED&#xFF09;"></a>&#x63D0;&#x4EA4;&#x8BFB;&#xFF08;READ COMMITTED&#xFF09;</h4><p>&#x4E00;&#x4E2A;&#x4E8B;&#x52A1;&#x53EA;&#x80FD;&#x8BFB;&#x53D6;&#x5DF2;&#x7ECF;&#x63D0;&#x4EA4;&#x7684;&#x4E8B;&#x52A1;&#x6240;&#x505A;&#x7684;&#x4FEE;&#x6539;&#x3002;&#x6362;&#x53E5;&#x8BDD;&#x8BF4;&#xFF0C;&#x4E00;&#x4E2A;&#x4E8B;&#x52A1;&#x6240;&#x505A;&#x7684;&#x4FEE;&#x6539;&#x5728;&#x63D0;&#x4EA4;&#x4E4B;&#x524D;&#x5BF9;&#x5176;&#x5B83;&#x4E8B;&#x52A1;&#x662F;&#x4E0D;&#x53EF;&#x89C1;&#x7684;&#x3002;</p><h4 id="&#x53EF;&#x91CD;&#x590D;&#x8BFB;&#xFF08;REPEATABLE-READ&#xFF09;"><a href="#&#x53EF;&#x91CD;&#x590D;&#x8BFB;&#xFF08;REPEATABLE-READ&#xFF09;" class="headerlink" title="&#x53EF;&#x91CD;&#x590D;&#x8BFB;&#xFF08;REPEATABLE READ&#xFF09;"></a>&#x53EF;&#x91CD;&#x590D;&#x8BFB;&#xFF08;REPEATABLE READ&#xFF09;</h4><p>&#x4FDD;&#x8BC1;&#x5728;&#x540C;&#x4E00;&#x4E2A;&#x4E8B;&#x52A1;&#x4E2D;&#x591A;&#x6B21;&#x8BFB;&#x53D6;&#x540C;&#x6837;&#x6570;&#x636E;&#x7684;&#x7ED3;&#x679C;&#x662F;&#x4E00;&#x6837;&#x7684;&#x3002;</p><h4 id="&#x53EF;&#x4E32;&#x884C;&#x5316;&#xFF08;SERIALIZABLE&#xFF09;"><a href="#&#x53EF;&#x4E32;&#x884C;&#x5316;&#xFF08;SERIALIZABLE&#xFF09;" class="headerlink" title="&#x53EF;&#x4E32;&#x884C;&#x5316;&#xFF08;SERIALIZABLE&#xFF09;"></a>&#x53EF;&#x4E32;&#x884C;&#x5316;&#xFF08;SERIALIZABLE&#xFF09;</h4><p>&#x5F3A;&#x5236;&#x4E8B;&#x52A1;&#x4E32;&#x884C;&#x6267;&#x884C;&#x3002;</p><hr><table><thead><tr><th style="text-align:center">&#x9694;&#x79BB;&#x7EA7;&#x522B;</th><th style="text-align:center">&#x810F;&#x8BFB;</th><th style="text-align:center">&#x4E0D;&#x53EF;&#x91CD;&#x590D;&#x8BFB;</th><th style="text-align:center">&#x5E7B;&#x5F71;&#x8BFB;</th><th style="text-align:center">&#x52A0;&#x9501;&#x8BFB;</th></tr></thead><tbody><tr><td style="text-align:center">&#x672A;&#x63D0;&#x4EA4;&#x8BFB;</td><td style="text-align:center">&#x221A;</td><td style="text-align:center">&#x221A;</td><td style="text-align:center">&#x221A;</td><td style="text-align:center">&#xD7;</td></tr><tr><td style="text-align:center">&#x63D0;&#x4EA4;&#x8BFB;</td><td style="text-align:center">&#xD7;</td><td style="text-align:center">&#x221A;</td><td style="text-align:center">&#x221A;</td><td style="text-align:center">&#xD7;</td></tr><tr><td style="text-align:center">&#x53EF;&#x91CD;&#x590D;&#x8BFB;</td><td style="text-align:center">&#xD7;</td><td style="text-align:center">&#xD7;</td><td style="text-align:center">&#x221A;</td><td style="text-align:center">&#xD7;</td></tr><tr><td style="text-align:center">&#x53EF;&#x4E32;&#x884C;&#x5316;</td><td style="text-align:center">&#xD7;</td><td style="text-align:center">&#xD7;</td><td style="text-align:center">&#xD7;</td><td style="text-align:center">&#x221A;</td></tr></tbody></table><h2 id="&#x53C2;&#x8003;&#x94FE;&#x63A5;"><a href="#&#x53C2;&#x8003;&#x94FE;&#x63A5;" class="headerlink" title="&#x53C2;&#x8003;&#x94FE;&#x63A5;"></a>&#x53C2;&#x8003;&#x94FE;&#x63A5;</h2><ul><li><a href="https://github.com/CyC2018/CS-Notes/blob/master/docs/notes/%E6%95%B0%E6%8D%AE%E5%BA%93%E7%B3%BB%E7%BB%9F%E5%8E%9F%E7%90%86.md" target="_blank" rel="noopener">&#x6570;&#x636E;&#x5E93;&#x7CFB;&#x7EDF;&#x539F;&#x7406; </a></li></ul>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h2 id=&quot;&amp;#x6570;&amp;#x636E;&amp;#x5E93;&amp;#x67B6;&amp;#x6784;&quot;&gt;&lt;a href=&quot;#&amp;#x6570;&amp;#x636E;&amp;#x5E93;&amp;#x67B6;&amp;#x6784;&quot; class=&quot;headerlink&quot; title=&quot;&amp;#x6570;&amp;#x6
      
    
    </summary>
    
      <category term="面试" scheme="http://blog.cuzz.site/categories/%E9%9D%A2%E8%AF%95/"/>
    
    
      <category term="数据库" scheme="http://blog.cuzz.site/tags/%E6%95%B0%E6%8D%AE%E5%BA%93/"/>
    
      <category term="MySQL" scheme="http://blog.cuzz.site/tags/MySQL/"/>
    
  </entry>
  
  <entry>
    <title>计算机网络</title>
    <link href="http://blog.cuzz.site/2019/02/19/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/"/>
    <id>http://blog.cuzz.site/2019/02/19/计算机网络/</id>
    <published>2019-02-19T15:59:59.000Z</published>
    <updated>2019-07-16T11:43:31.366Z</updated>
    
    <content type="html"><![CDATA[<h2 id="&#x8BA1;&#x7B97;&#x673A;&#x7F51;&#x7EDC;&#x4F53;&#x7CFB;&#x7ED3;&#x6784;"><a href="#&#x8BA1;&#x7B97;&#x673A;&#x7F51;&#x7EDC;&#x4F53;&#x7CFB;&#x7ED3;&#x6784;" class="headerlink" title="&#x8BA1;&#x7B97;&#x673A;&#x7F51;&#x7EDC;&#x4F53;&#x7CFB;&#x7ED3;&#x6784;"></a>&#x8BA1;&#x7B97;&#x673A;&#x7F51;&#x7EDC;&#x4F53;&#x7CFB;&#x7ED3;&#x6784;</h2><p><img src="/2019/02/19/&#x8BA1;&#x7B97;&#x673A;&#x7F51;&#x7EDC;/&#x8BA1;&#x7B97;&#x673A;&#x7F51;&#x7EDC;\7fa66f48-bc42-4b98-93c2-56b20feaa990.png" alt="img"></p><h3 id="OSI"><a href="#OSI" class="headerlink" title="OSI"></a>OSI</h3><p>&#x5176;&#x4E2D;&#x8868;&#x793A;&#x5C42;&#x548C;&#x4F1A;&#x8BDD;&#x5C42;&#x7528;&#x9014;&#x5982;&#x4E0B;&#xFF1A;</p><ul><li><strong>&#x8868;&#x793A;&#x5C42;</strong> &#xFF1A;&#x6570;&#x636E;&#x538B;&#x7F29;&#x3001;&#x52A0;&#x5BC6;&#x4EE5;&#x53CA;&#x6570;&#x636E;&#x63CF;&#x8FF0;&#xFF0C;&#x8FD9;&#x4F7F;&#x5F97;&#x5E94;&#x7528;&#x7A0B;&#x5E8F;&#x4E0D;&#x5FC5;&#x5173;&#x5FC3;&#x5728;&#x5404;&#x53F0;&#x4E3B;&#x673A;&#x4E2D;&#x6570;&#x636E;&#x5185;&#x90E8;&#x683C;&#x5F0F;&#x4E0D;&#x540C;&#x7684;&#x95EE;&#x9898;&#x3002;</li><li><strong>&#x4F1A;&#x8BDD;&#x5C42;</strong> &#xFF1A;&#x5EFA;&#x7ACB;&#x53CA;&#x7BA1;&#x7406;&#x4F1A;&#x8BDD;&#x3002;</li></ul><p>&#x4E94;&#x5C42;&#x534F;&#x8BAE;&#x6CA1;&#x6709;&#x8868;&#x793A;&#x5C42;&#x548C;&#x4F1A;&#x8BDD;&#x5C42;&#xFF0C;&#x800C;&#x662F;&#x5C06;&#x8FD9;&#x4E9B;&#x529F;&#x80FD;&#x7559;&#x7ED9;&#x5E94;&#x7528;&#x7A0B;&#x5E8F;&#x5F00;&#x53D1;&#x8005;&#x5904;&#x7406;&#x3002;</p><h3 id="&#x4E94;&#x5C42;&#x534F;&#x8BAE;"><a href="#&#x4E94;&#x5C42;&#x534F;&#x8BAE;" class="headerlink" title="&#x4E94;&#x5C42;&#x534F;&#x8BAE;"></a>&#x4E94;&#x5C42;&#x534F;&#x8BAE;</h3><ul><li><strong>&#x5E94;&#x7528;&#x5C42;</strong> &#xFF1A;&#x4E3A;&#x7279;&#x5B9A;&#x5E94;&#x7528;&#x7A0B;&#x5E8F;&#x63D0;&#x4F9B;&#x6570;&#x636E;&#x4F20;&#x8F93;&#x670D;&#x52A1;&#xFF0C;&#x4F8B;&#x5982; HTTP&#x3001;DNS &#x7B49;&#x3002;&#x6570;&#x636E;&#x5355;&#x4F4D;&#x4E3A;&#x62A5;&#x6587;&#x3002;</li><li><strong>&#x4F20;&#x8F93;&#x5C42;</strong> &#xFF1A;&#x4E3A;&#x8FDB;&#x7A0B;&#x63D0;&#x4F9B;&#x901A;&#x7528;&#x6570;&#x636E;&#x4F20;&#x8F93;&#x670D;&#x52A1;&#x3002;&#x7531;&#x4E8E;&#x5E94;&#x7528;&#x5C42;&#x534F;&#x8BAE;&#x5F88;&#x591A;&#xFF0C;&#x5B9A;&#x4E49;&#x901A;&#x7528;&#x7684;&#x4F20;&#x8F93;&#x5C42;&#x534F;&#x8BAE;&#x5C31;&#x53EF;&#x4EE5;&#x652F;&#x6301;&#x4E0D;&#x65AD;&#x589E;&#x591A;&#x7684;&#x5E94;&#x7528;&#x5C42;&#x534F;&#x8BAE;&#x3002;&#x8FD0;&#x8F93;&#x5C42;&#x5305;&#x62EC;&#x4E24;&#x79CD;&#x534F;&#x8BAE;&#xFF1A;&#x4F20;&#x8F93;&#x63A7;&#x5236;&#x534F;&#x8BAE; TCP&#xFF0C;&#x63D0;&#x4F9B;&#x9762;&#x5411;&#x8FDE;&#x63A5;&#x3001;&#x53EF;&#x9760;&#x7684;&#x6570;&#x636E;&#x4F20;&#x8F93;&#x670D;&#x52A1;&#xFF0C;&#x6570;&#x636E;&#x5355;&#x4F4D;&#x4E3A;&#x62A5;&#x6587;&#x6BB5;&#xFF1B;&#x7528;&#x6237;&#x6570;&#x636E;&#x62A5;&#x534F;&#x8BAE; UDP&#xFF0C;&#x63D0;&#x4F9B;&#x65E0;&#x8FDE;&#x63A5;&#x3001;&#x5C3D;&#x6700;&#x5927;&#x52AA;&#x529B;&#x7684;&#x6570;&#x636E;&#x4F20;&#x8F93;&#x670D;&#x52A1;&#xFF0C;&#x6570;&#x636E;&#x5355;&#x4F4D;&#x4E3A;&#x7528;&#x6237;&#x6570;&#x636E;&#x62A5;&#x3002;TCP &#x4E3B;&#x8981;&#x63D0;&#x4F9B;&#x5B8C;&#x6574;&#x6027;&#x670D;&#x52A1;&#xFF0C;UDP &#x4E3B;&#x8981;&#x63D0;&#x4F9B;&#x53CA;&#x65F6;&#x6027;&#x670D;&#x52A1;&#x3002;</li><li><strong>&#x7F51;&#x7EDC;&#x5C42;</strong> &#xFF1A;&#x4E3A;&#x4E3B;&#x673A;&#x63D0;&#x4F9B;&#x6570;&#x636E;&#x4F20;&#x8F93;&#x670D;&#x52A1;&#x3002;&#x800C;&#x4F20;&#x8F93;&#x5C42;&#x534F;&#x8BAE;&#x662F;&#x4E3A;&#x4E3B;&#x673A;&#x4E2D;&#x7684;&#x8FDB;&#x7A0B;&#x63D0;&#x4F9B;&#x6570;&#x636E;&#x4F20;&#x8F93;&#x670D;&#x52A1;&#x3002;&#x7F51;&#x7EDC;&#x5C42;&#x628A;&#x4F20;&#x8F93;&#x5C42;&#x4F20;&#x9012;&#x4E0B;&#x6765;&#x7684;&#x62A5;&#x6587;&#x6BB5;&#x6216;&#x8005;&#x7528;&#x6237;&#x6570;&#x636E;&#x62A5;&#x5C01;&#x88C5;&#x6210;&#x5206;&#x7EC4;&#x3002;</li><li><strong>&#x6570;&#x636E;&#x94FE;&#x8DEF;&#x5C42;</strong> &#xFF1A;&#x7F51;&#x7EDC;&#x5C42;&#x9488;&#x5BF9;&#x7684;&#x8FD8;&#x662F;&#x4E3B;&#x673A;&#x4E4B;&#x95F4;&#x7684;&#x6570;&#x636E;&#x4F20;&#x8F93;&#x670D;&#x52A1;&#xFF0C;&#x800C;&#x4E3B;&#x673A;&#x4E4B;&#x95F4;&#x53EF;&#x4EE5;&#x6709;&#x5F88;&#x591A;&#x94FE;&#x8DEF;&#xFF0C;&#x94FE;&#x8DEF;&#x5C42;&#x534F;&#x8BAE;&#x5C31;&#x662F;&#x4E3A;&#x540C;&#x4E00;&#x94FE;&#x8DEF;&#x7684;&#x4E3B;&#x673A;&#x63D0;&#x4F9B;&#x6570;&#x636E;&#x4F20;&#x8F93;&#x670D;&#x52A1;&#x3002;&#x6570;&#x636E;&#x94FE;&#x8DEF;&#x5C42;&#x628A;&#x7F51;&#x7EDC;&#x5C42;&#x4F20;&#x4E0B;&#x6765;&#x7684;&#x5206;&#x7EC4;&#x5C01;&#x88C5;&#x6210;&#x5E27;&#x3002;</li><li><strong>&#x7269;&#x7406;&#x5C42;</strong> &#xFF1A;&#x8003;&#x8651;&#x7684;&#x662F;&#x600E;&#x6837;&#x5728;&#x4F20;&#x8F93;&#x5A92;&#x4F53;&#x4E0A;&#x4F20;&#x8F93;&#x6570;&#x636E;&#x6BD4;&#x7279;&#x6D41;&#xFF0C;&#x800C;&#x4E0D;&#x662F;&#x6307;&#x5177;&#x4F53;&#x7684;&#x4F20;&#x8F93;&#x5A92;&#x4F53;&#x3002;&#x7269;&#x7406;&#x5C42;&#x7684;&#x4F5C;&#x7528;&#x662F;&#x5C3D;&#x53EF;&#x80FD;&#x5C4F;&#x853D;&#x4F20;&#x8F93;&#x5A92;&#x4F53;&#x548C;&#x901A;&#x4FE1;&#x624B;&#x6BB5;&#x7684;&#x5DEE;&#x5F02;&#xFF0C;&#x4F7F;&#x6570;&#x636E;&#x94FE;&#x8DEF;&#x5C42;&#x611F;&#x89C9;&#x4E0D;&#x5230;&#x8FD9;&#x4E9B;&#x5DEE;&#x5F02;&#x3002;</li></ul><h3 id="TCP-IP"><a href="#TCP-IP" class="headerlink" title="TCP/IP"></a>TCP/IP</h3><p>&#x5B83;&#x53EA;&#x6709;&#x56DB;&#x5C42;&#xFF0C;&#x76F8;&#x5F53;&#x4E8E;&#x4E94;&#x5C42;&#x534F;&#x8BAE;&#x4E2D;&#x6570;&#x636E;&#x94FE;&#x8DEF;&#x5C42;&#x548C;&#x7269;&#x7406;&#x5C42;&#x5408;&#x5E76;&#x4E3A;&#x7F51;&#x7EDC;&#x63A5;&#x53E3;&#x5C42;&#x3002;</p><p>TCP/IP &#x4F53;&#x7CFB;&#x7ED3;&#x6784;&#x4E0D;&#x4E25;&#x683C;&#x9075;&#x5FAA; OSI &#x5206;&#x5C42;&#x6982;&#x5FF5;&#xFF0C;&#x5E94;&#x7528;&#x5C42;&#x53EF;&#x80FD;&#x4F1A;&#x76F4;&#x63A5;&#x4F7F;&#x7528; IP &#x5C42;&#x6216;&#x8005;&#x7F51;&#x7EDC;&#x63A5;&#x53E3;&#x5C42;&#x3002;</p><p><img src="/2019/02/19/&#x8BA1;&#x7B97;&#x673A;&#x7F51;&#x7EDC;/&#x8BA1;&#x7B97;&#x673A;&#x7F51;&#x7EDC;\7048a730-a2d0-43d1-99ce-f774e4ef1b27.png" alt="img"></p><p>TCP/IP &#x662F; Internet&#x4E0A;&#x7684;&#x6807;&#x51C6;&#x901A;&#x4FE1;&#x534F;&#x8BAE;&#x96C6;&#xFF0C;&#x8BE5;&#x534F;&#x8BAE;&#x96C6;&#x7531;&#x6570;&#x5341;&#x4E2A;&#x5177;&#x6709;&#x5C42;&#x6B21;&#x7ED3;&#x6784;&#x7684;&#x534F;&#x8BAE;&#x7EC4;&#x6210;&#xFF0C;&#x5176;&#x4E2D; TCP &#x548C; IP &#x662F;&#x8BE5;&#x534F;&#x8BAE;&#x96C6;&#x4E2D;&#x7684;&#x4E24;&#x4E2A;&#x6700;&#x91CD;&#x8981;&#x7684;&#x6838;&#x5FC3;&#x534F;&#x8BAE;&#x3002;TCP/IP&#x534F;&#x8BAE;&#x65CF;&#x6309;&#x5C42;&#x6B21;&#x53EF;&#x5206;&#x4E3A;&#x4EE5;&#x4E0B;&#x56DB;&#x5C42;&#xFF1A;&#x5E94;&#x7528;&#x5C42;&#x3001;&#x4F20;&#x8F93;&#x5C42;&#x3001;&#x7F51;&#x7EDC;&#x5C42;&#x548C;&#x7F51;&#x7EDC;&#x63A5;&#x53E3;&#x5C42;&#xFF0C;&#x5404;&#x5C42;&#x5BF9;&#x5E94;&#x7684; PDU &#x6570;&#x636E;&#x5355;&#x5143;&#x7684;&#x540D;&#x79F0;&#x5982;&#x4E0B;&#x56FE;&#x6240;&#x793A;&#x3002; </p><p><img src="/2019/02/19/&#x8BA1;&#x7B97;&#x673A;&#x7F51;&#x7EDC;/&#x8BA1;&#x7B97;&#x673A;&#x7F51;&#x7EDC;\TCPIP&#x4E0E;PSU.png" alt="TCPIP&#x4E0E;PSU"></p><h3 id="&#x5C0F;&#x7ED3;"><a href="#&#x5C0F;&#x7ED3;" class="headerlink" title="&#x5C0F;&#x7ED3;"></a>&#x5C0F;&#x7ED3;</h3><p>OSI &#x4E03;&#x5C42;&#x4F53;&#x7CFB;&#x7ED3;&#x6784;&#x5177;&#x6709;&#x6982;&#x5FF5;&#x6E05;&#x695A;&#x3001;&#x7406;&#x8BBA;&#x5B8C;&#x6574;&#x7684;&#x7279;&#x70B9;&#xFF0C;&#x662F;&#x4E00;&#x4E2A;&#x7406;&#x8BBA;&#x4E0A;&#x7684;&#x56FD;&#x9645;&#x6807;&#x51C6;&#xFF0C;&#x4F46;&#x5374;&#x4E0D;&#x662F;&#x4E8B;&#x5B9E;&#x4E0A;&#x7684;&#x56FD;&#x9645;&#x6807;&#x51C6;&#xFF1B;&#x800C;&#x5177;&#x6709;&#x7B80;&#x5355;&#x6613;&#x7528;&#x7279;&#x70B9;&#x7684; TCP/IP &#x56DB;&#x5C42;&#x4F53;&#x7CFB;&#x7ED3;&#x6784;&#x5219;&#x662F;&#x4E8B;&#x5B9E;&#x4E0A;&#x7684;&#x6807;&#x51C6;&#x3002; &#x9700;&#x8981;&#x6307;&#x51FA;&#x7684;&#x662F;&#xFF0C;&#x4E94;&#x5C42;&#x4F53;&#x7CFB;&#x7ED3;&#x6784;&#x867D;&#x7136;&#x7EFC;&#x5408;&#x4E86; OSI &#x548C; TCP/IP &#x7684;&#x4F18;&#x70B9;&#xFF0C;&#x4F46;&#x5176;&#x53EA;&#x662F;&#x4E3A;&#x4E86;&#x5B66;&#x672F;&#x5B66;&#x4E60;&#x7814;&#x7A76;&#x800C;&#x63D0;&#x51FA;&#x7684;&#xFF0C;&#x6CA1;&#x6709;&#x5177;&#x4F53;&#x7684;&#x5B9E;&#x9645;&#x610F;&#x4E49;&#x3002;</p><h2 id="&#x8BF4;&#x8BF4;-TCP-&#x7684;&#x4E09;&#x6B21;&#x63E1;&#x624B;"><a href="#&#x8BF4;&#x8BF4;-TCP-&#x7684;&#x4E09;&#x6B21;&#x63E1;&#x624B;" class="headerlink" title="&#x8BF4;&#x8BF4; TCP &#x7684;&#x4E09;&#x6B21;&#x63E1;&#x624B;"></a>&#x8BF4;&#x8BF4; TCP &#x7684;&#x4E09;&#x6B21;&#x63E1;&#x624B;</h2><p>&#x8FD9;&#x4E00;&#x5230;&#x5F88;&#x5E38;&#x89C1;&#x7684;&#x9762;&#x8BD5;&#x9898;&#x3002;</p><h3 id="&#x4F20;&#x8F93;&#x63A7;&#x5236;&#x534F;&#x8BAE;-TCP-&#x7B80;&#x4ECB;"><a href="#&#x4F20;&#x8F93;&#x63A7;&#x5236;&#x534F;&#x8BAE;-TCP-&#x7B80;&#x4ECB;" class="headerlink" title="&#x4F20;&#x8F93;&#x63A7;&#x5236;&#x534F;&#x8BAE; TCP &#x7B80;&#x4ECB;"></a>&#x4F20;&#x8F93;&#x63A7;&#x5236;&#x534F;&#x8BAE; TCP &#x7B80;&#x4ECB;</h3><ul><li>&#x9762;&#x5411;&#x8FDE;&#x63A5;&#x7684;&#x3001;&#x53EF;&#x9760;&#x7684;&#x57FA;&#x4E8E;&#x5B57;&#x8282;&#x6D41;&#x7684;&#x4F20;&#x8F93;&#x5C42;&#x901A;&#x4FE1;&#x534F;&#x8BAE;</li><li>&#x5C06;&#x5E94;&#x7528;&#x5C42;&#x7684;&#x6570;&#x636E;&#x6D41;&#x5206;&#x5272;&#x6210;&#x62A5;&#x6587;&#x6BB5;&#x5E76;&#x53D1;&#x9001;&#x7ED9;&#x76EE;&#x6807;&#x8282;&#x70B9;&#x7684; TCP &#x5C42;</li><li>&#x6570;&#x636E;&#x5305;&#x90FD;&#x662F;&#x7531;&#x5E8F;&#x53F7;&#xFF0C;&#x5BF9;&#x65B9;&#x6536;&#x5230;&#x5219;&#x53D1;&#x9001; ACK &#x786E;&#x8BA4;&#xFF0C;&#x672A;&#x6536;&#x5230;&#x5219;&#x91CD;&#x4F20;</li><li>&#x4F7F;&#x7528;&#x6821;&#x9A8C;&#x548C;&#x6765;&#x68C0;&#x9A8C;&#x6570;&#x636E;&#x5728;&#x4F20;&#x8F93;&#x8FC7;&#x7A0B;&#x4E2D;&#x662F;&#x5426;&#x6709;&#x8BEF;</li></ul><h3 id="TCP-&#x62A5;&#x6587;&#x5934;"><a href="#TCP-&#x62A5;&#x6587;&#x5934;" class="headerlink" title="TCP &#x62A5;&#x6587;&#x5934;"></a>TCP &#x62A5;&#x6587;&#x5934;</h3><p><img src="/2019/02/19/&#x8BA1;&#x7B97;&#x673A;&#x7F51;&#x7EDC;/&#x8BA1;&#x7B97;&#x673A;&#x7F51;&#x7EDC;\MJB-TCP-Header-800x564.png" alt="MJB-TCP-Header-800x564"></p><ul><li><strong>&#x6E90;&#x7AEF;&#x53E3;&#x3001;&#x76EE;&#x7684;&#x7AEF;&#x53E3;</strong> &#xFF1A;&#x6807;&#x8BB0;&#x8FDB;&#x7A0B;&#x3002;</li><li><strong>&#x5E8F;&#x53F7;</strong> &#xFF1A;&#x7528;&#x4E8E;&#x5BF9;&#x5B57;&#x8282;&#x6D41;&#x8FDB;&#x884C;&#x7F16;&#x53F7;&#xFF0C;&#x4F8B;&#x5982;&#x5E8F;&#x53F7;&#x4E3A; 301&#xFF0C;&#x8868;&#x793A;&#x7B2C;&#x4E00;&#x4E2A;&#x5B57;&#x8282;&#x7684;&#x7F16;&#x53F7;&#x4E3A; 301&#xFF0C;&#x5982;&#x679C;&#x643A;&#x5E26;&#x7684;&#x6570;&#x636E;&#x957F;&#x5EA6;&#x4E3A; 100 &#x5B57;&#x8282;&#xFF0C;&#x90A3;&#x4E48;&#x4E0B;&#x4E00;&#x4E2A;&#x62A5;&#x6587;&#x6BB5;&#x7684;&#x5E8F;&#x53F7;&#x5E94;&#x4E3A; 401&#x3002;</li><li><strong>&#x786E;&#x8BA4;&#x53F7;</strong> &#xFF1A;&#x671F;&#x671B;&#x6536;&#x5230;&#x7684;&#x4E0B;&#x4E00;&#x4E2A;&#x62A5;&#x6587;&#x6BB5;&#x7684;&#x5E8F;&#x53F7;&#x3002;&#x4F8B;&#x5982; B &#x6B63;&#x786E;&#x6536;&#x5230; A &#x53D1;&#x9001;&#x6765;&#x7684;&#x4E00;&#x4E2A;&#x62A5;&#x6587;&#x6BB5;&#xFF0C;&#x5E8F;&#x53F7;&#x4E3A; 501&#xFF0C;&#x643A;&#x5E26;&#x7684;&#x6570;&#x636E;&#x957F;&#x5EA6;&#x4E3A; 200 &#x5B57;&#x8282;&#xFF0C;&#x56E0;&#x6B64; B &#x671F;&#x671B;&#x4E0B;&#x4E00;&#x4E2A;&#x62A5;&#x6587;&#x6BB5;&#x7684;&#x5E8F;&#x53F7;&#x4E3A; 701&#xFF0C;B &#x53D1;&#x9001;&#x7ED9; A &#x7684;&#x786E;&#x8BA4;&#x62A5;&#x6587;&#x6BB5;&#x4E2D;&#x786E;&#x8BA4;&#x53F7;&#x5C31;&#x4E3A; 701&#x3002;</li><li><strong>&#x6570;&#x636E;&#x504F;&#x79FB;</strong> &#xFF1A;&#x6307;&#x7684;&#x662F;&#x6570;&#x636E;&#x90E8;&#x5206;&#x8DDD;&#x79BB;&#x62A5;&#x6587;&#x6BB5;&#x8D77;&#x59CB;&#x5904;&#x7684;&#x504F;&#x79FB;&#x91CF;&#xFF0C;&#x5B9E;&#x9645;&#x4E0A;&#x6307;&#x7684;&#x662F;&#x9996;&#x90E8;&#x7684;&#x957F;&#x5EA6;&#x3002;</li><li><strong>&#x8FDE;&#x63A5;&#x6807;&#x5FD7;&#xFF08;TCP Flags&#xFF09;</strong>&#xFF1A;&#x8868;&#x793A;&#x63A7;&#x5236;&#x529F;&#x80FD;&#xFF0C;&#x4E0B;&#x9762;&#x662F;&#x5E38;&#x89C1;&#x7684;&#x8FDE;&#x63A5;&#x6807;&#x5FD7;&#x3002;<ul><li><strong>&#x786E;&#x8BA4; ACK</strong> &#xFF1A;&#x5F53; ACK=1 &#x65F6;&#x786E;&#x8BA4;&#x53F7;&#x5B57;&#x6BB5;&#x6709;&#x6548;&#xFF0C;&#x5426;&#x5219;&#x65E0;&#x6548;&#x3002;TCP &#x89C4;&#x5B9A;&#xFF0C;&#x5728;&#x8FDE;&#x63A5;&#x5EFA;&#x7ACB;&#x540E;&#x6240;&#x6709;&#x4F20;&#x9001;&#x7684;&#x62A5;&#x6587;&#x6BB5;&#x90FD;&#x5FC5;&#x987B;&#x628A; ACK &#x7F6E; 1&#x3002;</li><li><strong>&#x540C;&#x6B65; SYN</strong> &#xFF1A;&#x5728;&#x8FDE;&#x63A5;&#x5EFA;&#x7ACB;&#x65F6;&#x7528;&#x6765;&#x540C;&#x6B65;&#x5E8F;&#x53F7;&#x3002;&#x5F53; SYN=a1&#xFF0C;ACK=0 &#x65F6;&#x8868;&#x793A;&#x8FD9;&#x662F;&#x4E00;&#x4E2A;&#x8FDE;&#x63A5;&#x8BF7;&#x6C42;&#x62A5;&#x6587;&#x6BB5;&#x3002;&#x82E5;&#x5BF9;&#x65B9;&#x540C;&#x610F;&#x5EFA;&#x7ACB;&#x8FDE;&#x63A5;&#xFF0C;&#x5219;&#x54CD;&#x5E94;&#x62A5;&#x6587;&#x4E2D; SYN=1&#xFF0C;ACK=1&#x3002;</li><li><strong>&#x7EC8;&#x6B62; FIN</strong> &#xFF1A;&#x7528;&#x6765;&#x91CA;&#x653E;&#x4E00;&#x4E2A;&#x8FDE;&#x63A5;&#xFF0C;&#x5F53; FIN=1 &#x65F6;&#xFF0C;&#x8868;&#x793A;&#x6B64;&#x62A5;&#x6587;&#x6BB5;&#x7684;&#x53D1;&#x9001;&#x65B9;&#x7684;&#x6570;&#x636E;&#x5DF2;&#x53D1;&#x9001;&#x5B8C;&#x6BD5;&#xFF0C;&#x5E76;&#x8981;&#x6C42;&#x91CA;&#x653E;&#x8FDE;&#x63A5;&#x3002;</li></ul></li><li><strong>&#x7A97;&#x53E3;</strong> &#xFF1A;&#x7A97;&#x53E3;&#x503C;&#x4F5C;&#x4E3A;&#x63A5;&#x6536;&#x65B9;&#x8BA9;&#x53D1;&#x9001;&#x65B9;&#x8BBE;&#x7F6E;&#x5176;&#x53D1;&#x9001;&#x7A97;&#x53E3;&#x7684;&#x4F9D;&#x636E;&#x3002;&#x4E4B;&#x6240;&#x4EE5;&#x8981;&#x6709;&#x8FD9;&#x4E2A;&#x9650;&#x5236;&#xFF0C;&#x662F;&#x56E0;&#x4E3A;&#x63A5;&#x6536;&#x65B9;&#x7684;&#x6570;&#x636E;&#x7F13;&#x5B58;&#x7A7A;&#x95F4;&#x662F;&#x6709;&#x9650;&#x7684;&#x3002;</li></ul><h3 id="&#x4E09;&#x6B21;&#x63E1;&#x624B;"><a href="#&#x4E09;&#x6B21;&#x63E1;&#x624B;" class="headerlink" title="&#x4E09;&#x6B21;&#x63E1;&#x624B;"></a>&#x4E09;&#x6B21;&#x63E1;&#x624B;</h3><p><img src="/2019/02/19/&#x8BA1;&#x7B97;&#x673A;&#x7F51;&#x7EDC;/&#x8BA1;&#x7B97;&#x673A;&#x7F51;&#x7EDC;\timg.jpg" alt="timg"></p><p>&#x5728; TCP/IP &#x534F;&#x8BAE;&#x4E2D;&#xFF0C; TCP &#x534F;&#x8BAE;&#x63D0;&#x4F9B;&#x53EF;&#x9760;&#x7684;&#x8FDE;&#x63A5;&#x670D;&#x52A1;&#xFF0C;&#x91C7;&#x7528;&#x4E09;&#x6B21;&#x63E1;&#x624B;&#x5EFA;&#x7ACB;&#x4E00;&#x4E2A;&#x8FDE;&#x63A5;&#x3002;</p><p>&#x5047;&#x8BBE; A &#x4E3A;&#x5BA2;&#x6237;&#x7AEF;&#xFF0C;B &#x4E3A;&#x670D;&#x52A1;&#x5668;&#x7AEF;&#x3002;</p><ul><li>&#x9996;&#x5148; B &#x5904;&#x4E8E; LISTEN&#xFF08;&#x76D1;&#x542C;&#xFF09;&#x72B6;&#x6001;&#xFF0C;&#x7B49;&#x5F85;&#x5BA2;&#x6237;&#x7684;&#x8FDE;&#x63A5;&#x8BF7;&#x6C42;&#x3002;</li><li>A &#x5411; B &#x53D1;&#x9001;&#x8FDE;&#x63A5;&#x8BF7;&#x6C42;&#x62A5;&#x6587;&#xFF0C;SYN=1&#xFF0C;ACK=0&#xFF0C;&#x9009;&#x62E9;&#x4E00;&#x4E2A;&#x521D;&#x59CB;&#x7684;&#x5E8F;&#x53F7; x&#x3002;</li><li>B &#x6536;&#x5230;&#x8FDE;&#x63A5;&#x8BF7;&#x6C42;&#x62A5;&#x6587;&#xFF0C;&#x5982;&#x679C;&#x540C;&#x610F;&#x5EFA;&#x7ACB;&#x8FDE;&#x63A5;&#xFF0C;&#x5219;&#x5411; A &#x53D1;&#x9001;&#x8FDE;&#x63A5;&#x786E;&#x8BA4;&#x62A5;&#x6587;&#xFF0C;SYN=1&#xFF0C;ACK=1&#xFF0C;&#x786E;&#x8BA4;&#x53F7;&#x4E3A; x+1&#xFF0C;&#x540C;&#x65F6;&#x4E5F;&#x9009;&#x62E9;&#x4E00;&#x4E2A;&#x521D;&#x59CB;&#x7684;&#x5E8F;&#x53F7; y&#x3002;</li><li>A &#x6536;&#x5230; B &#x7684;&#x8FDE;&#x63A5;&#x786E;&#x8BA4;&#x62A5;&#x6587;&#x540E;&#xFF0C;&#x8FD8;&#x8981;&#x5411; B &#x53D1;&#x51FA;&#x786E;&#x8BA4;&#xFF0C;&#x786E;&#x8BA4;&#x53F7;&#x4E3A; y+1&#xFF0C;&#x5E8F;&#x53F7;&#x4E3A; x+1&#x3002;</li><li>B &#x6536;&#x5230; A &#x7684;&#x786E;&#x8BA4;&#x540E;&#xFF0C;&#x8FDE;&#x63A5;&#x5EFA;&#x7ACB;&#x3002;</li></ul><h3 id="&#x5BF9;&#x4E8E;&#x5EFA;&#x94FE;&#x63A5;&#x7684;3&#x6B21;&#x63E1;&#x624B;"><a href="#&#x5BF9;&#x4E8E;&#x5EFA;&#x94FE;&#x63A5;&#x7684;3&#x6B21;&#x63E1;&#x624B;" class="headerlink" title="&#x5BF9;&#x4E8E;&#x5EFA;&#x94FE;&#x63A5;&#x7684;3&#x6B21;&#x63E1;&#x624B;"></a>&#x5BF9;&#x4E8E;&#x5EFA;&#x94FE;&#x63A5;&#x7684;3&#x6B21;&#x63E1;&#x624B;</h3><p>&#x4E3B;&#x8981;&#x662F;&#x8981;&#x521D;&#x59CB;&#x5316;Sequence Number &#x7684;&#x521D;&#x59CB;&#x503C;&#x3002;&#x901A;&#x4FE1;&#x7684;&#x53CC;&#x65B9;&#x8981;&#x4E92;&#x76F8;&#x901A;&#x77E5;&#x5BF9;&#x65B9;&#x81EA;&#x5DF1;&#x7684;&#x521D;&#x59CB;&#x5316;&#x7684; Sequence Number&#xFF08;&#x7F29;&#x5199;&#x4E3A;ISN&#xFF1A;Inital Sequence Number&#xFF09;&#x2014;&#x2014;&#x6240;&#x4EE5;&#x53EB;SYN&#xFF0C;&#x5168;&#x79F0;Synchronize Sequence Numbers&#x3002;&#x4E5F;&#x5C31;&#x4E0A;&#x56FE;&#x4E2D;&#x7684; x &#x548C; y&#x3002;&#x8FD9;&#x4E2A;&#x53F7;&#x8981;&#x4F5C;&#x4E3A;&#x4EE5;&#x540E;&#x7684;&#x6570;&#x636E;&#x901A;&#x4FE1;&#x7684;&#x5E8F;&#x53F7;&#xFF0C;&#x4EE5;&#x4FDD;&#x8BC1;&#x5E94;&#x7528;&#x5C42;&#x63A5;&#x6536;&#x5230;&#x7684;&#x6570;&#x636E;&#x4E0D;&#x4F1A;&#x56E0;&#x4E3A;&#x7F51;&#x7EDC;&#x4E0A;&#x7684;&#x4F20;&#x8F93;&#x7684;&#x95EE;&#x9898;&#x800C;&#x4E71;&#x5E8F;&#xFF08;TCP&#x4F1A;&#x7528;&#x8FD9;&#x4E2A;&#x5E8F;&#x53F7;&#x6765;&#x62FC;&#x63A5;&#x6570;&#x636E;&#xFF09;&#x3002;</p><h3 id="&#x5173;&#x4E8E;&#x5EFA;&#x8FDE;&#x63A5;&#x65F6;SYN&#x8D85;&#x65F6;"><a href="#&#x5173;&#x4E8E;&#x5EFA;&#x8FDE;&#x63A5;&#x65F6;SYN&#x8D85;&#x65F6;" class="headerlink" title="&#x5173;&#x4E8E;&#x5EFA;&#x8FDE;&#x63A5;&#x65F6;SYN&#x8D85;&#x65F6;"></a>&#x5173;&#x4E8E;&#x5EFA;&#x8FDE;&#x63A5;&#x65F6;SYN&#x8D85;&#x65F6;</h3><p>&#x8BD5;&#x60F3;&#x4E00;&#x4E0B;&#xFF0C;&#x5982;&#x679C;server&#x7AEF;&#x63A5;&#x5230;&#x4E86; client &#x53D1;&#x7684; SYN &#x540E;&#x56DE;&#x4E86; SYN-ACK &#x540E; client &#x6389;&#x7EBF;&#x4E86;&#xFF0C;server &#x7AEF;&#x6CA1;&#x6709;&#x6536;&#x5230; client &#x56DE;&#x6765;&#x7684;ACK&#xFF0C;&#x90A3;&#x4E48;&#xFF0C;&#x8FD9;&#x4E2A;&#x8FDE;&#x63A5;&#x5904;&#x4E8E;&#x4E00;&#x4E2A;&#x4E2D;&#x95F4;&#x72B6;&#x6001;&#xFF0C;&#x5373;&#x6CA1;&#x6210;&#x529F;&#xFF0C;&#x4E5F;&#x6CA1;&#x5931;&#x8D25;&#x3002;&#x4E8E;&#x662F;&#xFF0C;server &#x7AEF;&#x5982;&#x679C;&#x5728;&#x4E00;&#x5B9A;&#x65F6;&#x95F4;&#x5185;&#x6CA1;&#x6709;&#x6536;&#x5230;&#x7684;TCP&#x4F1A;&#x91CD;&#x53D1; SYN-ACK&#x3002;&#x5728;Linux&#x4E0B;&#xFF0C;&#x9ED8;&#x8BA4;&#x91CD;&#x8BD5;&#x6B21;&#x6570;&#x4E3A;5&#x6B21;&#xFF0C;&#x91CD;&#x8BD5;&#x7684;&#x95F4;&#x9694;&#x65F6;&#x95F4;&#x4ECE; 1s &#x5F00;&#x59CB;&#x6BCF;&#x6B21;&#x90FD;&#x7FFB;&#x552E;&#xFF0C;5 &#x6B21;&#x7684;&#x91CD;&#x8BD5;&#x65F6;&#x95F4;&#x95F4;&#x9694;&#x4E3A;1s, 2s, 4s, 8s, 16s&#xFF0C;&#x603B;&#x5171;31s&#xFF0C;&#x7B2C;5&#x6B21;&#x53D1;&#x51FA;&#x540E;&#x8FD8;&#x8981;&#x7B49;32s&#x90FD;&#x77E5;&#x9053;&#x7B2C;5&#x6B21;&#x4E5F;&#x8D85;&#x65F6;&#x4E86;&#xFF0C;&#x6240;&#x4EE5;&#xFF0C;&#x603B;&#x5171;&#x9700;&#x8981; 1s + 2s + 4s+ 8s+ 16s + 32s = 2^6 -1 = 63s&#xFF0C;TCP&#x624D;&#x4F1A;&#x628A;&#x65AD;&#x5F00;&#x8FD9;&#x4E2A;&#x8FDE;&#x63A5;&#x3002;</p><h3 id="&#x5173;&#x4E8E;SYN-Flood&#x653B;&#x51FB;"><a href="#&#x5173;&#x4E8E;SYN-Flood&#x653B;&#x51FB;" class="headerlink" title="&#x5173;&#x4E8E;SYN Flood&#x653B;&#x51FB;"></a>&#x5173;&#x4E8E;SYN Flood&#x653B;&#x51FB;</h3><p>&#x4E00;&#x4E9B;&#x6076;&#x610F;&#x7684;&#x4EBA;&#x5C31;&#x4E3A;&#x6B64;&#x5236;&#x9020;&#x4E86;SYN Flood&#x653B;&#x51FB;&#xFF0C;&#x7ED9;&#x670D;&#x52A1;&#x5668;&#x53D1;&#x4E86;&#x4E00;&#x4E2A;SYN&#x540E;&#xFF0C;&#x5C31;&#x4E0B;&#x7EBF;&#x4E86;&#xFF0C;&#x4E8E;&#x662F;&#x670D;&#x52A1;&#x5668;&#x9700;&#x8981;&#x9ED8;&#x8BA4;&#x7B49; 63s &#x624D;&#x4F1A;&#x65AD;&#x5F00;&#x8FDE;&#x63A5;&#xFF0C;&#x8FD9;&#x6837;&#xFF0C;&#x653B;&#x51FB;&#x8005;&#x5C31;&#x53EF;&#x4EE5;&#x628A;&#x670D;&#x52A1;&#x5668;&#x7684; syn &#x8FDE;&#x63A5;&#x7684;&#x961F;&#x5217;&#x8017;&#x5C3D;&#xFF0C;&#x8BA9;&#x6B63;&#x5E38;&#x7684;&#x8FDE;&#x63A5;&#x8BF7;&#x6C42;&#x4E0D;&#x80FD;&#x5904;&#x7406;&#x3002;&#x4E8E;&#x662F;&#xFF0C;Linux&#x4E0B;&#x7ED9;&#x4E86;&#x4E00;&#x4E2A;&#x53EB; <strong>tcp_syncookies</strong> &#x7684;&#x53C2;&#x6570;&#x6765;&#x5E94;&#x5BF9;&#x8FD9;&#x4E2A;&#x4E8B;&#x2014;&#x2014;&#x5F53;SYN&#x961F;&#x5217;&#x6EE1;&#x4E86;&#x540E;&#xFF0C;TCP&#x4F1A;&#x901A;&#x8FC7;&#x6E90;&#x5730;&#x5740;&#x7AEF;&#x53E3;&#x3001;&#x76EE;&#x6807;&#x5730;&#x5740;&#x7AEF;&#x53E3;&#x548C;&#x65F6;&#x95F4;&#x6233;&#x6253;&#x9020;&#x51FA;&#x4E00;&#x4E2A;&#x7279;&#x522B;&#x7684;Sequence Number&#x53D1;&#x56DE;&#x53BB;&#xFF08;&#x53C8;&#x53EB;cookie&#xFF09;&#xFF0C;&#x5982;&#x679C;&#x662F;&#x653B;&#x51FB;&#x8005;&#x5219;&#x4E0D;&#x4F1A;&#x6709;&#x54CD;&#x5E94;&#xFF0C;&#x5982;&#x679C;&#x662F;&#x6B63;&#x5E38;&#x8FDE;&#x63A5;&#xFF0C;&#x5219;&#x4F1A;&#x628A;&#x8FD9;&#x4E2A; SYN Cookie&#x53D1;&#x56DE;&#x6765;&#xFF0C;&#x7136;&#x540E;&#x670D;&#x52A1;&#x7AEF;&#x53EF;&#x4EE5;&#x901A;&#x8FC7;cookie&#x5EFA;&#x8FDE;&#x63A5;&#xFF08;&#x5373;&#x4F7F;&#x4F60;&#x4E0D;&#x5728;SYN&#x961F;&#x5217;&#x4E2D;&#xFF09;&#x3002;</p><p>&#x8BF7;&#x6CE8;&#x610F;&#xFF0C;<strong>&#x8BF7;&#x5148;&#x5343;&#x4E07;&#x522B;&#x7528; tcp_syncookies &#x6765;&#x5904;&#x7406;&#x6B63;&#x5E38;&#x7684;&#x5927;&#x8D1F;&#x8F7D;&#x7684;&#x8FDE;&#x63A5;&#x7684;&#x60C5;&#x51B5;</strong>&#x3002;&#x56E0;&#x4E3A;&#xFF0C;synccookies &#x662F;&#x59A5;&#x534F;&#x7248;&#x7684;TCP&#x534F;&#x8BAE;&#xFF0C;&#x5E76;&#x4E0D;&#x4E25;&#x8C28;&#x3002;&#x5BF9;&#x4E8E;&#x6B63;&#x5E38;&#x7684;&#x8BF7;&#x6C42;&#xFF0C;&#x4F60;&#x5E94;&#x8BE5;&#x8C03;&#x6574;&#x4E09;&#x4E2A;TCP&#x53C2;&#x6570;&#x53EF;&#x4F9B;&#x4F60;&#x9009;&#x62E9;&#x3002;</p><ul><li>&#x7B2C;&#x4E00;&#x4E2A;&#x662F;&#xFF1A;tcp_synack_retries &#x53EF;&#x4EE5;&#x7528;&#x4ED6;&#x6765;&#x51CF;&#x5C11;&#x91CD;&#x8BD5;&#x6B21;&#x6570;&#xFF1B;</li><li>&#x7B2C;&#x4E8C;&#x4E2A;&#x662F;&#xFF1A;tcp_max_syn_backlog&#xFF0C;&#x53EF;&#x4EE5;&#x589E;&#x5927;SYN&#x8FDE;&#x63A5;&#x6570;&#xFF1B;</li><li>&#x7B2C;&#x4E09;&#x4E2A;&#x662F;&#xFF1A;tcp_abort_on_overflow &#x5904;&#x7406;&#x4E0D;&#x8FC7;&#x6765;&#x5E72;&#x8106;&#x5C31;&#x76F4;&#x63A5;&#x62D2;&#x7EDD;&#x8FDE;&#x63A5;&#x4E86; &#xFF1B;</li></ul><h3 id="&#x4FDD;&#x6D3B;&#x673A;&#x5236;"><a href="#&#x4FDD;&#x6D3B;&#x673A;&#x5236;" class="headerlink" title="&#x4FDD;&#x6D3B;&#x673A;&#x5236;"></a>&#x4FDD;&#x6D3B;&#x673A;&#x5236;</h3><ul><li>&#x5411;&#x5BF9;&#x65B9;&#x53D1;&#x9001;&#x4FDD;&#x6D3B;&#x63A2;&#x6D4B;&#x62A5;&#x6587;&#xFF0C;&#x5982;&#x679C;&#x672A;&#x6536;&#x5230;&#x54CD;&#x5E94;&#x5219;&#x7EE7;&#x7EED;&#x53D1;&#x9001;</li><li>&#x5C1D;&#x8BD5;&#x6B21;&#x6570;&#x8FBE;&#x5230;&#x4FDD;&#x6D3B;&#x63A2;&#x6D4B;&#x6570;&#x4ECD;&#x7136;&#x672A;&#x6536;&#x5230;&#x54CD;&#x5E94;&#x5219;&#x4E2D;&#x65AD;&#x8FDE;&#x63A5;</li></ul><h2 id="&#x8C08;&#x8C08;&#x56DB;&#x6B21;&#x6325;&#x624B;"><a href="#&#x8C08;&#x8C08;&#x56DB;&#x6B21;&#x6325;&#x624B;" class="headerlink" title="&#x8C08;&#x8C08;&#x56DB;&#x6B21;&#x6325;&#x624B;"></a>&#x8C08;&#x8C08;&#x56DB;&#x6B21;&#x6325;&#x624B;</h2><p><img src="/2019/02/19/&#x8BA1;&#x7B97;&#x673A;&#x7F51;&#x7EDC;/&#x8BA1;&#x7B97;&#x673A;&#x7F51;&#x7EDC;\tisfsmg.jpg" alt="tisfsmg"></p><p>&#x4EE5;&#x4E0B;&#x63CF;&#x8FF0;&#x4E0D;&#x8BA8;&#x8BBA;&#x5E8F;&#x53F7;&#x548C;&#x786E;&#x8BA4;&#x53F7;&#xFF0C;&#x56E0;&#x4E3A;&#x5E8F;&#x53F7;&#x548C;&#x786E;&#x8BA4;&#x53F7;&#x7684;&#x89C4;&#x5219;&#x6BD4;&#x8F83;&#x7B80;&#x5355;&#x3002;&#x5E76;&#x4E14;&#x4E0D;&#x8BA8;&#x8BBA; ACK&#xFF0C;&#x56E0;&#x4E3A; ACK &#x5728;&#x8FDE;&#x63A5;&#x5EFA;&#x7ACB;&#x4E4B;&#x540E;&#x90FD;&#x4E3A; 1&#x3002;</p><ul><li>A &#x53D1;&#x9001;&#x8FDE;&#x63A5;&#x91CA;&#x653E;&#x62A5;&#x6587;&#xFF0C;FIN=1&#x3002;</li><li>B &#x6536;&#x5230;&#x4E4B;&#x540E;&#x53D1;&#x51FA;&#x786E;&#x8BA4;&#xFF0C;&#x6B64;&#x65F6; TCP &#x5C5E;&#x4E8E;&#x534A;&#x5173;&#x95ED;&#x72B6;&#x6001;&#xFF0C;B &#x80FD;&#x5411; A &#x53D1;&#x9001;&#x6570;&#x636E;&#x4F46;&#x662F; A &#x4E0D;&#x80FD;&#x5411; B &#x53D1;&#x9001;&#x6570;&#x636E;&#x3002;</li><li>&#x5F53; B &#x4E0D;&#x518D;&#x9700;&#x8981;&#x8FDE;&#x63A5;&#x65F6;&#xFF0C;&#x53D1;&#x9001;&#x8FDE;&#x63A5;&#x91CA;&#x653E;&#x62A5;&#x6587;&#xFF0C;FIN=1&#x3002;</li><li>A &#x6536;&#x5230;&#x540E;&#x53D1;&#x51FA;&#x786E;&#x8BA4;&#xFF0C;&#x8FDB;&#x5165; TIME-WAIT &#x72B6;&#x6001;&#xFF0C;&#x7B49;&#x5F85; 2 MSL&#xFF08;&#x6700;&#x5927;&#x62A5;&#x6587;&#x5B58;&#x6D3B;&#x65F6;&#x95F4;&#xFF09;&#x540E;&#x91CA;&#x653E;&#x8FDE;&#x63A5;&#x3002;</li><li>B &#x6536;&#x5230; A &#x7684;&#x786E;&#x8BA4;&#x540E;&#x91CA;&#x653E;&#x8FDE;&#x63A5;&#x3002;</li></ul><h3 id="&#x56DB;&#x6B21;&#x6325;&#x624B;&#x7684;&#x539F;&#x56E0;"><a href="#&#x56DB;&#x6B21;&#x6325;&#x624B;&#x7684;&#x539F;&#x56E0;" class="headerlink" title="&#x56DB;&#x6B21;&#x6325;&#x624B;&#x7684;&#x539F;&#x56E0;"></a>&#x56DB;&#x6B21;&#x6325;&#x624B;&#x7684;&#x539F;&#x56E0;</h3><p>&#x5BA2;&#x6237;&#x7AEF;&#x53D1;&#x9001;&#x4E86; FIN &#x8FDE;&#x63A5;&#x91CA;&#x653E;&#x62A5;&#x6587;&#x4E4B;&#x540E;&#xFF0C;&#x670D;&#x52A1;&#x5668;&#x6536;&#x5230;&#x4E86;&#x8FD9;&#x4E2A;&#x62A5;&#x6587;&#xFF0C;&#x5C31;&#x8FDB;&#x5165;&#x4E86; CLOSE-WAIT &#x72B6;&#x6001;&#x3002;&#x8FD9;&#x4E2A;&#x72B6;&#x6001;&#x662F;&#x4E3A;&#x4E86;&#x8BA9;&#x670D;&#x52A1;&#x5668;&#x7AEF;&#x53D1;&#x9001;&#x8FD8;&#x672A;&#x4F20;&#x9001;&#x5B8C;&#x6BD5;&#x7684;&#x6570;&#x636E;&#xFF0C;&#x4F20;&#x9001;&#x5B8C;&#x6BD5;&#x4E4B;&#x540E;&#xFF0C;&#x670D;&#x52A1;&#x5668;&#x4F1A;&#x53D1;&#x9001; FIN &#x8FDE;&#x63A5;&#x91CA;&#x653E;&#x62A5;&#x6587;&#x3002;</p><p>TCP&#x8FDE;&#x63A5;&#x662F;&#x5168;&#x53CC;&#x5DE5;&#x7684;&#xFF0C;&#x670D;&#x52A1;&#x7AEF;&#x53EF;&#x4EE5;&#x53D1;&#x9001;&#x6570;&#x636E;&#x5230;&#x5BA2;&#x6237;&#x7AEF;&#xFF0C;&#x5BA2;&#x6237;&#x7AEF;&#x4E5F;&#x53EF;&#x4EE5;&#x53D1;&#x9001;&#x6570;&#x636E;&#x5230;&#x670D;&#x52A1;&#x7AEF;&#xFF0C;&#x53D1;&#x9001;&#x65B9;&#x548C;&#x63A5;&#x6536;&#x65B9;&#x90FD;&#x9700;&#x8981;&#x4E24;&#x6B21;&#x6325;&#x624B;&#x624D;&#x80FD;&#x5173;&#x95ED; &#x3002;</p><h3 id="TIME-WAIT"><a href="#TIME-WAIT" class="headerlink" title="TIME_WAIT"></a>TIME_WAIT</h3><p>&#x5BA2;&#x6237;&#x7AEF;&#x63A5;&#x6536;&#x5230;&#x670D;&#x52A1;&#x5668;&#x7AEF;&#x7684; FIN &#x62A5;&#x6587;&#x540E;&#x8FDB;&#x5165;&#x6B64;&#x72B6;&#x6001;&#xFF0C;&#x6B64;&#x65F6;&#x5E76;&#x4E0D;&#x662F;&#x76F4;&#x63A5;&#x8FDB;&#x5165; CLOSED &#x72B6;&#x6001;&#xFF0C;&#x8FD8;&#x9700;&#x8981;&#x7B49;&#x5F85;&#x4E00;&#x4E2A;&#x65F6;&#x95F4;&#x8BA1;&#x65F6;&#x5668;&#x8BBE;&#x7F6E;&#x7684;&#x65F6;&#x95F4; 2MSL&#x3002;&#x8FD9;&#x4E48;&#x505A;&#x6709;&#x4E24;&#x4E2A;&#x7406;&#x7531;&#xFF1A;</p><ul><li>&#x786E;&#x4FDD;&#x6700;&#x540E;&#x4E00;&#x4E2A;&#x786E;&#x8BA4;&#x62A5;&#x6587;&#x80FD;&#x591F;&#x5230;&#x8FBE;&#x3002;&#x5982;&#x679C; B &#x6CA1;&#x6536;&#x5230; A &#x53D1;&#x9001;&#x6765;&#x7684;&#x786E;&#x8BA4;&#x62A5;&#x6587;&#xFF0C;&#x90A3;&#x4E48;&#x5C31;&#x4F1A;&#x91CD;&#x65B0;&#x53D1;&#x9001;&#x8FDE;&#x63A5;&#x91CA;&#x653E;&#x8BF7;&#x6C42;&#x62A5;&#x6587;&#xFF0C;A &#x7B49;&#x5F85;&#x4E00;&#x6BB5;&#x65F6;&#x95F4;&#x5C31;&#x662F;&#x4E3A;&#x4E86;&#x5904;&#x7406;&#x8FD9;&#x79CD;&#x60C5;&#x51B5;&#x7684;&#x53D1;&#x751F;&#x3002;</li><li>&#x7B49;&#x5F85;&#x4E00;&#x6BB5;&#x65F6;&#x95F4;&#x662F;&#x4E3A;&#x4E86;&#x8BA9;&#x672C;&#x8FDE;&#x63A5;&#x6301;&#x7EED;&#x65F6;&#x95F4;&#x5185;&#x6240;&#x4EA7;&#x751F;&#x7684;&#x6240;&#x6709;&#x62A5;&#x6587;&#x90FD;&#x4ECE;&#x7F51;&#x7EDC;&#x4E2D;&#x6D88;&#x5931;&#xFF0C;&#x4F7F;&#x5F97;&#x4E0B;&#x4E00;&#x4E2A;&#x65B0;&#x7684;&#x8FDE;&#x63A5;&#x4E0D;&#x4F1A;&#x51FA;&#x73B0;&#x65E7;&#x7684;&#x8FDE;&#x63A5;&#x8BF7;&#x6C42;&#x62A5;&#x6587;&#x3002;</li></ul><h2 id="TCP-&#x548C;-UDP-&#x7684;&#x533A;&#x522B;"><a href="#TCP-&#x548C;-UDP-&#x7684;&#x533A;&#x522B;" class="headerlink" title="TCP &#x548C; UDP &#x7684;&#x533A;&#x522B;"></a>TCP &#x548C; UDP &#x7684;&#x533A;&#x522B;</h2><p>&#x524D;&#x9762;&#x6211;&#x4EEC;&#x8BF4;&#x4E86; TCP &#x73B0;&#x5728;&#x6211;&#x4EEC;&#x6765;&#x8BA4;&#x8BC6;&#x4E00;&#x4E0B; UDP&#x3002;</p><h3 id="UPD-&#x7684;&#x7279;&#x70B9;"><a href="#UPD-&#x7684;&#x7279;&#x70B9;" class="headerlink" title="UPD &#x7684;&#x7279;&#x70B9;"></a>UPD &#x7684;&#x7279;&#x70B9;</h3><ul><li>&#x9762;&#x5411;&#x975E;&#x8FDE;&#x63A5;&#x7684;</li><li>&#x4E0D;&#x7EF4;&#x62A4;&#x8FDE;&#x63A5;&#x72B6;&#x6001;&#xFF0C;&#x652F;&#x6301;&#x540C;&#x65F6;&#x5411;&#x591A;&#x4E2A;&#x5BA2;&#x6237;&#x7AEF;&#x4F20;&#x8F93;&#x76F8;&#x540C;&#x7684;&#x6D88;&#x606F;</li><li>&#x6570;&#x636E;&#x5305;&#x62A5;&#x5934;&#x53EA;&#x6709; 8 &#x4E2A;&#x5B57;&#x8282;&#xFF0C;&#x989D;&#x5916;&#x5F00;&#x9500;&#x8F83;&#x5C0F;</li><li>&#x541E;&#x5410;&#x91CF;&#x53EA;&#x53D7;&#x9650;&#x4E8E;&#x6570;&#x636E;&#x751F;&#x6210;&#x7387;&#x3001;&#x4F20;&#x8F93;&#x901F;&#x7387;&#x4EE5;&#x53CA;&#x673A;&#x5668;&#x6027;&#x80FD;</li><li>&#x5C3D;&#x6700;&#x5927;&#x52AA;&#x529B;&#x4EA4;&#x4ED8;&#xFF0C;&#x4E0D;&#x4FDD;&#x8BC1;&#x53EF;&#x9760;&#x4EA4;&#x4ED8;&#xFF0C;&#x4E0D;&#x9700;&#x8981;&#x7EF4;&#x6301;&#x590D;&#x6742;&#x7684;&#x94FE;&#x63A5;&#x72B6;&#x6001;&#x8868;</li><li>&#x9762;&#x5411;&#x62A5;&#x6587;&#xFF0C;&#x4E0D;&#x5BF9;&#x5E94;&#x7528;&#x7A0B;&#x5E8F;&#x63D0;&#x4EA4;&#x7684;&#x62A5;&#x6587;&#x4FE1;&#x606F;&#x8FDB;&#x884C;&#x62C6;&#x5206;&#x6216;&#x5219;&#x5408;&#x5E76;</li></ul><h3 id="&#x5BF9;&#x6BD4;"><a href="#&#x5BF9;&#x6BD4;" class="headerlink" title="&#x5BF9;&#x6BD4;"></a>&#x5BF9;&#x6BD4;</h3><ul><li>TCP &#x662F;&#x9762;&#x5411;&#x8FDE;&#x63A5;&#x7684;&#xFF1B;UDP &#x662F;&#x65E0;&#x8FDE;&#x63A5;&#x7684;&#x3002;</li><li>TCP &#x662F;&#x53EF;&#x9760;&#x7684;&#xFF1B;UDP &#x662F;&#x4E0D;&#x53EF;&#x9760;&#x7684;&#x3002;</li><li>TCP &#x53EA;&#x652F;&#x6301;&#x70B9;&#x5BF9;&#x70B9;&#x901A;&#x4FE1;&#xFF1B;UDP &#x652F;&#x6301;&#x4E00;&#x5BF9;&#x4E00;&#x3001;&#x4E00;&#x5BF9;&#x591A;&#x3001;&#x591A;&#x5BF9;&#x4E00;&#x3001;&#x591A;&#x5BF9;&#x591A;&#x7684;&#x901A;&#x4FE1;&#x6A21;&#x5F0F;&#x3002;</li><li>TCP &#x662F;&#x9762;&#x5411;&#x5B57;&#x8282;&#x6D41;&#x7684;&#xFF1B;UDP &#x662F;&#x9762;&#x5411;&#x62A5;&#x6587;&#x7684;&#x3002;</li><li>TCP &#x6709;&#x62E5;&#x585E;&#x63A7;&#x5236;&#x673A;&#x5236;&#xFF1B;UDP &#x6CA1;&#x6709;&#x62E5;&#x585E;&#x63A7;&#x5236;&#xFF0C;&#x9002;&#x5408;&#x5A92;&#x4F53;&#x901A;&#x4FE1;&#x3002;</li><li>TCP &#x9996;&#x90E8;&#x5F00;&#x9500;(20 &#x4E2A;&#x5B57;&#x8282;)&#xFF0C;&#x6BD4; UDP &#x7684;&#x9996;&#x90E8;&#x5F00;&#x9500;(8 &#x4E2A;&#x5B57;&#x8282;)&#x8981;&#x5927;&#x3002;</li></ul><h2 id="TCP-&#x7684;&#x6ED1;&#x52A8;&#x7A97;&#x53E3;"><a href="#TCP-&#x7684;&#x6ED1;&#x52A8;&#x7A97;&#x53E3;" class="headerlink" title="TCP &#x7684;&#x6ED1;&#x52A8;&#x7A97;&#x53E3;"></a>TCP &#x7684;&#x6ED1;&#x52A8;&#x7A97;&#x53E3;</h2><p>&#x9996;&#x5148;&#x660E;&#x786E;&#xFF1A;</p><p>TCP&#x6ED1;&#x52A8;&#x7A97;&#x53E3;&#x5206;&#x4E3A;&#x63A5;&#x53D7;&#x7A97;&#x53E3;&#xFF0C;&#x53D1;&#x9001;&#x7A97;&#x53E3;&#x3002;</p><p>&#x6ED1;&#x52A8;&#x7A97;&#x53E3;&#x534F;&#x8BAE;&#x662F;<strong>&#x4F20;&#x8F93;&#x5C42;&#x8FDB;&#x884C;&#x6D41;&#x63A7;</strong>&#x7684;&#x4E00;&#x79CD;&#x63AA;&#x65BD;&#xFF0C;<strong>&#x63A5;&#x6536;&#x65B9;&#x901A;&#x8FC7;&#x901A;&#x544A;&#x53D1;&#x9001;&#x65B9;&#x81EA;&#x5DF1;&#x7684;&#x7A97;&#x53E3;&#x5927;&#x5C0F;</strong>&#xFF0C;&#x4ECE;&#x800C;&#x63A7;&#x5236;&#x53D1;&#x9001;&#x65B9;&#x7684;&#x53D1;&#x9001;&#x901F;&#x5EA6;&#xFF0C;&#x4ECE;&#x800C;&#x8FBE;&#x5230;&#x9632;&#x6B62;&#x53D1;&#x9001;&#x65B9;&#x53D1;&#x9001;&#x901F;&#x5EA6;&#x8FC7;&#x5FEB;&#x800C;&#x5BFC;&#x81F4;&#x81EA;&#x5DF1;&#x88AB;&#x6DF9;&#x6CA1;&#x7684;&#x76EE;&#x7684;&#x3002;</p><h3 id="&#x91CD;&#x8981;&#x6982;&#x5FF5;"><a href="#&#x91CD;&#x8981;&#x6982;&#x5FF5;" class="headerlink" title="&#x91CD;&#x8981;&#x6982;&#x5FF5;"></a>&#x91CD;&#x8981;&#x6982;&#x5FF5;</h3><p>&#x5BF9;ACK&#x7684;&#x518D;&#x8BA4;&#x8BC6;&#xFF0C;ack&#x901A;&#x5E38;&#x88AB;&#x7406;&#x89E3;&#x4E3A;&#x6536;&#x5230;&#x6570;&#x636E;&#x540E;&#x7ED9;&#x51FA;&#x7684;&#x4E00;&#x4E2A;&#x786E;&#x8BA4;ACK&#xFF0C;ACK&#x5305;&#x542B;&#x4E24;&#x4E2A;&#x975E;&#x5E38;&#x91CD;&#x8981;&#x7684;&#x4FE1;&#x606F;&#xFF1A;</p><ul><li>&#x4E00;&#x662F;&#x671F;&#x671B;&#x63A5;&#x6536;&#x5230;&#x7684;&#x4E0B;&#x4E00;&#x5B57;&#x8282;&#x7684;&#x5E8F;&#x53F7;n&#xFF0C;&#x8BE5;n&#x4EE3;&#x8868;&#x63A5;&#x6536;&#x65B9;&#x5DF2;&#x7ECF;&#x63A5;&#x6536;&#x5230;&#x4E86;&#x524D;n-1&#x5B57;&#x8282;&#x6570;&#x636E;&#xFF0C;&#x6B64;&#x65F6;&#x5982;&#x679C;&#x63A5;&#x6536;&#x65B9;&#x6536;&#x5230;&#x7B2C;n+1&#x5B57;&#x8282;&#x6570;&#x636E;&#x800C;&#x4E0D;&#x662F;&#x7B2C;n&#x5B57;&#x8282;&#x6570;&#x636E;&#xFF0C;&#x63A5;&#x6536;&#x65B9;&#x662F;&#x4E0D;&#x4F1A;&#x53D1;&#x9001;&#x5E8F;&#x53F7;&#x4E3A;n+2&#x7684;ACK&#x7684;&#x3002;&#x4E3E;&#x4E2A;&#x4F8B;&#x5B50;&#xFF0C;&#x5047;&#x5982;&#x63A5;&#x6536;&#x7AEF;&#x6536;&#x5230;1-1024&#x5B57;&#x8282;&#xFF0C;&#x5B83;&#x4F1A;&#x53D1;&#x9001;&#x4E00;&#x4E2A;&#x786E;&#x8BA4;&#x53F7;&#x4E3A;1025&#x7684;ACK,&#x4F46;&#x662F;&#x63A5;&#x4E0B;&#x6765;&#x6536;&#x5230;&#x7684;&#x662F;2049-3072&#xFF0C;&#x5B83;&#x662F;&#x4E0D;&#x4F1A;&#x53D1;&#x9001;&#x786E;&#x8BA4;&#x53F7;&#x4E3A;3072&#x7684;ACK,&#x800C;&#x4F9D;&#x65E7;&#x53D1;&#x9001;1025&#x7684;ACK&#x3002;</li><li>&#x4E8C;&#x662F;&#x5F53;&#x524D;&#x7684;&#x7A97;&#x53E3;&#x5927;&#x5C0F;m&#xFF0C;&#x5982;&#x6B64;&#x53D1;&#x9001;&#x65B9;&#x5728;&#x63A5;&#x6536;&#x5230;ACK&#x5305;&#x542B;&#x7684;&#x8FD9;&#x4E24;&#x4E2A;&#x6570;&#x636E;&#x540E;&#x5C31;&#x53EF;&#x4EE5;&#x8BA1;&#x7B97;&#x51FA;&#x8FD8;&#x53EF;&#x4EE5;&#x53D1;&#x9001;&#x591A;&#x5C11;&#x5B57;&#x8282;&#x7684;&#x6570;&#x636E;&#x7ED9;&#x5BF9;&#x65B9;&#xFF0C;&#x5047;&#x5B9A;&#x5F53;&#x524D;&#x53D1;&#x9001;&#x65B9;&#x5DF2;&#x53D1;&#x9001;&#x5230;&#x7B2C;x&#x5B57;&#x8282;&#xFF0C;&#x5219;&#x53EF;&#x4EE5;&#x53D1;&#x9001;&#x7684;&#x5B57;&#x8282;&#x6570;&#x5C31;&#x662F;y=m-(x-n).&#x8FD9;&#x5C31;&#x662F;&#x6ED1;&#x52A8;&#x7A97;&#x53E3;&#x63A7;&#x5236;&#x6D41;&#x91CF;&#x7684;&#x57FA;&#x672C;&#x539F;&#x7406;</li></ul><p><strong>&#x91CD;&#x70B9;&#xFF1A;&#x53D1;&#x9001;&#x65B9;&#x6839;&#x636E;&#x6536;&#x5230;ACK&#x5F53;&#x4E2D;&#x7684;&#x671F;&#x671B;&#x6536;&#x5230;&#x7684;&#x4E0B;&#x4E00;&#x4E2A;&#x5B57;&#x8282;&#x7684;&#x5E8F;&#x53F7;n&#x4EE5;&#x53CA;&#x7A97;&#x53E3;m&#xFF0C;&#x8FD8;&#x6709;&#x5F53;&#x524D;&#x5DF2;&#x7ECF;&#x53D1;&#x9001;&#x7684;&#x5B57;&#x8282;&#x5E8F;&#x53F7;x&#xFF0C;&#x7B97;&#x51FA;&#x8FD8;&#x53EF;&#x4EE5;&#x53D1;&#x9001;&#x7684;&#x5B57;&#x8282;&#x6570;&#x3002;</strong></p><p>&#x53D1;&#x9001;&#x7AEF;&#x7A97;&#x53E3;&#x7684;&#x7B2C;&#x4E00;&#x4E2A;&#x5B57;&#x8282;&#x5E8F;&#x53F7;&#x4E00;&#x5B9A;&#x662F;ACK&#x4E2D;&#x671F;&#x671B;&#x6536;&#x5230;&#x7684;&#x4E0B;&#x4E00;&#x4E2A;&#x5B57;&#x8282;&#x5E8F;&#x53F7;&#xFF0C;&#x6BD4;&#x5982;&#x4E0B;&#x56FE;&#xFF1A;</p><p><img src="/2019/02/19/&#x8BA1;&#x7B97;&#x673A;&#x7F51;&#x7EDC;/&#x8BA1;&#x7B97;&#x673A;&#x7F51;&#x7EDC;\9c21786770459afa47bfa2e4606cc454_hd.jpg" alt="img">  </p><p>&#x4E0A;&#x56FE;52 53 54 55 &#x5B57;&#x8282;&#x90FD;&#x662F;&#x53EF;&#x4EE5;&#x65B0;&#x53D1;&#x9001;&#x7684;&#x5B57;&#x8282;&#x5E8F;&#x3002;   </p><p>&#x63A5;&#x53D7;&#x7AEF;&#x7A97;&#x53E3;&#x7684;&#x7B2C;&#x4E00;&#x4E2A;&#x5B57;&#x8282;&#x5E8F;&#x4E4B;&#x524D;&#x4E00;&#x5B9A;&#x662F;&#x5DF2;&#x7ECF;&#x5B8C;&#x5168;&#x63A5;&#x6536;&#x7684;&#xFF0C;&#x540E;&#x9762;&#x7A97;&#x53E3;&#x91CC;&#x9762;&#x7684;&#x6570;&#x636E;&#x90FD;&#x662F;&#x5E0C;&#x671B;&#x63A5;&#x53D7;&#x7684;&#xFF0C;&#x7A97;&#x53E3;&#x540E;&#x9762;&#x7684;&#x6570;&#x636E;&#x90FD;&#x662F;&#x4E0D;&#x5E0C;&#x671B;&#x63A5;&#x53D7;&#x7684;&#x3002; </p><p>TCP&#x7684;&#x6ED1;&#x52A8;&#x7A97;&#x53E3;&#x5206;&#x4E3A;&#x63A5;&#x6536;&#x7A97;&#x53E3;&#x548C;&#x53D1;&#x9001;&#x7A97;&#x53E3; &#x4E0D;&#x5206;&#x6790;&#x8FD9;&#x4E24;&#x79CD;&#x7A97;&#x53E3;&#x5C31;&#x8BA8;&#x8BBA;&#x662F;&#x4E0D;&#x59A5;&#x5F53;&#x7684;&#x3002;  TCP&#x7684;&#x6ED1;&#x52A8;&#x7A97;&#x53E3;&#x4E3B;&#x8981;&#x6709;&#x4E24;&#x4E2A;&#x4F5C;&#x7528;&#xFF0C;&#x4E00;&#x662F;&#x63D0;&#x4F9B;TCP&#x7684;&#x53EF;&#x9760;&#x6027;&#xFF0C;&#x4E8C;&#x662F;&#x63D0;&#x4F9B;TCP&#x7684;&#x6D41;&#x63A7;&#x7279;&#x6027;&#x3002;&#x540C;&#x65F6;&#x6ED1;&#x52A8;&#x7A97;&#x53E3;&#x673A;&#x5236;&#x8FD8;&#x4F53;&#x73B0;&#x4E86;TCP&#x9762;&#x5411;&#x5B57;&#x8282;&#x6D41;&#x7684;&#x8BBE;&#x8BA1;&#x601D;&#x8DEF;&#x3002;TCP &#x6BB5;&#x4E2D;&#x7A97;&#x53E3;&#x7684;&#x76F8;&#x5173;&#x5B57;&#x6BB5;&#x3002; </p><p><img src="/2019/02/19/&#x8BA1;&#x7B97;&#x673A;&#x7F51;&#x7EDC;/&#x8BA1;&#x7B97;&#x673A;&#x7F51;&#x7EDC;\d6b970fb6d44aafeeec4a4c9d61a9225_hd.jpg" alt="img"></p><p>TCP&#x7684;Window&#x662F;&#x4E00;&#x4E2A;16bit&#x4F4D;&#x5B57;&#x6BB5;&#xFF0C;&#x5B83;&#x4EE3;&#x8868;&#x7684;&#x662F;&#x7A97;&#x53E3;&#x7684;&#x5B57;&#x8282;&#x5BB9;&#x91CF;&#xFF0C;&#x4E5F;&#x5C31;&#x662F;TCP&#x7684;&#x6807;&#x51C6;&#x7A97;&#x53E3;&#x6700;&#x5927;&#x4E3A;2^16-1=65535&#x4E2A;&#x5B57;&#x8282;&#x3002;</p><p>&#x53E6;&#x5916;&#x5728;TCP&#x7684;&#x9009;&#x9879;&#x5B57;&#x6BB5;&#x4E2D;&#x8FD8;&#x5305;&#x542B;&#x4E86;&#x4E00;&#x4E2A;TCP&#x7A97;&#x53E3;&#x6269;&#x5927;&#x56E0;&#x5B50;&#xFF0C;option-kind&#x4E3A;3&#xFF0C;option-length&#x4E3A;3&#x4E2A;&#x5B57;&#x8282;&#xFF0C;option-data&#x53D6;&#x503C;&#x8303;&#x56F4;0-14&#x3002;&#x7A97;&#x53E3;&#x6269;&#x5927;&#x56E0;&#x5B50;&#x7528;&#x6765;&#x6269;&#x5927;TCP&#x7A97;&#x53E3;&#xFF0C;&#x53EF;&#x628A;&#x539F;&#x6765;16bit&#x7684;&#x7A97;&#x53E3;&#xFF0C;&#x6269;&#x5927;&#x4E3A;31bit&#x3002;</p><h3 id="&#x6ED1;&#x52A8;&#x7A97;&#x53E3;&#x57FA;&#x672C;&#x539F;&#x7406;"><a href="#&#x6ED1;&#x52A8;&#x7A97;&#x53E3;&#x57FA;&#x672C;&#x539F;&#x7406;" class="headerlink" title="&#x6ED1;&#x52A8;&#x7A97;&#x53E3;&#x57FA;&#x672C;&#x539F;&#x7406;"></a>&#x6ED1;&#x52A8;&#x7A97;&#x53E3;&#x57FA;&#x672C;&#x539F;&#x7406;</h3><p>&#x5BF9;&#x4E8E;TCP&#x4F1A;&#x8BDD;&#x7684;&#x53D1;&#x9001;&#x65B9;&#xFF0C;&#x4EFB;&#x4F55;&#x65F6;&#x5019;&#x5728;&#x5176;&#x53D1;&#x9001;&#x7F13;&#x5B58;&#x5185;&#x7684;&#x6570;&#x636E;&#x90FD;&#x53EF;&#x4EE5;&#x5206;&#x4E3A;4&#x7C7B;&#xFF0C;&#x201C;&#x5DF2;&#x7ECF;&#x53D1;&#x9001;&#x5E76;&#x5F97;&#x5230;&#x5BF9;&#x7AEF;ACK&#x7684;&#x201D;&#xFF0C;&#x201C;&#x5DF2;&#x7ECF;&#x53D1;&#x9001;&#x4F46;&#x8FD8;&#x672A;&#x6536;&#x5230;&#x5BF9;&#x7AEF;ACK&#x7684;&#x201D;&#xFF0C;&#x201C;&#x672A;&#x53D1;&#x9001;&#x4F46;&#x5BF9;&#x7AEF;&#x5141;&#x8BB8;&#x53D1;&#x9001;&#x7684;&#x201D;&#xFF0C;&#x201C;&#x672A;&#x53D1;&#x9001;&#x4E14;&#x5BF9;&#x7AEF;&#x4E0D;&#x5141;&#x8BB8;&#x53D1;&#x9001;&#x201D;&#x3002;&#x201C;&#x5DF2;&#x7ECF;&#x53D1;&#x9001;&#x4F46;&#x8FD8;&#x672A;&#x6536;&#x5230;&#x5BF9;&#x7AEF;ACK&#x7684;&#x201D;&#x548C;&#x201C;&#x672A;&#x53D1;&#x9001;&#x4F46;&#x5BF9;&#x7AEF;&#x5141;&#x8BB8;&#x53D1;&#x9001;&#x7684;&#x201D;&#x8FD9;&#x4E24;&#x90E8;&#x5206;&#x6570;&#x636E;&#x79F0;&#x4E4B;&#x4E3A;&#x53D1;&#x9001;&#x7A97;&#x53E3;&#x3002;</p><p><img src="/2019/02/19/&#x8BA1;&#x7B97;&#x673A;&#x7F51;&#x7EDC;/&#x8BA1;&#x7B97;&#x673A;&#x7F51;&#x7EDC;\a1d5c050ad957880094a5f003b1ccd24_hd.jpg" alt="img"></p><p> &#x5F53;&#x6536;&#x5230;&#x63A5;&#x6536;&#x65B9;&#x65B0;&#x7684;ACK&#x5BF9;&#x4E8E;&#x53D1;&#x9001;&#x7A97;&#x53E3;&#x4E2D;&#x540E;&#x7EED;&#x5B57;&#x8282;&#x7684;&#x786E;&#x8BA4;&#x662F;&#xFF0C;&#x7A97;&#x53E3;&#x6ED1;&#x52A8;&#xFF0C;&#x6ED1;&#x52A8;&#x539F;&#x7406;&#x5982;&#x4E0B;&#x56FE;&#x3002; </p><p><img src="/2019/02/19/&#x8BA1;&#x7B97;&#x673A;&#x7F51;&#x7EDC;/&#x8BA1;&#x7B97;&#x673A;&#x7F51;&#x7EDC;\9c21786770459afa47bfa2e4606cc454_hd.jpg" alt="img"></p><p>&#x5F53;&#x6536;&#x5230;ACK=36&#x65F6;&#x7A97;&#x53E3;&#x6ED1;&#x52A8;&#x3002;</p><p>2&#xFF09;&#x5BF9;&#x4E8E;TCP&#x7684;&#x63A5;&#x6536;&#x65B9;&#xFF0C;&#x5728;&#x67D0;&#x4E00;&#x65F6;&#x523B;&#x5728;&#x5B83;&#x7684;&#x63A5;&#x6536;&#x7F13;&#x5B58;&#x5185;&#x5B58;&#x5728;3&#x79CD;&#x3002;&#x201C;&#x5DF2;&#x63A5;&#x6536;&#x201D;&#xFF0C;&#x201C;&#x672A;&#x63A5;&#x6536;&#x51C6;&#x5907;&#x63A5;&#x6536;&#x201D;&#xFF0C;&#x201C;&#x672A;&#x63A5;&#x6536;&#x5E76;&#x672A;&#x51C6;&#x5907;&#x63A5;&#x6536;&#x201D;&#xFF08;&#x7531;&#x4E8E;ACK&#x76F4;&#x63A5;&#x7531;TCP&#x534F;&#x8BAE;&#x6808;&#x56DE;&#x590D;&#xFF0C;&#x9ED8;&#x8BA4;&#x65E0;&#x5E94;&#x7528;&#x5EF6;&#x8FDF;&#xFF0C;&#x4E0D;&#x5B58;&#x5728;&#x201C;&#x5DF2;&#x63A5;&#x6536;&#x672A;&#x56DE;&#x590D;ACK&#x201D;&#xFF09;&#x3002;&#x5176;&#x4E2D;&#x201C;&#x672A;&#x63A5;&#x6536;&#x51C6;&#x5907;&#x63A5;&#x6536;&#x201D;&#x79F0;&#x4E4B;&#x4E3A;&#x63A5;&#x6536;&#x7A97;&#x53E3;&#x3002;</p><h3 id="&#x53D1;&#x9001;&#x7A97;&#x53E3;&#x4E0E;&#x63A5;&#x6536;&#x7A97;&#x53E3;&#x5173;&#x7CFB;"><a href="#&#x53D1;&#x9001;&#x7A97;&#x53E3;&#x4E0E;&#x63A5;&#x6536;&#x7A97;&#x53E3;&#x5173;&#x7CFB;" class="headerlink" title="&#x53D1;&#x9001;&#x7A97;&#x53E3;&#x4E0E;&#x63A5;&#x6536;&#x7A97;&#x53E3;&#x5173;&#x7CFB;"></a>&#x53D1;&#x9001;&#x7A97;&#x53E3;&#x4E0E;&#x63A5;&#x6536;&#x7A97;&#x53E3;&#x5173;&#x7CFB;</h3><p>TCP&#x662F;&#x53CC;&#x5DE5;&#x7684;&#x534F;&#x8BAE;&#xFF0C;&#x4F1A;&#x8BDD;&#x7684;&#x53CC;&#x65B9;&#x90FD;&#x53EF;&#x4EE5;&#x540C;&#x65F6;&#x63A5;&#x6536;&#x3001;&#x53D1;&#x9001;&#x6570;&#x636E;&#x3002;TCP&#x4F1A;&#x8BDD;&#x7684;&#x53CC;&#x65B9;&#x90FD;&#x5404;&#x81EA;&#x7EF4;&#x62A4;&#x4E00;&#x4E2A;&#x201C;&#x53D1;&#x9001;&#x7A97;&#x53E3;&#x201D;&#x548C;&#x4E00;&#x4E2A;&#x201C;&#x63A5;&#x6536;&#x7A97;&#x53E3;&#x201D;&#x3002;&#x5176;&#x4E2D;&#x5404;&#x81EA;&#x7684;&#x201C;&#x63A5;&#x6536;&#x7A97;&#x53E3;&#x201D;&#x5927;&#x5C0F;&#x53D6;&#x51B3;&#x4E8E;&#x5E94;&#x7528;&#x3001;&#x7CFB;&#x7EDF;&#x3001;&#x786C;&#x4EF6;&#x7684;&#x9650;&#x5236;&#xFF08;TCP&#x4F20;&#x8F93;&#x901F;&#x7387;&#x4E0D;&#x80FD;&#x5927;&#x4E8E;&#x5E94;&#x7528;&#x7684;&#x6570;&#x636E;&#x5904;&#x7406;&#x901F;&#x7387;&#xFF09;&#x3002;&#x5404;&#x81EA;&#x7684;&#x201C;&#x53D1;&#x9001;&#x7A97;&#x53E3;&#x201D;&#x5219;&#x8981;&#x6C42;&#x53D6;&#x51B3;&#x4E8E;&#x5BF9;&#x7AEF;&#x901A;&#x544A;&#x7684;&#x201C;&#x63A5;&#x6536;&#x7A97;&#x53E3;&#x201D;&#xFF0C;&#x8981;&#x6C42;&#x76F8;&#x540C;&#x3002;</p><p><img src="/2019/02/19/&#x8BA1;&#x7B97;&#x673A;&#x7F51;&#x7EDC;/&#x8BA1;&#x7B97;&#x673A;&#x7F51;&#x7EDC;\c798dd393fcf7c03b1db78f5bcf0304b_hd.jpg" alt="img"></p><h3 id="&#x6ED1;&#x52A8;&#x7A97;&#x53E3;&#x5B9E;&#x73B0;&#x9762;&#x5411;&#x6D41;&#x7684;&#x53EF;&#x9760;&#x6027;"><a href="#&#x6ED1;&#x52A8;&#x7A97;&#x53E3;&#x5B9E;&#x73B0;&#x9762;&#x5411;&#x6D41;&#x7684;&#x53EF;&#x9760;&#x6027;" class="headerlink" title="&#x6ED1;&#x52A8;&#x7A97;&#x53E3;&#x5B9E;&#x73B0;&#x9762;&#x5411;&#x6D41;&#x7684;&#x53EF;&#x9760;&#x6027;"></a>&#x6ED1;&#x52A8;&#x7A97;&#x53E3;&#x5B9E;&#x73B0;&#x9762;&#x5411;&#x6D41;&#x7684;&#x53EF;&#x9760;&#x6027;</h3><ul><li>&#x6700;&#x57FA;&#x672C;&#x7684;&#x4F20;&#x8F93;&#x53EF;&#x9760;&#x6027;&#x6765;&#x6E90;&#x4E8E;&#x201C;&#x786E;&#x8BA4;&#x91CD;&#x4F20;&#x201D;&#x673A;&#x5236;&#x3002;</li><li>TCP&#x7684;&#x6ED1;&#x52A8;&#x7A97;&#x53E3;&#x7684;&#x53EF;&#x9760;&#x6027;&#x4E5F;&#x662F;&#x5EFA;&#x7ACB;&#x5728;&#x201C;&#x786E;&#x8BA4;&#x91CD;&#x4F20;&#x201D;&#x57FA;&#x7840;&#x4E0A;&#x7684;&#x3002;</li><li>&#x53D1;&#x9001;&#x7A97;&#x53E3;&#x53EA;&#x6709;&#x6536;&#x5230;&#x5BF9;&#x7AEF;&#x5BF9;&#x4E8E;&#x672C;&#x6BB5;&#x53D1;&#x9001;&#x7A97;&#x53E3;&#x5185;&#x5B57;&#x8282;&#x7684;ACK&#x786E;&#x8BA4;&#xFF0C;&#x624D;&#x4F1A;&#x79FB;&#x52A8;&#x53D1;&#x9001;&#x7A97;&#x53E3;&#x7684;&#x5DE6;&#x8FB9;&#x754C;&#x3002;</li><li>&#x63A5;&#x6536;&#x7A97;&#x53E3;&#x53EA;&#x6709;&#x5728;&#x524D;&#x9762;&#x6240;&#x6709;&#x7684;&#x6BB5;&#x90FD;&#x786E;&#x8BA4;&#x7684;&#x60C5;&#x51B5;&#x4E0B;&#x624D;&#x4F1A;&#x79FB;&#x52A8;&#x5DE6;&#x8FB9;&#x754C;&#x3002;&#x5F53;&#x5728;&#x524D;&#x9762;&#x8FD8;&#x6709;&#x5B57;&#x8282;&#x672A;&#x63A5;&#x6536;&#x4F46;&#x6536;&#x5230;&#x540E;&#x9762;&#x5B57;&#x8282;&#x7684;&#x60C5;&#x51B5;&#x4E0B;&#xFF0C;&#x7A97;&#x53E3;&#x4E0D;&#x4F1A;&#x79FB;&#x52A8;&#xFF0C;&#x5E76;&#x4E0D;&#x5BF9;&#x540E;&#x7EED;&#x5B57;&#x8282;&#x786E;&#x8BA4;&#x3002;&#x4EE5;&#x6B64;&#x786E;&#x4FDD;&#x5BF9;&#x7AEF;&#x4F1A;&#x5BF9;&#x8FD9;&#x4E9B;&#x6570;&#x636E;&#x91CD;&#x4F20;&#x3002;</li></ul><h3 id="&#x6ED1;&#x52A8;&#x7A97;&#x53E3;&#x7684;&#x6D41;&#x63A7;&#x7279;&#x6027;"><a href="#&#x6ED1;&#x52A8;&#x7A97;&#x53E3;&#x7684;&#x6D41;&#x63A7;&#x7279;&#x6027;" class="headerlink" title="&#x6ED1;&#x52A8;&#x7A97;&#x53E3;&#x7684;&#x6D41;&#x63A7;&#x7279;&#x6027;"></a>&#x6ED1;&#x52A8;&#x7A97;&#x53E3;&#x7684;&#x6D41;&#x63A7;&#x7279;&#x6027;</h3><p>TCP&#x7684;&#x6ED1;&#x52A8;&#x7A97;&#x53E3;&#x662F;&#x52A8;&#x6001;&#x7684;&#xFF0C;&#x6211;&#x4EEC;&#x53EF;&#x4EE5;&#x60F3;&#x8C61;&#x6210;&#x5C0F;&#x5B66;&#x5E38;&#x89C1;&#x7684;&#x4E00;&#x4E2A;&#x6570;&#x5B66;&#x9898;&#xFF0C;&#x4E00;&#x4E2A;&#x6C34;&#x6C60;&#xFF0C;&#x4F53;&#x79EF;V&#xFF0C;&#x6BCF;&#x5C0F;&#x65F6;&#x8FDB;&#x6C34;&#x91CF;V1&#xFF0C;&#x51FA;&#x6C34;&#x91CF;V2&#x3002;&#x5F53;&#x6C34;&#x6C60;&#x6EE1;&#x4E86;&#x5C31;&#x4E0D;&#x5141;&#x8BB8;&#x518D;&#x6CE8;&#x5165;&#x4E86;&#xFF0C;&#x5982;&#x679C;&#x6709;&#x4E2A;&#x6DB2;&#x538B;&#x7CFB;&#x7EDF;&#x63A7;&#x5236;&#x6C34;&#x6C60;&#x5927;&#x5C0F;&#xFF0C;&#x90A3;&#x4E48;&#x5C31;&#x53EF;&#x4EE5;&#x63A7;&#x5236;&#x6C34;&#x7684;&#x6CE8;&#x5165;&#x901F;&#x7387;&#x548C;&#x91CF;&#x3002;&#x8FD9;&#x6837;&#x7684;&#x6C34;&#x6C60;&#x5C31;&#x7C7B;&#x4F3C;TCP&#x7684;&#x7A97;&#x53E3;&#x3002;&#x5E94;&#x7528;&#x6839;&#x636E;&#x81EA;&#x8EAB;&#x7684;&#x5904;&#x7406;&#x80FD;&#x529B;&#x53D8;&#x5316;&#xFF0C;&#x901A;&#x8FC7;&#x672C;&#x7AEF;TCP&#x63A5;&#x6536;&#x7A97;&#x53E3;&#x5927;&#x5C0F;&#x63A7;&#x5236;&#x6765;&#x5BF9;&#x5BF9;&#x5BF9;&#x7AEF;&#x7684;&#x53D1;&#x9001;&#x7A97;&#x53E3;&#x6D41;&#x91CF;&#x9650;&#x5236;&#x3002;</p><p>&#x5E94;&#x7528;&#x7A0B;&#x5E8F;&#x5728;&#x9700;&#x8981;&#xFF08;&#x5982;&#x5185;&#x5B58;&#x4E0D;&#x8DB3;&#xFF09;&#x65F6;&#xFF0C;&#x901A;&#x8FC7;API&#x901A;&#x77E5;TCP&#x534F;&#x8BAE;&#x6808;&#x7F29;&#x5C0F;TCP&#x7684;&#x63A5;&#x6536;&#x7A97;&#x53E3;&#x3002;&#x7136;&#x540E;TCP&#x534F;&#x8BAE;&#x6808;&#x5728;&#x4E0B;&#x4E2A;&#x6BB5;&#x53D1;&#x9001;&#x65F6;&#x5305;&#x542B;&#x65B0;&#x7684;&#x7A97;&#x53E3;&#x5927;&#x5C0F;&#x901A;&#x77E5;&#x7ED9;&#x5BF9;&#x7AEF;&#xFF0C;&#x5BF9;&#x7AEF;&#x6309;&#x901A;&#x77E5;&#x7684;&#x7A97;&#x53E3;&#x6765;&#x6539;&#x53D8;&#x53D1;&#x9001;&#x7A97;&#x53E3;&#xFF0C;&#x4EE5;&#x6B64;&#x8FBE;&#x5230;&#x51CF;&#x7F13;&#x53D1;&#x9001;&#x901F;&#x7387;&#x7684;&#x76EE;&#x7684;&#x3002;</p><h2 id="HTTP"><a href="#HTTP" class="headerlink" title="HTTP"></a>HTTP</h2><p>HTTP &#x534F;&#x8BAE;&#xFF0C;&#x662F; Hyper Text Transfer Protocol&#xFF08;&#x8D85;&#x6587;&#x672C;&#x4F20;&#x8F93;&#x534F;&#x8BAE;&#xFF09;&#x7684;&#x7F29;&#x5199;&#xFF0C;&#x662F;&#x7528;&#x4E8E;&#x4ECE;&#x4E07;&#x7EF4;&#x7F51;&#xFF08;WWW:World Wide Web &#xFF09;&#x670D;&#x52A1;&#x5668;&#x4F20;&#x8F93;&#x8D85;&#x6587;&#x672C;&#x5230;&#x672C;&#x5730;&#x6D4F;&#x89C8;&#x5668;&#x7684;&#x4F20;&#x9001;&#x534F;&#x8BAE;&#x3002;</p><p>&#x4E3B;&#x8981;&#x7279;&#x70B9;&#x5982;&#x4E0B;&#xFF1A;</p><ul><li>&#x7B80;&#x5355;&#x5FEB;&#x901F;&#xFF1A;&#x5BA2;&#x6237;&#x5411;&#x670D;&#x52A1;&#x5668;&#x8BF7;&#x6C42;&#x670D;&#x52A1;&#x65F6;&#xFF0C;&#x53EA;&#x9700;&#x4F20;&#x9001;&#x8BF7;&#x6C42;&#x65B9;&#x6CD5;&#x548C;&#x8DEF;&#x5F84;&#x3002;&#x8BF7;&#x6C42;&#x65B9;&#x6CD5;&#x5E38;&#x7528;&#x7684;&#x6709; GET&#x3001;HEAD&#x3001;POST &#x7B49;&#x7B49;&#x3002;&#x6BCF;&#x79CD;&#x65B9;&#x6CD5;&#x89C4;&#x5B9A;&#x4E86;&#x5BA2;&#x6237;&#x4E0E;&#x670D;&#x52A1;&#x5668;&#x8054;&#x7CFB;&#x7684;&#x7C7B;&#x578B;&#x4E0D;&#x540C;&#x3002;&#x7531;&#x4E8E; HTTP &#x534F;&#x8BAE;&#x7B80;&#x5355;&#xFF0C;&#x4F7F;&#x5F97; HTTP &#x670D;&#x52A1;&#x5668;&#x7684;&#x7A0B;&#x5E8F;&#x89C4;&#x6A21;&#x5C0F;&#xFF0C;&#x56E0;&#x800C;&#x901A;&#x4FE1;&#x901F;&#x5EA6;&#x5F88;&#x5FEB;&#x3002;</li><li>&#x6570;&#x636E;&#x683C;&#x5F0F;&#x7075;&#x6D3B;&#xFF1A;HTTP &#x5141;&#x8BB8;&#x4F20;&#x8F93;&#x4EFB;&#x610F;&#x7C7B;&#x578B;&#x7684;&#x6570;&#x636E;&#x5BF9;&#x8C61;&#x3002;&#x6B63;&#x5728;&#x4F20;&#x8F93;&#x7684;&#x7C7B;&#x578B;&#x7531;Content-Type &#x52A0;&#x4EE5;&#x6807;&#x8BB0;&#x3002;</li><li>&#x65E0;&#x8FDE;&#x63A5;&#xFF1A;&#x65E0;&#x8FDE;&#x63A5;&#x7684;&#x542B;&#x4E49;&#x662F;&#x9650;&#x5236;&#x6BCF;&#x6B21;&#x8FDE;&#x63A5;&#x53EA;&#x5904;&#x7406;&#x4E00;&#x4E2A;&#x8BF7;&#x6C42;&#x3002;&#x670D;&#x52A1;&#x5668;&#x5904;&#x7406;&#x5B8C;&#x5BA2;&#x6237;&#x7684;&#x8BF7;&#x6C42;&#xFF0C;&#x5E76;&#x6536;&#x5230;&#x5BA2;&#x6237;&#x7684;&#x5E94;&#x7B54;&#x540E;&#xFF0C;&#x5373;&#x65AD;&#x5F00;&#x8FDE;&#x63A5;&#x3002;&#x91C7;&#x7528;&#x8FD9;&#x79CD;&#x65B9;&#x5F0F;&#x53EF;&#x4EE5;&#x8282;&#x7701;&#x4F20;&#x8F93;&#x65F6;&#x95F4;&#x3002;</li><li>&#x65E0;&#x72B6;&#x6001;&#xFF1A;HTTP &#x534F;&#x8BAE;&#x662F;&#x65E0;&#x72B6;&#x6001;&#x534F;&#x8BAE;&#x3002;&#x65E0;&#x72B6;&#x6001;&#xFF0C;&#x662F;&#x6307;&#x534F;&#x8BAE;&#x5BF9;&#x4E8E;&#x4E8B;&#x52A1;&#x5904;&#x7406;&#x6CA1;&#x6709;&#x8BB0;&#x5FC6;&#x80FD;&#x529B;&#x3002;&#x65E0;&#x72B6;&#x6001;&#x610F;&#x5473;&#x7740;&#x5982;&#x679C;&#x540E;&#x7EED;&#x5904;&#x7406;&#x9700;&#x8981;&#x524D;&#x9762;&#x7684;&#x4FE1;&#x606F;&#xFF0C;&#x5219;&#x5B83;&#x5FC5;&#x987B;&#x91CD;&#x4F20;&#xFF0C;&#x8FD9;&#x6837;&#x53EF;&#x80FD;&#x5BFC;&#x81F4;&#x6BCF;&#x6B21;&#x8FDE;&#x63A5;&#x4F20;&#x9001;&#x7684;&#x6570;&#x636E;&#x91CF;&#x589E;&#x5927;&#x3002;&#x53E6;&#x4E00;&#x65B9;&#x9762;&#xFF0C;&#x5728;&#x670D;&#x52A1;&#x5668;&#x4E0D;&#x9700;&#x8981;&#x5148;&#x524D;&#x4FE1;&#x606F;&#x65F6;&#x5B83;&#x7684;&#x5E94;&#x7B54;&#x5C31;&#x8F83;&#x5FEB;&#x3002;</li><li>&#x652F;&#x6301; B/S &#x53CA; C/S &#x6A21;&#x5F0F;&#x3002;</li></ul><h3 id="GET-&#x548C;-POST-&#x533A;&#x522B;"><a href="#GET-&#x548C;-POST-&#x533A;&#x522B;" class="headerlink" title="GET &#x548C; POST &#x533A;&#x522B;"></a>GET &#x548C; POST &#x533A;&#x522B;</h3><p>&#x4ECE;&#x4E09;&#x4E2A;&#x5C42;&#x9762;&#x6765;&#x89E3;&#x7B54;&#xFF1A;</p><ul><li>Http &#x62A5;&#x6587;&#x5C42;&#x9762;&#xFF1A;GET &#x5C06;&#x8BF7;&#x6C42;&#x4FE1;&#x606F;&#x653E;&#x5728; URL&#x4E2D;&#xFF0C;POST &#x65B9;&#x6CD5;&#x62A5;&#x6587;&#x4E2D;</li><li>&#x6570;&#x636E;&#x5E93;&#x5C42;&#x9762;&#xFF1A;GET &#x7B26;&#x5408;&#x5E42;&#x7B49;&#x6027;&#x548C;&#x5B89;&#x5168;&#x6027;&#xFF0C;POST &#x4E0D;&#x7B26;&#x5408;</li><li>&#x5176;&#x4ED6;&#x5C42;&#x9762;&#xFF1A;GET &#x53EF;&#x4EE5;&#x88AB;&#x7F13;&#x5B58;&#x3001;&#x88AB;&#x5B58;&#x50A8;&#xFF08;&#x4E66;&#x7B7E;&#xFF09;&#xFF0C;&#x800C; POST &#x4E0D;&#x884C;</li></ul><h3 id="Cookie-&#x548C;-Session-&#x7684;&#x533A;&#x522B;"><a href="#Cookie-&#x548C;-Session-&#x7684;&#x533A;&#x522B;" class="headerlink" title="Cookie &#x548C; Session &#x7684;&#x533A;&#x522B;"></a>Cookie &#x548C; Session &#x7684;&#x533A;&#x522B;</h3><p><strong>Cookie &#x7B80;&#x4ECB;&#xFF1A;</strong></p><ul><li>&#x662F;&#x7531;&#x670D;&#x52A1;&#x5668;&#x53D1;&#x7ED9;&#x5BA2;&#x6237;&#x7AEF;&#x7684;&#x7279;&#x6B8A;&#x4FE1;&#x606F;&#xFF0C;&#x4EE5;&#x6587;&#x672C;&#x7684;&#x5F62;&#x5F0F;&#x5B58;&#x653E;&#x5728;&#x5BA2;&#x6237;&#x7AEF;</li><li>&#x5BA2;&#x6237;&#x7AEF;&#x518D;&#x6B21;&#x8BF7;&#x6C42;&#x7684;&#x65F6;&#x5019;&#xFF0C;&#x4F1A;&#x628A; Cookie &#x56DE;&#x53D1;&#x7ED9;&#x670D;&#x52A1;&#x7AEF;</li><li>&#x670D;&#x52A1;&#x5668;&#x63A5;&#x6536;&#x5230;&#x540E;&#xFF0C;&#x4F1A;&#x89E3;&#x6790; Cookie &#x751F;&#x6210;&#x4E0E;&#x5BA2;&#x6237;&#x7AEF;&#x76F8;&#x5BF9;&#x7684;&#x5185;&#x5BB9;</li></ul><p><strong>Cookiet &#x7684;&#x8BBE;&#x7F6E;&#x4EE5;&#x53CA;&#x53D1;&#x9001;&#x8FC7;&#x7A0B;&#xFF1A;</strong></p><p><img src="/2019/02/19/&#x8BA1;&#x7B97;&#x673A;&#x7F51;&#x7EDC;/&#x8BA1;&#x7B97;&#x673A;&#x7F51;&#x7EDC;\tisdfsdfrgremg.jpg" alt="tisdfsdfrgremg"></p><p><strong>Session &#x7B80;&#x4ECB;&#xFF1A;</strong></p><ul><li>&#x670D;&#x52A1;&#x7AEF;&#x7684;&#x673A;&#x5236;&#xFF0C;&#x5728;&#x670D;&#x52A1;&#x7AEF;&#x4FDD;&#x5B58;&#x7684;&#x4FE1;&#x606F;</li><li>&#x89E3;&#x6790;&#x5BA2;&#x6237;&#x7AEF;&#x8BF7;&#x6C42;&#x5E76;&#x64CD;&#x4F5C; Session id &#xFF0C;&#x6309;&#x9700;&#x4FDD;&#x5B58;&#x72B6;&#x6001;&#x4FE1;&#x606F;</li></ul><p><strong>Session &#x7684;&#x5B9E;&#x73B0;&#x65B9;&#x5F0F;&#xFF1A;</strong></p><ul><li>&#x4F7F;&#x7528; Cookie &#x6765;&#x5B9E;&#x73B0;</li><li>&#x4F7F;&#x7528; URL &#x56DE;&#x5199;&#x6765;&#x5B9E;&#x73B0;&#xFF0C;&#x6BCF;&#x6B21;&#x5728; URL &#x6DFB;&#x52A0; Session id &#x4FE1;&#x606F;</li></ul><p><strong>&#x533A;&#x522B;</strong>&#xFF1A;</p><ul><li>Cookie &#x6570;&#x636E;&#x5B58;&#x653E;&#x5728;&#x5BA2;&#x6237;&#x7AEF;&#x7684;&#x6D4F;&#x89C8;&#x5668;&#x4E0A;&#xFF0C;Session &#x6570;&#x636E;&#x5B58;&#x653E;&#x5728;&#x670D;&#x52A1;&#x5668;&#x4E0A;</li><li>Session &#x76F8;&#x5BF9;&#x4E8E; Cookie &#x66F4;&#x5B89;&#x5168;</li><li>&#x82E5;&#x8003;&#x8651;&#x51CF;&#x8F7B;&#x670D;&#x52A1;&#x5668;&#x8D1F;&#x62C5;&#xFF0C;&#x5E94;&#x5F53;&#x4F7F;&#x7528; Cookie</li></ul><h3 id="HTTP-&#x548C;-HTTPs-&#x7684;&#x533A;&#x522B;"><a href="#HTTP-&#x548C;-HTTPs-&#x7684;&#x533A;&#x522B;" class="headerlink" title="HTTP &#x548C; HTTPs &#x7684;&#x533A;&#x522B;"></a>HTTP &#x548C; HTTPs &#x7684;&#x533A;&#x522B;</h3><p><img src="/2019/02/19/&#x8BA1;&#x7B97;&#x673A;&#x7F51;&#x7EDC;/&#x8BA1;&#x7B97;&#x673A;&#x7F51;&#x7EDC;\1550579240583.png" alt="1550579240583"></p><h4 id="SSL-Security-Sockets-Layer-&#x5B89;&#x5168;&#x5957;&#x63A5;&#x5C42;"><a href="#SSL-Security-Sockets-Layer-&#x5B89;&#x5168;&#x5957;&#x63A5;&#x5C42;" class="headerlink" title="SSL (Security Sockets Layer) &#x5B89;&#x5168;&#x5957;&#x63A5;&#x5C42;"></a>SSL (Security Sockets Layer) &#x5B89;&#x5168;&#x5957;&#x63A5;&#x5C42;</h4><ul><li>&#x4E3A;&#x7F51;&#x7EDC;&#x901A;&#x4FE1;&#x63D0;&#x4F9B;&#x5B89;&#x5168;&#x53CA;&#x6570;&#x636E;&#x5B8C;&#x6574;&#x6027;&#x7684;&#x4E00;&#x79CD;&#x5B89;&#x5168;&#x534F;&#x8BAE;</li><li>&#x662F;&#x64CD;&#x4F5C;&#x7CFB;&#x7EDF;&#x5BF9;&#x5916;&#x7684; API&#xFF0C;SSL 3.0 &#x66F4;&#x540D;&#x4E3A; TLS</li><li>&#x91C7;&#x7528;&#x8EAB;&#x4EFD;&#x9A8C;&#x8BC1;&#x548C;&#x6570;&#x636E;&#x52A0;&#x5BC6;&#x6765;&#x4FDD;&#x8BC1;&#x7F51;&#x7EDC;&#x7684;&#x901A;&#x4FE1;&#x7684;&#x5B89;&#x5168;&#x548C;&#x6570;&#x636E;&#x7684;&#x5B8C;&#x6574;&#x6027;</li></ul><h4 id="&#x533A;&#x522B;"><a href="#&#x533A;&#x522B;" class="headerlink" title="&#x533A;&#x522B;"></a>&#x533A;&#x522B;</h4><ul><li>HTTPS &#x9700;&#x8981;&#x5230; CA &#x7533;&#x8BF7;&#x8BC1;&#x4E66;&#xFF0C;HTTP &#x4E0D;&#x9700;&#x8981;</li><li>HTTPS &#x5BC6;&#x6587;&#x4F20;&#x8F93;&#xFF0C;HTTP &#x660E;&#x6587;&#x4F20;&#x8F93;</li><li>&#x8FDE;&#x63A5;&#x65B9;&#x5F0F;&#x4E0D;&#x540C;&#xFF0C;HTTPS &#x9ED8;&#x8BA4;&#x4F7F;&#x7528; 443 &#x7AEF;&#x53E3;&#xFF0C;HTTP &#x4F7F;&#x7528; 80 &#x7AEF;&#x53E3;</li><li>HTTPS = HTTP + &#x52A0;&#x5BC6; + &#x8BA4;&#x8BC1; + &#x5B8C;&#x6574;&#x6027;&#x4FDD;&#x62A4;&#xFF0C;&#x8F83; HTTP &#x5B89;&#x5168;</li></ul><h3 id="&#x5176;&#x4ED6;&#x5185;&#x5BB9;"><a href="#&#x5176;&#x4ED6;&#x5185;&#x5BB9;" class="headerlink" title="&#x5176;&#x4ED6;&#x5185;&#x5BB9;"></a>&#x5176;&#x4ED6;&#x5185;&#x5BB9;</h3><ul><li>&#x4E00; &#x3001;&#x57FA;&#x7840;&#x6982;&#x5FF5;<ul><li><a href="https://github.com/CyC2018/CS-Notes/blob/master/docs/notes/HTTP.md#uri" target="_blank" rel="noopener">URI</a></li><li><a href="https://github.com/CyC2018/CS-Notes/blob/master/docs/notes/HTTP.md#%E8%AF%B7%E6%B1%82%E5%92%8C%E5%93%8D%E5%BA%94%E6%8A%A5%E6%96%87" target="_blank" rel="noopener">&#x8BF7;&#x6C42;&#x548C;&#x54CD;&#x5E94;&#x62A5;&#x6587;</a></li></ul></li><li>&#x4E8C;&#x3001;HTTP &#x65B9;&#x6CD5;<ul><li><a href="https://github.com/CyC2018/CS-Notes/blob/master/docs/notes/HTTP.md#get" target="_blank" rel="noopener">GET</a></li><li><a href="https://github.com/CyC2018/CS-Notes/blob/master/docs/notes/HTTP.md#head" target="_blank" rel="noopener">HEAD</a></li><li><a href="https://github.com/CyC2018/CS-Notes/blob/master/docs/notes/HTTP.md#post" target="_blank" rel="noopener">POST</a></li><li><a href="https://github.com/CyC2018/CS-Notes/blob/master/docs/notes/HTTP.md#put" target="_blank" rel="noopener">PUT</a></li><li><a href="https://github.com/CyC2018/CS-Notes/blob/master/docs/notes/HTTP.md#patch" target="_blank" rel="noopener">PATCH</a></li><li><a href="https://github.com/CyC2018/CS-Notes/blob/master/docs/notes/HTTP.md#delete" target="_blank" rel="noopener">DELETE</a></li><li><a href="https://github.com/CyC2018/CS-Notes/blob/master/docs/notes/HTTP.md#options" target="_blank" rel="noopener">OPTIONS</a></li><li><a href="https://github.com/CyC2018/CS-Notes/blob/master/docs/notes/HTTP.md#connect" target="_blank" rel="noopener">CONNECT</a></li><li><a href="https://github.com/CyC2018/CS-Notes/blob/master/docs/notes/HTTP.md#trace" target="_blank" rel="noopener">TRACE</a></li></ul></li><li>&#x4E09;&#x3001;HTTP &#x72B6;&#x6001;&#x7801;<ul><li><a href="https://github.com/CyC2018/CS-Notes/blob/master/docs/notes/HTTP.md#1xx-%E4%BF%A1%E6%81%AF" target="_blank" rel="noopener">1XX &#x4FE1;&#x606F;</a></li><li><a href="https://github.com/CyC2018/CS-Notes/blob/master/docs/notes/HTTP.md#2xx-%E6%88%90%E5%8A%9F" target="_blank" rel="noopener">2XX &#x6210;&#x529F;</a></li><li><a href="https://github.com/CyC2018/CS-Notes/blob/master/docs/notes/HTTP.md#3xx-%E9%87%8D%E5%AE%9A%E5%90%91" target="_blank" rel="noopener">3XX &#x91CD;&#x5B9A;&#x5411;</a></li><li><a href="https://github.com/CyC2018/CS-Notes/blob/master/docs/notes/HTTP.md#4xx-%E5%AE%A2%E6%88%B7%E7%AB%AF%E9%94%99%E8%AF%AF" target="_blank" rel="noopener">4XX &#x5BA2;&#x6237;&#x7AEF;&#x9519;&#x8BEF;</a></li><li><a href="https://github.com/CyC2018/CS-Notes/blob/master/docs/notes/HTTP.md#5xx-%E6%9C%8D%E5%8A%A1%E5%99%A8%E9%94%99%E8%AF%AF" target="_blank" rel="noopener">5XX &#x670D;&#x52A1;&#x5668;&#x9519;&#x8BEF;</a></li></ul></li><li>&#x56DB;&#x3001;HTTP &#x9996;&#x90E8;<ul><li><a href="https://github.com/CyC2018/CS-Notes/blob/master/docs/notes/HTTP.md#%E9%80%9A%E7%94%A8%E9%A6%96%E9%83%A8%E5%AD%97%E6%AE%B5" target="_blank" rel="noopener">&#x901A;&#x7528;&#x9996;&#x90E8;&#x5B57;&#x6BB5;</a></li><li><a href="https://github.com/CyC2018/CS-Notes/blob/master/docs/notes/HTTP.md#%E8%AF%B7%E6%B1%82%E9%A6%96%E9%83%A8%E5%AD%97%E6%AE%B5" target="_blank" rel="noopener">&#x8BF7;&#x6C42;&#x9996;&#x90E8;&#x5B57;&#x6BB5;</a></li><li><a href="https://github.com/CyC2018/CS-Notes/blob/master/docs/notes/HTTP.md#%E5%93%8D%E5%BA%94%E9%A6%96%E9%83%A8%E5%AD%97%E6%AE%B5" target="_blank" rel="noopener">&#x54CD;&#x5E94;&#x9996;&#x90E8;&#x5B57;&#x6BB5;</a></li><li><a href="https://github.com/CyC2018/CS-Notes/blob/master/docs/notes/HTTP.md#%E5%AE%9E%E4%BD%93%E9%A6%96%E9%83%A8%E5%AD%97%E6%AE%B5" target="_blank" rel="noopener">&#x5B9E;&#x4F53;&#x9996;&#x90E8;&#x5B57;&#x6BB5;</a></li></ul></li><li>&#x4E94;&#x3001;&#x5177;&#x4F53;&#x5E94;&#x7528;<ul><li><a href="https://github.com/CyC2018/CS-Notes/blob/master/docs/notes/HTTP.md#%E8%BF%9E%E6%8E%A5%E7%AE%A1%E7%90%86" target="_blank" rel="noopener">&#x8FDE;&#x63A5;&#x7BA1;&#x7406;</a></li><li><a href="https://github.com/CyC2018/CS-Notes/blob/master/docs/notes/HTTP.md#cookie" target="_blank" rel="noopener">Cookie</a></li><li><a href="https://github.com/CyC2018/CS-Notes/blob/master/docs/notes/HTTP.md#%E7%BC%93%E5%AD%98" target="_blank" rel="noopener">&#x7F13;&#x5B58;</a></li><li><a href="https://github.com/CyC2018/CS-Notes/blob/master/docs/notes/HTTP.md#%E5%86%85%E5%AE%B9%E5%8D%8F%E5%95%86" target="_blank" rel="noopener">&#x5185;&#x5BB9;&#x534F;&#x5546;</a></li><li><a href="https://github.com/CyC2018/CS-Notes/blob/master/docs/notes/HTTP.md#%E5%86%85%E5%AE%B9%E7%BC%96%E7%A0%81" target="_blank" rel="noopener">&#x5185;&#x5BB9;&#x7F16;&#x7801;</a></li><li><a href="https://github.com/CyC2018/CS-Notes/blob/master/docs/notes/HTTP.md#%E8%8C%83%E5%9B%B4%E8%AF%B7%E6%B1%82" target="_blank" rel="noopener">&#x8303;&#x56F4;&#x8BF7;&#x6C42;</a></li><li><a href="https://github.com/CyC2018/CS-Notes/blob/master/docs/notes/HTTP.md#%E5%88%86%E5%9D%97%E4%BC%A0%E8%BE%93%E7%BC%96%E7%A0%81" target="_blank" rel="noopener">&#x5206;&#x5757;&#x4F20;&#x8F93;&#x7F16;&#x7801;</a></li><li><a href="https://github.com/CyC2018/CS-Notes/blob/master/docs/notes/HTTP.md#%E5%A4%9A%E9%83%A8%E5%88%86%E5%AF%B9%E8%B1%A1%E9%9B%86%E5%90%88" target="_blank" rel="noopener">&#x591A;&#x90E8;&#x5206;&#x5BF9;&#x8C61;&#x96C6;&#x5408;</a></li><li><a href="https://github.com/CyC2018/CS-Notes/blob/master/docs/notes/HTTP.md#%E8%99%9A%E6%8B%9F%E4%B8%BB%E6%9C%BA" target="_blank" rel="noopener">&#x865A;&#x62DF;&#x4E3B;&#x673A;</a></li><li><a href="https://github.com/CyC2018/CS-Notes/blob/master/docs/notes/HTTP.md#%E9%80%9A%E4%BF%A1%E6%95%B0%E6%8D%AE%E8%BD%AC%E5%8F%91" target="_blank" rel="noopener">&#x901A;&#x4FE1;&#x6570;&#x636E;&#x8F6C;&#x53D1;</a></li></ul></li><li>&#x516D;&#x3001;HTTPs<ul><li><a href="https://github.com/CyC2018/CS-Notes/blob/master/docs/notes/HTTP.md#%E5%8A%A0%E5%AF%86" target="_blank" rel="noopener">&#x52A0;&#x5BC6;</a></li><li><a href="https://github.com/CyC2018/CS-Notes/blob/master/docs/notes/HTTP.md#%E8%AE%A4%E8%AF%81" target="_blank" rel="noopener">&#x8BA4;&#x8BC1;</a></li><li><a href="https://github.com/CyC2018/CS-Notes/blob/master/docs/notes/HTTP.md#%E5%AE%8C%E6%95%B4%E6%80%A7%E4%BF%9D%E6%8A%A4" target="_blank" rel="noopener">&#x5B8C;&#x6574;&#x6027;&#x4FDD;&#x62A4;</a></li><li><a href="https://github.com/CyC2018/CS-Notes/blob/master/docs/notes/HTTP.md#https-%E7%9A%84%E7%BC%BA%E7%82%B9" target="_blank" rel="noopener">HTTPs &#x7684;&#x7F3A;&#x70B9;</a></li></ul></li><li>&#x4E03;&#x3001;HTTP/2.0<ul><li><a href="https://github.com/CyC2018/CS-Notes/blob/master/docs/notes/HTTP.md#http1x-%E7%BC%BA%E9%99%B7" target="_blank" rel="noopener">HTTP/1.x &#x7F3A;&#x9677;</a></li><li><a href="https://github.com/CyC2018/CS-Notes/blob/master/docs/notes/HTTP.md#%E4%BA%8C%E8%BF%9B%E5%88%B6%E5%88%86%E5%B8%A7%E5%B1%82" target="_blank" rel="noopener">&#x4E8C;&#x8FDB;&#x5236;&#x5206;&#x5E27;&#x5C42;</a></li><li><a href="https://github.com/CyC2018/CS-Notes/blob/master/docs/notes/HTTP.md#%E6%9C%8D%E5%8A%A1%E7%AB%AF%E6%8E%A8%E9%80%81" target="_blank" rel="noopener">&#x670D;&#x52A1;&#x7AEF;&#x63A8;&#x9001;</a></li><li><a href="https://github.com/CyC2018/CS-Notes/blob/master/docs/notes/HTTP.md#%E9%A6%96%E9%83%A8%E5%8E%8B%E7%BC%A9" target="_blank" rel="noopener">&#x9996;&#x90E8;&#x538B;&#x7F29;</a></li></ul></li><li><a href="https://github.com/CyC2018/CS-Notes/blob/master/docs/notes/HTTP.md#%E5%85%ABhttp11-%E6%96%B0%E7%89%B9%E6%80%A7" target="_blank" rel="noopener">&#x516B;&#x3001;HTTP/1.1 &#x65B0;&#x7279;&#x6027;</a></li><li>&#x4E5D;&#x3001;GET &#x548C; POST &#x6BD4;&#x8F83;<ul><li><a href="https://github.com/CyC2018/CS-Notes/blob/master/docs/notes/HTTP.md#%E4%BD%9C%E7%94%A8" target="_blank" rel="noopener">&#x4F5C;&#x7528;</a></li><li><a href="https://github.com/CyC2018/CS-Notes/blob/master/docs/notes/HTTP.md#%E5%8F%82%E6%95%B0" target="_blank" rel="noopener">&#x53C2;&#x6570;</a></li><li><a href="https://github.com/CyC2018/CS-Notes/blob/master/docs/notes/HTTP.md#%E5%AE%89%E5%85%A8" target="_blank" rel="noopener">&#x5B89;&#x5168;</a></li><li><a href="https://github.com/CyC2018/CS-Notes/blob/master/docs/notes/HTTP.md#%E5%B9%82%E7%AD%89%E6%80%A7" target="_blank" rel="noopener">&#x5E42;&#x7B49;&#x6027;</a></li><li><a href="https://github.com/CyC2018/CS-Notes/blob/master/docs/notes/HTTP.md#%E5%8F%AF%E7%BC%93%E5%AD%98" target="_blank" rel="noopener">&#x53EF;&#x7F13;&#x5B58;</a></li><li><a href="https://github.com/CyC2018/CS-Notes/blob/master/docs/notes/HTTP.md#xmlhttprequest" target="_blank" rel="noopener">XMLHttpRequest</a></li></ul></li></ul><h2 id="&#x6D4F;&#x89C8;&#x5668;&#x8F93;&#x5165;&#x5730;&#x5740;&#x56DE;&#x8F66;&#x540E;&#x53D1;&#x751F;&#x7684;&#x4E8B;&#x60C5;"><a href="#&#x6D4F;&#x89C8;&#x5668;&#x8F93;&#x5165;&#x5730;&#x5740;&#x56DE;&#x8F66;&#x540E;&#x53D1;&#x751F;&#x7684;&#x4E8B;&#x60C5;" class="headerlink" title="&#x6D4F;&#x89C8;&#x5668;&#x8F93;&#x5165;&#x5730;&#x5740;&#x56DE;&#x8F66;&#x540E;&#x53D1;&#x751F;&#x7684;&#x4E8B;&#x60C5;"></a>&#x6D4F;&#x89C8;&#x5668;&#x8F93;&#x5165;&#x5730;&#x5740;&#x56DE;&#x8F66;&#x540E;&#x53D1;&#x751F;&#x7684;&#x4E8B;&#x60C5;</h2><ol><li>DNS&#x89E3;&#x6790;</li><li>TCP&#x8FDE;&#x63A5;</li><li>&#x53D1;&#x9001;HTTP&#x8BF7;&#x6C42;</li><li>&#x670D;&#x52A1;&#x5668;&#x5904;&#x7406;&#x8BF7;&#x6C42;&#x5E76;&#x8FD4;&#x56DE;HTTP&#x62A5;&#x6587;</li><li>&#x6D4F;&#x89C8;&#x5668;&#x89E3;&#x6790;&#x6E32;&#x67D3;&#x9875;&#x9762;</li><li>&#x8FDE;&#x63A5;&#x7ED3;&#x675F;</li></ol><h2 id="Socket-&#x901A;&#x4FE1;"><a href="#Socket-&#x901A;&#x4FE1;" class="headerlink" title="Socket &#x901A;&#x4FE1;"></a>Socket &#x901A;&#x4FE1;</h2><p>TCP/IP&#xFF08;Transmission Control Protocol/Internet Protocol&#xFF09;&#x5373;&#x4F20;&#x8F93;&#x63A7;&#x5236;&#x534F;&#x8BAE;/&#x7F51;&#x95F4;&#x534F;&#x8BAE;&#xFF0C;&#x662F;&#x4E00;&#x4E2A;&#x5DE5;&#x4E1A;&#x6807;&#x51C6;&#x7684;&#x534F;&#x8BAE;&#x96C6;&#xFF0C;&#x5B83;&#x662F;&#x4E3A;&#x5E7F;&#x57DF;&#x7F51;&#xFF08;WANs&#xFF09;&#x8BBE;&#x8BA1;&#x7684;&#x3002;UDP&#xFF08;User Data Protocol&#xFF0C;&#x7528;&#x6237;&#x6570;&#x636E;&#x62A5;&#x534F;&#x8BAE;&#xFF09;&#x662F;&#x4E0E;TCP&#x76F8;&#x5BF9;&#x5E94;&#x7684;&#x534F;&#x8BAE;&#x3002;&#x5B83;&#x662F;&#x5C5E;&#x4E8E; TCP/IP &#x534F;&#x8BAE;&#x65CF;&#x4E2D;&#x7684;&#x4E00;&#x79CD;&#x3002; &#x8FD9;&#x91CC;&#x6709;&#x4E00;&#x5F20;&#x56FE;&#xFF0C;&#x8868;&#x660E;&#x4E86;&#x8FD9;&#x4E9B;&#x534F;&#x8BAE;&#x7684;&#x5173;&#x7CFB;&#x3002; </p><p><img src="/2019/02/19/&#x8BA1;&#x7B97;&#x673A;&#x7F51;&#x7EDC;/&#x8BA1;&#x7B97;&#x673A;&#x7F51;&#x7EDC;\socket1.jpg" alt="img"><br>TCP/IP&#x534F;&#x8BAE;&#x65CF;&#x5305;&#x62EC;&#x8FD0;&#x8F93;&#x5C42;&#x3001;&#x7F51;&#x7EDC;&#x5C42;&#x3001;&#x94FE;&#x8DEF;&#x5C42;&#x3002;&#x73B0;&#x5728;&#x4F60;&#x77E5;&#x9053;TCP/IP&#x4E0E;UDP&#x7684;&#x5173;&#x7CFB;&#x4E86;&#x5427;&#x3002;</p><p><strong>Socket&#x5728;&#x54EA;&#x91CC;&#x5462;&#xFF1F; </strong></p><p>&#x4E0A;&#x56FE;&#x6211;&#x4EEC;&#x6CA1;&#x6709;&#x770B;&#x5230; Socket &#x7684;&#x5F71;&#x5B50;&#xFF0C;&#x90A3;&#x4E48;&#x5B83;&#x5230;&#x5E95;&#x5728;&#x54EA;&#x91CC;&#x5462;&#xFF1F;&#x8FD8;&#x662F;&#x7528;&#x56FE;&#x6765;&#x8BF4;&#x8BDD;&#xFF0C;&#x4E00;&#x76EE;&#x4E86;&#x7136;&#x3002;</p><p><img src="/2019/02/19/&#x8BA1;&#x7B97;&#x673A;&#x7F51;&#x7EDC;/&#x8BA1;&#x7B97;&#x673A;&#x7F51;&#x7EDC;\socket2.jpg" alt="img"></p><p><strong>Socket &#x662F;&#x4EC0;&#x4E48;&#x5462;&#xFF1F;</strong></p><p>Socket &#x662F;&#x5E94;&#x7528;&#x5C42;&#x4E0E; TCP/IP &#x534F;&#x8BAE;&#x65CF;&#x901A;&#x4FE1;&#x7684;&#x4E2D;&#x95F4;&#x8F6F;&#x4EF6;&#x62BD;&#x8C61;&#x5C42;&#xFF0C;&#x5B83;&#x662F;&#x4E00;&#x7EC4;&#x63A5;&#x53E3;&#x3002;&#x5728;&#x8BBE;&#x8BA1;&#x6A21;&#x5F0F;&#x4E2D;&#xFF0C;Socket &#x5176;&#x5B9E;&#x5C31;&#x662F;&#x4E00;&#x4E2A;&#x95E8;&#x9762;&#x6A21;&#x5F0F;&#xFF0C;&#x5B83;&#x628A;&#x590D;&#x6742;&#x7684; TCP/IP &#x534F;&#x8BAE;&#x65CF;&#x9690;&#x85CF;&#x5728; Socket &#x63A5;&#x53E3;&#x540E;&#x9762;&#xFF0C;&#x5BF9;&#x7528;&#x6237;&#x6765;&#x8BF4;&#xFF0C;&#x4E00;&#x7EC4;&#x7B80;&#x5355;&#x7684;&#x63A5;&#x53E3;&#x5C31;&#x662F;&#x5168;&#x90E8;&#xFF0C;&#x8BA9;Socket&#x53BB;&#x7EC4;&#x7EC7;&#x6570;&#x636E;&#xFF0C;&#x4EE5;&#x7B26;&#x5408;&#x6307;&#x5B9A;&#x7684;&#x534F;&#x8BAE;&#x3002;</p><h3 id="Socket-&#x901A;&#x4FE1;&#x539F;&#x7406;"><a href="#Socket-&#x901A;&#x4FE1;&#x539F;&#x7406;" class="headerlink" title="Socket &#x901A;&#x4FE1;&#x539F;&#x7406;"></a>Socket &#x901A;&#x4FE1;&#x539F;&#x7406;</h3><p><img src="/2019/02/19/&#x8BA1;&#x7B97;&#x673A;&#x7F51;&#x7EDC;/&#x8BA1;&#x7B97;&#x673A;&#x7F51;&#x7EDC;\socket3.jpg" alt="img"></p><p>&#x5148;&#x4ECE;&#x670D;&#x52A1;&#x5668;&#x7AEF;&#x8BF4;&#x8D77;&#x3002;&#x670D;&#x52A1;&#x5668;&#x7AEF;&#x5148;&#x521D;&#x59CB;&#x5316;Socket&#xFF0C;&#x7136;&#x540E;&#x4E0E;&#x7AEF;&#x53E3;&#x7ED1;&#x5B9A;(bind)&#xFF0C;&#x5BF9;&#x7AEF;&#x53E3;&#x8FDB;&#x884C;&#x76D1;&#x542C;(listen)&#xFF0C;&#x8C03;&#x7528;accept&#x963B;&#x585E;&#xFF0C;&#x7B49;&#x5F85;&#x5BA2;&#x6237;&#x7AEF;&#x8FDE;&#x63A5;&#x3002;&#x5728;&#x8FD9;&#x65F6;&#x5982;&#x679C;&#x6709;&#x4E2A;&#x5BA2;&#x6237;&#x7AEF;&#x521D;&#x59CB;&#x5316;&#x4E00;&#x4E2A;Socket&#xFF0C;&#x7136;&#x540E;&#x8FDE;&#x63A5;&#x670D;&#x52A1;&#x5668;(connect)&#xFF0C;&#x5982;&#x679C;&#x8FDE;&#x63A5;&#x6210;&#x529F;&#xFF0C;&#x8FD9;&#x65F6;&#x5BA2;&#x6237;&#x7AEF;&#x4E0E;&#x670D;&#x52A1;&#x5668;&#x7AEF;&#x7684;&#x8FDE;&#x63A5;&#x5C31;&#x5EFA;&#x7ACB;&#x4E86;&#x3002;&#x5BA2;&#x6237;&#x7AEF;&#x53D1;&#x9001;&#x6570;&#x636E;&#x8BF7;&#x6C42;&#xFF0C;&#x670D;&#x52A1;&#x5668;&#x7AEF;&#x63A5;&#x6536;&#x8BF7;&#x6C42;&#x5E76;&#x5904;&#x7406;&#x8BF7;&#x6C42;&#xFF0C;&#x7136;&#x540E;&#x628A;&#x56DE;&#x5E94;&#x6570;&#x636E;&#x53D1;&#x9001;&#x7ED9;&#x5BA2;&#x6237;&#x7AEF;&#xFF0C;&#x5BA2;&#x6237;&#x7AEF;&#x8BFB;&#x53D6;&#x6570;&#x636E;&#xFF0C;&#x6700;&#x540E;&#x5173;&#x95ED;&#x8FDE;&#x63A5;&#xFF0C;&#x4E00;&#x6B21;&#x4EA4;&#x4E92;&#x7ED3;&#x675F;&#x3002;  </p><h3 id="TCP-&#x5B9E;&#x73B0;"><a href="#TCP-&#x5B9E;&#x73B0;" class="headerlink" title="TCP &#x5B9E;&#x73B0;"></a>TCP &#x5B9E;&#x73B0;</h3><p>&#x670D;&#x52A1;&#x7AEF;</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Author</span>: cuzz</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Date</span>: 2019/2/19 22:36</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Description</span>:</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">TCPServer</span> </span>{</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> IOException </span>{</span><br><span class="line">        <span class="comment">// &#x521B;&#x5EFA;socket&#xFF0C;&#x5E76;&#x5C06;socket&#x7ED1;&#x5B9A;&#x5230;65000&#x7AEF;&#x53E3;</span></span><br><span class="line">        ServerSocket serverSocket = <span class="keyword">new</span> ServerSocket(<span class="number">65000</span>);</span><br><span class="line">        <span class="comment">// &#x6B7B;&#x5FAA;&#x73AF;&#xFF0C;&#x4F7F;socket&#x4E00;&#x76F4;&#x7B49;&#x5F85;&#x5E76;&#x5904;&#x7406;&#x5BA2;&#x6237;&#x7AEF;&#x53D1;&#x8FC7;&#x6765;&#x7684;&#x8BF7;&#x6C42;</span></span><br><span class="line">        <span class="keyword">while</span> (<span class="keyword">true</span>) {</span><br><span class="line">            <span class="comment">// &#x76D1;&#x542C;6500&#x7AEF;&#x53E3;&#xFF0C;&#x76F4;&#x5230;&#x5BA2;&#x6237;&#x7AEF;&#x8FD4;&#x56DE;&#x8FDE;&#x63A5;&#x4FE1;&#x606F;&#x540E;&#x624D;&#x8FD4;&#x56DE;</span></span><br><span class="line">            Socket socket = serverSocket.accept();</span><br><span class="line">            <span class="comment">// &#x83B7;&#x53D6;&#x5BA2;&#x6237;&#x7AEF;&#x8BF7;&#x6C42;&#x4FE1;&#x606F;&#x540E;&#xFF0C;&#x6267;&#x884C;&#x76F8;&#x5173;&#x903B;&#x8F91;</span></span><br><span class="line">            <span class="keyword">new</span> LengthCalculator(socket).start();</span><br><span class="line">        }</span><br><span class="line">    }</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">LengthCalculator</span> <span class="keyword">extends</span> <span class="title">Thread</span> </span>{</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> Socket socket;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">LengthCalculator</span><span class="params">(Socket socket)</span> </span>{</span><br><span class="line">        <span class="keyword">this</span>.socket = socket;</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">run</span><span class="params">()</span> </span>{</span><br><span class="line">        <span class="keyword">try</span> {</span><br><span class="line">            <span class="comment">// &#x83B7;&#x53D6;socket&#x7684;&#x8F93;&#x51FA;&#x6D41;</span></span><br><span class="line">            OutputStream os = socket.getOutputStream();</span><br><span class="line">            <span class="comment">// &#x83B7;&#x53D6;socket&#x7684;&#x8F93;&#x5165;&#x6D41;</span></span><br><span class="line">            InputStream is = socket.getInputStream();</span><br><span class="line">            <span class="keyword">byte</span>[] bytes = <span class="keyword">new</span> <span class="keyword">byte</span>[<span class="number">1024</span>];</span><br><span class="line">            <span class="keyword">int</span> len = <span class="number">0</span>;</span><br><span class="line">            StringBuilder sb = <span class="keyword">new</span> StringBuilder();</span><br><span class="line">            <span class="keyword">while</span> ((len = is.read(bytes)) != -<span class="number">1</span>) {</span><br><span class="line">                os.write(bytes, <span class="number">0</span> , len);</span><br><span class="line">                System.out.println(<span class="keyword">new</span> String(bytes, <span class="number">0</span> , len));</span><br><span class="line">            }</span><br><span class="line">            <span class="comment">// &#x4E0D;&#x8981;&#x5FD8;&#x8BB0;&#x5173;&#x95ED;&#x8F93;&#x5165;&#x8F93;&#x51FA;&#x6D41;</span></span><br><span class="line">            os.close();</span><br><span class="line">            is.close();</span><br><span class="line">            socket.close();</span><br><span class="line">        } <span class="keyword">catch</span> (IOException e) {</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        }</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></table></figure><p>&#x5BA2;&#x670D;&#x7AEF;</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">TCPClinet</span> </span>{</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> IOException </span>{</span><br><span class="line">        <span class="comment">// &#x521B;&#x5EFA;socket&#xFF0C;&#x5E76;&#x6307;&#x5B9A;&#x8FDE;&#x63A5;&#x7684;&#x662F;ip&#x548C;&#x7AEF;&#x53E3;&#x53F7;</span></span><br><span class="line">        Socket socket = <span class="keyword">new</span> Socket(<span class="string">&quot;127.0.0.1&quot;</span>, <span class="number">65000</span>);</span><br><span class="line">        <span class="comment">// &#x83B7;&#x53D6;&#x8F93;&#x51FA;&#x6D41;</span></span><br><span class="line">        OutputStream os = socket.getOutputStream();</span><br><span class="line">        <span class="comment">// &#x83B7;&#x53D6;&#x8F93;&#x5165;&#x6D41;</span></span><br><span class="line">        InputStream is = socket.getInputStream();</span><br><span class="line">        os.write(<span class="string">&quot;hello world&quot;</span>.getBytes());</span><br><span class="line">        <span class="keyword">int</span> len = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">byte</span>[] bytes = <span class="keyword">new</span> <span class="keyword">byte</span>[<span class="number">1024</span>];</span><br><span class="line">        len = is.read(bytes);</span><br><span class="line">        String content = <span class="keyword">new</span> String(bytes, <span class="number">0</span>, len);</span><br><span class="line">        System.out.println(content);</span><br><span class="line">        is.close();</span><br><span class="line">        os.close();</span><br><span class="line">        socket.close();</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></table></figure><h3 id="UDP-&#x5B9E;&#x73B0;"><a href="#UDP-&#x5B9E;&#x73B0;" class="headerlink" title="UDP &#x5B9E;&#x73B0;"></a>UDP &#x5B9E;&#x73B0;</h3><p>&#x670D;&#x52A1;&#x7AEF;</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">UDPServer</span> </span>{</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> Exception </span>{</span><br><span class="line">        <span class="comment">// &#x670D;&#x52A1;&#x7AEF;&#x63A5;&#x53D7;&#x5BA2;&#x6237;&#x7AEF;&#x53D1;&#x9001;&#x7684;&#x6570;&#x636E;&#x62A5;</span></span><br><span class="line">        DatagramSocket socket = <span class="keyword">new</span> DatagramSocket(<span class="number">65001</span>); <span class="comment">//&#x76D1;&#x542C;&#x7684;&#x7AEF;&#x53E3;&#x53F7;</span></span><br><span class="line">        <span class="keyword">byte</span>[] buff = <span class="keyword">new</span> <span class="keyword">byte</span>[<span class="number">100</span>]; <span class="comment">//&#x5B58;&#x50A8;&#x4ECE;&#x5BA2;&#x6237;&#x7AEF;&#x63A5;&#x53D7;&#x5230;&#x7684;&#x5185;&#x5BB9;</span></span><br><span class="line">        DatagramPacket packet = <span class="keyword">new</span> DatagramPacket(buff, buff.length);</span><br><span class="line">        <span class="comment">//&#x63A5;&#x53D7;&#x5BA2;&#x6237;&#x7AEF;&#x53D1;&#x9001;&#x8FC7;&#x6765;&#x7684;&#x5185;&#x5BB9;&#xFF0C;&#x5E76;&#x5C06;&#x5185;&#x5BB9;&#x5C01;&#x88C5;&#x8FDB;DatagramPacket&#x5BF9;&#x8C61;&#x4E2D;</span></span><br><span class="line">        socket.receive(packet);</span><br><span class="line"></span><br><span class="line">        <span class="keyword">byte</span>[] data = packet.getData(); <span class="comment">//&#x4ECE;DatagramPacket&#x5BF9;&#x8C61;&#x4E2D;&#x83B7;&#x53D6;&#x5230;&#x771F;&#x6B63;&#x5B58;&#x50A8;&#x7684;&#x6570;&#x636E;</span></span><br><span class="line">        <span class="comment">//&#x5C06;&#x6570;&#x636E;&#x4ECE;&#x4E8C;&#x8FDB;&#x5236;&#x8F6C;&#x6362;&#x6210;&#x5B57;&#x7B26;&#x4E32;&#x5F62;&#x5F0F;</span></span><br><span class="line">        String content = <span class="keyword">new</span> String(data, <span class="number">0</span>, packet.getLength());</span><br><span class="line">        System.out.println(content);</span><br><span class="line">        <span class="comment">//&#x5C06;&#x8981;&#x53D1;&#x9001;&#x7ED9;&#x5BA2;&#x6237;&#x7AEF;&#x7684;&#x6570;&#x636E;&#x8F6C;&#x6362;&#x6210;&#x4E8C;&#x8FDB;&#x5236;</span></span><br><span class="line">        <span class="keyword">byte</span>[] sendedContent = String.valueOf(content.length()).getBytes();</span><br><span class="line">        <span class="comment">// &#x670D;&#x52A1;&#x7AEF;&#x7ED9;&#x5BA2;&#x6237;&#x7AEF;&#x53D1;&#x9001;&#x6570;&#x636E;&#x62A5;</span></span><br><span class="line">        <span class="comment">//&#x4ECE;DatagramPacket&#x5BF9;&#x8C61;&#x4E2D;&#x83B7;&#x53D6;&#x5230;&#x6570;&#x636E;&#x7684;&#x6765;&#x6E90;&#x5730;&#x5740;&#x4E0E;&#x7AEF;&#x53E3;&#x53F7;</span></span><br><span class="line">        DatagramPacket packetToClient = <span class="keyword">new</span> DatagramPacket(sendedContent,</span><br><span class="line">                sendedContent.length, packet.getAddress(), packet.getPort());</span><br><span class="line">        socket.send(packetToClient); <span class="comment">//&#x53D1;&#x9001;&#x6570;&#x636E;&#x7ED9;&#x5BA2;&#x6237;&#x7AEF;</span></span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></table></figure><p>&#x5BA2;&#x670D;&#x7AEF;</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">UDPClient</span> </span>{</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> Exception </span>{</span><br><span class="line">        <span class="comment">// &#x5BA2;&#x6237;&#x7AEF;&#x53D1;&#x6570;&#x636E;&#x62A5;&#x7ED9;&#x670D;&#x52A1;&#x7AEF;</span></span><br><span class="line">        DatagramSocket socket = <span class="keyword">new</span> DatagramSocket();</span><br><span class="line">        <span class="comment">// &#x8981;&#x53D1;&#x9001;&#x7ED9;&#x670D;&#x52A1;&#x7AEF;&#x7684;&#x6570;&#x636E;</span></span><br><span class="line">        <span class="keyword">byte</span>[] buf = <span class="string">&quot;Hello World&quot;</span>.getBytes();</span><br><span class="line">        <span class="comment">// &#x5C06;IP&#x5730;&#x5740;&#x5C01;&#x88C5;&#x6210;InetAddress&#x5BF9;&#x8C61;</span></span><br><span class="line">        InetAddress address = InetAddress.getByName(<span class="string">&quot;127.0.0.1&quot;</span>);</span><br><span class="line">        <span class="comment">// &#x5C06;&#x8981;&#x53D1;&#x9001;&#x7ED9;&#x670D;&#x52A1;&#x7AEF;&#x7684;&#x6570;&#x636E;&#x5C01;&#x88C5;&#x6210;DatagramPacket&#x5BF9;&#x8C61; &#x9700;&#x8981;&#x586B;&#x5199;&#x4E0A;ip&#x5730;&#x5740;&#x4E0E;&#x7AEF;&#x53E3;&#x53F7;</span></span><br><span class="line">        DatagramPacket packet = <span class="keyword">new</span> DatagramPacket(buf, buf.length, address,</span><br><span class="line">                <span class="number">65001</span>);</span><br><span class="line">        <span class="comment">// &#x53D1;&#x9001;&#x6570;&#x636E;&#x7ED9;&#x670D;&#x52A1;&#x7AEF;</span></span><br><span class="line">        socket.send(packet);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// &#x5BA2;&#x6237;&#x7AEF;&#x63A5;&#x53D7;&#x670D;&#x52A1;&#x7AEF;&#x53D1;&#x9001;&#x8FC7;&#x6765;&#x7684;&#x6570;&#x636E;&#x62A5;</span></span><br><span class="line">        <span class="keyword">byte</span>[] data = <span class="keyword">new</span> <span class="keyword">byte</span>[<span class="number">100</span>];</span><br><span class="line">        <span class="comment">// &#x521B;&#x5EFA;DatagramPacket&#x5BF9;&#x8C61;&#x7528;&#x6765;&#x5B58;&#x50A8;&#x670D;&#x52A1;&#x7AEF;&#x53D1;&#x9001;&#x8FC7;&#x6765;&#x7684;&#x6570;&#x636E;</span></span><br><span class="line">        DatagramPacket receivedPacket = <span class="keyword">new</span> DatagramPacket(data, data.length);</span><br><span class="line">        <span class="comment">// &#x5C06;&#x63A5;&#x53D7;&#x5230;&#x7684;&#x6570;&#x636E;&#x5B58;&#x50A8;&#x5230;DatagramPacket&#x5BF9;&#x8C61;&#x4E2D;</span></span><br><span class="line">        socket.receive(receivedPacket);</span><br><span class="line">        <span class="comment">// &#x5C06;&#x670D;&#x52A1;&#x5668;&#x7AEF;&#x53D1;&#x9001;&#x8FC7;&#x6765;&#x7684;&#x6570;&#x636E;&#x53D6;&#x51FA;&#x6765;&#x5E76;&#x6253;&#x5370;&#x5230;&#x63A7;&#x5236;&#x53F0;</span></span><br><span class="line">        String content = <span class="keyword">new</span> String(receivedPacket.getData(), <span class="number">0</span>,</span><br><span class="line">                receivedPacket.getLength());</span><br><span class="line">        System.out.println(content);</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></table></figure><h2 id="&#x53C2;&#x8003;&#x94FE;&#x63A5;"><a href="#&#x53C2;&#x8003;&#x94FE;&#x63A5;" class="headerlink" title="&#x53C2;&#x8003;&#x94FE;&#x63A5;"></a>&#x53C2;&#x8003;&#x94FE;&#x63A5;</h2><ul><li><a href="https://github.com/CyC2018/CS-Notes/blob/master/docs/notes/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C.md" target="_blank" rel="noopener">&#x8BA1;&#x7B97;&#x673A;&#x7F51;&#x7EDC;</a></li><li><a href="https://blog.csdn.net/justloveyou_/article/details/69612153" target="_blank" rel="noopener">&#x8BA1;&#x7B97;&#x673A;&#x7F51;&#x7EDC;&#x4F53;&#x7CFB;&#x7ED3;&#x6784;&#x7EFC;&#x8FF0;&#xFF08;&#x4E0B;&#xFF09;</a></li><li><a href="https://coolshell.cn/articles/11564.html" target="_blank" rel="noopener">TCP &#x7684;&#x90A3;&#x4E9B;&#x4E8B;&#x513F;</a></li><li><a href="https://www.zhihu.com/question/32255109/answer/68558623" target="_blank" rel="noopener">TCP&#x534F;&#x8BAE;&#x7684;&#x6ED1;&#x52A8;&#x7A97;&#x53E3;&#x5177;&#x4F53;&#x662F;&#x600E;&#x6837;&#x63A7;&#x5236;&#x6D41;&#x91CF;&#x7684;&#xFF1F;</a></li><li><a href="https://www.cnblogs.com/wangcq/p/3520400.html" target="_blank" rel="noopener">Socket&#x901A;&#x4FE1;&#x539F;&#x7406;</a></li></ul>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h2 id=&quot;&amp;#x8BA1;&amp;#x7B97;&amp;#x673A;&amp;#x7F51;&amp;#x7EDC;&amp;#x4F53;&amp;#x7CFB;&amp;#x7ED3;&amp;#x6784;&quot;&gt;&lt;a href=&quot;#&amp;#x8BA1;&amp;#x7B97;&amp;#x673A;&amp;#x7F51;&amp;#x7EDC;&amp;#x4F53;
      
    
    </summary>
    
      <category term="面试" scheme="http://blog.cuzz.site/categories/%E9%9D%A2%E8%AF%95/"/>
    
    
      <category term="网络" scheme="http://blog.cuzz.site/tags/%E7%BD%91%E7%BB%9C/"/>
    
      <category term="TCP/IP" scheme="http://blog.cuzz.site/tags/TCP-IP/"/>
    
  </entry>
  
  <entry>
    <title>Java 中是如何实现线程通信？</title>
    <link href="http://blog.cuzz.site/2019/02/14/Java%20%E4%B8%AD%E6%98%AF%E5%A6%82%E4%BD%95%E5%AE%9E%E7%8E%B0%E7%BA%BF%E7%A8%8B%E9%80%9A%E4%BF%A1%EF%BC%9F/"/>
    <id>http://blog.cuzz.site/2019/02/14/Java 中是如何实现线程通信？/</id>
    <published>2019-02-14T15:59:59.000Z</published>
    <updated>2019-07-16T11:43:31.264Z</updated>
    
    <content type="html"><![CDATA[<blockquote><p>&#x6B63;&#x5E38;&#x60C5;&#x51B5;&#x4E0B;&#xFF0C;&#x6BCF;&#x4E2A;&#x5B50;&#x7EBF;&#x7A0B;&#x5B8C;&#x6210;&#x5404;&#x81EA;&#x7684;&#x4EFB;&#x52A1;&#x5C31;&#x53EF;&#x4EE5;&#x7ED3;&#x675F;&#x4E86;&#x3002;&#x4E0D;&#x8FC7;&#x6709;&#x7684;&#x65F6;&#x5019;&#xFF0C;&#x6211;&#x4EEC;&#x5E0C;&#x671B;&#x591A;&#x4E2A;&#x7EBF;&#x7A0B;&#x534F;&#x540C;&#x5DE5;&#x4F5C;&#x6765;&#x5B8C;&#x6210;&#x67D0;&#x4E2A;&#x4EFB;&#x52A1;&#xFF0C;&#x8FD9;&#x65F6;&#x5C31;&#x6D89;&#x53CA;&#x5230;&#x4E86;&#x7EBF;&#x7A0B;&#x95F4;&#x901A;&#x4FE1;&#x4E86;&#x3002;</p><p>&#x672C;&#x6587;&#x6D89;&#x53CA;&#x5230;&#x7684;&#x77E5;&#x8BC6;&#x70B9;&#xFF1A;<code>thread.join()</code>, <code>object.wait()</code>, <code>object.notify()</code>, <code>CountdownLatch</code>, <code>CyclicBarrier</code>, <code>FutureTask</code>, <code>Callable</code> &#x7B49;&#x3002;</p><p>&#x539F;&#x6587;&#x94FE;&#x63A5;&#xFF1A;<a href="http://wingjay.com/2017/04/09/Java%E9%87%8C%E5%A6%82%E4%BD%95%E5%AE%9E%E7%8E%B0%E7%BA%BF%E7%A8%8B%E9%97%B4%E9%80%9A%E4%BF%A1%EF%BC%9F/" target="_blank" rel="noopener">Java &#x4E2D;&#x662F;&#x5982;&#x4F55;&#x5B9E;&#x73B0;&#x7EBF;&#x7A0B;&#x901A;&#x4FE1;&#xFF1F;</a></p><p>&#x672C;&#x6587;&#x6D89;&#x53CA;&#x4EE3;&#x7801;&#xFF1A;<a href="https://github.com/wingjay/HelloJava/blob/master/multi-thread/src/ForArticle.java" target="_blank" rel="noopener">https://github.com/wingjay/HelloJava/blob/master/multi-thread/src/ForArticle.java</a></p></blockquote><a id="more"></a><p>&#x4E0B;&#x9762;&#x6211;&#x4ECE;&#x51E0;&#x4E2A;&#x4F8B;&#x5B50;&#x4F5C;&#x4E3A;&#x5207;&#x5165;&#x70B9;&#x6765;&#x8BB2;&#x89E3;&#x4E0B; Java &#x91CC;&#x6709;&#x54EA;&#x4E9B;&#x65B9;&#x6CD5;&#x6765;&#x5B9E;&#x73B0;&#x7EBF;&#x7A0B;&#x95F4;&#x901A;&#x4FE1;&#x3002;</p><ul><li>&#x5982;&#x4F55;&#x8BA9;&#x4E24;&#x4E2A;&#x7EBF;&#x7A0B;&#x4F9D;&#x6B21;&#x6267;&#x884C;&#xFF1F;</li><li>&#x90A3;&#x5982;&#x4F55;&#x8BA9;&#x4E24;&#x4E2A;&#x7EBF;&#x7A0B;&#x6309;&#x7167;&#x6307;&#x5B9A;&#x65B9;&#x5F0F;&#x6709;&#x5E8F;&#x4EA4;&#x53C9;&#x8FD0;&#x884C;&#x5462;&#xFF1F;</li><li>&#x56DB;&#x4E2A;&#x7EBF;&#x7A0B; A B C D&#xFF0C;&#x5176;&#x4E2D; D &#x8981;&#x7B49;&#x5230; A B C &#x5168;&#x6267;&#x884C;&#x5B8C;&#x6BD5;&#x540E;&#x624D;&#x6267;&#x884C;&#xFF0C;&#x800C;&#x4E14; A B C &#x662F;&#x540C;&#x6B65;&#x8FD0;&#x884C;&#x7684;</li><li>&#x4E09;&#x4E2A;&#x8FD0;&#x52A8;&#x5458;&#x5404;&#x81EA;&#x51C6;&#x5907;&#xFF0C;&#x7B49;&#x5230;&#x4E09;&#x4E2A;&#x4EBA;&#x90FD;&#x51C6;&#x5907;&#x597D;&#x540E;&#xFF0C;&#x518D;&#x4E00;&#x8D77;&#x8DD1;</li><li>&#x5B50;&#x7EBF;&#x7A0B;&#x5B8C;&#x6210;&#x67D0;&#x4EF6;&#x4EFB;&#x52A1;&#x540E;&#xFF0C;&#x628A;&#x5F97;&#x5230;&#x7684;&#x7ED3;&#x679C;&#x56DE;&#x4F20;&#x7ED9;&#x4E3B;&#x7EBF;&#x7A0B;</li></ul><h2 id="&#x5982;&#x4F55;&#x8BA9;&#x4E24;&#x4E2A;&#x7EBF;&#x7A0B;&#x4F9D;&#x6B21;&#x6267;&#x884C;&#xFF1F;"><a href="#&#x5982;&#x4F55;&#x8BA9;&#x4E24;&#x4E2A;&#x7EBF;&#x7A0B;&#x4F9D;&#x6B21;&#x6267;&#x884C;&#xFF1F;" class="headerlink" title="&#x5982;&#x4F55;&#x8BA9;&#x4E24;&#x4E2A;&#x7EBF;&#x7A0B;&#x4F9D;&#x6B21;&#x6267;&#x884C;&#xFF1F;"></a>&#x5982;&#x4F55;&#x8BA9;&#x4E24;&#x4E2A;&#x7EBF;&#x7A0B;&#x4F9D;&#x6B21;&#x6267;&#x884C;&#xFF1F;</h2><p>&#x5047;&#x8BBE;&#x6709;&#x4E24;&#x4E2A;&#x7EBF;&#x7A0B;&#xFF0C;&#x4E00;&#x4E2A;&#x662F;&#x7EBF;&#x7A0B; A&#xFF0C;&#x53E6;&#x4E00;&#x4E2A;&#x662F;&#x7EBF;&#x7A0B; B&#xFF0C;&#x4E24;&#x4E2A;&#x7EBF;&#x7A0B;&#x5206;&#x522B;&#x4F9D;&#x6B21;&#x6253;&#x5370; 1-3 &#x4E09;&#x4E2A;&#x6570;&#x5B57;&#x5373;&#x53EF;&#x3002;&#x6211;&#x4EEC;&#x6765;&#x770B;&#x4E0B;&#x4EE3;&#x7801;&#xFF1A;</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">demo1</span><span class="params">()</span> </span>{</span><br><span class="line">    Thread A = <span class="keyword">new</span> Thread(<span class="keyword">new</span> Runnable() {</span><br><span class="line">        <span class="meta">@Override</span></span><br><span class="line">        <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">run</span><span class="params">()</span> </span>{</span><br><span class="line">            printNumber(<span class="string">&quot;A&quot;</span>);</span><br><span class="line">        }</span><br><span class="line">    });</span><br><span class="line"></span><br><span class="line">    Thread B = <span class="keyword">new</span> Thread(<span class="keyword">new</span> Runnable() {</span><br><span class="line">        <span class="meta">@Override</span></span><br><span class="line">        <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">run</span><span class="params">()</span> </span>{</span><br><span class="line">            printNumber(<span class="string">&quot;B&quot;</span>);</span><br><span class="line">        }</span><br><span class="line">    });</span><br><span class="line"></span><br><span class="line">    A.start();</span><br><span class="line">    B.start();</span><br><span class="line">}</span><br></pre></td></tr></table></figure><p>&#x5176;&#x4E2D;&#x7684; <code>printNumber(String)</code> &#x5B9E;&#x73B0;&#x5982;&#x4E0B;&#xFF0C;&#x7528;&#x6765;&#x4F9D;&#x6B21;&#x6253;&#x5370; <code>1</code>, <code>2</code>, <code>3</code> &#x4E09;&#x4E2A;&#x6570;&#x5B57;&#xFF1A;</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">printNumber</span><span class="params">(String threadName)</span> </span>{</span><br><span class="line">    <span class="keyword">int</span> i=<span class="number">0</span>;</span><br><span class="line">    <span class="keyword">while</span> (i++ &lt; <span class="number">3</span>) {</span><br><span class="line">        <span class="keyword">try</span> {</span><br><span class="line">            Thread.sleep(<span class="number">100</span>);</span><br><span class="line">        } <span class="keyword">catch</span> (InterruptedException e) {</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        }</span><br><span class="line">        System.out.println(threadName + <span class="string">&quot; print: &quot;</span> + i);</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></table></figure><p>&#x8FD9;&#x65F6;&#x6211;&#x4EEC;&#x5F97;&#x5230;&#x7684;&#x7ED3;&#x679C;&#x662F;&#xFF1A;</p><blockquote><p>B print: 1<br>A print: 1<br>B print: 2<br>A print: 2<br>B print: 3<br>A print: 3</p></blockquote><p>&#x53EF;&#x4EE5;&#x770B;&#x5230; A &#x548C; B &#x662F;&#x540C;&#x65F6;&#x6253;&#x5370;&#x7684;&#x3002;</p><p>&#x90A3;&#x4E48;&#xFF0C;&#x5982;&#x679C;&#x6211;&#x4EEC;&#x5E0C;&#x671B; B &#x5728; A <code>&#x5168;&#x90E8;&#x6253;&#x5370;</code>&#x5B8C;&#x540E;&#x518D;&#x5F00;&#x59CB;&#x6253;&#x5370;&#x5462;&#xFF1F;&#x6211;&#x4EEC;&#x53EF;&#x4EE5;&#x5229;&#x7528; <code>thread.join()</code> &#x65B9;&#x6CD5;&#xFF0C;&#x4EE3;&#x7801;&#x5982;&#x4E0B;:</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">demo2</span><span class="params">()</span> </span>{</span><br><span class="line">    Thread A = <span class="keyword">new</span> Thread(<span class="keyword">new</span> Runnable() {</span><br><span class="line">        <span class="meta">@Override</span></span><br><span class="line">        <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">run</span><span class="params">()</span> </span>{</span><br><span class="line">            printNumber(<span class="string">&quot;A&quot;</span>);</span><br><span class="line">        }</span><br><span class="line">    });</span><br><span class="line"></span><br><span class="line">    Thread B = <span class="keyword">new</span> Thread(<span class="keyword">new</span> Runnable() {</span><br><span class="line">        <span class="meta">@Override</span></span><br><span class="line">        <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">run</span><span class="params">()</span> </span>{</span><br><span class="line">        System.out.println(<span class="string">&quot;B &#x5F00;&#x59CB;&#x7B49;&#x5F85; A&quot;</span>);</span><br><span class="line">            <span class="keyword">try</span> {</span><br><span class="line">                A.join();</span><br><span class="line">            } <span class="keyword">catch</span> (InterruptedException e) {</span><br><span class="line">                e.printStackTrace();</span><br><span class="line">            }</span><br><span class="line"></span><br><span class="line">            printNumber(<span class="string">&quot;B&quot;</span>);</span><br><span class="line">        }</span><br><span class="line">    });</span><br><span class="line"></span><br><span class="line">    B.start();</span><br><span class="line">    A.start();</span><br><span class="line">}</span><br></pre></td></tr></table></figure><p>&#x5F97;&#x5230;&#x7684;&#x7ED3;&#x679C;&#x5982;&#x4E0B;&#xFF1A;</p><blockquote><p>B &#x5F00;&#x59CB;&#x7B49;&#x5F85; A<br>A print: 1<br>A print: 2<br>A print: 3</p><p>B print: 1<br>B print: 2<br>B print: 3</p></blockquote><p><code>A.join</code> &#x628A;&#x6307;&#x5B9A;&#x7684;&#x7EBF;&#x7A0B;&#x52A0;&#x5165;&#x5230;&#x5F53;&#x524D;&#x7EBF;&#x7A0B;&#xFF0C;&#x53EF;&#x4EE5;&#x5C06;&#x4E24;&#x4E2A;&#x4EA4;&#x66FF;&#x6267;&#x884C;&#x7684;&#x7EBF;&#x7A0B;&#x5408;&#x5E76;&#x4E3A;&#x987A;&#x5E8F;&#x6267;&#x884C;&#x7684;&#x7EBF;&#x7A0B;&#x3002;&#x6BD4;&#x5982;&#x5728;&#x7EBF;&#x7A0B;B&#x4E2D;&#x8C03;&#x7528;&#x4E86;&#x7EBF;&#x7A0B;A&#x7684; join() &#x65B9;&#x6CD5;&#xFF0C;&#x76F4;&#x5230;&#x7EBF;&#x7A0B;A&#x6267;&#x884C;&#x5B8C;&#x6BD5;&#x540E;&#xFF0C;&#x624D;&#x4F1A;&#x7EE7;&#x7EED;&#x6267;&#x884C;&#x7EBF;&#x7A0B;B&#x3002;</p><ul><li>t.join();  &#x8C03;&#x7528; join &#x65B9;&#x6CD5;&#xFF0C;&#x7B49;&#x5F85;&#x7EBF;&#x7A0B; t &#x6267;&#x884C;&#x5B8C;&#x6BD5;</li><li>t.join(1000);  &#x7B49;&#x5F85; t &#x7EBF;&#x7A0B;&#xFF0C;&#x7B49;&#x5F85;&#x65F6;&#x95F4;&#x662F;1000&#x6BEB;&#x79D2;&#x3002;</li></ul><p>&#x6240;&#x4EE5;&#x6211;&#x4EEC;&#x80FD;&#x770B;&#x5230; <code>A.join()</code> &#x65B9;&#x6CD5;&#x4F1A;&#x8BA9; B &#x4E00;&#x76F4;&#x7B49;&#x5F85;&#x76F4;&#x5230; A &#x8FD0;&#x884C;&#x5B8C;&#x6BD5;&#x3002;</p><h2 id="&#x90A3;&#x5982;&#x4F55;&#x8BA9;&#x4E24;&#x4E2A;&#x7EBF;&#x7A0B;&#x6309;&#x7167;&#x6307;&#x5B9A;&#x65B9;&#x5F0F;&#x6709;&#x5E8F;&#x4EA4;&#x53C9;&#x8FD0;&#x884C;&#x5462;&#xFF1F;"><a href="#&#x90A3;&#x5982;&#x4F55;&#x8BA9;&#x4E24;&#x4E2A;&#x7EBF;&#x7A0B;&#x6309;&#x7167;&#x6307;&#x5B9A;&#x65B9;&#x5F0F;&#x6709;&#x5E8F;&#x4EA4;&#x53C9;&#x8FD0;&#x884C;&#x5462;&#xFF1F;" class="headerlink" title="&#x90A3;&#x5982;&#x4F55;&#x8BA9;&#x4E24;&#x4E2A;&#x7EBF;&#x7A0B;&#x6309;&#x7167;&#x6307;&#x5B9A;&#x65B9;&#x5F0F;&#x6709;&#x5E8F;&#x4EA4;&#x53C9;&#x8FD0;&#x884C;&#x5462;&#xFF1F;"></a>&#x90A3;&#x5982;&#x4F55;&#x8BA9;&#x4E24;&#x4E2A;&#x7EBF;&#x7A0B;&#x6309;&#x7167;&#x6307;&#x5B9A;&#x65B9;&#x5F0F;&#x6709;&#x5E8F;&#x4EA4;&#x53C9;&#x8FD0;&#x884C;&#x5462;&#xFF1F;</h2><p>&#x8FD8;&#x662F;&#x4E0A;&#x9762;&#x90A3;&#x4E2A;&#x4F8B;&#x5B50;&#xFF0C;&#x6211;&#x73B0;&#x5728;&#x5E0C;&#x671B; A &#x5728;&#x6253;&#x5370;&#x5B8C; <code>1</code> &#x540E;&#xFF0C;&#x518D;&#x8BA9; B &#x6253;&#x5370; <code>1</code>, <code>2</code>, <code>3</code>&#xFF0C;&#x6700;&#x540E;&#x518D;&#x56DE;&#x5230; A &#x7EE7;&#x7EED;&#x6253;&#x5370; <code>2</code>, <code>3</code>&#x3002;&#x8FD9;&#x79CD;&#x9700;&#x6C42;&#x4E0B;&#xFF0C;&#x663E;&#x7136; <code>Thread.join()</code> &#x5DF2;&#x7ECF;&#x4E0D;&#x80FD;&#x6EE1;&#x8DB3;&#x4E86;&#x3002;&#x6211;&#x4EEC;&#x9700;&#x8981;&#x66F4;&#x7EC6;&#x7C92;&#x5EA6;&#x7684;&#x9501;&#x6765;&#x63A7;&#x5236;&#x6267;&#x884C;&#x987A;&#x5E8F;&#x3002;</p><p>&#x8FD9;&#x91CC;&#xFF0C;&#x6211;&#x4EEC;&#x53EF;&#x4EE5;&#x5229;&#x7528; <code>object.wait()</code> &#x548C; <code>object.notify()</code> &#x4E24;&#x4E2A;&#x65B9;&#x6CD5;&#x6765;&#x5B9E;&#x73B0;&#x3002;&#x4EE3;&#x7801;&#x5982;&#x4E0B;&#xFF1A;</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * A 1, B 1, B 2, B 3, A 2, A 3</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="function"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">demo3</span><span class="params">()</span> </span>{</span><br><span class="line">    Object lock = <span class="keyword">new</span> Object();</span><br><span class="line"></span><br><span class="line">    Thread A = <span class="keyword">new</span> Thread(<span class="keyword">new</span> Runnable() {</span><br><span class="line">        <span class="meta">@Override</span></span><br><span class="line">        <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">run</span><span class="params">()</span> </span>{</span><br><span class="line">            <span class="keyword">synchronized</span> (lock) {</span><br><span class="line">                System.out.println(<span class="string">&quot;A 1&quot;</span>);</span><br><span class="line">                <span class="keyword">try</span> {</span><br><span class="line">                    lock.wait();</span><br><span class="line">                } <span class="keyword">catch</span> (InterruptedException e) {</span><br><span class="line">                    e.printStackTrace();</span><br><span class="line">                }</span><br><span class="line"></span><br><span class="line">                System.out.println(<span class="string">&quot;A 2&quot;</span>);</span><br><span class="line">                System.out.println(<span class="string">&quot;A 3&quot;</span>);</span><br><span class="line">            }</span><br><span class="line"></span><br><span class="line">        }</span><br><span class="line">    });</span><br><span class="line"></span><br><span class="line">    Thread B = <span class="keyword">new</span> Thread(<span class="keyword">new</span> Runnable() {</span><br><span class="line">        <span class="meta">@Override</span></span><br><span class="line">        <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">run</span><span class="params">()</span> </span>{</span><br><span class="line">            <span class="keyword">synchronized</span> (lock) {</span><br><span class="line">                System.out.println(<span class="string">&quot;B 1&quot;</span>);</span><br><span class="line">                System.out.println(<span class="string">&quot;B 2&quot;</span>);</span><br><span class="line">                System.out.println(<span class="string">&quot;B 3&quot;</span>);</span><br><span class="line"></span><br><span class="line">                lock.notify();</span><br><span class="line">            }</span><br><span class="line">        }</span><br><span class="line">    });</span><br><span class="line"></span><br><span class="line">    A.start();</span><br><span class="line">    B.start();</span><br><span class="line">}</span><br></pre></td></tr></table></figure><p>&#x6253;&#x5370;&#x7ED3;&#x679C;&#x5982;&#x4E0B;&#xFF1A;</p><blockquote><p>A 1<br>A waiting&#x2026;</p><p>B 1<br>B 2<br>B 3<br>A 2<br>A 3</p></blockquote><p>&#x6B63;&#x662F;&#x6211;&#x4EEC;&#x8981;&#x7684;&#x7ED3;&#x679C;&#x3002;</p><p>&#x90A3;&#x4E48;&#xFF0C;&#x8FD9;&#x4E2A;&#x8FC7;&#x7A0B;&#x53D1;&#x751F;&#x4E86;&#x4EC0;&#x4E48;&#x5462;&#xFF1F;</p><ol><li>&#x9996;&#x5148;&#x521B;&#x5EFA;&#x4E00;&#x4E2A; A &#x548C; B &#x5171;&#x4EAB;&#x7684;&#x5BF9;&#x8C61;&#x9501; lock = new Object();</li><li>&#x5F53; A &#x5F97;&#x5230;&#x9501;&#x540E;&#xFF0C;&#x5148;&#x6253;&#x5370; 1&#xFF0C;&#x7136;&#x540E;&#x8C03;&#x7528; <code>lock.wait()</code> &#x65B9;&#x6CD5;&#xFF0C;&#x4EA4;&#x51FA;&#x9501;&#x7684;&#x63A7;&#x5236;&#x6743;&#xFF0C;&#x8FDB;&#x5165; <code>wait</code> &#x72B6;&#x6001;&#xFF1B;</li><li>&#x5BF9; B &#x800C;&#x8A00;&#xFF0C;&#x7531;&#x4E8E; A &#x6700;&#x5F00;&#x59CB;&#x5F97;&#x5230;&#x4E86;&#x9501;&#xFF0C;&#x5BFC;&#x81F4; B &#x65E0;&#x6CD5;&#x6267;&#x884C;&#xFF1B;&#x76F4;&#x5230; A &#x8C03;&#x7528; <code>lock.wait()</code> &#x91CA;&#x653E;&#x63A7;&#x5236;&#x6743;&#x540E;&#xFF0C; B &#x624D;&#x5F97;&#x5230;&#x4E86;&#x9501;&#xFF1B;</li><li>B &#x5728;&#x5F97;&#x5230;&#x9501;&#x540E;&#x6253;&#x5370; 1&#xFF0C; 2&#xFF0C; 3&#xFF1B;&#x7136;&#x540E;&#x8C03;&#x7528; <code>lock.notify()</code> &#x65B9;&#x6CD5;&#xFF0C;&#x5524;&#x9192;&#x6B63;&#x5728; <code>wait</code> &#x7684; A;</li><li>A &#x88AB;&#x5524;&#x9192;&#x540E;&#xFF0C;&#x7EE7;&#x7EED;&#x6253;&#x5370;&#x5269;&#x4E0B;&#x7684; 2&#xFF0C;3&#x3002;</li></ol><p>&#x4E3A;&#x4E86;&#x66F4;&#x597D;&#x7406;&#x89E3;&#xFF0C;&#x6211;&#x5728;&#x4E0A;&#x9762;&#x7684;&#x4EE3;&#x7801;&#x91CC;&#x52A0;&#x4E0A; log &#x65B9;&#x4FBF;&#x8BFB;&#x8005;&#x67E5;&#x770B;&#x3002;</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">demo3</span><span class="params">()</span> </span>{</span><br><span class="line">    Object lock = <span class="keyword">new</span> Object();</span><br><span class="line">    Thread A = <span class="keyword">new</span> Thread(<span class="keyword">new</span> Runnable() {</span><br><span class="line">        <span class="meta">@Override</span></span><br><span class="line">        <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">run</span><span class="params">()</span> </span>{</span><br><span class="line">            System.out.println(<span class="string">&quot;INFO: A &#x7B49;&#x5F85;&#x9501; &quot;</span>);</span><br><span class="line">            <span class="keyword">synchronized</span> (lock) {</span><br><span class="line">                System.out.println(<span class="string">&quot;INFO: A &#x5F97;&#x5230;&#x4E86;&#x9501; lock&quot;</span>);</span><br><span class="line">                System.out.println(<span class="string">&quot;A 1&quot;</span>);</span><br><span class="line">                <span class="keyword">try</span> {</span><br><span class="line">                    System.out.println(<span class="string">&quot;INFO: A &#x51C6;&#x5907;&#x8FDB;&#x5165;&#x7B49;&#x5F85;&#x72B6;&#x6001;&#xFF0C;&#x653E;&#x5F03;&#x9501; lock &#x7684;&#x63A7;&#x5236;&#x6743; &quot;</span>);</span><br><span class="line">                    lock.wait();</span><br><span class="line">                } <span class="keyword">catch</span> (InterruptedException e) {</span><br><span class="line">                    e.printStackTrace();</span><br><span class="line">                }</span><br><span class="line">                System.out.println(<span class="string">&quot;INFO: &#x6709;&#x4EBA;&#x5524;&#x9192;&#x4E86; A, A &#x91CD;&#x65B0;&#x83B7;&#x5F97;&#x9501; lock&quot;</span>);</span><br><span class="line">                System.out.println(<span class="string">&quot;A 2&quot;</span>);</span><br><span class="line">                System.out.println(<span class="string">&quot;A 3&quot;</span>);</span><br><span class="line">            }</span><br><span class="line"></span><br><span class="line">        }</span><br><span class="line">    });</span><br><span class="line">    Thread B = <span class="keyword">new</span> Thread(<span class="keyword">new</span> Runnable() {</span><br><span class="line">        <span class="meta">@Override</span></span><br><span class="line">        <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">run</span><span class="params">()</span> </span>{</span><br><span class="line">            System.out.println(<span class="string">&quot;INFO: B &#x7B49;&#x5F85;&#x9501; &quot;</span>);</span><br><span class="line">            <span class="keyword">synchronized</span> (lock) {</span><br><span class="line">                System.out.println(<span class="string">&quot;INFO: B &#x5F97;&#x5230;&#x4E86;&#x9501; lock&quot;</span>);</span><br><span class="line">                System.out.println(<span class="string">&quot;B 1&quot;</span>);</span><br><span class="line">                System.out.println(<span class="string">&quot;B 2&quot;</span>);</span><br><span class="line">                System.out.println(<span class="string">&quot;B 3&quot;</span>);</span><br><span class="line"></span><br><span class="line">                System.out.println(<span class="string">&quot;INFO: B &#x6253;&#x5370;&#x5B8C;&#x6BD5;&#xFF0C;&#x8C03;&#x7528; notify &#x65B9;&#x6CD5; &quot;</span>);</span><br><span class="line">                lock.notify();</span><br><span class="line">            }</span><br><span class="line">        }</span><br><span class="line">    });</span><br><span class="line">    A.start();</span><br><span class="line">    B.start();</span><br><span class="line">}</span><br></pre></td></tr></table></figure><p>&#x6253;&#x5370;&#x7ED3;&#x679C;&#x5982;&#x4E0B;:</p><blockquote><p>INFO: A &#x7B49;&#x5F85;&#x9501;<br>INFO: A &#x5F97;&#x5230;&#x4E86;&#x9501; lock<br>A 1<br>INFO: A &#x51C6;&#x5907;&#x8FDB;&#x5165;&#x7B49;&#x5F85;&#x72B6;&#x6001;&#xFF0C;&#x8C03;&#x7528; lock.wait() &#x653E;&#x5F03;&#x9501; lock &#x7684;&#x63A7;&#x5236;&#x6743;<br>INFO: B &#x7B49;&#x5F85;&#x9501;<br>INFO: B &#x5F97;&#x5230;&#x4E86;&#x9501; lock<br>B 1<br>B 2<br>B 3<br>INFO: B &#x6253;&#x5370;&#x5B8C;&#x6BD5;&#xFF0C;&#x8C03;&#x7528; lock.notify() &#x65B9;&#x6CD5;<br>INFO: &#x6709;&#x4EBA;&#x5524;&#x9192;&#x4E86; A, A &#x91CD;&#x65B0;&#x83B7;&#x5F97;&#x9501; lock<br>A 2<br>A 3</p></blockquote><h2 id="&#x56DB;&#x4E2A;&#x7EBF;&#x7A0B;-A-B-C-D&#xFF0C;&#x5176;&#x4E2D;-D-&#x8981;&#x7B49;&#x5230;-A-B-C-&#x5168;&#x6267;&#x884C;&#x5B8C;&#x6BD5;&#x540E;&#x624D;&#x6267;&#x884C;&#xFF0C;&#x800C;&#x4E14;-A-B-C-&#x662F;&#x540C;&#x6B65;&#x8FD0;&#x884C;&#x7684;"><a href="#&#x56DB;&#x4E2A;&#x7EBF;&#x7A0B;-A-B-C-D&#xFF0C;&#x5176;&#x4E2D;-D-&#x8981;&#x7B49;&#x5230;-A-B-C-&#x5168;&#x6267;&#x884C;&#x5B8C;&#x6BD5;&#x540E;&#x624D;&#x6267;&#x884C;&#xFF0C;&#x800C;&#x4E14;-A-B-C-&#x662F;&#x540C;&#x6B65;&#x8FD0;&#x884C;&#x7684;" class="headerlink" title="&#x56DB;&#x4E2A;&#x7EBF;&#x7A0B; A B C D&#xFF0C;&#x5176;&#x4E2D; D &#x8981;&#x7B49;&#x5230; A B C &#x5168;&#x6267;&#x884C;&#x5B8C;&#x6BD5;&#x540E;&#x624D;&#x6267;&#x884C;&#xFF0C;&#x800C;&#x4E14; A B C &#x662F;&#x540C;&#x6B65;&#x8FD0;&#x884C;&#x7684;"></a>&#x56DB;&#x4E2A;&#x7EBF;&#x7A0B; A B C D&#xFF0C;&#x5176;&#x4E2D; D &#x8981;&#x7B49;&#x5230; A B C &#x5168;&#x6267;&#x884C;&#x5B8C;&#x6BD5;&#x540E;&#x624D;&#x6267;&#x884C;&#xFF0C;&#x800C;&#x4E14; A B C &#x662F;&#x540C;&#x6B65;&#x8FD0;&#x884C;&#x7684;</h2><p>&#x6700;&#x5F00;&#x59CB;&#x6211;&#x4EEC;&#x4ECB;&#x7ECD;&#x4E86; <code>thread.join()</code>&#xFF0C;&#x53EF;&#x4EE5;&#x8BA9;&#x4E00;&#x4E2A;&#x7EBF;&#x7A0B;&#x7B49;&#x53E6;&#x4E00;&#x4E2A;&#x7EBF;&#x7A0B;&#x8FD0;&#x884C;&#x5B8C;&#x6BD5;&#x540E;&#x518D;&#x7EE7;&#x7EED;&#x6267;&#x884C;&#xFF0C;&#x90A3;&#x6211;&#x4EEC;&#x53EF;&#x4EE5;&#x5728; D &#x7EBF;&#x7A0B;&#x91CC;&#x4F9D;&#x6B21; join A B C&#xFF0C;&#x4E0D;&#x8FC7;&#x8FD9;&#x4E5F;&#x5C31;&#x4F7F;&#x5F97; A B C &#x5FC5;&#x987B;&#x4F9D;&#x6B21;&#x6267;&#x884C;&#xFF0C;&#x800C;&#x6211;&#x4EEC;&#x8981;&#x7684;&#x662F;&#x8FD9;&#x4E09;&#x8005;&#x80FD;&#x540C;&#x6B65;&#x8FD0;&#x884C;&#x3002;</p><p>&#x6216;&#x8005;&#x8BF4;&#xFF0C;&#x6211;&#x4EEC;&#x5E0C;&#x671B;&#x8FBE;&#x5230;&#x7684;&#x76EE;&#x7684;&#x662F;&#xFF1A;A B C &#x4E09;&#x4E2A;&#x7EBF;&#x7A0B;&#x540C;&#x65F6;&#x8FD0;&#x884C;&#xFF0C;&#x5404;&#x81EA;&#x72EC;&#x7ACB;&#x8FD0;&#x884C;&#x5B8C;&#x540E;&#x901A;&#x77E5; D&#xFF1B;&#x5BF9; D &#x800C;&#x8A00;&#xFF0C;&#x53EA;&#x8981; A B C &#x90FD;&#x8FD0;&#x884C;&#x5B8C;&#x4E86;&#xFF0C;D &#x518D;&#x5F00;&#x59CB;&#x8FD0;&#x884C;&#x3002;&#x9488;&#x5BF9;&#x8FD9;&#x79CD;&#x60C5;&#x51B5;&#xFF0C;&#x6211;&#x4EEC;&#x53EF;&#x4EE5;&#x5229;&#x7528; <code>CountdownLatch</code> &#x6765;&#x5B9E;&#x73B0;&#x8FD9;&#x7C7B;&#x901A;&#x4FE1;&#x65B9;&#x5F0F;&#x3002;&#x5B83;&#x7684;&#x57FA;&#x672C;&#x7528;&#x6CD5;&#x662F;&#xFF1A;</p><ol><li>&#x521B;&#x5EFA;&#x4E00;&#x4E2A;&#x8BA1;&#x6570;&#x5668;&#xFF0C;&#x8BBE;&#x7F6E;&#x521D;&#x59CB;&#x503C;&#xFF0C;CountdownLatch countDownLatch = new CountDownLatch(2);</li><li>&#x5728; <code>&#x7B49;&#x5F85;&#x7EBF;&#x7A0B;</code>&#x91CC;&#x8C03;&#x7528; <code>countDownLatch.await()</code> &#x65B9;&#x6CD5;&#xFF0C;&#x8FDB;&#x5165;&#x7B49;&#x5F85;&#x72B6;&#x6001;&#xFF0C;&#x76F4;&#x5230;&#x8BA1;&#x6570;&#x503C;&#x53D8;&#x6210; 0&#xFF1B;</li><li>&#x5728; <code>&#x5176;&#x4ED6;&#x7EBF;&#x7A0B;</code>&#x91CC;&#xFF0C;&#x8C03;&#x7528; <code>countDownLatch.countDown()</code> &#x65B9;&#x6CD5;&#xFF0C;&#x8BE5;&#x65B9;&#x6CD5;&#x4F1A;&#x5C06;&#x8BA1;&#x6570;&#x503C;&#x51CF;&#x5C0F; 1&#xFF1B;</li><li>&#x5F53; <code>&#x5176;&#x4ED6;&#x7EBF;&#x7A0B;</code>&#x7684; <code>countDown()</code> &#x65B9;&#x6CD5;&#x628A;&#x8BA1;&#x6570;&#x503C;&#x53D8;&#x6210; 0 &#x65F6;&#xFF0C;<code>&#x7B49;&#x5F85;&#x7EBF;&#x7A0B;</code> &#x91CC;&#x7684; <code>countDownLatch.await()</code> &#x7ACB;&#x5373;&#x9000;&#x51FA;&#xFF0C;&#x7EE7;&#x7EED;&#x6267;&#x884C;&#x4E0B;&#x9762;&#x7684;&#x4EE3;&#x7801;&#x3002;</li></ol><p>&#x5B9E;&#x73B0;&#x4EE3;&#x7801;&#x5982;&#x4E0B;&#xFF1A;</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">runDAfterABC</span><span class="params">()</span> </span>{</span><br><span class="line">    <span class="keyword">int</span> worker = <span class="number">3</span>;</span><br><span class="line">    CountDownLatch countDownLatch = <span class="keyword">new</span> CountDownLatch(worker);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">new</span> Thread(<span class="keyword">new</span> Runnable() {</span><br><span class="line">        <span class="meta">@Override</span></span><br><span class="line">        <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">run</span><span class="params">()</span> </span>{</span><br><span class="line">            System.out.println(<span class="string">&quot;D is waiting for other three threads&quot;</span>);</span><br><span class="line">            <span class="keyword">try</span> {</span><br><span class="line">                countDownLatch.await();</span><br><span class="line">                System.out.println(<span class="string">&quot;All done, D starts working&quot;</span>);</span><br><span class="line">            } <span class="keyword">catch</span> (InterruptedException e) {</span><br><span class="line">                e.printStackTrace();</span><br><span class="line">            }</span><br><span class="line"></span><br><span class="line">        }</span><br><span class="line">    }).start();</span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">char</span> threadName=<span class="string">&apos;A&apos;</span>; threadName &lt;= <span class="string">&apos;C&apos;</span>; threadName++) {</span><br><span class="line">        <span class="keyword">final</span> String tN = String.valueOf(threadName);</span><br><span class="line">        <span class="keyword">new</span> Thread(<span class="keyword">new</span> Runnable() {</span><br><span class="line">            <span class="meta">@Override</span></span><br><span class="line">            <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">run</span><span class="params">()</span> </span>{</span><br><span class="line">                System.out.println(tN + <span class="string">&quot; is working&quot;</span>);</span><br><span class="line">                <span class="keyword">try</span> {</span><br><span class="line">                    Thread.sleep(<span class="number">100</span>);</span><br><span class="line">                } <span class="keyword">catch</span> (Exception e) {</span><br><span class="line">                    e.printStackTrace();</span><br><span class="line">                }</span><br><span class="line"></span><br><span class="line">                System.out.println(tN + <span class="string">&quot; finished&quot;</span>);</span><br><span class="line">                countDownLatch.countDown();</span><br><span class="line">            }</span><br><span class="line">        }).start();</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></table></figure><p>&#x4E0B;&#x9762;&#x662F;&#x8FD0;&#x884C;&#x7ED3;&#x679C;&#xFF1A;</p><blockquote><p>D is waiting for other three threads<br>A is working<br>B is working<br>C is working</p><p>A finished<br>C finished<br>B finished<br>All done, D starts working</p></blockquote><p>&#x5176;&#x5B9E;&#x7B80;&#x5355;&#x70B9;&#x6765;&#x8BF4;&#xFF0C;<code>CountDownLatch</code> &#x5C31;&#x662F;&#x4E00;&#x4E2A;&#x5012;&#x8BA1;&#x6570;&#x5668;&#xFF0C;&#x6211;&#x4EEC;&#x628A;&#x521D;&#x59CB;&#x8BA1;&#x6570;&#x503C;&#x8BBE;&#x7F6E;&#x4E3A;<code>3</code>&#xFF0C;&#x5F53; <code>D</code> &#x8FD0;&#x884C;&#x65F6;&#xFF0C;&#x5148;&#x8C03;&#x7528; <code>countDownLatch.await()</code> &#x68C0;&#x67E5;&#x8BA1;&#x6570;&#x5668;&#x503C;&#x662F;&#x5426;&#x4E3A; <code>0</code>&#xFF0C;&#x82E5;&#x4E0D;&#x4E3A; <code>0</code> &#x5219;&#x4FDD;&#x6301;&#x7B49;&#x5F85;&#x72B6;&#x6001;&#xFF1B;&#x5F53;<code>A</code> <code>B</code> <code>C</code> &#x5404;&#x81EA;&#x8FD0;&#x884C;&#x5B8C;&#x540E;&#x90FD;&#x4F1A;&#x5229;&#x7528;<code>countDownLatch.countDown()</code>&#xFF0C;&#x5C06;&#x5012;&#x8BA1;&#x6570;&#x5668;&#x51CF; <code>1</code>&#xFF0C;&#x5F53;&#x4E09;&#x4E2A;&#x90FD;&#x8FD0;&#x884C;&#x5B8C;&#x540E;&#xFF0C;&#x8BA1;&#x6570;&#x5668;&#x88AB;&#x51CF;&#x81F3; <code>0</code>&#xFF1B;&#x6B64;&#x65F6;&#x7ACB;&#x5373;&#x89E6;&#x53D1; <code>D</code>&#x7684; <code>await()</code> &#x8FD0;&#x884C;&#x7ED3;&#x675F;&#xFF0C;&#x7EE7;&#x7EED;&#x5411;&#x4E0B;&#x6267;&#x884C;&#x3002;</p><p>&#x56E0;&#x6B64;&#xFF0C;<code>CountDownLatch</code> &#x9002;&#x7528;&#x4E8E;&#x4E00;&#x4E2A;&#x7EBF;&#x7A0B;&#x53BB;&#x7B49;&#x5F85;&#x591A;&#x4E2A;&#x7EBF;&#x7A0B;&#x7684;&#x60C5;&#x51B5;&#x3002;</p><h2 id="&#x4E09;&#x4E2A;&#x8FD0;&#x52A8;&#x5458;&#x5404;&#x81EA;&#x51C6;&#x5907;&#xFF0C;&#x7B49;&#x5230;&#x4E09;&#x4E2A;&#x4EBA;&#x90FD;&#x51C6;&#x5907;&#x597D;&#x540E;&#xFF0C;&#x518D;&#x4E00;&#x8D77;&#x8DD1;"><a href="#&#x4E09;&#x4E2A;&#x8FD0;&#x52A8;&#x5458;&#x5404;&#x81EA;&#x51C6;&#x5907;&#xFF0C;&#x7B49;&#x5230;&#x4E09;&#x4E2A;&#x4EBA;&#x90FD;&#x51C6;&#x5907;&#x597D;&#x540E;&#xFF0C;&#x518D;&#x4E00;&#x8D77;&#x8DD1;" class="headerlink" title="&#x4E09;&#x4E2A;&#x8FD0;&#x52A8;&#x5458;&#x5404;&#x81EA;&#x51C6;&#x5907;&#xFF0C;&#x7B49;&#x5230;&#x4E09;&#x4E2A;&#x4EBA;&#x90FD;&#x51C6;&#x5907;&#x597D;&#x540E;&#xFF0C;&#x518D;&#x4E00;&#x8D77;&#x8DD1;"></a>&#x4E09;&#x4E2A;&#x8FD0;&#x52A8;&#x5458;&#x5404;&#x81EA;&#x51C6;&#x5907;&#xFF0C;&#x7B49;&#x5230;&#x4E09;&#x4E2A;&#x4EBA;&#x90FD;&#x51C6;&#x5907;&#x597D;&#x540E;&#xFF0C;&#x518D;&#x4E00;&#x8D77;&#x8DD1;</h2><p>&#x4E0A;&#x9762;&#x662F;&#x4E00;&#x4E2A;&#x5F62;&#x8C61;&#x7684;&#x6BD4;&#x55BB;&#xFF0C;&#x9488;&#x5BF9; <code>&#x7EBF;&#x7A0B; A B C &#x5404;&#x81EA;&#x5F00;&#x59CB;&#x51C6;&#x5907;&#xFF0C;&#x76F4;&#x5230;&#x4E09;&#x8005;&#x90FD;&#x51C6;&#x5907;&#x5B8C;&#x6BD5;&#xFF0C;&#x7136;&#x540E;&#x518D;&#x540C;&#x65F6;&#x8FD0;&#x884C;</code>&#x3002;&#x4E5F;&#x5C31;&#x662F;&#x8981;&#x5B9E;&#x73B0;&#x4E00;&#x79CD;<code>&#x7EBF;&#x7A0B;&#x4E4B;&#x95F4;&#x4E92;&#x76F8;&#x7B49;&#x5F85;</code>&#x7684;&#x6548;&#x679C;&#xFF0C;&#x90A3;&#x5E94;&#x8BE5;&#x600E;&#x4E48;&#x6765;&#x5B9E;&#x73B0;&#x5462;&#xFF1F;</p><p>&#x4E0A;&#x9762;&#x7684; <code>CountDownLatch</code> &#x53EF;&#x4EE5;&#x7528;&#x6765;&#x5012;&#x8BA1;&#x6570;&#xFF0C;&#x4F46;&#x5F53;&#x8BA1;&#x6570;&#x5B8C;&#x6BD5;&#xFF0C;&#x53EA;&#x6709;&#x4E00;&#x4E2A;&#x7EBF;&#x7A0B;&#x7684; <code>await()</code> &#x4F1A;&#x5F97;&#x5230;&#x54CD;&#x5E94;&#xFF0C;&#x65E0;&#x6CD5;&#x8BA9;&#x591A;&#x4E2A;&#x7EBF;&#x7A0B;&#x540C;&#x65F6;&#x89E6;&#x53D1;&#x3002;</p><p>&#x4E3A;&#x4E86;&#x5B9E;&#x73B0;&#x7EBF;&#x7A0B;&#x95F4;&#x4E92;&#x76F8;&#x7B49;&#x5F85;&#x8FD9;&#x79CD;&#x9700;&#x6C42;&#xFF0C;&#x6211;&#x4EEC;&#x53EF;&#x4EE5;&#x5229;&#x7528; <code>CyclicBarrier</code> &#x6570;&#x636E;&#x7ED3;&#x6784;&#xFF0C;&#x5B83;&#x7684;&#x57FA;&#x672C;&#x7528;&#x6CD5;&#x662F;&#xFF1A;</p><ol><li>&#x5148;&#x521B;&#x5EFA;&#x4E00;&#x4E2A;&#x516C;&#x5171; <code>CyclicBarrier</code> &#x5BF9;&#x8C61;&#xFF0C;&#x8BBE;&#x7F6E; <code>&#x540C;&#x65F6;&#x7B49;&#x5F85;</code>&#x7684;&#x7EBF;&#x7A0B;&#x6570;&#xFF0C;CyclicBarrier cyclicBarrier = new CyclicBarrier(3);</li><li>&#x8FD9;&#x4E9B;&#x7EBF;&#x7A0B;&#x540C;&#x65F6;&#x5F00;&#x59CB;&#x81EA;&#x5DF1;&#x505A;&#x51C6;&#x5907;&#xFF0C;&#x81EA;&#x8EAB;&#x51C6;&#x5907;&#x5B8C;&#x6BD5;&#x540E;&#xFF0C;&#x9700;&#x8981;&#x7B49;&#x5F85;&#x522B;&#x4EBA;&#x51C6;&#x5907;&#x5B8C;&#x6BD5;&#xFF0C;&#x8FD9;&#x65F6;&#x8C03;&#x7528; <code>cyclicBarrier.await();</code> &#x5373;&#x53EF;&#x5F00;&#x59CB;&#x7B49;&#x5F85;&#x522B;&#x4EBA;&#xFF1B;</li><li>&#x5F53;&#x6307;&#x5B9A;&#x7684; <code>&#x540C;&#x65F6;&#x7B49;&#x5F85;</code>&#x7684;&#x7EBF;&#x7A0B;&#x6570;&#x90FD;&#x8C03;&#x7528;&#x4E86; <code>cyclicBarrier.await();</code>&#x65F6;&#xFF0C;&#x610F;&#x5473;&#x7740;&#x8FD9;&#x4E9B;&#x7EBF;&#x7A0B;&#x90FD;&#x51C6;&#x5907;&#x5B8C;&#x6BD5;&#x597D;&#xFF0C;&#x7136;&#x540E;&#x8FD9;&#x4E9B;&#x7EBF;&#x7A0B;&#x624D; <code>&#x540C;&#x65F6;&#x7EE7;&#x7EED;&#x6267;&#x884C;</code>&#x3002;</li></ol><p>&#x5B9E;&#x73B0;&#x4EE3;&#x7801;&#x5982;&#x4E0B;&#xFF0C;&#x8BBE;&#x60F3;&#x6709;&#x4E09;&#x4E2A;&#x8DD1;&#x6B65;&#x8FD0;&#x52A8;&#x5458;&#xFF0C;&#x5404;&#x81EA;&#x51C6;&#x5907;&#x597D;&#x540E;&#x7B49;&#x5F85;&#x5176;&#x4ED6;&#x4EBA;&#xFF0C;&#x5168;&#x90E8;&#x51C6;&#x5907;&#x597D;&#x540E;&#x624D;&#x5F00;&#x59CB;&#x8DD1;&#xFF1A;</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">runABCWhenAllReady</span><span class="params">()</span> </span>{</span><br><span class="line">    <span class="keyword">int</span> runner = <span class="number">3</span>;</span><br><span class="line">    CyclicBarrier cyclicBarrier = <span class="keyword">new</span> CyclicBarrier(runner);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">final</span> Random random = <span class="keyword">new</span> Random();</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">char</span> runnerName=<span class="string">&apos;A&apos;</span>; runnerName &lt;= <span class="string">&apos;C&apos;</span>; runnerName++) {</span><br><span class="line">        <span class="keyword">final</span> String rN = String.valueOf(runnerName);</span><br><span class="line">        <span class="keyword">new</span> Thread(<span class="keyword">new</span> Runnable() {</span><br><span class="line">            <span class="meta">@Override</span></span><br><span class="line">            <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">run</span><span class="params">()</span> </span>{</span><br><span class="line">                <span class="keyword">long</span> prepareTime = random.nextInt(<span class="number">10000</span>) + <span class="number">100</span>;</span><br><span class="line">                System.out.println(rN + <span class="string">&quot; is preparing for time: &quot;</span> + prepareTime);</span><br><span class="line">                <span class="keyword">try</span> {</span><br><span class="line">                    Thread.sleep(prepareTime);</span><br><span class="line">                } <span class="keyword">catch</span> (Exception e) {</span><br><span class="line">                    e.printStackTrace();</span><br><span class="line">                }</span><br><span class="line"></span><br><span class="line">                <span class="keyword">try</span> {</span><br><span class="line">                    System.out.println(rN + <span class="string">&quot; is prepared, waiting for others&quot;</span>);</span><br><span class="line">                    cyclicBarrier.await(); <span class="comment">// &#x5F53;&#x524D;&#x8FD0;&#x52A8;&#x5458;&#x51C6;&#x5907;&#x5B8C;&#x6BD5;&#xFF0C;&#x7B49;&#x5F85;&#x522B;&#x4EBA;&#x51C6;&#x5907;&#x597D;</span></span><br><span class="line">                } <span class="keyword">catch</span> (InterruptedException e) {</span><br><span class="line">                    e.printStackTrace();</span><br><span class="line">                } <span class="keyword">catch</span> (BrokenBarrierException e) {</span><br><span class="line">                    e.printStackTrace();</span><br><span class="line">                }</span><br><span class="line"></span><br><span class="line">                System.out.println(rN + <span class="string">&quot; starts running&quot;</span>); <span class="comment">// &#x6240;&#x6709;&#x8FD0;&#x52A8;&#x5458;&#x90FD;&#x51C6;&#x5907;&#x597D;&#x4E86;&#xFF0C;&#x4E00;&#x8D77;&#x5F00;&#x59CB;&#x8DD1;</span></span><br><span class="line">            }</span><br><span class="line">        }).start();</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></table></figure><p>&#x6253;&#x5370;&#x7684;&#x7ED3;&#x679C;&#x5982;&#x4E0B;&#xFF1A;</p><blockquote><p>A is preparing for time: 4131<br>B is preparing for time: 6349<br>C is preparing for time: 8206</p><p>A is prepared, waiting for others</p><p>B is prepared, waiting for others</p><p>C is prepared, waiting for others</p><p>C starts running<br>A starts running<br>B starts running</p></blockquote><h2 id="&#x5B50;&#x7EBF;&#x7A0B;&#x5B8C;&#x6210;&#x67D0;&#x4EF6;&#x4EFB;&#x52A1;&#x540E;&#xFF0C;&#x628A;&#x5F97;&#x5230;&#x7684;&#x7ED3;&#x679C;&#x56DE;&#x4F20;&#x7ED9;&#x4E3B;&#x7EBF;&#x7A0B;"><a href="#&#x5B50;&#x7EBF;&#x7A0B;&#x5B8C;&#x6210;&#x67D0;&#x4EF6;&#x4EFB;&#x52A1;&#x540E;&#xFF0C;&#x628A;&#x5F97;&#x5230;&#x7684;&#x7ED3;&#x679C;&#x56DE;&#x4F20;&#x7ED9;&#x4E3B;&#x7EBF;&#x7A0B;" class="headerlink" title="&#x5B50;&#x7EBF;&#x7A0B;&#x5B8C;&#x6210;&#x67D0;&#x4EF6;&#x4EFB;&#x52A1;&#x540E;&#xFF0C;&#x628A;&#x5F97;&#x5230;&#x7684;&#x7ED3;&#x679C;&#x56DE;&#x4F20;&#x7ED9;&#x4E3B;&#x7EBF;&#x7A0B;"></a>&#x5B50;&#x7EBF;&#x7A0B;&#x5B8C;&#x6210;&#x67D0;&#x4EF6;&#x4EFB;&#x52A1;&#x540E;&#xFF0C;&#x628A;&#x5F97;&#x5230;&#x7684;&#x7ED3;&#x679C;&#x56DE;&#x4F20;&#x7ED9;&#x4E3B;&#x7EBF;&#x7A0B;</h2><p>&#x5B9E;&#x9645;&#x7684;&#x5F00;&#x53D1;&#x4E2D;&#xFF0C;&#x6211;&#x4EEC;&#x7ECF;&#x5E38;&#x8981;&#x521B;&#x5EFA;&#x5B50;&#x7EBF;&#x7A0B;&#x6765;&#x505A;&#x4E00;&#x4E9B;&#x8017;&#x65F6;&#x4EFB;&#x52A1;&#xFF0C;&#x7136;&#x540E;&#x628A;&#x4EFB;&#x52A1;&#x6267;&#x884C;&#x7ED3;&#x679C;&#x56DE;&#x4F20;&#x7ED9;&#x4E3B;&#x7EBF;&#x7A0B;&#x4F7F;&#x7528;&#xFF0C;&#x8FD9;&#x79CD;&#x60C5;&#x51B5;&#x5728; Java &#x91CC;&#x8981;&#x5982;&#x4F55;&#x5B9E;&#x73B0;&#x5462;&#xFF1F;</p><p>&#x56DE;&#x987E;&#x7EBF;&#x7A0B;&#x7684;&#x521B;&#x5EFA;&#xFF0C;&#x6211;&#x4EEC;&#x4E00;&#x822C;&#x4F1A;&#x628A; <code>Runnable</code> &#x5BF9;&#x8C61;&#x4F20;&#x7ED9; Thread &#x53BB;&#x6267;&#x884C;&#x3002;<code>Runnable</code>&#x5B9A;&#x4E49;&#x5982;&#x4E0B;&#xFF1A;</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">Runnable</span> </span>{</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">abstract</span> <span class="keyword">void</span> <span class="title">run</span><span class="params">()</span></span>;</span><br><span class="line">}</span><br></pre></td></tr></table></figure><p>&#x53EF;&#x4EE5;&#x770B;&#x5230; <code>run()</code> &#x5728;&#x6267;&#x884C;&#x5B8C;&#x540E;&#x4E0D;&#x4F1A;&#x8FD4;&#x56DE;&#x4EFB;&#x4F55;&#x7ED3;&#x679C;&#x3002;&#x90A3;&#x5982;&#x679C;&#x5E0C;&#x671B;&#x8FD4;&#x56DE;&#x7ED3;&#x679C;&#x5462;&#xFF1F;&#x8FD9;&#x91CC;&#x53EF;&#x4EE5;&#x5229;&#x7528;&#x53E6;&#x4E00;&#x4E2A;&#x7C7B;&#x4F3C;&#x7684;&#x63A5;&#x53E3;&#x7C7B; <code>Callable</code>&#xFF1A;</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@FunctionalInterface</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">Callable</span>&lt;<span class="title">V</span>&gt; </span>{</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * Computes a result, or throws an exception if unable to do so.</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> computed result</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@throws</span> Exception if unable to compute a result</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function">V <span class="title">call</span><span class="params">()</span> <span class="keyword">throws</span> Exception</span>;</span><br><span class="line">}</span><br></pre></td></tr></table></figure><p>&#x53EF;&#x4EE5;&#x770B;&#x51FA; <code>Callable</code> &#x6700;&#x5927;&#x533A;&#x522B;&#x5C31;&#x662F;&#x8FD4;&#x56DE;&#x8303;&#x578B; <code>V</code> &#x7ED3;&#x679C;&#x3002;</p><p>&#x90A3;&#x4E48;&#x4E0B;&#x4E00;&#x4E2A;&#x95EE;&#x9898;&#x5C31;&#x662F;&#xFF0C;&#x5982;&#x4F55;&#x628A;&#x5B50;&#x7EBF;&#x7A0B;&#x7684;&#x7ED3;&#x679C;&#x56DE;&#x4F20;&#x56DE;&#x6765;&#x5462;&#xFF1F;&#x5728; Java &#x91CC;&#xFF0C;&#x6709;&#x4E00;&#x4E2A;&#x7C7B;&#x662F;&#x914D;&#x5408; Callable &#x4F7F;&#x7528;&#x7684;&#xFF1A;<code>FutureTask</code>&#xFF0C;&#x4E0D;&#x8FC7;&#x6CE8;&#x610F;&#xFF0C;&#x5B83;&#x83B7;&#x53D6;&#x7ED3;&#x679C;&#x7684; <code>get</code> &#x65B9;&#x6CD5;&#x4F1A;&#x963B;&#x585E;&#x4E3B;&#x7EBF;&#x7A0B;&#x3002;</p><p>&#x4E3E;&#x4F8B;&#xFF0C;&#x6211;&#x4EEC;&#x60F3;&#x8BA9;&#x5B50;&#x7EBF;&#x7A0B;&#x53BB;&#x8BA1;&#x7B97;&#x4ECE; 1 &#x52A0;&#x5230; 100&#xFF0C;&#x5E76;&#x628A;&#x7B97;&#x51FA;&#x7684;&#x7ED3;&#x679C;&#x8FD4;&#x56DE;&#x5230;&#x4E3B;&#x7EBF;&#x7A0B;&#x3002;</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">doTaskWithResultInWorker</span><span class="params">()</span> </span>{</span><br><span class="line">    Callable&lt;Integer&gt; callable = <span class="keyword">new</span> Callable&lt;Integer&gt;() {</span><br><span class="line">        <span class="meta">@Override</span></span><br><span class="line">        <span class="function"><span class="keyword">public</span> Integer <span class="title">call</span><span class="params">()</span> <span class="keyword">throws</span> Exception </span>{</span><br><span class="line">            System.out.println(<span class="string">&quot;Task starts&quot;</span>);</span><br><span class="line">            Thread.sleep(<span class="number">1000</span>);</span><br><span class="line">            <span class="keyword">int</span> result = <span class="number">0</span>;</span><br><span class="line">            <span class="keyword">for</span> (<span class="keyword">int</span> i=<span class="number">0</span>; i&lt;=<span class="number">100</span>; i++) {</span><br><span class="line">                result += i;</span><br><span class="line">            }</span><br><span class="line">            System.out.println(<span class="string">&quot;Task finished and return result&quot;</span>);</span><br><span class="line">            <span class="keyword">return</span> result;</span><br><span class="line">        }</span><br><span class="line">    };</span><br><span class="line"></span><br><span class="line">    FutureTask&lt;Integer&gt; futureTask = <span class="keyword">new</span> FutureTask&lt;&gt;(callable);</span><br><span class="line">    <span class="keyword">new</span> Thread(futureTask).start();</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="keyword">try</span> {</span><br><span class="line">        System.out.println(<span class="string">&quot;Before futureTask.get()&quot;</span>);</span><br><span class="line">        System.out.println(<span class="string">&quot;Result: &quot;</span> + futureTask.get());</span><br><span class="line">        System.out.println(<span class="string">&quot;After futureTask.get()&quot;</span>);</span><br><span class="line">    } <span class="keyword">catch</span> (InterruptedException e) {</span><br><span class="line">        e.printStackTrace();</span><br><span class="line">    } <span class="keyword">catch</span> (ExecutionException e) {</span><br><span class="line">        e.printStackTrace();</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></table></figure><p>&#x6253;&#x5370;&#x7ED3;&#x679C;&#x5982;&#x4E0B;&#xFF1A;</p><blockquote><p>Before futureTask.get()</p><p>Task starts<br>Task finished and return result</p><p>Result: 5050<br>After futureTask.get()</p></blockquote><p>&#x53EF;&#x4EE5;&#x770B;&#x5230;&#xFF0C;&#x4E3B;&#x7EBF;&#x7A0B;&#x8C03;&#x7528; <code>futureTask.get()</code> &#x65B9;&#x6CD5;&#x65F6;&#x963B;&#x585E;&#x4E3B;&#x7EBF;&#x7A0B;&#xFF1B;&#x7136;&#x540E; <code>Callable</code> &#x5185;&#x90E8;&#x5F00;&#x59CB;&#x6267;&#x884C;&#xFF0C;&#x5E76;&#x8FD4;&#x56DE;&#x8FD0;&#x7B97;&#x7ED3;&#x679C;&#xFF1B;&#x6B64;&#x65F6; <code>futureTask.get()</code> &#x5F97;&#x5230;&#x7ED3;&#x679C;&#xFF0C;&#x4E3B;&#x7EBF;&#x7A0B;&#x6062;&#x590D;&#x8FD0;&#x884C;&#x3002;</p><p>&#x8FD9;&#x91CC;&#x6211;&#x4EEC;&#x53EF;&#x4EE5;&#x5B66;&#x5230;&#xFF0C;&#x901A;&#x8FC7; <code>FutureTask</code> &#x548C; <code>Callable</code> &#x53EF;&#x4EE5;&#x76F4;&#x63A5;&#x5728;&#x4E3B;&#x7EBF;&#x7A0B;&#x83B7;&#x5F97;&#x5B50;&#x7EBF;&#x7A0B;&#x7684;&#x8FD0;&#x7B97;&#x7ED3;&#x679C;&#xFF0C;&#x53EA;&#x4E0D;&#x8FC7;&#x9700;&#x8981;&#x963B;&#x585E;&#x4E3B;&#x7EBF;&#x7A0B;&#x3002;&#x5F53;&#x7136;&#xFF0C;&#x5982;&#x679C;&#x4E0D;&#x5E0C;&#x671B;&#x963B;&#x585E;&#x4E3B;&#x7EBF;&#x7A0B;&#xFF0C;&#x53EF;&#x4EE5;&#x8003;&#x8651;&#x5229;&#x7528; <code>ExecutorService</code>&#xFF0C;&#x628A; <code>FutureTask</code> &#x653E;&#x5230;&#x7EBF;&#x7A0B;&#x6C60;&#x53BB;&#x7BA1;&#x7406;&#x6267;&#x884C;&#x3002;</p><h2 id="&#x5C0F;&#x7ED3;"><a href="#&#x5C0F;&#x7ED3;" class="headerlink" title="&#x5C0F;&#x7ED3;"></a>&#x5C0F;&#x7ED3;</h2><p>&#x591A;&#x7EBF;&#x7A0B;&#x662F;&#x73B0;&#x4EE3;&#x8BED;&#x8A00;&#x7684;&#x5171;&#x540C;&#x7279;&#x6027;&#xFF0C;&#x800C;&#x7EBF;&#x7A0B;&#x95F4;&#x901A;&#x4FE1;&#x3001;&#x7EBF;&#x7A0B;&#x540C;&#x6B65;&#x3001;&#x7EBF;&#x7A0B;&#x5B89;&#x5168;&#x662F;&#x5F88;&#x91CD;&#x8981;&#x7684;&#x8BDD;&#x9898;&#x3002;&#x672C;&#x6587;&#x9488;&#x5BF9; Java &#x7684;&#x7EBF;&#x7A0B;&#x95F4;&#x901A;&#x4FE1;&#x8FDB;&#x884C;&#x4E86;&#x5927;&#x81F4;&#x7684;&#x8BB2;&#x89E3;&#xFF0C;&#x540E;&#x7EED;&#x8FD8;&#x4F1A;&#x5BF9;&#x7EBF;&#x7A0B;&#x540C;&#x6B65;&#x3001;&#x7EBF;&#x7A0B;&#x5B89;&#x5168;&#x8FDB;&#x884C;&#x8BB2;&#x89E3;&#x3002;</p>]]></content>
    
    <summary type="html">
    
      &lt;blockquote&gt;
&lt;p&gt;&amp;#x6B63;&amp;#x5E38;&amp;#x60C5;&amp;#x51B5;&amp;#x4E0B;&amp;#xFF0C;&amp;#x6BCF;&amp;#x4E2A;&amp;#x5B50;&amp;#x7EBF;&amp;#x7A0B;&amp;#x5B8C;&amp;#x6210;&amp;#x5404;&amp;#x81EA;&amp;#x7684;&amp;#x4EFB;&amp;#x52A1;&amp;#x5C31;&amp;#x53EF;&amp;#x4EE5;&amp;#x7ED3;&amp;#x675F;&amp;#x4E86;&amp;#x3002;&amp;#x4E0D;&amp;#x8FC7;&amp;#x6709;&amp;#x7684;&amp;#x65F6;&amp;#x5019;&amp;#xFF0C;&amp;#x6211;&amp;#x4EEC;&amp;#x5E0C;&amp;#x671B;&amp;#x591A;&amp;#x4E2A;&amp;#x7EBF;&amp;#x7A0B;&amp;#x534F;&amp;#x540C;&amp;#x5DE5;&amp;#x4F5C;&amp;#x6765;&amp;#x5B8C;&amp;#x6210;&amp;#x67D0;&amp;#x4E2A;&amp;#x4EFB;&amp;#x52A1;&amp;#xFF0C;&amp;#x8FD9;&amp;#x65F6;&amp;#x5C31;&amp;#x6D89;&amp;#x53CA;&amp;#x5230;&amp;#x4E86;&amp;#x7EBF;&amp;#x7A0B;&amp;#x95F4;&amp;#x901A;&amp;#x4FE1;&amp;#x4E86;&amp;#x3002;&lt;/p&gt;
&lt;p&gt;&amp;#x672C;&amp;#x6587;&amp;#x6D89;&amp;#x53CA;&amp;#x5230;&amp;#x7684;&amp;#x77E5;&amp;#x8BC6;&amp;#x70B9;&amp;#xFF1A;&lt;code&gt;thread.join()&lt;/code&gt;, &lt;code&gt;object.wait()&lt;/code&gt;, &lt;code&gt;object.notify()&lt;/code&gt;, &lt;code&gt;CountdownLatch&lt;/code&gt;, &lt;code&gt;CyclicBarrier&lt;/code&gt;, &lt;code&gt;FutureTask&lt;/code&gt;, &lt;code&gt;Callable&lt;/code&gt; &amp;#x7B49;&amp;#x3002;&lt;/p&gt;
&lt;p&gt;&amp;#x539F;&amp;#x6587;&amp;#x94FE;&amp;#x63A5;&amp;#xFF1A;&lt;a href=&quot;http://wingjay.com/2017/04/09/Java%E9%87%8C%E5%A6%82%E4%BD%95%E5%AE%9E%E7%8E%B0%E7%BA%BF%E7%A8%8B%E9%97%B4%E9%80%9A%E4%BF%A1%EF%BC%9F/&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;Java &amp;#x4E2D;&amp;#x662F;&amp;#x5982;&amp;#x4F55;&amp;#x5B9E;&amp;#x73B0;&amp;#x7EBF;&amp;#x7A0B;&amp;#x901A;&amp;#x4FE1;&amp;#xFF1F;&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;&amp;#x672C;&amp;#x6587;&amp;#x6D89;&amp;#x53CA;&amp;#x4EE3;&amp;#x7801;&amp;#xFF1A;&lt;a href=&quot;https://github.com/wingjay/HelloJava/blob/master/multi-thread/src/ForArticle.java&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;https://github.com/wingjay/HelloJava/blob/master/multi-thread/src/ForArticle.java&lt;/a&gt;&lt;/p&gt;
&lt;/blockquote&gt;
    
    </summary>
    
      <category term="Java 基础" scheme="http://blog.cuzz.site/categories/Java-%E5%9F%BA%E7%A1%80/"/>
    
    
      <category term="转载" scheme="http://blog.cuzz.site/tags/%E8%BD%AC%E8%BD%BD/"/>
    
      <category term="多线程" scheme="http://blog.cuzz.site/tags/%E5%A4%9A%E7%BA%BF%E7%A8%8B/"/>
    
      <category term="线程通信" scheme="http://blog.cuzz.site/tags/%E7%BA%BF%E7%A8%8B%E9%80%9A%E4%BF%A1/"/>
    
  </entry>
  
  <entry>
    <title>Java 中的锁</title>
    <link href="http://blog.cuzz.site/2019/02/13/Java%20%E4%B8%AD%E7%9A%84%E9%94%81/"/>
    <id>http://blog.cuzz.site/2019/02/13/Java 中的锁/</id>
    <published>2019-02-13T15:59:59.000Z</published>
    <updated>2019-08-12T12:03:26.843Z</updated>
    
    <content type="html"><![CDATA[<h2 id="Java&#x4E2D;&#x7684;&#x9501;&#x5206;&#x7C7B;"><a href="#Java&#x4E2D;&#x7684;&#x9501;&#x5206;&#x7C7B;" class="headerlink" title="Java&#x4E2D;&#x7684;&#x9501;&#x5206;&#x7C7B;"></a>Java&#x4E2D;&#x7684;&#x9501;&#x5206;&#x7C7B;</h2><p>&#x5728;&#x8BFB;&#x5F88;&#x591A;&#x5E76;&#x53D1;&#x6587;&#x7AE0;&#x4E2D;&#xFF0C;&#x4F1A;&#x63D0;&#x53CA;&#x5404;&#x79CD;&#x5404;&#x6837;&#x9501;&#x5982;&#x516C;&#x5E73;&#x9501;&#xFF0C;&#x4E50;&#x89C2;&#x9501;&#x7B49;&#x7B49;&#xFF0C;&#x8FD9;&#x7BC7;&#x6587;&#x7AE0;&#x4ECB;&#x7ECD;&#x5404;&#x79CD;&#x9501;&#x7684;&#x5206;&#x7C7B;&#x3002;&#x4ECB;&#x7ECD;&#x7684;&#x5185;&#x5BB9;&#x5982;&#x4E0B;&#xFF1A;</p><ul><li>&#x516C;&#x5E73;&#x9501;/&#x975E;&#x516C;&#x5E73;&#x9501;</li><li>&#x53EF;&#x91CD;&#x5165;&#x9501;</li><li>&#x72EC;&#x4EAB;&#x9501;/&#x5171;&#x4EAB;&#x9501;</li><li>&#x4E92;&#x65A5;&#x9501;/&#x8BFB;&#x5199;&#x9501;</li><li>&#x4E50;&#x89C2;&#x9501;/&#x60B2;&#x89C2;&#x9501;</li><li>&#x5206;&#x6BB5;&#x9501;</li><li>&#x504F;&#x5411;&#x9501;/&#x8F7B;&#x91CF;&#x7EA7;&#x9501;/&#x91CD;&#x91CF;&#x7EA7;&#x9501;</li><li>&#x81EA;&#x65CB;&#x9501;</li></ul><p>&#x4E0A;&#x9762;&#x662F;&#x5F88;&#x591A;&#x9501;&#x7684;&#x540D;&#x8BCD;&#xFF0C;&#x8FD9;&#x4E9B;&#x5206;&#x7C7B;&#x5E76;&#x4E0D;&#x662F;&#x5168;&#x662F;&#x6307;&#x9501;&#x7684;&#x72B6;&#x6001;&#xFF0C;&#x6709;&#x7684;&#x6307;&#x9501;&#x7684;&#x7279;&#x6027;&#xFF0C;&#x6709;&#x7684;&#x6307;&#x9501;&#x7684;&#x8BBE;&#x8BA1;&#xFF0C;&#x4E0B;&#x9762;&#x603B;&#x7ED3;&#x7684;&#x5185;&#x5BB9;&#x662F;&#x5BF9;&#x6BCF;&#x4E2A;&#x9501;&#x7684;&#x540D;&#x8BCD;&#x8FDB;&#x884C;&#x4E00;&#x5B9A;&#x7684;&#x89E3;&#x91CA;&#x3002;</p><a id="more"></a><h2 id="&#x516C;&#x5E73;&#x9501;-&#x975E;&#x516C;&#x5E73;&#x9501;"><a href="#&#x516C;&#x5E73;&#x9501;-&#x975E;&#x516C;&#x5E73;&#x9501;" class="headerlink" title="&#x516C;&#x5E73;&#x9501;/&#x975E;&#x516C;&#x5E73;&#x9501;"></a>&#x516C;&#x5E73;&#x9501;/&#x975E;&#x516C;&#x5E73;&#x9501;</h2><p>&#x516C;&#x5E73;&#x9501;&#x662F;&#x6307;&#x591A;&#x4E2A;&#x7EBF;&#x7A0B;&#x6309;&#x7167;&#x7533;&#x8BF7;&#x9501;&#x7684;&#x987A;&#x5E8F;&#x6765;&#x83B7;&#x53D6;&#x9501;&#x3002;<br>&#x975E;&#x516C;&#x5E73;&#x9501;&#x662F;&#x6307;&#x591A;&#x4E2A;&#x7EBF;&#x7A0B;&#x83B7;&#x53D6;&#x9501;&#x7684;&#x987A;&#x5E8F;&#x5E76;&#x4E0D;&#x662F;&#x6309;&#x7167;&#x7533;&#x8BF7;&#x9501;&#x7684;&#x987A;&#x5E8F;&#xFF0C;&#x6709;&#x53EF;&#x80FD;&#x540E;&#x7533;&#x8BF7;&#x7684;&#x7EBF;&#x7A0B;&#x6BD4;&#x5148;&#x7533;&#x8BF7;&#x7684;&#x7EBF;&#x7A0B;&#x4F18;&#x5148;&#x83B7;&#x53D6;&#x9501;&#x3002;&#x6709;&#x53EF;&#x80FD;&#xFF0C;&#x4F1A;&#x9020;&#x6210;&#x4F18;&#x5148;&#x7EA7;&#x53CD;&#x8F6C;&#x6216;&#x8005;&#x9965;&#x997F;&#x73B0;&#x8C61;&#x3002;<br>&#x5BF9;&#x4E8E;Java <code>ReentrantLock</code>&#x800C;&#x8A00;&#xFF0C;&#x901A;&#x8FC7;&#x6784;&#x9020;&#x51FD;&#x6570;&#x6307;&#x5B9A;&#x8BE5;&#x9501;&#x662F;&#x5426;&#x662F;&#x516C;&#x5E73;&#x9501;&#xFF0C;&#x9ED8;&#x8BA4;&#x662F;&#x975E;&#x516C;&#x5E73;&#x9501;&#x3002;&#x975E;&#x516C;&#x5E73;&#x9501;&#x7684;&#x4F18;&#x70B9;&#x5728;&#x4E8E;&#x541E;&#x5410;&#x91CF;&#x6BD4;&#x516C;&#x5E73;&#x9501;&#x5927;&#x3002;<br>&#x5BF9;&#x4E8E;<code>Synchronized</code>&#x800C;&#x8A00;&#xFF0C;&#x4E5F;&#x662F;&#x4E00;&#x79CD;&#x975E;&#x516C;&#x5E73;&#x9501;&#x3002;&#x7531;&#x4E8E;&#x5176;&#x5E76;&#x4E0D;&#x50CF;<code>ReentrantLock</code>&#x662F;&#x901A;&#x8FC7;AQS&#x7684;&#x6765;&#x5B9E;&#x73B0;&#x7EBF;&#x7A0B;&#x8C03;&#x5EA6;&#xFF0C;&#x6240;&#x4EE5;&#x5E76;&#x6CA1;&#x6709;&#x4EFB;&#x4F55;&#x529E;&#x6CD5;&#x4F7F;&#x5176;&#x53D8;&#x6210;&#x516C;&#x5E73;&#x9501;&#x3002;</p><h2 id="&#x53EF;&#x91CD;&#x5165;&#x9501;-&#x4E0D;&#x53EF;&#x91CD;&#x5165;&#x9501;"><a href="#&#x53EF;&#x91CD;&#x5165;&#x9501;-&#x4E0D;&#x53EF;&#x91CD;&#x5165;&#x9501;" class="headerlink" title="&#x53EF;&#x91CD;&#x5165;&#x9501;/&#x4E0D;&#x53EF;&#x91CD;&#x5165;&#x9501;"></a>&#x53EF;&#x91CD;&#x5165;&#x9501;/&#x4E0D;&#x53EF;&#x91CD;&#x5165;&#x9501;</h2><p>&#x6700;&#x8FD1;&#x6B63;&#x5728;&#x9605;&#x8BFB;Java ReentrantLock&#x6E90;&#x7801;&#xFF0C;&#x59CB;&#x7EC8;&#x5BF9;&#x53EF;&#x91CD;&#x5165;&#x548C;&#x4E0D;&#x53EF;&#x91CD;&#x5165;&#x6982;&#x5FF5;&#x7406;&#x89E3;&#x4E0D;&#x900F;&#x5F7B;&#xFF0C;&#x8FDB;&#x884C;&#x5B66;&#x4E60;&#x540E;&#x8BB0;&#x5F55;&#x5728;&#x8FD9;&#x91CC;&#x3002;</p><h3 id="&#x57FA;&#x7840;&#x77E5;&#x8BC6;"><a href="#&#x57FA;&#x7840;&#x77E5;&#x8BC6;" class="headerlink" title="&#x57FA;&#x7840;&#x77E5;&#x8BC6;"></a>&#x57FA;&#x7840;&#x77E5;&#x8BC6;</h3><p>Java&#x591A;&#x7EBF;&#x7A0B;&#x7684; wait() &#x65B9;&#x6CD5;&#x548C; notify() &#x65B9;&#x6CD5;&#x3002;<br>&#x8FD9;&#x4E24;&#x4E2A;&#x65B9;&#x6CD5;&#x662F;&#x6210;&#x5BF9;&#x51FA;&#x73B0;&#x548C;&#x4F7F;&#x7528;&#x7684;&#xFF0C;&#x8981;&#x6267;&#x884C;&#x8FD9;&#x4E24;&#x4E2A;&#x65B9;&#x6CD5;&#xFF0C;&#x6709;&#x4E00;&#x4E2A;&#x524D;&#x63D0;&#x5C31;&#x662F;&#xFF0C;&#x5F53;&#x524D;&#x7EBF;&#x7A0B;&#x5FC5;&#x987B;&#x83B7;&#x5176;&#x5BF9;&#x8C61;&#x7684;monitor&#xFF08;&#x4FD7;&#x79F0;&#x201C;&#x9501;&#x201D;&#xFF09;&#xFF0C;&#x5426;&#x5219;&#x4F1A;&#x629B;&#x51FA; IllegalMonitorStateException &#x5F02;&#x5E38;&#xFF0C;&#x6240;&#x4EE5;&#x8FD9;&#x4E24;&#x4E2A;&#x65B9;&#x6CD5;&#x5FC5;&#x987B;&#x5728;&#x540C;&#x6B65;&#x5757;&#x4EE3;&#x7801;&#x91CC;&#x9762;&#x8C03;&#x7528;&#x3002;</p><ul><li>wait()&#xFF1A;&#x963B;&#x585E;&#x5F53;&#x524D;&#x7EBF;&#x7A0B;</li><li>notify()&#xFF1A;&#x5524;&#x8D77;&#x88AB;wait()&#x963B;&#x585E;&#x7684;&#x7EBF;&#x7A0B;</li></ul><h3 id="&#x4E0D;&#x53EF;&#x91CD;&#x5165;&#x9501;"><a href="#&#x4E0D;&#x53EF;&#x91CD;&#x5165;&#x9501;" class="headerlink" title="&#x4E0D;&#x53EF;&#x91CD;&#x5165;&#x9501;"></a>&#x4E0D;&#x53EF;&#x91CD;&#x5165;&#x9501;</h3><p>&#x6240;&#x8C13;&#x4E0D;&#x53EF;&#x91CD;&#x5165;&#x9501;&#xFF0C;&#x5373;&#x82E5;&#x5F53;&#x524D;&#x7EBF;&#x7A0B;&#x6267;&#x884C;&#x67D0;&#x4E2A;&#x65B9;&#x6CD5;&#x5DF2;&#x7ECF;&#x83B7;&#x53D6;&#x4E86;&#x8BE5;&#x9501;&#xFF0C;&#x90A3;&#x4E48;&#x5728;&#x65B9;&#x6CD5;&#x4E2D;&#x5C1D;&#x8BD5;&#x518D;&#x6B21;&#x83B7;&#x53D6;&#x9501;&#x65F6;&#xFF0C;&#x5C31;&#x4F1A;&#x83B7;&#x53D6;&#x4E0D;&#x5230;&#x88AB;&#x963B;&#x585E;&#x3002;&#x6211;&#x4EEC;&#x5C1D;&#x8BD5;&#x8BBE;&#x8BA1;&#x4E00;&#x4E2A;&#x4E0D;&#x53EF;&#x91CD;&#x5165;&#x9501;&#xFF1A;</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Lock</span></span>{</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">boolean</span> isLocked = <span class="keyword">false</span>;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">synchronized</span> <span class="keyword">void</span> <span class="title">lock</span><span class="params">()</span> <span class="keyword">throws</span> InterruptedException </span>{</span><br><span class="line">        <span class="keyword">while</span>(isLocked){    </span><br><span class="line">            wait();</span><br><span class="line">        }</span><br><span class="line">        isLocked = <span class="keyword">true</span>;</span><br><span class="line">    }</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">synchronized</span> <span class="keyword">void</span> <span class="title">unlock</span><span class="params">()</span></span>{</span><br><span class="line">        isLocked = <span class="keyword">false</span>;</span><br><span class="line">        notify();</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></table></figure><p>&#x4F7F;&#x7528;&#x8BE5;&#x9501;&#xFF1A;</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Count</span></span>{</span><br><span class="line">    Lock lock = <span class="keyword">new</span> Lock();</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">print</span><span class="params">()</span></span>{</span><br><span class="line">        lock.lock();</span><br><span class="line">        doAdd();</span><br><span class="line">        lock.unlock();</span><br><span class="line">    }</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">doAdd</span><span class="params">()</span></span>{</span><br><span class="line">        lock.lock();</span><br><span class="line">        <span class="comment">//do something</span></span><br><span class="line">        lock.unlock();</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></table></figure><p>&#x5F53;&#x524D;&#x7EBF;&#x7A0B;&#x6267;&#x884C;print()&#x65B9;&#x6CD5;&#x9996;&#x5148;&#x83B7;&#x53D6;lock&#xFF0C;&#x63A5;&#x4E0B;&#x6765;&#x6267;&#x884C;doAdd()&#x65B9;&#x6CD5;&#x5C31;&#x65E0;&#x6CD5;&#x6267;&#x884C;doAdd()&#x4E2D;&#x7684;&#x903B;&#x8F91;&#xFF0C;&#x5FC5;&#x987B;&#x5148;&#x91CA;&#x653E;&#x9501;&#x3002;&#x8FD9;&#x4E2A;&#x4F8B;&#x5B50;&#x5F88;&#x597D;&#x7684;&#x8BF4;&#x660E;&#x4E86;&#x4E0D;&#x53EF;&#x91CD;&#x5165;&#x9501;&#x3002;</p><h3 id="&#x53EF;&#x91CD;&#x5165;&#x9501;"><a href="#&#x53EF;&#x91CD;&#x5165;&#x9501;" class="headerlink" title="&#x53EF;&#x91CD;&#x5165;&#x9501;"></a>&#x53EF;&#x91CD;&#x5165;&#x9501;</h3><p>&#x63A5;&#x4E0B;&#x6765;&#xFF0C;&#x6211;&#x4EEC;&#x8BBE;&#x8BA1;&#x4E00;&#x79CD;&#x53EF;&#x91CD;&#x5165;&#x9501;</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Lock</span></span>{</span><br><span class="line">    <span class="keyword">boolean</span> isLocked = <span class="keyword">false</span>;</span><br><span class="line">    Thread  lockedBy = <span class="keyword">null</span>;</span><br><span class="line">    <span class="keyword">int</span> lockedCount = <span class="number">0</span>;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">synchronized</span> <span class="keyword">void</span> <span class="title">lock</span><span class="params">()</span></span></span><br><span class="line"><span class="function">            <span class="keyword">throws</span> InterruptedException</span>{</span><br><span class="line">        Thread thread = Thread.currentThread();</span><br><span class="line">        <span class="keyword">while</span>(isLocked &amp;&amp; lockedBy != thread){</span><br><span class="line">            wait();</span><br><span class="line">        }</span><br><span class="line">        isLocked = <span class="keyword">true</span>;</span><br><span class="line">        lockedCount++;</span><br><span class="line">        lockedBy = thread;</span><br><span class="line">    }</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">synchronized</span> <span class="keyword">void</span> <span class="title">unlock</span><span class="params">()</span></span>{</span><br><span class="line">        <span class="keyword">if</span>(Thread.currentThread() == <span class="keyword">this</span>.lockedBy){</span><br><span class="line">            lockedCount--;</span><br><span class="line">            <span class="keyword">if</span>(lockedCount == <span class="number">0</span>){</span><br><span class="line">                isLocked = <span class="keyword">false</span>;</span><br><span class="line">                notify();</span><br><span class="line">            }</span><br><span class="line">        }</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></table></figure><p>&#x6240;&#x8C13;&#x53EF;&#x91CD;&#x5165;&#xFF0C;&#x610F;&#x5473;&#x7740;&#x7EBF;&#x7A0B;&#x53EF;&#x4EE5;&#x8FDB;&#x5165;&#x5B83;&#x5DF2;&#x7ECF;&#x62E5;&#x6709;&#x7684;&#x9501;&#x7684;&#x540C;&#x6B65;&#x4EE3;&#x7801;&#x5757;&#x513F;&#x3002;</p><p>&#x6211;&#x4EEC;&#x8BBE;&#x8BA1;&#x4E24;&#x4E2A;&#x7EBF;&#x7A0B;&#x8C03;&#x7528; print() &#x65B9;&#x6CD5;&#xFF0C;&#x7B2C;&#x4E00;&#x4E2A;&#x7EBF;&#x7A0B;&#x8C03;&#x7528; print() &#x65B9;&#x6CD5;&#x83B7;&#x53D6;&#x9501;&#xFF0C;&#x8FDB;&#x5165; lock() &#x65B9;&#x6CD5;&#xFF0C;&#x7531;&#x4E8E;&#x521D;&#x59CB; lockedBy &#x662F; null&#xFF0C;&#x6240;&#x4EE5;&#x4E0D;&#x4F1A;&#x8FDB;&#x5165; while &#x800C;&#x6302;&#x8D77;&#x5F53;&#x524D;&#x7EBF;&#x7A0B;&#xFF0C;&#x800C;&#x662F;&#x662F;&#x589E;&#x91CF; lockedCount &#x5E76;&#x8BB0;&#x5F55; lockBy &#x4E3A;&#x7B2C;&#x4E00;&#x4E2A;&#x7EBF;&#x7A0B;&#x3002;&#x63A5;&#x7740;&#x7B2C;&#x4E00;&#x4E2A;&#x7EBF;&#x7A0B;&#x8FDB;&#x5165; doAdd() &#x65B9;&#x6CD5;&#xFF0C;&#x7531;&#x4E8E;&#x540C;&#x4E00;&#x8FDB;&#x7A0B;&#xFF0C;&#x6240;&#x4EE5;&#x4E0D;&#x4F1A;&#x8FDB;&#x5165; while &#x800C;&#x6302;&#x8D77;&#xFF0C;&#x63A5;&#x7740;&#x589E;&#x91CF; lockedCount&#xFF0C;&#x5F53;&#x7B2C;&#x4E8C;&#x4E2A;&#x7EBF;&#x7A0B;&#x5C1D;&#x8BD5;lock&#xFF0C;&#x7531;&#x4E8E; isLocked=true&#xFF0C;&#x6240;&#x4EE5;&#x4ED6;&#x4E0D;&#x4F1A;&#x83B7;&#x53D6;&#x8BE5;&#x9501;&#xFF0C;&#x76F4;&#x5230;&#x7B2C;&#x4E00;&#x4E2A;&#x7EBF;&#x7A0B;&#x8C03;&#x7528;&#x4E24;&#x6B21; unlock() &#x5C06; lockCount &#x9012;&#x51CF;&#x4E3A;0&#xFF0C;&#x624D;&#x5C06;&#x6807;&#x8BB0;&#x4E3A; isLocked &#x8BBE;&#x7F6E;&#x4E3A; false&#x3002;</p><p>&#x53EF;&#x91CD;&#x5165;&#x9501;&#x7684;&#x6982;&#x5FF5;&#x548C;&#x8BBE;&#x8BA1;&#x601D;&#x60F3;&#x5927;&#x4F53;&#x5982;&#x6B64;&#xFF0C;Java &#x4E2D;&#x7684;&#x53EF;&#x91CD;&#x5165;&#x9501; ReentrantLock &#x8BBE;&#x8BA1;&#x601D;&#x8DEF;&#x4E5F;&#x662F;&#x8FD9;&#x6837;&#x3002;</p><h2 id="&#x72EC;&#x4EAB;&#x9501;-&#x5171;&#x4EAB;&#x9501;"><a href="#&#x72EC;&#x4EAB;&#x9501;-&#x5171;&#x4EAB;&#x9501;" class="headerlink" title="&#x72EC;&#x4EAB;&#x9501;/&#x5171;&#x4EAB;&#x9501;"></a>&#x72EC;&#x4EAB;&#x9501;/&#x5171;&#x4EAB;&#x9501;</h2><p>&#x72EC;&#x4EAB;&#x9501;&#x662F;&#x6307;&#x8BE5;&#x9501;&#x4E00;&#x6B21;&#x53EA;&#x80FD;&#x88AB;&#x4E00;&#x4E2A;&#x7EBF;&#x7A0B;&#x6240;&#x6301;&#x6709;&#x3002;<br>&#x5171;&#x4EAB;&#x9501;&#x662F;&#x6307;&#x8BE5;&#x9501;&#x53EF;&#x88AB;&#x591A;&#x4E2A;&#x7EBF;&#x7A0B;&#x6240;&#x6301;&#x6709;&#x3002;</p><p>&#x5BF9;&#x4E8E;Java <code>ReentrantLock</code>&#x800C;&#x8A00;&#xFF0C;&#x5176;&#x662F;&#x72EC;&#x4EAB;&#x9501;&#x3002;&#x4F46;&#x662F;&#x5BF9;&#x4E8E;Lock&#x7684;&#x53E6;&#x4E00;&#x4E2A;&#x5B9E;&#x73B0;&#x7C7B;<code>ReadWriteLock</code>&#xFF0C;&#x5176;&#x8BFB;&#x9501;&#x662F;&#x5171;&#x4EAB;&#x9501;&#xFF0C;&#x5176;&#x5199;&#x9501;&#x662F;&#x72EC;&#x4EAB;&#x9501;&#x3002;</p><ul><li>&#x8BFB;&#x9501;&#x7684;&#x5171;&#x4EAB;&#x9501;&#x53EF;&#x4FDD;&#x8BC1;&#x5E76;&#x53D1;&#x8BFB;&#x662F;&#x975E;&#x5E38;&#x9AD8;&#x6548;&#x7684;&#xFF0C;&#x8BFB;&#x5199;&#xFF0C;&#x5199;&#x8BFB; &#xFF0C;&#x5199;&#x5199;&#x7684;&#x8FC7;&#x7A0B;&#x662F;&#x4E92;&#x65A5;&#x7684;&#x3002;</li><li>&#x72EC;&#x4EAB;&#x9501;&#x4E0E;&#x5171;&#x4EAB;&#x9501;&#x4E5F;&#x662F;&#x901A;&#x8FC7;AQS&#x6765;&#x5B9E;&#x73B0;&#x7684;&#xFF0C;&#x901A;&#x8FC7;&#x5B9E;&#x73B0;&#x4E0D;&#x540C;&#x7684;&#x65B9;&#x6CD5;&#xFF0C;&#x6765;&#x5B9E;&#x73B0;&#x72EC;&#x4EAB;&#x6216;&#x8005;&#x5171;&#x4EAB;&#x3002;</li></ul><p>&#x5BF9;&#x4E8E;<code>Synchronized</code>&#x800C;&#x8A00;&#xFF0C;&#x5F53;&#x7136;&#x662F;&#x72EC;&#x4EAB;&#x9501;&#x3002;</p><h2 id="&#x4E92;&#x65A5;&#x9501;-&#x8BFB;&#x5199;&#x9501;"><a href="#&#x4E92;&#x65A5;&#x9501;-&#x8BFB;&#x5199;&#x9501;" class="headerlink" title="&#x4E92;&#x65A5;&#x9501;/&#x8BFB;&#x5199;&#x9501;"></a>&#x4E92;&#x65A5;&#x9501;/&#x8BFB;&#x5199;&#x9501;</h2><p>&#x4E0A;&#x9762;&#x8BB2;&#x7684;&#x72EC;&#x4EAB;&#x9501;/&#x5171;&#x4EAB;&#x9501;&#x5C31;&#x662F;&#x4E00;&#x79CD;&#x5E7F;&#x4E49;&#x7684;&#x8BF4;&#x6CD5;&#xFF0C;&#x4E92;&#x65A5;&#x9501;/&#x8BFB;&#x5199;&#x9501;&#x5C31;&#x662F;&#x5177;&#x4F53;&#x7684;&#x5B9E;&#x73B0;&#x3002;</p><ul><li>&#x4E92;&#x65A5;&#x9501;&#x5728;Java&#x4E2D;&#x7684;&#x5177;&#x4F53;&#x5B9E;&#x73B0;&#x5C31;&#x662F;<code>ReentrantLock</code></li><li>&#x8BFB;&#x5199;&#x9501;&#x5728;Java&#x4E2D;&#x7684;&#x5177;&#x4F53;&#x5B9E;&#x73B0;&#x5C31;&#x662F;<code>ReadWriteLock</code></li></ul><h2 id="&#x4E50;&#x89C2;&#x9501;-&#x60B2;&#x89C2;&#x9501;"><a href="#&#x4E50;&#x89C2;&#x9501;-&#x60B2;&#x89C2;&#x9501;" class="headerlink" title="&#x4E50;&#x89C2;&#x9501;/&#x60B2;&#x89C2;&#x9501;"></a>&#x4E50;&#x89C2;&#x9501;/&#x60B2;&#x89C2;&#x9501;</h2><p>&#x4E50;&#x89C2;&#x9501;&#x4E0E;&#x60B2;&#x89C2;&#x9501;&#x4E0D;&#x662F;&#x6307;&#x5177;&#x4F53;&#x7684;&#x4EC0;&#x4E48;&#x7C7B;&#x578B;&#x7684;&#x9501;&#xFF0C;&#x800C;&#x662F;&#x6307;&#x770B;&#x5F85;&#x5E76;&#x53D1;&#x540C;&#x6B65;&#x7684;&#x89D2;&#x5EA6;&#x3002;<br>&#x60B2;&#x89C2;&#x9501;&#x8BA4;&#x4E3A;&#x5BF9;&#x4E8E;&#x540C;&#x4E00;&#x4E2A;&#x6570;&#x636E;&#x7684;&#x5E76;&#x53D1;&#x64CD;&#x4F5C;&#xFF0C;&#x4E00;&#x5B9A;&#x662F;&#x4F1A;&#x53D1;&#x751F;&#x4FEE;&#x6539;&#x7684;&#xFF0C;&#x54EA;&#x6015;&#x6CA1;&#x6709;&#x4FEE;&#x6539;&#xFF0C;&#x4E5F;&#x4F1A;&#x8BA4;&#x4E3A;&#x4FEE;&#x6539;&#x3002;&#x56E0;&#x6B64;&#x5BF9;&#x4E8E;&#x540C;&#x4E00;&#x4E2A;&#x6570;&#x636E;&#x7684;&#x5E76;&#x53D1;&#x64CD;&#x4F5C;&#xFF0C;&#x60B2;&#x89C2;&#x9501;&#x91C7;&#x53D6;&#x52A0;&#x9501;&#x7684;&#x5F62;&#x5F0F;&#x3002;&#x60B2;&#x89C2;&#x7684;&#x8BA4;&#x4E3A;&#xFF0C;&#x4E0D;&#x52A0;&#x9501;&#x7684;&#x5E76;&#x53D1;&#x64CD;&#x4F5C;&#x4E00;&#x5B9A;&#x4F1A;&#x51FA;&#x95EE;&#x9898;&#x3002;<br>&#x4E50;&#x89C2;&#x9501;&#x5219;&#x8BA4;&#x4E3A;&#x5BF9;&#x4E8E;&#x540C;&#x4E00;&#x4E2A;&#x6570;&#x636E;&#x7684;&#x5E76;&#x53D1;&#x64CD;&#x4F5C;&#xFF0C;&#x662F;&#x4E0D;&#x4F1A;&#x53D1;&#x751F;&#x4FEE;&#x6539;&#x7684;&#x3002;&#x5728;&#x66F4;&#x65B0;&#x6570;&#x636E;&#x7684;&#x65F6;&#x5019;&#xFF0C;&#x4F1A;&#x91C7;&#x7528;&#x5C1D;&#x8BD5;&#x66F4;&#x65B0;&#xFF0C;&#x4E0D;&#x65AD;&#x91CD;&#x65B0;&#x7684;&#x65B9;&#x5F0F;&#x66F4;&#x65B0;&#x6570;&#x636E;&#x3002;&#x4E50;&#x89C2;&#x7684;&#x8BA4;&#x4E3A;&#xFF0C;&#x4E0D;&#x52A0;&#x9501;&#x7684;&#x5E76;&#x53D1;&#x64CD;&#x4F5C;&#x662F;&#x6CA1;&#x6709;&#x4E8B;&#x60C5;&#x7684;&#x3002;</p><p>&#x4ECE;&#x4E0A;&#x9762;&#x7684;&#x63CF;&#x8FF0;&#x6211;&#x4EEC;&#x53EF;&#x4EE5;&#x770B;&#x51FA;&#xFF0C;&#x60B2;&#x89C2;&#x9501;&#x9002;&#x5408;&#x5199;&#x64CD;&#x4F5C;&#x975E;&#x5E38;&#x591A;&#x7684;&#x573A;&#x666F;&#xFF0C;&#x4E50;&#x89C2;&#x9501;&#x9002;&#x5408;&#x8BFB;&#x64CD;&#x4F5C;&#x975E;&#x5E38;&#x591A;&#x7684;&#x573A;&#x666F;&#xFF0C;&#x4E0D;&#x52A0;&#x9501;&#x4F1A;&#x5E26;&#x6765;&#x5927;&#x91CF;&#x7684;&#x6027;&#x80FD;&#x63D0;&#x5347;&#x3002;</p><ul><li>&#x60B2;&#x89C2;&#x9501;&#x5728;Java&#x4E2D;&#x7684;&#x4F7F;&#x7528;&#xFF0C;&#x5C31;&#x662F;&#x5229;&#x7528;&#x5404;&#x79CD;&#x9501;&#x3002;</li><li>&#x4E50;&#x89C2;&#x9501;&#x5728;Java&#x4E2D;&#x7684;&#x4F7F;&#x7528;&#xFF0C;&#x662F;&#x65E0;&#x9501;&#x7F16;&#x7A0B;&#xFF0C;&#x5E38;&#x5E38;&#x91C7;&#x7528;&#x7684;&#x662F;CAS&#x7B97;&#x6CD5;&#xFF0C;&#x5178;&#x578B;&#x7684;&#x4F8B;&#x5B50;&#x5C31;&#x662F;&#x539F;&#x5B50;&#x7C7B;&#xFF0C;&#x901A;&#x8FC7;CAS&#x81EA;&#x65CB;&#x5B9E;&#x73B0;&#x539F;&#x5B50;&#x64CD;&#x4F5C;&#x7684;&#x66F4;&#x65B0;&#x3002;</li></ul><h2 id="&#x5206;&#x6BB5;&#x9501;"><a href="#&#x5206;&#x6BB5;&#x9501;" class="headerlink" title="&#x5206;&#x6BB5;&#x9501;"></a>&#x5206;&#x6BB5;&#x9501;</h2><p>&#x5206;&#x6BB5;&#x9501;&#x5176;&#x5B9E;&#x662F;&#x4E00;&#x79CD;&#x9501;&#x7684;&#x8BBE;&#x8BA1;&#xFF0C;&#x5E76;&#x4E0D;&#x662F;&#x5177;&#x4F53;&#x7684;&#x4E00;&#x79CD;&#x9501;&#xFF0C;&#x5BF9;&#x4E8E;<code>ConcurrentHashMap</code> &#x800C;&#x8A00;&#xFF0C;&#x5176;&#x5E76;&#x53D1;&#x7684;&#x5B9E;&#x73B0;&#x5C31;&#x662F;&#x901A;&#x8FC7;&#x5206;&#x6BB5;&#x9501;&#x7684;&#x5F62;&#x5F0F;&#x6765;&#x5B9E;&#x73B0;&#x9AD8;&#x6548;&#x7684;&#x5E76;&#x53D1;&#x64CD;&#x4F5C;&#x3002;</p><p>&#x6211;&#x4EEC;&#x4EE5;<code>ConcurrentHashMap</code>&#x6765;&#x8BF4;&#x4E00;&#x4E0B;&#x5206;&#x6BB5;&#x9501;&#x7684;&#x542B;&#x4E49;&#x4EE5;&#x53CA;&#x8BBE;&#x8BA1;&#x601D;&#x60F3;&#xFF0C;<code>ConcurrentHashMap</code>&#x4E2D;&#x7684;&#x5206;&#x6BB5;&#x9501;&#x79F0;&#x4E3A;Segment&#xFF0C;&#x5B83;&#x5373;&#x7C7B;&#x4F3C;&#x4E8E;HashMap&#xFF08;JDK7&#x4E0E;JDK8&#x4E2D;HashMap&#x7684;&#x5B9E;&#x73B0;&#xFF09;&#x7684;&#x7ED3;&#x6784;&#xFF0C;&#x5373;&#x5185;&#x90E8;&#x62E5;&#x6709;&#x4E00;&#x4E2A;Entry&#x6570;&#x7EC4;&#xFF0C;&#x6570;&#x7EC4;&#x4E2D;&#x7684;&#x6BCF;&#x4E2A;&#x5143;&#x7D20;&#x53C8;&#x662F;&#x4E00;&#x4E2A;&#x94FE;&#x8868;&#xFF1B;&#x540C;&#x65F6;&#x53C8;&#x662F;&#x4E00;&#x4E2A;ReentrantLock&#xFF08;Segment&#x7EE7;&#x627F;&#x4E86;ReentrantLock)&#x3002;<br>&#x5F53;&#x9700;&#x8981;put&#x5143;&#x7D20;&#x7684;&#x65F6;&#x5019;&#xFF0C;&#x5E76;&#x4E0D;&#x662F;&#x5BF9;&#x6574;&#x4E2A;hashmap&#x8FDB;&#x884C;&#x52A0;&#x9501;&#xFF0C;&#x800C;&#x662F;&#x5148;&#x901A;&#x8FC7; hashcode &#x6765;&#x77E5;&#x9053;&#x4ED6;&#x8981;&#x653E;&#x5728;&#x90A3;&#x4E00;&#x4E2A;&#x5206;&#x6BB5;&#x4E2D;&#xFF0C;&#x7136;&#x540E;&#x5BF9;&#x8FD9;&#x4E2A;&#x5206;&#x6BB5;&#x8FDB;&#x884C;&#x52A0;&#x9501;&#xFF0C;&#x6240;&#x4EE5;&#x5F53;&#x591A;&#x7EBF;&#x7A0B;put&#x7684;&#x65F6;&#x5019;&#xFF0C;&#x53EA;&#x8981;&#x4E0D;&#x662F;&#x653E;&#x5728;&#x4E00;&#x4E2A;&#x5206;&#x6BB5;&#x4E2D;&#xFF0C;&#x5C31;&#x5B9E;&#x73B0;&#x4E86;&#x771F;&#x6B63;&#x7684;&#x5E76;&#x884C;&#x7684;&#x63D2;&#x5165;&#x3002;<br>&#x4F46;&#x662F;&#xFF0C;&#x5728;&#x7EDF;&#x8BA1;size&#x7684;&#x65F6;&#x5019;&#xFF0C;&#x53EF;&#x5C31;&#x662F;&#x83B7;&#x53D6; hashmap &#x5168;&#x5C40;&#x4FE1;&#x606F;&#x7684;&#x65F6;&#x5019;&#xFF0C;&#x5C31;&#x9700;&#x8981;&#x83B7;&#x53D6;&#x6240;&#x6709;&#x7684;&#x5206;&#x6BB5;&#x9501;&#x624D;&#x80FD;&#x7EDF;&#x8BA1;&#x3002;<br>&#x5206;&#x6BB5;&#x9501;&#x7684;&#x8BBE;&#x8BA1;&#x76EE;&#x7684;&#x662F;&#x7EC6;&#x5316;&#x9501;&#x7684;&#x7C92;&#x5EA6;&#xFF0C;&#x5F53;&#x64CD;&#x4F5C;&#x4E0D;&#x9700;&#x8981;&#x66F4;&#x65B0;&#x6574;&#x4E2A;&#x6570;&#x7EC4;&#x7684;&#x65F6;&#x5019;&#xFF0C;&#x5C31;&#x4EC5;&#x4EC5;&#x9488;&#x5BF9;&#x6570;&#x7EC4;&#x4E2D;&#x7684;&#x4E00;&#x9879;&#x8FDB;&#x884C;&#x52A0;&#x9501;&#x64CD;&#x4F5C;&#x3002;</p><h2 id="&#x504F;&#x5411;&#x9501;-&#x8F7B;&#x91CF;&#x7EA7;&#x9501;-&#x91CD;&#x91CF;&#x7EA7;&#x9501;"><a href="#&#x504F;&#x5411;&#x9501;-&#x8F7B;&#x91CF;&#x7EA7;&#x9501;-&#x91CD;&#x91CF;&#x7EA7;&#x9501;" class="headerlink" title="&#x504F;&#x5411;&#x9501;/&#x8F7B;&#x91CF;&#x7EA7;&#x9501;/&#x91CD;&#x91CF;&#x7EA7;&#x9501;"></a>&#x504F;&#x5411;&#x9501;/&#x8F7B;&#x91CF;&#x7EA7;&#x9501;/&#x91CD;&#x91CF;&#x7EA7;&#x9501;</h2><h3 id="&#x504F;&#x5411;&#x9501;"><a href="#&#x504F;&#x5411;&#x9501;" class="headerlink" title="&#x504F;&#x5411;&#x9501;"></a>&#x504F;&#x5411;&#x9501;</h3><p>&#x5728;&#x6CA1;&#x6709;&#x5B9E;&#x9645;&#x7ADE;&#x4E89;&#x7684;&#x60C5;&#x51B5;&#x4E0B;&#xFF0C;&#x8FD8;&#x80FD;&#x591F;&#x9488;&#x5BF9;&#x90E8;&#x5206;&#x573A;&#x666F;&#x7EE7;&#x7EED;&#x4F18;&#x5316;&#x3002;&#x5982;&#x679C;&#x4E0D;&#x4EC5;&#x4EC5;&#x6CA1;&#x6709;&#x5B9E;&#x9645;&#x7ADE;&#x4E89;&#xFF0C;&#x81EA;&#x59CB;&#x81F3;&#x7EC8;&#xFF0C;&#x4F7F;&#x7528;&#x9501;&#x7684;&#x7EBF;&#x7A0B;&#x90FD;&#x53EA;&#x6709;&#x4E00;&#x4E2A;&#xFF0C;&#x90A3;&#x4E48;&#xFF0C;&#x7EF4;&#x62A4;&#x8F7B;&#x91CF;&#x7EA7;&#x9501;&#x90FD;&#x662F;&#x6D6A;&#x8D39;&#x7684;&#x3002;<strong>&#x504F;&#x5411;&#x9501;&#x7684;&#x76EE;&#x6807;&#x662F;&#xFF0C;&#x51CF;&#x5C11;&#x65E0;&#x7ADE;&#x4E89;&#x4E14;&#x53EA;&#x6709;&#x4E00;&#x4E2A;&#x7EBF;&#x7A0B;&#x4F7F;&#x7528;&#x9501;&#x7684;&#x60C5;&#x51B5;&#x4E0B;&#xFF0C;&#x4F7F;&#x7528;&#x8F7B;&#x91CF;&#x7EA7;&#x9501;&#x4EA7;&#x751F;&#x7684;&#x6027;&#x80FD;&#x6D88;&#x8017;</strong>&#x3002;&#x8F7B;&#x91CF;&#x7EA7;&#x9501;&#x6BCF;&#x6B21;&#x7533;&#x8BF7;&#x3001;&#x91CA;&#x653E;&#x9501;&#x90FD;&#x81F3;&#x5C11;&#x9700;&#x8981;&#x4E00;&#x6B21;CAS&#xFF0C;&#x4F46;&#x504F;&#x5411;&#x9501;&#x53EA;&#x6709;&#x521D;&#x59CB;&#x5316;&#x65F6;&#x9700;&#x8981;&#x4E00;&#x6B21;CAS&#x3002;</p><p>&#x201C;&#x504F;&#x5411;&#x201D;&#x7684;&#x610F;&#x601D;&#x662F;&#xFF0C;&#x504F;&#x5411;&#x9501;&#x5047;&#x5B9A;&#x5C06;&#x6765;&#x53EA;&#x6709;&#x7B2C;&#x4E00;&#x4E2A;&#x7533;&#x8BF7;&#x9501;&#x7684;&#x7EBF;&#x7A0B;&#x4F1A;&#x4F7F;&#x7528;&#x9501;&#xFF08;&#x4E0D;&#x4F1A;&#x6709;&#x4EFB;&#x4F55;&#x7EBF;&#x7A0B;&#x518D;&#x6765;&#x7533;&#x8BF7;&#x9501;&#xFF09;&#xFF0C;&#x56E0;&#x6B64;&#xFF0C;&#x53EA;&#x9700;&#x8981;&#x5728;Mark Word&#x4E2D; CAS &#x8BB0;&#x5F55;owner&#xFF08;&#x672C;&#x8D28;&#x4E0A;&#x4E5F;&#x662F;&#x66F4;&#x65B0;&#xFF0C;&#x4F46;&#x521D;&#x59CB;&#x503C;&#x4E3A;&#x7A7A;&#xFF09;&#xFF0C;&#x5982;&#x679C;&#x8BB0;&#x5F55;&#x6210;&#x529F;&#xFF0C;&#x5219;&#x504F;&#x5411;&#x9501;&#x83B7;&#x53D6;&#x6210;&#x529F;&#xFF0C;&#x8BB0;&#x5F55;&#x9501;&#x72B6;&#x6001;&#x4E3A;&#x504F;&#x5411;&#x9501;&#xFF0C;&#x4EE5;&#x540E;&#x5F53;&#x524D;&#x7EBF;&#x7A0B;&#x7B49;&#x4E8E;owner&#x5C31;&#x53EF;&#x4EE5;&#x96F6;&#x6210;&#x672C;&#x7684;&#x76F4;&#x63A5;&#x83B7;&#x5F97;&#x9501;&#xFF1B;&#x5426;&#x5219;&#xFF0C;&#x8BF4;&#x660E;&#x6709;&#x5176;&#x4ED6;&#x7EBF;&#x7A0B;&#x7ADE;&#x4E89;&#xFF0C;&#x81A8;&#x80C0;&#x4E3A;&#x8F7B;&#x91CF;&#x7EA7;&#x9501;&#x3002;</p><p>&#x504F;&#x5411;&#x9501;&#x65E0;&#x6CD5;&#x4F7F;&#x7528;&#x81EA;&#x65CB;&#x9501;&#x4F18;&#x5316;&#xFF0C;&#x56E0;&#x4E3A;&#x4E00;&#x65E6;&#x6709;&#x5176;&#x4ED6;&#x7EBF;&#x7A0B;&#x7533;&#x8BF7;&#x9501;&#xFF0C;&#x5C31;&#x7834;&#x574F;&#x4E86;&#x504F;&#x5411;&#x9501;&#x7684;&#x5047;&#x5B9A;&#x3002;</p><p>&#x7F3A;&#x70B9;&#xFF1A;</p><p>&#x540C;&#x6837;&#x7684;&#xFF0C;&#x5982;&#x679C;&#x660E;&#x663E;&#x5B58;&#x5728;&#x5176;&#x4ED6;&#x7EBF;&#x7A0B;&#x7533;&#x8BF7;&#x9501;&#xFF0C;&#x90A3;&#x4E48;&#x504F;&#x5411;&#x9501;&#x5C06;&#x5F88;&#x5FEB;&#x81A8;&#x80C0;&#x4E3A;&#x8F7B;&#x91CF;&#x7EA7;&#x9501;&#x3002;</p><blockquote><p>&#x4E0D;&#x8FC7;&#x8FD9;&#x4E2A;&#x526F;&#x4F5C;&#x7528;&#x5DF2;&#x7ECF;&#x5C0F;&#x7684;&#x591A;&#x3002;</p><p>&#x5982;&#x679C;&#x9700;&#x8981;&#xFF0C;&#x4F7F;&#x7528;&#x53C2;&#x6570;-XX:-UseBiasedLocking&#x7981;&#x6B62;&#x504F;&#x5411;&#x9501;&#x4F18;&#x5316;&#xFF08;&#x9ED8;&#x8BA4;&#x6253;&#x5F00;&#xFF09;&#x3002;</p></blockquote><h3 id="&#x8F7B;&#x91CF;&#x7EA7;&#x9501;"><a href="#&#x8F7B;&#x91CF;&#x7EA7;&#x9501;" class="headerlink" title="&#x8F7B;&#x91CF;&#x7EA7;&#x9501;"></a>&#x8F7B;&#x91CF;&#x7EA7;&#x9501;</h3><p>&#x81EA;&#x65CB;&#x9501;&#x7684;&#x76EE;&#x6807;&#x662F;&#x964D;&#x4F4E;&#x7EBF;&#x7A0B;&#x5207;&#x6362;&#x7684;&#x6210;&#x672C;&#x3002;&#x5982;&#x679C;&#x9501;&#x7ADE;&#x4E89;&#x6FC0;&#x70C8;&#xFF0C;&#x6211;&#x4EEC;&#x4E0D;&#x5F97;&#x4E0D;&#x4F9D;&#x8D56;&#x4E8E;&#x91CD;&#x91CF;&#x7EA7;&#x9501;&#xFF0C;&#x8BA9;&#x7ADE;&#x4E89;&#x5931;&#x8D25;&#x7684;&#x7EBF;&#x7A0B;&#x963B;&#x585E;&#xFF1B;&#x5982;&#x679C;&#x5B8C;&#x5168;&#x6CA1;&#x6709;&#x5B9E;&#x9645;&#x7684;&#x9501;&#x7ADE;&#x4E89;&#xFF0C;&#x90A3;&#x4E48;&#x7533;&#x8BF7;&#x91CD;&#x91CF;&#x7EA7;&#x9501;&#x90FD;&#x662F;&#x6D6A;&#x8D39;&#x7684;&#x3002;<strong>&#x8F7B;&#x91CF;&#x7EA7;&#x9501;&#x7684;&#x76EE;&#x6807;&#x662F;&#xFF0C;&#x51CF;&#x5C11;&#x65E0;&#x5B9E;&#x9645;&#x7ADE;&#x4E89;&#x60C5;&#x51B5;&#x4E0B;&#xFF0C;&#x4F7F;&#x7528;&#x91CD;&#x91CF;&#x7EA7;&#x9501;&#x4EA7;&#x751F;&#x7684;&#x6027;&#x80FD;&#x6D88;&#x8017;</strong>&#xFF0C;&#x5305;&#x62EC;&#x7CFB;&#x7EDF;&#x8C03;&#x7528;&#x5F15;&#x8D77;&#x7684;&#x5185;&#x6838;&#x6001;&#x4E0E;&#x7528;&#x6237;&#x6001;&#x5207;&#x6362;&#x3001;&#x7EBF;&#x7A0B;&#x963B;&#x585E;&#x9020;&#x6210;&#x7684;&#x7EBF;&#x7A0B;&#x5207;&#x6362;&#x7B49;&#x3002;</p><p>&#x987E;&#x540D;&#x601D;&#x4E49;&#xFF0C;&#x8F7B;&#x91CF;&#x7EA7;&#x9501;&#x662F;&#x76F8;&#x5BF9;&#x4E8E;&#x91CD;&#x91CF;&#x7EA7;&#x9501;&#x800C;&#x8A00;&#x7684;&#x3002;&#x4F7F;&#x7528;&#x8F7B;&#x91CF;&#x7EA7;&#x9501;&#x65F6;&#xFF0C;&#x4E0D;&#x9700;&#x8981;&#x7533;&#x8BF7;&#x4E92;&#x65A5;&#x91CF;&#xFF0C;&#x4EC5;&#x4EC5;&#x5C06; Mark Word &#x4E2D;&#x7684;&#x90E8;&#x5206;&#x5B57;&#x8282;CAS&#x66F4;&#x65B0;&#x6307;&#x5411;&#x7EBF;&#x7A0B;&#x6808;&#x4E2D;&#x7684;Lock Record&#xFF0C;&#x5982;&#x679C;&#x66F4;&#x65B0;&#x6210;&#x529F;&#xFF0C;&#x5219;&#x8F7B;&#x91CF;&#x7EA7;&#x9501;&#x83B7;&#x53D6;&#x6210;&#x529F;&#xFF0C;&#x8BB0;&#x5F55;&#x9501;&#x72B6;&#x6001;&#x4E3A;&#x8F7B;&#x91CF;&#x7EA7;&#x9501;&#xFF1B;&#x5426;&#x5219;&#xFF0C;&#x8BF4;&#x660E;&#x5DF2;&#x7ECF;&#x6709;&#x7EBF;&#x7A0B;&#x83B7;&#x5F97;&#x4E86;&#x8F7B;&#x91CF;&#x7EA7;&#x9501;&#xFF0C;&#x76EE;&#x524D;&#x53D1;&#x751F;&#x4E86;&#x9501;&#x7ADE;&#x4E89;&#xFF08;&#x4E0D;&#x9002;&#x5408;&#x7EE7;&#x7EED;&#x4F7F;&#x7528;&#x8F7B;&#x91CF;&#x7EA7;&#x9501;&#xFF09;&#xFF0C;&#x63A5;&#x4E0B;&#x6765;&#x81A8;&#x80C0;&#x4E3A;&#x91CD;&#x91CF;&#x7EA7;&#x9501;&#x3002;</p><blockquote><p>Mark Word&#x662F;&#x5BF9;&#x8C61;&#x5934;&#x7684;&#x4E00;&#x90E8;&#x5206;&#xFF1B;&#x6BCF;&#x4E2A;&#x7EBF;&#x7A0B;&#x90FD;&#x62E5;&#x6709;&#x81EA;&#x5DF1;&#x7684;&#x7EBF;&#x7A0B;&#x6808;&#xFF08;&#x865A;&#x62DF;&#x673A;&#x6808;&#xFF09;&#xFF0C;&#x8BB0;&#x5F55;&#x7EBF;&#x7A0B;&#x548C;&#x51FD;&#x6570;&#x8C03;&#x7528;&#x7684;&#x57FA;&#x672C;&#x4FE1;&#x606F;&#x3002;&#x4E8C;&#x8005;&#x5C5E;&#x4E8E;JVM&#x7684;&#x57FA;&#x7840;&#x5185;&#x5BB9;&#xFF0C;&#x6B64;&#x5904;&#x4E0D;&#x505A;&#x4ECB;&#x7ECD;&#x3002;</p></blockquote><p>&#x5F53;&#x7136;&#xFF0C;&#x7531;&#x4E8E;&#x8F7B;&#x91CF;&#x7EA7;&#x9501;&#x5929;&#x7136;&#x7784;&#x51C6;&#x4E0D;&#x5B58;&#x5728;&#x9501;&#x7ADE;&#x4E89;&#x7684;&#x573A;&#x666F;&#xFF0C;&#x5982;&#x679C;&#x5B58;&#x5728;&#x9501;&#x7ADE;&#x4E89;&#x4F46;&#x4E0D;&#x6FC0;&#x70C8;&#xFF0C;&#x4ECD;&#x7136;&#x53EF;&#x4EE5;&#x7528;&#x81EA;&#x65CB;&#x9501;&#x4F18;&#x5316;&#xFF0C;&#x81EA;&#x65CB;&#x5931;&#x8D25;&#x540E;&#x518D;&#x81A8;&#x80C0;&#x4E3A;&#x91CD;&#x91CF;&#x7EA7;&#x9501;&#x3002;</p><h3 id="&#x91CD;&#x91CF;&#x7EA7;&#x9501;"><a href="#&#x91CD;&#x91CF;&#x7EA7;&#x9501;" class="headerlink" title="&#x91CD;&#x91CF;&#x7EA7;&#x9501;"></a>&#x91CD;&#x91CF;&#x7EA7;&#x9501;</h3><p>&#x5185;&#x7F6E;&#x9501;&#x5728;Java&#x4E2D;&#x88AB;&#x62BD;&#x8C61;&#x4E3A;&#x76D1;&#x89C6;&#x5668;&#x9501;&#xFF08;monitor&#xFF09;&#x3002;&#x5728;JDK 1.6&#x4E4B;&#x524D;&#xFF0C;&#x76D1;&#x89C6;&#x5668;&#x9501;&#x53EF;&#x4EE5;&#x8BA4;&#x4E3A;&#x76F4;&#x63A5;&#x5BF9;&#x5E94;&#x5E95;&#x5C42;&#x64CD;&#x4F5C;&#x7CFB;&#x7EDF;&#x4E2D;&#x7684;&#x4E92;&#x65A5;&#x91CF;&#xFF08;mutex&#xFF09;&#x3002;&#x8FD9;&#x79CD;&#x540C;&#x6B65;&#x65B9;&#x5F0F;&#x7684;&#x6210;&#x672C;&#x975E;&#x5E38;&#x9AD8;&#xFF0C;&#x5305;&#x62EC;&#x7CFB;&#x7EDF;&#x8C03;&#x7528;&#x5F15;&#x8D77;&#x7684;&#x5185;&#x6838;&#x6001;&#x4E0E;&#x7528;&#x6237;&#x6001;&#x5207;&#x6362;&#x3001;&#x7EBF;&#x7A0B;&#x963B;&#x585E;&#x9020;&#x6210;&#x7684;&#x7EBF;&#x7A0B;&#x5207;&#x6362;&#x7B49;&#x3002;&#x56E0;&#x6B64;&#xFF0C;&#x540E;&#x6765;&#x79F0;&#x8FD9;&#x79CD;&#x9501;&#x4E3A;&#x201C;&#x91CD;&#x91CF;&#x7EA7;&#x9501;&#x201D;&#x3002;</p><h3 id="&#x5C0F;&#x7ED3;"><a href="#&#x5C0F;&#x7ED3;" class="headerlink" title="&#x5C0F;&#x7ED3;"></a>&#x5C0F;&#x7ED3;</h3><blockquote><p>&#x504F;&#x5411;&#x9501;&#x3001;&#x8F7B;&#x91CF;&#x7EA7;&#x9501;&#x3001;&#x91CD;&#x91CF;&#x7EA7;&#x9501;&#x5206;&#x914D;&#x548C;&#x81A8;&#x80C0;&#x7684;&#x8BE6;&#x7EC6;&#x8FC7;&#x7A0B;&#x89C1;&#x540E;&#x3002;&#x4F1A;&#x6D89;&#x53CA;&#x4E00;&#x4E9B;Mark Word&#x4E0E;CAS&#x7684;&#x77E5;&#x8BC6;&#x3002;</p></blockquote><p>&#x504F;&#x5411;&#x9501;&#x3001;&#x8F7B;&#x91CF;&#x7EA7;&#x9501;&#x3001;&#x91CD;&#x91CF;&#x7EA7;&#x9501;&#x9002;&#x7528;&#x4E8E;&#x4E0D;&#x540C;&#x7684;&#x5E76;&#x53D1;&#x573A;&#x666F;&#xFF1A;</p><ul><li>&#x504F;&#x5411;&#x9501;&#xFF1A;&#x65E0;&#x5B9E;&#x9645;&#x7ADE;&#x4E89;&#xFF0C;&#x4E14;&#x5C06;&#x6765;&#x53EA;&#x6709;&#x7B2C;&#x4E00;&#x4E2A;&#x7533;&#x8BF7;&#x9501;&#x7684;&#x7EBF;&#x7A0B;&#x4F1A;&#x4F7F;&#x7528;&#x9501;&#x3002;</li><li>&#x8F7B;&#x91CF;&#x7EA7;&#x9501;&#xFF1A;&#x65E0;&#x5B9E;&#x9645;&#x7ADE;&#x4E89;&#xFF0C;&#x591A;&#x4E2A;&#x7EBF;&#x7A0B;&#x4EA4;&#x66FF;&#x4F7F;&#x7528;&#x9501;&#xFF1B;&#x5141;&#x8BB8;&#x77ED;&#x65F6;&#x95F4;&#x7684;&#x9501;&#x7ADE;&#x4E89;&#x3002;</li><li>&#x91CD;&#x91CF;&#x7EA7;&#x9501;&#xFF1A;&#x6709;&#x5B9E;&#x9645;&#x7ADE;&#x4E89;&#xFF0C;&#x4E14;&#x9501;&#x7ADE;&#x4E89;&#x65F6;&#x95F4;&#x957F;&#x3002;</li></ul><p>&#x53E6;&#x5916;&#xFF0C;&#x5982;&#x679C;&#x9501;&#x7ADE;&#x4E89;&#x65F6;&#x95F4;&#x77ED;&#xFF0C;&#x53EF;&#x4EE5;&#x4F7F;&#x7528;&#x81EA;&#x65CB;&#x9501;&#x8FDB;&#x4E00;&#x6B65;&#x4F18;&#x5316;&#x8F7B;&#x91CF;&#x7EA7;&#x9501;&#x3001;&#x91CD;&#x91CF;&#x7EA7;&#x9501;&#x7684;&#x6027;&#x80FD;&#xFF0C;&#x51CF;&#x5C11;&#x7EBF;&#x7A0B;&#x5207;&#x6362;&#x3002;</p><p>&#x5982;&#x679C;&#x9501;&#x7ADE;&#x4E89;&#x7A0B;&#x5EA6;&#x9010;&#x6E10;&#x63D0;&#x9AD8;&#xFF08;&#x7F13;&#x6162;&#xFF09;&#xFF0C;&#x90A3;&#x4E48;&#x4ECE;&#x504F;&#x5411;&#x9501;&#x9010;&#x6B65;&#x81A8;&#x80C0;&#x5230;&#x91CD;&#x91CF;&#x9501;&#xFF0C;&#x80FD;&#x591F;&#x63D0;&#x9AD8;&#x7CFB;&#x7EDF;&#x7684;&#x6574;&#x4F53;&#x6027;&#x80FD;&#x3002;</p><h2 id="&#x81EA;&#x65CB;&#x9501;"><a href="#&#x81EA;&#x65CB;&#x9501;" class="headerlink" title="&#x81EA;&#x65CB;&#x9501;"></a>&#x81EA;&#x65CB;&#x9501;</h2><p>&#x9996;&#x5148;&#xFF0C;&#x5185;&#x6838;&#x6001;&#x4E0E;&#x7528;&#x6237;&#x6001;&#x7684;&#x5207;&#x6362;&#x4E0A;&#x4E0D;&#x5BB9;&#x6613;&#x4F18;&#x5316;&#x3002;&#x4F46;<strong>&#x901A;&#x8FC7;&#x81EA;&#x65CB;&#x9501;&#xFF0C;&#x53EF;&#x4EE5;&#x51CF;&#x5C11;&#x7EBF;&#x7A0B;&#x963B;&#x585E;&#x9020;&#x6210;&#x7684;&#x7EBF;&#x7A0B;&#x5207;&#x6362;</strong>&#xFF08;&#x5305;&#x62EC;&#x6302;&#x8D77;&#x7EBF;&#x7A0B;&#x548C;&#x6062;&#x590D;&#x7EBF;&#x7A0B;&#xFF09;&#x3002;</p><p>&#x5982;&#x679C;&#x9501;&#x7684;&#x7C92;&#x5EA6;&#x5C0F;&#xFF0C;&#x90A3;&#x4E48;<strong>&#x9501;&#x7684;&#x6301;&#x6709;&#x65F6;&#x95F4;&#x6BD4;&#x8F83;&#x77ED;</strong>&#xFF08;&#x5C3D;&#x7BA1;&#x5177;&#x4F53;&#x7684;&#x6301;&#x6709;&#x65F6;&#x95F4;&#x65E0;&#x6CD5;&#x5F97;&#x77E5;&#xFF0C;&#x4F46;&#x53EF;&#x4EE5;&#x8BA4;&#x4E3A;&#xFF0C;&#x901A;&#x5E38;&#x6709;&#x4E00;&#x90E8;&#x5206;&#x9501;&#x80FD;&#x6EE1;&#x8DB3;&#x4E0A;&#x8FF0;&#x6027;&#x8D28;&#xFF09;&#x3002;&#x90A3;&#x4E48;&#xFF0C;&#x5BF9;&#x4E8E;&#x7ADE;&#x4E89;&#x8FD9;&#x4E9B;&#x9501;&#x7684;&#x800C;&#x8A00;&#xFF0C;&#x56E0;&#x4E3A;&#x9501;&#x963B;&#x585E;&#x9020;&#x6210;&#x7EBF;&#x7A0B;&#x5207;&#x6362;&#x7684;&#x65F6;&#x95F4;&#x4E0E;&#x9501;&#x6301;&#x6709;&#x7684;&#x65F6;&#x95F4;&#x76F8;&#x5F53;&#xFF0C;&#x51CF;&#x5C11;&#x7EBF;&#x7A0B;&#x963B;&#x585E;&#x9020;&#x6210;&#x7684;&#x7EBF;&#x7A0B;&#x5207;&#x6362;&#xFF0C;&#x80FD;&#x5F97;&#x5230;&#x8F83;&#x5927;&#x7684;&#x6027;&#x80FD;&#x63D0;&#x5347;&#x3002;&#x5177;&#x4F53;&#x5982;&#x4E0B;&#xFF1A;</p><ul><li>&#x5F53;&#x524D;&#x7EBF;&#x7A0B;&#x7ADE;&#x4E89;&#x9501;&#x5931;&#x8D25;&#x65F6;&#xFF0C;&#x6253;&#x7B97;&#x963B;&#x585E;&#x81EA;&#x5DF1;</li><li>&#x4E0D;&#x76F4;&#x63A5;&#x963B;&#x585E;&#x81EA;&#x5DF1;&#xFF0C;&#x800C;&#x662F;&#x81EA;&#x65CB;&#xFF08;&#x7A7A;&#x7B49;&#x5F85;&#xFF0C;&#x6BD4;&#x5982;&#x4E00;&#x4E2A;&#x7A7A;&#x7684;&#x6709;&#x9650;for&#x5FAA;&#x73AF;&#xFF09;&#x4E00;&#x4F1A;</li><li>&#x5728;&#x81EA;&#x65CB;&#x7684;&#x540C;&#x65F6;&#x91CD;&#x65B0;&#x7ADE;&#x4E89;&#x9501;</li><li>&#x5982;&#x679C;&#x81EA;&#x65CB;&#x7ED3;&#x675F;&#x524D;&#x83B7;&#x5F97;&#x4E86;&#x9501;&#xFF0C;&#x90A3;&#x4E48;&#x9501;&#x83B7;&#x53D6;&#x6210;&#x529F;&#xFF1B;&#x5426;&#x5219;&#xFF0C;&#x81EA;&#x65CB;&#x7ED3;&#x675F;&#x540E;&#x963B;&#x585E;&#x81EA;&#x5DF1;</li></ul><p>&#x5982;&#x679C;&#x5728;&#x81EA;&#x65CB;&#x7684;&#x65F6;&#x95F4;&#x5185;&#xFF0C;&#x9501;&#x5C31;&#x88AB;&#x65E7;owner&#x91CA;&#x653E;&#x4E86;&#xFF0C;&#x90A3;&#x4E48;&#x5F53;&#x524D;&#x7EBF;&#x7A0B;&#x5C31;&#x4E0D;&#x9700;&#x8981;&#x963B;&#x585E;&#x81EA;&#x5DF1;&#xFF08;&#x4E5F;&#x4E0D;&#x9700;&#x8981;&#x5728;&#x672A;&#x6765;&#x9501;&#x91CA;&#x653E;&#x65F6;&#x6062;&#x590D;&#xFF09;&#xFF0C;&#x51CF;&#x5C11;&#x4E86;&#x4E00;&#x6B21;&#x7EBF;&#x7A0B;&#x5207;&#x6362;&#x3002;</p><p>&#x201C;&#x9501;&#x7684;&#x6301;&#x6709;&#x65F6;&#x95F4;&#x6BD4;&#x8F83;&#x77ED;&#x201C;&#x8FD9;&#x4E00;&#x6761;&#x4EF6;&#x53EF;&#x4EE5;&#x653E;&#x5BBD;&#x3002;&#x5B9E;&#x9645;&#x4E0A;&#xFF0C;&#x53EA;&#x8981;&#x9501;&#x7ADE;&#x4E89;&#x7684;&#x65F6;&#x95F4;&#x6BD4;&#x8F83;&#x77ED;&#xFF08;&#x6BD4;&#x5982;&#x7EBF;&#x7A0B;1&#x5FEB;&#x91CA;&#x653E;&#x9501;&#x7684;&#x65F6;&#x5019;&#xFF0C;&#x7EBF;&#x7A0B;2&#x624D;&#x4F1A;&#x6765;&#x7ADE;&#x4E89;&#x9501;&#xFF09;&#xFF0C;&#x5C31;&#x80FD;&#x591F;&#x63D0;&#x9AD8;&#x81EA;&#x65CB;&#x83B7;&#x5F97;&#x9501;&#x7684;&#x6982;&#x7387;&#x3002;&#x8FD9;&#x901A;&#x5E38;&#x53D1;&#x751F;&#x5728;<strong>&#x9501;&#x6301;&#x6709;&#x65F6;&#x95F4;&#x957F;&#xFF0C;&#x4F46;&#x7ADE;&#x4E89;&#x4E0D;&#x6FC0;&#x70C8;</strong>&#x7684;&#x573A;&#x666F;&#x4E2D;&#x3002;</p><p>&#x5178;&#x578B;&#x7684;&#x81EA;&#x65CB;&#x9501;&#x5B9E;&#x73B0;&#x7684;&#x4F8B;&#x5B50;&#xFF0C;&#x53EF;&#x4EE5;&#x53C2;&#x8003;<a href="http://ifeve.com/java_lock_see1/" target="_blank" rel="noopener">&#x81EA;&#x65CB;&#x9501;&#x7684;&#x5B9E;&#x73B0;</a></p><h2 id="&#x9501;&#x5206;&#x914D;&#x548C;&#x81A8;&#x80C0;&#x8FC7;&#x7A0B;"><a href="#&#x9501;&#x5206;&#x914D;&#x548C;&#x81A8;&#x80C0;&#x8FC7;&#x7A0B;" class="headerlink" title="&#x9501;&#x5206;&#x914D;&#x548C;&#x81A8;&#x80C0;&#x8FC7;&#x7A0B;"></a>&#x9501;&#x5206;&#x914D;&#x548C;&#x81A8;&#x80C0;&#x8FC7;&#x7A0B;</h2><p><img src="/2019/02/13/Java &#x4E2D;&#x7684;&#x9501;/Java &#x4E2D;&#x7684;&#x9501;\4491294-e3bcefb2bacea224.png" alt="&#x9501;&#x5206;&#x914D;&#x548C;&#x81A8;&#x80C0;&#x8FC7;&#x7A0B;"></p><h2 id="&#x53C2;&#x8003;&#x94FE;&#x63A5;"><a href="#&#x53C2;&#x8003;&#x94FE;&#x63A5;" class="headerlink" title="&#x53C2;&#x8003;&#x94FE;&#x63A5;"></a>&#x53C2;&#x8003;&#x94FE;&#x63A5;</h2><ul><li><a href="https://www.cnblogs.com/qifengshi/p/6831055.html" target="_blank" rel="noopener">Java&#x4E2D;&#x7684;&#x9501;&#x5206;&#x7C7B;</a></li><li><a href="https://blog.csdn.net/u012545728/article/details/80843595" target="_blank" rel="noopener">Java&#x4E0D;&#x53EF;&#x91CD;&#x5165;&#x9501;&#x548C;&#x53EF;&#x91CD;&#x5165;&#x9501;&#x7406;&#x89E3;</a></li><li><a href="https://www.jianshu.com/p/36eedeb3f912" target="_blank" rel="noopener">&#x6D45;&#x8C08;&#x504F;&#x5411;&#x9501;&#x3001;&#x8F7B;&#x91CF;&#x7EA7;&#x9501;&#x3001;&#x91CD;&#x91CF;&#x7EA7;&#x9501;</a></li></ul>]]></content>
    
    <summary type="html">
    
      &lt;h2 id=&quot;Java&amp;#x4E2D;&amp;#x7684;&amp;#x9501;&amp;#x5206;&amp;#x7C7B;&quot;&gt;&lt;a href=&quot;#Java&amp;#x4E2D;&amp;#x7684;&amp;#x9501;&amp;#x5206;&amp;#x7C7B;&quot; class=&quot;headerlink&quot; title=&quot;Java&amp;#x4E2D;&amp;#x7684;&amp;#x9501;&amp;#x5206;&amp;#x7C7B;&quot;&gt;&lt;/a&gt;Java&amp;#x4E2D;&amp;#x7684;&amp;#x9501;&amp;#x5206;&amp;#x7C7B;&lt;/h2&gt;&lt;p&gt;&amp;#x5728;&amp;#x8BFB;&amp;#x5F88;&amp;#x591A;&amp;#x5E76;&amp;#x53D1;&amp;#x6587;&amp;#x7AE0;&amp;#x4E2D;&amp;#xFF0C;&amp;#x4F1A;&amp;#x63D0;&amp;#x53CA;&amp;#x5404;&amp;#x79CD;&amp;#x5404;&amp;#x6837;&amp;#x9501;&amp;#x5982;&amp;#x516C;&amp;#x5E73;&amp;#x9501;&amp;#xFF0C;&amp;#x4E50;&amp;#x89C2;&amp;#x9501;&amp;#x7B49;&amp;#x7B49;&amp;#xFF0C;&amp;#x8FD9;&amp;#x7BC7;&amp;#x6587;&amp;#x7AE0;&amp;#x4ECB;&amp;#x7ECD;&amp;#x5404;&amp;#x79CD;&amp;#x9501;&amp;#x7684;&amp;#x5206;&amp;#x7C7B;&amp;#x3002;&amp;#x4ECB;&amp;#x7ECD;&amp;#x7684;&amp;#x5185;&amp;#x5BB9;&amp;#x5982;&amp;#x4E0B;&amp;#xFF1A;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&amp;#x516C;&amp;#x5E73;&amp;#x9501;/&amp;#x975E;&amp;#x516C;&amp;#x5E73;&amp;#x9501;&lt;/li&gt;
&lt;li&gt;&amp;#x53EF;&amp;#x91CD;&amp;#x5165;&amp;#x9501;&lt;/li&gt;
&lt;li&gt;&amp;#x72EC;&amp;#x4EAB;&amp;#x9501;/&amp;#x5171;&amp;#x4EAB;&amp;#x9501;&lt;/li&gt;
&lt;li&gt;&amp;#x4E92;&amp;#x65A5;&amp;#x9501;/&amp;#x8BFB;&amp;#x5199;&amp;#x9501;&lt;/li&gt;
&lt;li&gt;&amp;#x4E50;&amp;#x89C2;&amp;#x9501;/&amp;#x60B2;&amp;#x89C2;&amp;#x9501;&lt;/li&gt;
&lt;li&gt;&amp;#x5206;&amp;#x6BB5;&amp;#x9501;&lt;/li&gt;
&lt;li&gt;&amp;#x504F;&amp;#x5411;&amp;#x9501;/&amp;#x8F7B;&amp;#x91CF;&amp;#x7EA7;&amp;#x9501;/&amp;#x91CD;&amp;#x91CF;&amp;#x7EA7;&amp;#x9501;&lt;/li&gt;
&lt;li&gt;&amp;#x81EA;&amp;#x65CB;&amp;#x9501;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&amp;#x4E0A;&amp;#x9762;&amp;#x662F;&amp;#x5F88;&amp;#x591A;&amp;#x9501;&amp;#x7684;&amp;#x540D;&amp;#x8BCD;&amp;#xFF0C;&amp;#x8FD9;&amp;#x4E9B;&amp;#x5206;&amp;#x7C7B;&amp;#x5E76;&amp;#x4E0D;&amp;#x662F;&amp;#x5168;&amp;#x662F;&amp;#x6307;&amp;#x9501;&amp;#x7684;&amp;#x72B6;&amp;#x6001;&amp;#xFF0C;&amp;#x6709;&amp;#x7684;&amp;#x6307;&amp;#x9501;&amp;#x7684;&amp;#x7279;&amp;#x6027;&amp;#xFF0C;&amp;#x6709;&amp;#x7684;&amp;#x6307;&amp;#x9501;&amp;#x7684;&amp;#x8BBE;&amp;#x8BA1;&amp;#xFF0C;&amp;#x4E0B;&amp;#x9762;&amp;#x603B;&amp;#x7ED3;&amp;#x7684;&amp;#x5185;&amp;#x5BB9;&amp;#x662F;&amp;#x5BF9;&amp;#x6BCF;&amp;#x4E2A;&amp;#x9501;&amp;#x7684;&amp;#x540D;&amp;#x8BCD;&amp;#x8FDB;&amp;#x884C;&amp;#x4E00;&amp;#x5B9A;&amp;#x7684;&amp;#x89E3;&amp;#x91CA;&amp;#x3002;&lt;/p&gt;
    
    </summary>
    
      <category term="Java 基础" scheme="http://blog.cuzz.site/categories/Java-%E5%9F%BA%E7%A1%80/"/>
    
    
      <category term="锁" scheme="http://blog.cuzz.site/tags/%E9%94%81/"/>
    
      <category term="转载" scheme="http://blog.cuzz.site/tags/%E8%BD%AC%E8%BD%BD/"/>
    
  </entry>
  
  <entry>
    <title>Java 反射</title>
    <link href="http://blog.cuzz.site/2019/02/11/Java%20%E5%8F%8D%E5%B0%84/"/>
    <id>http://blog.cuzz.site/2019/02/11/Java 反射/</id>
    <published>2019-02-11T15:59:59.000Z</published>
    <updated>2019-07-16T11:43:31.273Z</updated>
    
    <content type="html"><![CDATA[<h2 id="&#x7C7B;&#x52A0;&#x8F7D;&#x5668;"><a href="#&#x7C7B;&#x52A0;&#x8F7D;&#x5668;" class="headerlink" title="&#x7C7B;&#x52A0;&#x8F7D;&#x5668;"></a>&#x7C7B;&#x52A0;&#x8F7D;&#x5668;</h2><p>&#x5F53;&#x7A0B;&#x5E8F;&#x6709;&#x4F7F;&#x7528;&#x67D0;&#x4E2A;&#x7C7B;&#x65F6;&#xFF0C;&#x5982;&#x679C;&#x8BE5;&#x7C7B;&#x8FD8;&#x6CA1;&#x6709;&#x88AB;&#x52A0;&#x8F7D;&#x5230;&#x5185;&#x5B58;&#x4E2D;&#xFF0C;&#x5219;&#x7CFB;&#x7EDF;&#x4F1A;&#x901A;&#x8FC7;&#x52A0;&#x8F7D;&#xFF0C;&#x8FDE;&#x63A5;&#xFF0C;&#x521D;&#x59CB;&#x5316;&#x4E09;&#x6B65;&#x6765;&#x5B9E;&#x73B0;&#x5BF9;&#x8FD9;&#x4E2A;&#x7C7B;&#x8FDB;&#x884C;&#x521D;&#x59CB;&#x5316;</p><a id="more"></a><ul><li>&#x52A0;&#x8F7D;<br>&#x5C31;&#x662F;&#x6307;&#x5C06;<code>class</code>&#x6587;&#x4EF6;&#x8BFB;&#x5165;&#x5185;&#x5B58;&#xFF0C;&#x5E76;&#x4E3A;&#x4E4B;&#x521B;&#x5EFA;&#x4E00;&#x4E2A;<code>Class</code>&#x5BF9;&#x8C61;&#xFF0C;&#x4EFB;&#x4F55;&#x7C7B;&#x88AB;&#x4F7F;&#x7528;&#x65F6;&#x7CFB;&#x7EDF;&#x90FD;&#x4F1A;&#x5EFA;&#x7ACB;&#x4E00;&#x4E2A;<code>Class</code>&#x5BF9;&#x8C61;</li><li>&#x8FDE;&#x63A5;<br>&#x9A8C;&#x8BC1; &#x662F;&#x5426;&#x6709;&#x6B63;&#x786E;&#x7684;&#x5185;&#x90E8;&#x7ED3;&#x6784;&#xFF0C;&#x5E76;&#x548C;&#x5176;&#x4ED6;&#x7C7B;&#x534F;&#x8C03;&#x4E00;&#x81F4;<br>&#x51C6;&#x5907; &#x8D1F;&#x8D23;&#x4E3A;&#x7C7B;&#x7684;&#x9759;&#x6001;&#x6210;&#x5458;&#x5206;&#x914D;&#x5185;&#x5B58;&#xFF0C;&#x5E76;&#x8BBE;&#x7F6E;&#x9ED8;&#x8BA4;&#x521D;&#x59CB;&#x5316;&#x503C;<br>&#x89E3;&#x6790; &#x5C06;&#x7C7B;&#x7684;&#x4E8C;&#x8FDB;&#x5236;&#x6570;&#x636E;&#x4E2D;&#x7684;&#x7B26;&#x53F7;&#x5F15;&#x7528;&#x66FF;&#x6362;&#x4E3A;&#x76F4;&#x63A5;&#x5F15;&#x7528;</li><li>&#x521D;&#x59CB;&#x5316;<br>&#x5BF9;&#x7C7B;&#x7684;&#x9759;&#x6001;&#x53D8;&#x91CF;&#xFF0C;&#x9759;&#x6001;&#x4EE3;&#x7801;&#x5757;&#x6267;&#x884C;&#x521D;&#x59CB;&#x5316;&#x64CD;&#x4F5C;<h3 id="&#x7C7B;&#x521D;&#x59CB;&#x5316;&#x65F6;&#x673A;"><a href="#&#x7C7B;&#x521D;&#x59CB;&#x5316;&#x65F6;&#x673A;" class="headerlink" title="&#x7C7B;&#x521D;&#x59CB;&#x5316;&#x65F6;&#x673A;"></a>&#x7C7B;&#x521D;&#x59CB;&#x5316;&#x65F6;&#x673A;</h3></li><li>&#x521B;&#x5EFA;&#x7C7B;&#x7684;&#x5B9E;&#x4F8B;</li><li>&#x7C7B;&#x7684;&#x9759;&#x6001;&#x53D8;&#x91CF;&#xFF0C;&#x6216;&#x8005;&#x4E3A;&#x9759;&#x6001;&#x53D8;&#x91CF;&#x8D4B;&#x503C;</li><li>&#x7C7B;&#x7684;&#x9759;&#x6001;&#x65B9;&#x6CD5;</li><li>&#x4F7F;&#x7528;&#x53CD;&#x5C04;&#x65B9;&#x5F0F;&#x6765;&#x5F3A;&#x5236;&#x521B;&#x5EFA;&#x67D0;&#x4E2A;&#x7C7B;&#x6216;&#x63A5;&#x53E3;&#x5BF9;&#x5E94;&#x7684;<code>java.lang.Class</code>&#x5BF9;&#x8C61;</li><li>&#x521D;&#x59CB;&#x5316;&#x67D0;&#x4E2A;&#x7C7B;&#x7684;&#x5B50;&#x7C7B;</li><li>&#x76F4;&#x63A5;&#x4F7F;&#x7528;<code>java.exe</code>&#x547D;&#x4EE4;&#x6765;&#x8FD0;&#x884C;&#x67D0;&#x4E2A;&#x4E3B;&#x7C7B;<h3 id="&#x7C7B;&#x52A0;&#x8F7D;&#x5668;-1"><a href="#&#x7C7B;&#x52A0;&#x8F7D;&#x5668;-1" class="headerlink" title="&#x7C7B;&#x52A0;&#x8F7D;&#x5668;"></a>&#x7C7B;&#x52A0;&#x8F7D;&#x5668;</h3></li><li>&#x8D1F;&#x8D23;&#x5C06;<code>.class</code>&#x6587;&#x4EF6;&#x52A0;&#x8F7D;&#x5230;&#x5185;&#x5728;&#x4E2D;&#xFF0C;&#x5E76;&#x4E3A;&#x4E4B;&#x751F;&#x6210;&#x5BF9;&#x5E94;&#x7684;<code>Class</code>&#x5BF9;&#x8C61;</li><li>&#x867D;&#x7136;&#x6211;&#x4EEC;&#x4E0D;&#x9700;&#x8981;&#x5173;&#x5FC3;&#x7C7B;&#x52A0;&#x8F7D;&#x673A;&#x5236;&#xFF0C;&#x4F46;&#x662F;&#x4E86;&#x89E3;&#x8FD9;&#x4E2A;&#x673A;&#x5236;&#x6211;&#x4EEC;&#x5C31;&#x80FD;&#x66F4;&#x597D;&#x7684;&#x7406;&#x89E3;&#x7A0B;&#x5E8F;&#x7684;&#x8FD0;&#x884C;<h3 id="&#x7C7B;&#x52A0;&#x8F7D;&#x5668;&#x7684;&#x7EC4;&#x6210;"><a href="#&#x7C7B;&#x52A0;&#x8F7D;&#x5668;&#x7684;&#x7EC4;&#x6210;" class="headerlink" title="&#x7C7B;&#x52A0;&#x8F7D;&#x5668;&#x7684;&#x7EC4;&#x6210;"></a>&#x7C7B;&#x52A0;&#x8F7D;&#x5668;&#x7684;&#x7EC4;&#x6210;</h3></li><li><code>Bootstrap ClassLoader</code> &#x6839;&#x7C7B;&#x52A0;&#x8F7D;&#x5668;<br>&#x4E5F;&#x88AB;&#x79F0;&#x4E3A;&#x5F15;&#x5BFC;&#x7C7B;&#x52A0;&#x8F7D;&#x5668;&#xFF0C;&#x8D1F;&#x8D23;Java&#x6838;&#x5FC3;&#x7C7B;&#x7684;&#x52A0;&#x8F7D;<br>&#x6BD4;&#x5982;<code>System</code>&#xFF0C;<code>String</code>&#x7B49;&#x3002;&#x5728; JDK &#x4E2D; JRE &#x7684; lib &#x76EE;&#x5F55;&#x4E0B; rt.jar &#x6587;&#x4EF6;&#x4E2D;</li><li><code>Extension ClassLoader</code>&#x6269;&#x5C55;&#x7C7B;&#x52A0;&#x8F7D;&#x5668;<br>&#x8D1F;&#x8D23; JRE &#x7684;&#x6269;&#x5C55;&#x76EE;&#x5F55;&#x4E2D; jar &#x5305;&#x7684;&#x52A0;&#x8F7D;&#x3002;<br>&#x5728; JDK &#x4E2D; JRE &#x7684; lib &#x76EE;&#x5F55;&#x4E0B; ext &#x76EE;&#x5F55;</li><li><code>System ClassLoader</code>&#x7CFB;&#x7EDF;&#x7C7B;&#x52A0;&#x8F7D;&#x5668;<br>&#x8D1F;&#x8D23;&#x5728;JVM&#x542F;&#x52A8;&#x65F6;&#x52A0;&#x8F7D;&#x6765;&#x81EA;java&#x547D;&#x4EE4;&#x7684;class&#x6587;&#x4EF6;&#xFF0C;&#x4EE5;&#x53CA;classpath&#x73AF;&#x5883;&#x53D8;&#x91CF;&#x6240;&#x6307;&#x5B9A;&#x7684;jar&#x5305;&#x548C;&#x7C7B;&#x8DEF;&#x5F84;</li></ul><p>&#x901A;&#x8FC7;&#x8FD9;&#x4E9B;&#x63CF;&#x8FF0;&#x5C31;&#x53EF;&#x4EE5;&#x77E5;&#x9053;&#x6211;&#x4EEC;&#x5E38;&#x7528;&#x7684;&#x7C7B;&#xFF0C;&#x90FD;&#x662F;&#x7531;&#x8C01;&#x6765;&#x52A0;&#x8F7D;&#x5B8C;&#x6210;&#x7684;&#x3002;</p><p>&#x5230;&#x76EE;&#x524D;&#x4E3A;&#x6B62;&#x6211;&#x4EEC;&#x5DF2;&#x7ECF;&#x77E5;&#x9053;&#x628A;class&#x6587;&#x4EF6;&#x52A0;&#x8F7D;&#x5230;&#x5185;&#x5B58;&#x4E86;&#xFF0C;&#x90A3;&#x4E48;&#xFF0C;&#x5982;&#x679C;&#x6211;&#x4EEC;&#x4EC5;&#x4EC5;&#x7AD9;&#x5728;&#x8FD9;&#x4E9B;class&#x6587;&#x4EF6;&#x7684;&#x89D2;&#x5EA6;&#xFF0C;&#x6211;&#x4EEC;&#x5982;&#x4F55;&#x6765;&#x4F7F;&#x7528;&#x8FD9;&#x4E9B;class&#x6587;&#x4EF6;&#x4E2D;&#x7684;&#x5185;&#x5BB9;&#x5462;?</p><p>&#x8FD9;&#x5C31;&#x662F;&#x6211;&#x4EEC;&#x53CD;&#x5C04;&#x8981;&#x7814;&#x7A76;&#x7684;&#x5185;&#x5BB9;</p><h2 id="&#x53CD;&#x5C04;"><a href="#&#x53CD;&#x5C04;" class="headerlink" title="&#x53CD;&#x5C04;"></a>&#x53CD;&#x5C04;</h2><p>JAVA&#x53CD;&#x5C04;&#x673A;&#x5236;&#x662F;&#x5728;&#x8FD0;&#x884C;&#x72B6;&#x6001;&#x4E2D;&#xFF0C;&#x5BF9;&#x4E8E;&#x4EFB;&#x610F;&#x4E00;&#x4E2A;&#x7C7B;&#xFF0C;&#x90FD;&#x80FD;&#x591F;&#x77E5;&#x9053;&#x8FD9;&#x4E2A;&#x7C7B;&#x7684;&#x6240;&#x6709;&#x5C5E;&#x6027;&#x548C;&#x65B9;&#x6CD5;&#xFF1B;&#x5BF9;&#x4E8E;&#x4EFB;&#x610F;&#x4E00;&#x4E2A;&#x5BF9;&#x8C61;&#xFF0C;&#x90FD;&#x80FD;&#x591F;&#x8C03;&#x7528;&#x5B83;&#x7684;&#x4EFB;&#x610F;&#x4E00;&#x4E2A;&#x65B9;&#x6CD5;&#x548C;&#x5C5E;&#x6027;&#xFF1B;&#x8FD9;&#x79CD;&#x52A8;&#x6001;&#x83B7;&#x53D6;&#x7684;&#x4FE1;&#x606F;&#x4EE5;&#x53CA;&#x52A8;&#x6001;&#x8C03;&#x7528;&#x5BF9;&#x8C61;&#x7684;&#x65B9;&#x6CD5;&#x7684;&#x529F;&#x80FD;&#x79F0;&#x4E3A;java&#x8BED;&#x8A00;&#x7684;&#x53CD;&#x5C04;&#x673A;&#x5236;&#x3002;<br>&#x8981;&#x60F3;&#x89E3;&#x5256;&#x4E00;&#x4E2A;&#x7C7B;,&#x5FC5;&#x987B;&#x5148;&#x8981;&#x83B7;&#x53D6;&#x5230;&#x8BE5;&#x7C7B;&#x7684;&#x5B57;&#x8282;&#x7801;&#x6587;&#x4EF6;&#x5BF9;&#x8C61;&#x3002;&#x800C;&#x89E3;&#x5256;&#x4F7F;&#x7528;&#x7684;&#x5C31;&#x662F;Class&#x7C7B;&#x4E2D;&#x7684;&#x65B9;&#x6CD5;.&#x6240;&#x4EE5;&#x5148;&#x8981;&#x83B7;&#x53D6;&#x5230;&#x6BCF;&#x4E00;&#x4E2A;&#x5B57;&#x8282;&#x7801;&#x6587;&#x4EF6;&#x5BF9;&#x5E94;&#x7684;Class&#x7C7B;&#x578B;&#x7684;&#x5BF9;&#x8C61;</p><h3 id="Class&#x7C7B;"><a href="#Class&#x7C7B;" class="headerlink" title="Class&#x7C7B;"></a>Class&#x7C7B;</h3><p>&#x9605;&#x8BFB;API&#x7684;<code>Class</code>&#x7C7B;&#x5F97;&#x77E5;&#xFF0C;<code>Class</code> &#x6CA1;&#x6709;&#x516C;&#x5171;&#x6784;&#x9020;&#x65B9;&#x6CD5;&#x3002;<code>Class</code> &#x5BF9;&#x8C61;&#x662F;&#x5728;&#x52A0;&#x8F7D;&#x7C7B;&#x65F6;&#x7531; Java &#x865A;&#x62DF;&#x673A;&#x4EE5;&#x53CA;&#x901A;&#x8FC7;&#x8C03;&#x7528;&#x7C7B;&#x52A0;&#x8F7D;&#x5668;&#x4E2D;&#x7684; <code>defineClass</code> &#x65B9;&#x6CD5;&#x81EA;&#x52A8;&#x6784;&#x9020;&#x7684;</p><h4 id="&#x83B7;&#x53D6;Class&#x5BF9;&#x8C61;&#x7684;&#x4E09;&#x79CD;&#x65B9;&#x5F0F;"><a href="#&#x83B7;&#x53D6;Class&#x5BF9;&#x8C61;&#x7684;&#x4E09;&#x79CD;&#x65B9;&#x5F0F;" class="headerlink" title="&#x83B7;&#x53D6;Class&#x5BF9;&#x8C61;&#x7684;&#x4E09;&#x79CD;&#x65B9;&#x5F0F;"></a>&#x83B7;&#x53D6;Class&#x5BF9;&#x8C61;&#x7684;&#x4E09;&#x79CD;&#x65B9;&#x5F0F;</h4><p>&#x65B9;&#x5F0F;&#x4E00;: &#x901A;&#x8FC7;<code>Object</code>&#x7C7B;&#x4E2D;&#x7684;<code>getObject()</code>&#x65B9;&#x6CD5;<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">Person p = <span class="keyword">new</span> Person();</span><br><span class="line">Class c = p.getClass();</span><br></pre></td></tr></table></figure></p><p>&#x65B9;&#x5F0F;&#x4E8C;: &#x901A;&#x8FC7; &#x7C7B;&#x540D;<code>.class</code> &#x83B7;&#x53D6;&#x5230;&#x5B57;&#x8282;&#x7801;&#x6587;&#x4EF6;&#x5BF9;&#x8C61;&#xFF08;&#x4EFB;&#x610F;&#x6570;&#x636E;&#x7C7B;&#x578B;&#x90FD;&#x5177;&#x5907;&#x4E00;&#x4E2A;<code>class</code>&#x9759;&#x6001;&#x5C5E;&#x6027;,&#x770B;&#x4E0A;&#x53BB;&#x8981;&#x6BD4;&#x7B2C;&#x4E00;&#x79CD;&#x65B9;&#x5F0F;&#x7B80;&#x5355;&#xFF09;<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Class c2 = Person.class;</span><br></pre></td></tr></table></figure></p><p>&#x65B9;&#x5F0F;&#x4E09;: &#x901A;&#x8FC7;<code>Class</code>&#x7C7B;&#x4E2D;&#x7684;&#x65B9;&#x6CD5;&#xFF08;&#x5C06;&#x7C7B;&#x540D;&#x4F5C;&#x4E3A;&#x5B57;&#x7B26;&#x4E32;&#x4F20;&#x9012;&#x7ED9;<code>Class</code>&#x7C7B;&#x4E2D;&#x7684;&#x9759;&#x6001;&#x65B9;&#x6CD5;<code>forName</code>&#x5373;&#x53EF;&#xFF09;<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Class c3 = Class.forName(<span class="string">&quot;cn.cuzz.Person&quot;</span>);</span><br></pre></td></tr></table></figure></p><p><strong>&#x6CE8;&#x610F;&#xFF1A;&#x7B2C;&#x4E09;&#x79CD;&#x548C;&#x524D;&#x4E24;&#x79CD;&#x7684;&#x533A;&#x522B;</strong></p><p>&#x524D;&#x4E24;&#x79CD;&#x4F60;&#x5FC5;&#x987B;&#x660E;&#x786E;Person&#x7C7B;&#x578B;</p><p>&#x540E;&#x9762;&#x662F;&#x6307;&#x5B9A;&#x8FD9;&#x79CD;&#x7C7B;&#x578B;&#x7684;&#x5B57;&#x7B26;&#x4E32;&#x5C31;&#x884C;(&#x8981;&#x5305;&#x542B;&#x5305;&#x540D;)&#xFF0C;&#x8FD9;&#x79CD;&#x6269;&#x5C55;&#x66F4;&#x5F3A;&#xFF0C;&#x6211;&#x4E0D;&#x9700;&#x8981;&#x77E5;&#x9053;&#x4F60;&#x7684;&#x7C7B;&#xFF0C;&#x6211;&#x53EA;&#x63D0;&#x4F9B;&#x5B57;&#x7B26;&#x4E32;&#xFF0C;&#x6309;&#x7167;&#x914D;&#x7F6E;&#x6587;&#x4EF6;&#x52A0;&#x8F7D;&#x5C31;&#x53EF;&#x4EE5;&#x4E86;</p><h4 id="Person&#x7C7B;"><a href="#Person&#x7C7B;" class="headerlink" title="Person&#x7C7B;"></a>Person&#x7C7B;</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Person</span> </span>{</span><br><span class="line"><span class="comment">// &#x6210;&#x5458;&#x53D8;&#x91CF;</span></span><br><span class="line"><span class="keyword">public</span> String name;</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">int</span> age;</span><br><span class="line"><span class="keyword">private</span> String address;</span><br><span class="line"></span><br><span class="line"><span class="comment">// &#x6784;&#x9020;&#x65B9;&#x6CD5;</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="title">Person</span><span class="params">()</span> </span>{</span><br><span class="line">System.out.println(<span class="string">&quot;&#x7A7A;&#x53C2;&#x6570;&#x6784;&#x9020;&#x65B9;&#x6CD5;&quot;</span>);</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="title">Person</span><span class="params">(String name)</span> </span>{</span><br><span class="line"><span class="keyword">this</span>.name = name;</span><br><span class="line">System.out.println(<span class="string">&quot;&#x5E26;&#x6709;String&#x7684;&#x6784;&#x9020;&#x65B9;&#x6CD5;&quot;</span>);</span><br><span class="line">}</span><br><span class="line"><span class="comment">// &#x79C1;&#x6709;&#x7684;&#x6784;&#x9020;&#x65B9;&#x6CD5;</span></span><br><span class="line"><span class="function"><span class="keyword">private</span> <span class="title">Person</span><span class="params">(String name, <span class="keyword">int</span> age)</span></span>{</span><br><span class="line"><span class="keyword">this</span>.name = name;</span><br><span class="line"><span class="keyword">this</span>.age = age;</span><br><span class="line">System.out.println(<span class="string">&quot;&#x5E26;&#x6709;String&#xFF0C;int&#x7684;&#x6784;&#x9020;&#x65B9;&#x6CD5;&quot;</span>);</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="title">Person</span><span class="params">(String name, <span class="keyword">int</span> age, String address)</span></span>{</span><br><span class="line"><span class="keyword">this</span>.name = name;</span><br><span class="line"><span class="keyword">this</span>.age = age;</span><br><span class="line"><span class="keyword">this</span>.address = address;</span><br><span class="line">System.out.println(<span class="string">&quot;&#x5E26;&#x6709;String, int, String&#x7684;&#x6784;&#x9020;&#x65B9;&#x6CD5;&quot;</span>);</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="comment">// &#x6210;&#x5458;&#x65B9;&#x6CD5;</span></span><br><span class="line"><span class="comment">// &#x6CA1;&#x6709;&#x8FD4;&#x56DE;&#x503C;&#x6CA1;&#x6709;&#x53C2;&#x6570;&#x7684;&#x65B9;&#x6CD5;</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">method1</span><span class="params">()</span></span>{</span><br><span class="line">System.out.println(<span class="string">&quot;&#x6CA1;&#x6709;&#x8FD4;&#x56DE;&#x503C;&#x6CA1;&#x6709;&#x53C2;&#x6570;&#x7684;&#x65B9;&#x6CD5;&quot;</span>);</span><br><span class="line">}</span><br><span class="line"><span class="comment">// &#x6CA1;&#x6709;&#x8FD4;&#x56DE;&#x503C;&#xFF0C;&#x6709;&#x53C2;&#x6570;&#x7684;&#x65B9;&#x6CD5;</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">method2</span><span class="params">(String name)</span></span>{</span><br><span class="line">System.out.println(<span class="string">&quot;&#x6CA1;&#x6709;&#x8FD4;&#x56DE;&#x503C;&#xFF0C;&#x6709;&#x53C2;&#x6570;&#x7684;&#x65B9;&#x6CD5; name= &quot;</span>+ name);</span><br><span class="line">}</span><br><span class="line"><span class="comment">// &#x6709;&#x8FD4;&#x56DE;&#x503C;&#xFF0C;&#x6CA1;&#x6709;&#x53C2;&#x6570;</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">method3</span><span class="params">()</span></span>{</span><br><span class="line">System.out.println(<span class="string">&quot;&#x6709;&#x8FD4;&#x56DE;&#x503C;&#xFF0C;&#x6CA1;&#x6709;&#x53C2;&#x6570;&#x7684;&#x65B9;&#x6CD5;&quot;</span>);</span><br><span class="line"><span class="keyword">return</span> <span class="number">123</span>;</span><br><span class="line">}</span><br><span class="line"><span class="comment">// &#x6709;&#x8FD4;&#x56DE;&#x503C;&#xFF0C;&#x6709;&#x53C2;&#x6570;&#x7684;&#x65B9;&#x6CD5;</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> String <span class="title">method4</span><span class="params">(String name)</span></span>{</span><br><span class="line">System.out.println(<span class="string">&quot;&#x6709;&#x8FD4;&#x56DE;&#x503C;&#xFF0C;&#x6709;&#x53C2;&#x6570;&#x7684;&#x65B9;&#x6CD5;&quot;</span>);</span><br><span class="line"><span class="keyword">return</span> <span class="string">&quot;&#x54C8;&#x54C8;&quot;</span> + name;</span><br><span class="line">}</span><br><span class="line"><span class="comment">// &#x79C1;&#x6709;&#x65B9;&#x6CD5;</span></span><br><span class="line"><span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">method5</span><span class="params">()</span></span>{</span><br><span class="line">System.out.println(<span class="string">&quot;&#x79C1;&#x6709;&#x65B9;&#x6CD5;&quot;</span>);</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> String <span class="title">toString</span><span class="params">()</span> </span>{</span><br><span class="line"><span class="keyword">return</span> <span class="string">&quot;Person [name=&quot;</span> + name + <span class="string">&quot;, age=&quot;</span> + age + <span class="string">&quot;, address=&quot;</span> + address+ <span class="string">&quot;]&quot;</span>;</span><br><span class="line">}</span><br><span class="line">}</span><br></pre></td></tr></table></figure><h3 id="&#x901A;&#x8FC7;&#x53CD;&#x5C04;&#x83B7;&#x53D6;&#x6784;&#x9020;&#x65B9;&#x6CD5;&#x5E76;&#x4F7F;&#x7528;"><a href="#&#x901A;&#x8FC7;&#x53CD;&#x5C04;&#x83B7;&#x53D6;&#x6784;&#x9020;&#x65B9;&#x6CD5;&#x5E76;&#x4F7F;&#x7528;" class="headerlink" title="&#x901A;&#x8FC7;&#x53CD;&#x5C04;&#x83B7;&#x53D6;&#x6784;&#x9020;&#x65B9;&#x6CD5;&#x5E76;&#x4F7F;&#x7528;"></a>&#x901A;&#x8FC7;&#x53CD;&#x5C04;&#x83B7;&#x53D6;&#x6784;&#x9020;&#x65B9;&#x6CD5;&#x5E76;&#x4F7F;&#x7528;</h3><p>&#x5728;&#x53CD;&#x5C04;&#x673A;&#x5236;&#x4E2D;&#xFF0C;&#x628A;&#x7C7B;&#x4E2D;&#x7684;&#x6210;&#x5458;&#xFF08;&#x6784;&#x9020;&#x65B9;&#x6CD5;&#x3001;&#x6210;&#x5458;&#x65B9;&#x6CD5;&#x3001;&#x6210;&#x5458;&#x53D8;&#x91CF;&#xFF09;&#x90FD;&#x5C01;&#x88C5;&#x6210;&#x4E86;&#x5BF9;&#x5E94;&#x7684;&#x7C7B;&#x8FDB;&#x884C;&#x8868;&#x793A;&#x3002;&#x5176;&#x4E2D;&#xFF0C;&#x6784;&#x9020;&#x65B9;&#x6CD5;&#x4F7F;&#x7528;&#x7C7B;<code>Constructor</code>&#x8868;&#x793A;&#x3002;&#x53EF;&#x901A;&#x8FC7;<code>Class</code>&#x7C7B;&#x4E2D;&#x63D0;&#x4F9B;&#x7684;&#x65B9;&#x6CD5;&#x83B7;&#x53D6;&#x6784;&#x9020;&#x65B9;&#x6CD5;&#xFF1A;</p><ul><li>&#x8FD4;&#x56DE;&#x4E00;&#x4E2A;&#x6784;&#x9020;&#x65B9;&#x6CD5;<ul><li><code>public Constructor&lt;T&gt; getConstructor(Class&lt;?&gt;... parameterTypes)</code> &#x83B7;&#x53D6;<code>public</code>&#x4FEE;&#x9970;, &#x6307;&#x5B9A;&#x53C2;&#x6570;&#x7C7B;&#x578B;&#x6240;&#x5BF9;&#x5E94;&#x7684;&#x6784;&#x9020;&#x65B9;&#x6CD5;</li><li><code>public Constructor&lt;T&gt; getDeclaredConstructor(Class&lt;?&gt;... parameterTypes)</code> &#x83B7;&#x53D6;&#x6307;&#x5B9A;&#x53C2;&#x6570;&#x7C7B;&#x578B;&#x6240;&#x5BF9;&#x5E94;&#x7684;&#x6784;&#x9020;&#x65B9;&#x6CD5;(&#x5305;&#x542B;&#x79C1;&#x6709;&#x7684;)</li></ul></li><li>&#x8FD4;&#x56DE;&#x591A;&#x4E2A;&#x6784;&#x9020;&#x65B9;&#x6CD5;<ul><li><code>public Constructor&lt;?&gt;[] getConstructors()</code>&#x83B7;&#x53D6;&#x6240;&#x6709;&#x7684;<code>public</code> &#x4FEE;&#x9970;&#x7684;&#x6784;&#x9020;&#x65B9;&#x6CD5;</li><li><code>public Constructor&lt;?&gt;[] getDeclaredConstructors()</code> &#x83B7;&#x53D6;&#x6240;&#x6709;&#x7684;&#x6784;&#x9020;&#x65B9;&#x6CD5;(&#x5305;&#x542B;&#x79C1;&#x6709;&#x7684;)<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> cn.cuzz;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.lang.reflect.Constructor;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Test</span> </span>{</span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> ClassNotFoundException, NoSuchMethodException, SecurityException </span>{</span><br><span class="line"><span class="comment">// &#x83B7;&#x53D6;Class&#x5BF9;&#x8C61; &#x5305;&#x540D;.&#x7C7B;</span></span><br><span class="line">Class c = Class.forName(<span class="string">&quot;cn.cuzz.Person&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// &#x83B7;&#x53D6;&#x6240;&#x6709;&#x6784;&#x9020;&#x65B9;&#x6CD5;</span></span><br><span class="line"><span class="comment">// &#x53EA;&#x5305;&#x62EC;public</span></span><br><span class="line">Constructor[] cons = c.getConstructors();</span><br><span class="line"><span class="comment">// &#x5373;&#x5305;&#x62EC;public&#x4E5F;&#x5305;&#x62EC;private</span></span><br><span class="line">Constructor[] conss = c.getDeclaredConstructors();</span><br><span class="line"></span><br><span class="line"><span class="comment">// &#x83B7;&#x53D6;&#x4E00;&#x4E2A;&#x6784;&#x9020;&#x65B9;&#x6CD5;</span></span><br><span class="line"><span class="comment">// public Person() </span></span><br><span class="line">Constructor con1 = c.getConstructor(<span class="keyword">null</span>);</span><br><span class="line">System.out.println(con1);</span><br><span class="line"></span><br><span class="line"><span class="comment">// public Person(String name)</span></span><br><span class="line">Constructor con2 = c.getConstructor(String.class);</span><br><span class="line">System.out.println(con2);</span><br><span class="line"></span><br><span class="line"><span class="comment">// private Person(String name, int age)</span></span><br><span class="line">Constructor con3 = c.getDeclaredConstructor(String.class, <span class="keyword">int</span>.class);</span><br><span class="line">System.out.println(con3);</span><br><span class="line"></span><br><span class="line"><span class="comment">// public Person(String name, int age, String address)</span></span><br><span class="line">Constructor con4 = c.getDeclaredConstructor(String.class, <span class="keyword">int</span>.class, String.class);</span><br><span class="line">System.out.println(con4);</span><br><span class="line">}</span><br><span class="line">}</span><br></pre></td></tr></table></figure></li></ul></li></ul><h3 id="&#x901A;&#x8FC7;&#x53CD;&#x5C04;&#x65B9;&#x5F0F;&#xFF0C;&#x83B7;&#x53D6;&#x6784;&#x9020;&#x65B9;&#x6CD5;&#xFF0C;&#x521B;&#x5EFA;&#x5BF9;&#x8C61;"><a href="#&#x901A;&#x8FC7;&#x53CD;&#x5C04;&#x65B9;&#x5F0F;&#xFF0C;&#x83B7;&#x53D6;&#x6784;&#x9020;&#x65B9;&#x6CD5;&#xFF0C;&#x521B;&#x5EFA;&#x5BF9;&#x8C61;" class="headerlink" title="&#x901A;&#x8FC7;&#x53CD;&#x5C04;&#x65B9;&#x5F0F;&#xFF0C;&#x83B7;&#x53D6;&#x6784;&#x9020;&#x65B9;&#x6CD5;&#xFF0C;&#x521B;&#x5EFA;&#x5BF9;&#x8C61;"></a>&#x901A;&#x8FC7;&#x53CD;&#x5C04;&#x65B9;&#x5F0F;&#xFF0C;&#x83B7;&#x53D6;&#x6784;&#x9020;&#x65B9;&#x6CD5;&#xFF0C;&#x521B;&#x5EFA;&#x5BF9;&#x8C61;</h3><p>&#x83B7;&#x53D6;&#x6784;&#x9020;&#x65B9;&#x6CD5;&#xFF0C;&#x6B65;&#x9AA4;&#x5982;&#x4E0B;&#xFF1A;</p><ul><li>&#x83B7;&#x53D6;&#x5230;Class&#x5BF9;&#x8C61;</li><li>&#x83B7;&#x53D6;&#x6307;&#x5B9A;&#x7684;&#x6784;&#x9020;&#x65B9;&#x6CD5;</li><li>&#x901A;&#x8FC7;&#x6784;&#x9020;&#x65B9;&#x6CD5;&#x7C7B;<code>Constructor</code>&#x4E2D;&#x7684;&#x65B9;&#x6CD5;&#xFF0C;&#x521B;&#x5EFA;&#x5BF9;&#x8C61;<code>public T newInstance(Object... initargs)</code><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> cn.cuzz;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.lang.reflect.Constructor;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Test2</span> </span>{</span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> Exception </span>{</span><br><span class="line"><span class="comment">// &#x83B7;&#x53D6;Class&#x5BF9;&#x8C61;</span></span><br><span class="line">Class c = Class.forName(<span class="string">&quot;cn.cuzz.Person&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// &#x83B7;&#x53D6;&#x6307;&#x5B9A;&#x6784;&#x9020;&#x5668;</span></span><br><span class="line">Constructor con =  c.getConstructor(String.class, <span class="keyword">int</span>.class, String.class);</span><br><span class="line"></span><br><span class="line"><span class="comment">// &#x901A;&#x8FC7;&#x6784;&#x9020;&#x65B9;&#x6CD5;&#x4E2D;&#x7684;Constructor&#x7684;&#x65B9;&#x6CD5; &#x521B;&#x5EFA;&#x5BF9;&#x8C61;</span></span><br><span class="line">Object obj = con.newInstance(<span class="string">&quot;cuzz&quot;</span>, <span class="number">18</span>, <span class="string">&quot;&#x6B66;&#x6C49;&quot;</span>);</span><br><span class="line"></span><br><span class="line">System.out.println(obj);  <span class="comment">// Person [name=cuzz, age=18, address=&#x6B66;&#x6C49;]</span></span><br><span class="line">}</span><br><span class="line">}</span><br></pre></td></tr></table></figure></li></ul><h3 id="&#x901A;&#x8FC7;&#x53CD;&#x5C04;&#x83B7;&#x53D6;&#x6210;&#x5458;&#x53D8;&#x91CF;&#x5E76;&#x4F7F;&#x7528;"><a href="#&#x901A;&#x8FC7;&#x53CD;&#x5C04;&#x83B7;&#x53D6;&#x6210;&#x5458;&#x53D8;&#x91CF;&#x5E76;&#x4F7F;&#x7528;" class="headerlink" title="&#x901A;&#x8FC7;&#x53CD;&#x5C04;&#x83B7;&#x53D6;&#x6210;&#x5458;&#x53D8;&#x91CF;&#x5E76;&#x4F7F;&#x7528;"></a>&#x901A;&#x8FC7;&#x53CD;&#x5C04;&#x83B7;&#x53D6;&#x6210;&#x5458;&#x53D8;&#x91CF;&#x5E76;&#x4F7F;&#x7528;</h3><p>&#x5728;&#x53CD;&#x5C04;&#x673A;&#x5236;&#x4E2D;&#xFF0C;&#x628A;&#x7C7B;&#x4E2D;&#x7684;&#x6210;&#x5458;&#x53D8;&#x91CF;&#x4F7F;&#x7528;&#x7C7B;Field&#x8868;&#x793A;&#x3002;&#x53EF;&#x901A;&#x8FC7;Class&#x7C7B;&#x4E2D;&#x63D0;&#x4F9B;&#x7684;&#x65B9;&#x6CD5;&#x83B7;&#x53D6;&#x6210;&#x5458;&#x53D8;&#x91CF;&#xFF1A;</p><ul><li>&#x8FD4;&#x56DE;&#x4E00;&#x4E2A;&#x6210;&#x5458;&#x53D8;&#x91CF;<ul><li><code>public Field getField(String name)</code> &#x83B7;&#x53D6;&#x6307;&#x5B9A;&#x7684;<code>public</code>&#x4FEE;&#x9970;&#x7684;&#x53D8;&#x91CF;</li><li><code>public Field getDeclaredField(String name)</code> &#x83B7;&#x53D6;&#x6307;&#x5B9A;&#x7684;&#x4EFB;&#x610F;&#x53D8;&#x91CF;</li></ul></li><li>&#x8FD4;&#x56DE;&#x591A;&#x4E2A;&#x6210;&#x5458;&#x53D8;&#x91CF;<ul><li><code>public Field[] getFields()</code> &#x83B7;&#x53D6;&#x6240;&#x6709;<code>public</code> &#x4FEE;&#x9970;&#x7684;&#x53D8;&#x91CF;</li><li><code>public Field[] getDeclaredFields()</code> &#x83B7;&#x53D6;&#x6240;&#x6709;&#x7684; &#x53D8;&#x91CF; (&#x5305;&#x542B;&#x79C1;&#x6709;)<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> cn.cuzz;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.lang.reflect.Field;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Test3</span> </span>{</span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> Exception </span>{</span><br><span class="line"><span class="comment">// &#x83B7;&#x53D6;Class&#x5BF9;&#x8C61;</span></span><br><span class="line">Class c = Class.forName(<span class="string">&quot;cn.cuzz.Person&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// &#x83B7;&#x53D6;&#x591A;&#x4E2A;&#x6210;&#x5458;&#x53D8;&#x91CF;</span></span><br><span class="line">Field[] fields = c.getFields();</span><br><span class="line">Field[] fieldss =  c.getDeclaredFields();</span><br><span class="line"></span><br><span class="line"><span class="comment">// &#x4E00;&#x4E2A;&#x53D8;&#x91CF;</span></span><br><span class="line"><span class="comment">// public int age</span></span><br><span class="line">Field ageField = c.getField(<span class="string">&quot;age&quot;</span>);</span><br><span class="line">System.out.println(ageField);       <span class="comment">// public int cn.cuzz.Person.age</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// private String address</span></span><br><span class="line">Field addressField = c.getDeclaredField(<span class="string">&quot;address&quot;</span>);</span><br><span class="line">System.out.println(addressField);   <span class="comment">// private java.lang.String cn.cuzz.Person.address</span></span><br><span class="line">}</span><br><span class="line">}</span><br></pre></td></tr></table></figure></li></ul></li></ul><h3 id="&#x901A;&#x8FC7;&#x53CD;&#x5C04;&#xFF0C;&#x521B;&#x5EFA;&#x5BF9;&#x8C61;&#xFF0C;&#x83B7;&#x53D6;&#x6307;&#x5B9A;&#x7684;&#x6210;&#x5458;&#x53D8;&#x91CF;&#xFF0C;&#x8FDB;&#x884C;&#x8D4B;&#x503C;&#x4E0E;&#x83B7;&#x53D6;&#x503C;&#x64CD;&#x4F5C;"><a href="#&#x901A;&#x8FC7;&#x53CD;&#x5C04;&#xFF0C;&#x521B;&#x5EFA;&#x5BF9;&#x8C61;&#xFF0C;&#x83B7;&#x53D6;&#x6307;&#x5B9A;&#x7684;&#x6210;&#x5458;&#x53D8;&#x91CF;&#xFF0C;&#x8FDB;&#x884C;&#x8D4B;&#x503C;&#x4E0E;&#x83B7;&#x53D6;&#x503C;&#x64CD;&#x4F5C;" class="headerlink" title="&#x901A;&#x8FC7;&#x53CD;&#x5C04;&#xFF0C;&#x521B;&#x5EFA;&#x5BF9;&#x8C61;&#xFF0C;&#x83B7;&#x53D6;&#x6307;&#x5B9A;&#x7684;&#x6210;&#x5458;&#x53D8;&#x91CF;&#xFF0C;&#x8FDB;&#x884C;&#x8D4B;&#x503C;&#x4E0E;&#x83B7;&#x53D6;&#x503C;&#x64CD;&#x4F5C;"></a>&#x901A;&#x8FC7;&#x53CD;&#x5C04;&#xFF0C;&#x521B;&#x5EFA;&#x5BF9;&#x8C61;&#xFF0C;&#x83B7;&#x53D6;&#x6307;&#x5B9A;&#x7684;&#x6210;&#x5458;&#x53D8;&#x91CF;&#xFF0C;&#x8FDB;&#x884C;&#x8D4B;&#x503C;&#x4E0E;&#x83B7;&#x53D6;&#x503C;&#x64CD;&#x4F5C;</h3><p>&#x83B7;&#x53D6;&#x6210;&#x5458;&#x53D8;&#x91CF;&#xFF0C;&#x6B65;&#x9AA4;&#x5982;&#x4E0B;&#xFF1A;</p><ul><li>&#x83B7;&#x53D6;Class&#x5BF9;&#x8C61;</li><li>&#x83B7;&#x53D6;&#x6784;&#x9020;&#x65B9;&#x6CD5;</li><li>&#x901A;&#x8FC7;&#x6784;&#x9020;&#x65B9;&#x6CD5;&#xFF0C;&#x521B;&#x5EFA;&#x5BF9;&#x8C61;</li><li>&#x83B7;&#x53D6;&#x6307;&#x5B9A;&#x7684;&#x6210;&#x5458;&#x53D8;&#x91CF;&#xFF08;&#x79C1;&#x6709;&#x6210;&#x5458;&#x53D8;&#x91CF;&#xFF0C;&#x901A;&#x8FC7;setAccessible(boolean flag)&#x65B9;&#x6CD5;&#x66B4;&#x529B;&#x8BBF;&#x95EE;&#xFF09;</li><li>&#x901A;&#x8FC7;&#x65B9;&#x6CD5;&#xFF0C;&#x7ED9;&#x6307;&#x5B9A;&#x5BF9;&#x8C61;&#x7684;&#x6307;&#x5B9A;&#x6210;&#x5458;&#x53D8;&#x91CF;&#x8D4B;&#x503C;&#x6216;&#x8005;&#x83B7;&#x53D6;&#x503C;<br><code>public void set(Object obj, Object value)</code>&#x5728;&#x6307;&#x5B9A;&#x5BF9;&#x8C61;obj&#x4E2D;&#xFF0C;&#x5C06;&#x6B64; Field &#x5BF9;&#x8C61;&#x8868;&#x793A;&#x7684;&#x6210;&#x5458;&#x53D8;&#x91CF;&#x8BBE;&#x7F6E;&#x4E3A;&#x6307;&#x5B9A;&#x7684;&#x65B0;&#x503C;<br><code>public Object get(Object obj)</code>&#x8FD4;&#x56DE;&#x6307;&#x5B9A;&#x5BF9;&#x8C61;obj&#x4E2D;&#xFF0C;&#x6B64; Field &#x5BF9;&#x8C61;&#x8868;&#x793A;&#x7684;&#x6210;&#x5458;&#x53D8;&#x91CF;&#x7684;&#x503C;<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> cn.cuzz;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.lang.reflect.Constructor;</span><br><span class="line"><span class="keyword">import</span> java.lang.reflect.Field;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Test4</span> </span>{</span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> IllegalAccessException, Exception </span>{</span><br><span class="line"><span class="comment">// &#x83B7;&#x53D6;Class&#x5BF9;&#x8C61;</span></span><br><span class="line">Class c = Class.forName(<span class="string">&quot;cn.cuzz.Person&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// &#x83B7;&#x53D6;&#x6784;&#x9020;&#x65B9;&#x6CD5;</span></span><br><span class="line">Constructor con = c.getConstructor(String.class);</span><br><span class="line"></span><br><span class="line"><span class="comment">// &#x901A;&#x8FC7;&#x6784;&#x9020;&#x65B9;&#x6CD5; &#x521B;&#x5EFA;&#x5BF9;&#x8C61;</span></span><br><span class="line">Object obj = con.newInstance(<span class="string">&quot;cuzz&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// &#x83B7;&#x53D6;&#x6307;&#x5B9A;&#x6210;&#x5458;&#x53D8;&#x91CF;</span></span><br><span class="line"><span class="comment">// public String name</span></span><br><span class="line">Field nameField = c.getField(<span class="string">&quot;name&quot;</span>);</span><br><span class="line"><span class="comment">// public int age</span></span><br><span class="line">Field ageField = c.getField(<span class="string">&quot;age&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// &#x8D4B;&#x503C;</span></span><br><span class="line">nameField.set(obj, <span class="string">&quot;Cuzz&quot;</span>);</span><br><span class="line">ageField.set(obj, <span class="number">23</span>);</span><br><span class="line"></span><br><span class="line">System.out.println(<span class="string">&quot;name = &quot;</span>+ nameField.get(obj)); <span class="comment">// name = Cuzz</span></span><br><span class="line">System.out.println(<span class="string">&quot;age = &quot;</span>+ ageField.get(obj));   <span class="comment">// age = 23</span></span><br><span class="line">}</span><br><span class="line">}</span><br></pre></td></tr></table></figure></li></ul><h3 id="&#x901A;&#x8FC7;&#x53CD;&#x5C04;&#x83B7;&#x53D6;&#x6210;&#x5458;&#x65B9;&#x6CD5;&#x5E76;&#x4F7F;&#x7528;"><a href="#&#x901A;&#x8FC7;&#x53CD;&#x5C04;&#x83B7;&#x53D6;&#x6210;&#x5458;&#x65B9;&#x6CD5;&#x5E76;&#x4F7F;&#x7528;" class="headerlink" title="&#x901A;&#x8FC7;&#x53CD;&#x5C04;&#x83B7;&#x53D6;&#x6210;&#x5458;&#x65B9;&#x6CD5;&#x5E76;&#x4F7F;&#x7528;"></a>&#x901A;&#x8FC7;&#x53CD;&#x5C04;&#x83B7;&#x53D6;&#x6210;&#x5458;&#x65B9;&#x6CD5;&#x5E76;&#x4F7F;&#x7528;</h3><p>&#x5728;&#x53CD;&#x5C04;&#x673A;&#x5236;&#x4E2D;&#xFF0C;&#x628A;&#x7C7B;&#x4E2D;&#x7684;&#x6210;&#x5458;&#x65B9;&#x6CD5;&#x4F7F;&#x7528;&#x7C7B;Method&#x8868;&#x793A;&#x3002;&#x53EF;&#x901A;&#x8FC7;Class&#x7C7B;&#x4E2D;&#x63D0;&#x4F9B;&#x7684;&#x65B9;&#x6CD5;&#x83B7;&#x53D6;&#x6210;&#x5458;&#x65B9;&#x6CD5;&#xFF1A;</p><ul><li><p>&#x8FD4;&#x56DE;&#x83B7;&#x53D6;&#x4E00;&#x4E2A;&#x65B9;&#x6CD5;&#xFF1A;</p><ul><li><code>public Method getMethod(String name, Class&lt;?&gt;... parameterTypes)</code>  &#x83B7;&#x53D6; public &#x4FEE;&#x9970;&#x7684;&#x65B9;&#x6CD5;</li><li><code>public Method getDeclaredMethod(String name, Class&lt;?&gt;... parameterTypes)</code> &#x83B7;&#x53D6;&#x4EFB;&#x610F;&#x7684;&#x65B9;&#x6CD5;&#xFF0C;&#x5305;&#x542B;&#x79C1;&#x6709;&#x7684;</li></ul><p>&#x53C2;&#x6570;1: name &#x8981;&#x67E5;&#x627E;&#x7684;&#x65B9;&#x6CD5;&#x540D;&#x79F0;&#xFF1B; &#x53C2;&#x6570;2&#xFF1A; parameterTypes &#x8BE5;&#x65B9;&#x6CD5;&#x7684;&#x53C2;&#x6570;&#x7C7B;&#x578B;</p></li><li><p>&#x8FD4;&#x56DE;&#x83B7;&#x53D6;&#x591A;&#x4E2A;&#x65B9;&#x6CD5;&#xFF1A;</p><ul><li><code>public Method[] getMethods()</code> &#x83B7;&#x53D6;&#x672C;&#x7C7B;&#x4E0E;&#x7236;&#x7C7B;&#x4E2D;&#x6240;&#x6709;public &#x4FEE;&#x9970;&#x7684;&#x65B9;&#x6CD5;</li><li><code>public Method[] getDeclaredMethods()</code> &#x83B7;&#x53D6;&#x672C;&#x7C7B;&#x4E2D;&#x6240;&#x6709;&#x7684;&#x65B9;&#x6CD5;(&#x5305;&#x542B;&#x79C1;&#x6709;&#x7684;)<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> cn.cuzz;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.lang.reflect.Method;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Test5</span> </span>{</span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> Exception </span>{</span><br><span class="line"><span class="comment">// &#x83B7;&#x53D6;Class&#x5BF9;&#x8C61;</span></span><br><span class="line">Class c = Class.forName(<span class="string">&quot;cn.cuzz.Person&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// &#x83B7;&#x53D6;&#x591A;&#x4E2A;&#x65B9;&#x6CD5;</span></span><br><span class="line">Method[] methods = c.getMethods();</span><br><span class="line">Method[] methodss = c.getDeclaredMethods();</span><br><span class="line"></span><br><span class="line"><span class="comment">// &#x83B7;&#x53D6;&#x4E00;&#x4E2A;&#x65B9;&#x6CD5;&#xFF1A;</span></span><br><span class="line"><span class="comment">// public void method1()</span></span><br><span class="line">Method method = c.getMethod(<span class="string">&quot;method1&quot;</span>, <span class="keyword">null</span>);</span><br><span class="line">System.out.println(method);</span><br><span class="line"></span><br><span class="line"><span class="comment">// public String method4(String name){</span></span><br><span class="line">method = c.getMethod(<span class="string">&quot;method4&quot;</span>, String.class);</span><br><span class="line">System.out.println(method);</span><br><span class="line"></span><br><span class="line"><span class="comment">// &#x79C1;&#x6709;&#x65B9;&#x6CD5;</span></span><br><span class="line"><span class="comment">// private void method5()</span></span><br><span class="line">method = c.getDeclaredMethod(<span class="string">&quot;method5&quot;</span>, <span class="keyword">null</span>);</span><br><span class="line">System.out.println(method);</span><br><span class="line">}</span><br><span class="line">}</span><br></pre></td></tr></table></figure></li></ul></li></ul><h3 id="&#x901A;&#x8FC7;&#x53CD;&#x5C04;&#xFF0C;&#x521B;&#x5EFA;&#x5BF9;&#x8C61;&#xFF0C;&#x8C03;&#x7528;&#x6307;&#x5B9A;&#x7684;&#x65B9;&#x6CD5;"><a href="#&#x901A;&#x8FC7;&#x53CD;&#x5C04;&#xFF0C;&#x521B;&#x5EFA;&#x5BF9;&#x8C61;&#xFF0C;&#x8C03;&#x7528;&#x6307;&#x5B9A;&#x7684;&#x65B9;&#x6CD5;" class="headerlink" title="&#x901A;&#x8FC7;&#x53CD;&#x5C04;&#xFF0C;&#x521B;&#x5EFA;&#x5BF9;&#x8C61;&#xFF0C;&#x8C03;&#x7528;&#x6307;&#x5B9A;&#x7684;&#x65B9;&#x6CD5;"></a>&#x901A;&#x8FC7;&#x53CD;&#x5C04;&#xFF0C;&#x521B;&#x5EFA;&#x5BF9;&#x8C61;&#xFF0C;&#x8C03;&#x7528;&#x6307;&#x5B9A;&#x7684;&#x65B9;&#x6CD5;</h3><p>&#x83B7;&#x53D6;&#x6210;&#x5458;&#x65B9;&#x6CD5;&#xFF0C;&#x6B65;&#x9AA4;&#x5982;&#x4E0B;&#xFF1A;</p><ul><li>&#x83B7;&#x53D6;Class&#x5BF9;&#x8C61;</li><li>&#x83B7;&#x53D6;&#x6784;&#x9020;&#x65B9;&#x6CD5;</li><li>&#x901A;&#x8FC7;&#x6784;&#x9020;&#x65B9;&#x6CD5;&#xFF0C;&#x521B;&#x5EFA;&#x5BF9;&#x8C61;</li><li>&#x83B7;&#x53D6;&#x6307;&#x5B9A;&#x7684;&#x65B9;&#x6CD5;</li><li>&#x6267;&#x884C;&#x627E;&#x5230;&#x7684;&#x65B9;&#x6CD5;(&#x5982;&#x679C;&#x83B7;&#x53D6;&#x7684;&#x662F;&#x79C1;&#x6709;&#x65B9;&#x6CD5;&#x5219;&#x8981;&#x5F00;&#x542F;&#x66B4;&#x529B;&#x8BBF;&#x95EE;<code>m5.setAccessible(true)</code>)<br> <code>public Object invoke(Object obj,  Object... args)</code> &#x6267;&#x884C;&#x6307;&#x5B9A;&#x5BF9;&#x8C61;obj&#x4E2D;&#xFF0C;&#x5F53;&#x524D;Method&#x5BF9;&#x8C61;&#x6240;&#x4EE3;&#x8868;&#x7684;&#x65B9;&#x6CD5;&#xFF0C;&#x65B9;&#x6CD5;&#x8981;&#x4F20;&#x5165;&#x7684;&#x53C2;&#x6570;&#x901A;&#x8FC7;<code>args</code>&#x6307;&#x5B9A;<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> cn.cuzz;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.lang.reflect.Constructor;</span><br><span class="line"><span class="keyword">import</span> java.lang.reflect.Method;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Test6</span> </span>{</span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> Exception </span>{</span><br><span class="line"><span class="comment">// &#x83B7;&#x53D6;Class&#x5BF9;&#x8C61;</span></span><br><span class="line">Class c = Class.forName(<span class="string">&quot;cn.cuzz.Person&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// &#x83B7;&#x53D6;&#x6307;&#x5B9A;&#x6784;&#x9020;&#x5668;</span></span><br><span class="line">Constructor con =  c.getConstructor(String.class, <span class="keyword">int</span>.class, String.class);</span><br><span class="line"></span><br><span class="line"><span class="comment">// &#x901A;&#x8FC7;&#x6784;&#x9020;&#x65B9;&#x6CD5;&#x4E2D;&#x7684;Constructor&#x7684;&#x65B9;&#x6CD5; &#x521B;&#x5EFA;&#x5BF9;&#x8C61;</span></span><br><span class="line">Object obj = con.newInstance(<span class="string">&quot;cuzz&quot;</span>, <span class="number">18</span>, <span class="string">&quot;&#x6B66;&#x6C49;&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// &#x83B7;&#x53D6;&#x6307;&#x5B9A;&#x7684;&#x65B9;&#x6CD5;</span></span><br><span class="line">Method m4 = c.getMethod(<span class="string">&quot;method4&quot;</span>, String.class);</span><br><span class="line"></span><br><span class="line"><span class="comment">// &#x6267;&#x884C;&#x627E;&#x5230;&#x7684;&#x65B9;&#x6CD5;</span></span><br><span class="line">Object result = m4.invoke(obj, <span class="string">&quot;2018/03/19&quot;</span>);</span><br><span class="line"></span><br><span class="line">System.out.println(<span class="string">&quot;result = &quot;</span> + result); <span class="comment">// result = &#x54C8;&#x54C8;2018/03/19</span></span><br><span class="line">}</span><br><span class="line">}</span><br></pre></td></tr></table></figure></li></ul><h2 id="&#x53CD;&#x5C04;&#x7EC3;&#x4E60;"><a href="#&#x53CD;&#x5C04;&#x7EC3;&#x4E60;" class="headerlink" title="&#x53CD;&#x5C04;&#x7EC3;&#x4E60;"></a>&#x53CD;&#x5C04;&#x7EC3;&#x4E60;</h2><p>&#x4E0B;&#x9762;&#x5C55;&#x793A;&#x4E00;&#x4E0B;&#x53CD;&#x5C04;&#x7684;&#x5229;&#x7528;&#x573A;&#x666F;&#x3002;</p><h3 id="&#x6CDB;&#x578B;&#x64E6;&#x9664;"><a href="#&#x6CDB;&#x578B;&#x64E6;&#x9664;" class="headerlink" title="&#x6CDB;&#x578B;&#x64E6;&#x9664;"></a>&#x6CDB;&#x578B;&#x64E6;&#x9664;</h3><p>&#x601D;&#x8003;&#xFF0C;&#x5C06;&#x5DF2;&#x5B58;&#x5728;&#x7684;<code>ArrayList&lt;Integer&gt;</code>&#x96C6;&#x5408;&#x4E2D;&#x6DFB;&#x52A0;&#x4E00;&#x4E2A;&#x5B57;&#x7B26;&#x4E32;&#x6570;&#x636E;&#xFF0C;&#x5982;&#x4F55;&#x5B9E;&#x73B0;&#x5462;&#xFF1F;</p><p>&#x6211;&#x6765;&#x544A;&#x8BC9;&#x5927;&#x5BB6;&#xFF0C;&#x5176;&#x5B9E;&#x7A0B;&#x5E8F;&#x7F16;&#x8BD1;&#x540E;&#x4EA7;&#x751F;&#x7684;<code>.class</code>&#x6587;&#x4EF6;&#x4E2D;&#x662F;&#x6CA1;&#x6709;&#x6CDB;&#x578B;&#x7EA6;&#x675F;&#x7684;&#xFF0C;&#x8FD9;&#x79CD;&#x73B0;&#x8C61;&#x6211;&#x4EEC;&#x79F0;&#x4E3A;&#x6CDB;&#x578B;&#x7684;&#x64E6;&#x9664;&#x3002;&#x90A3;&#x4E48;&#xFF0C;&#x6211;&#x4EEC;&#x53EF;&#x4EE5;&#x901A;&#x8FC7;&#x53CD;&#x5C04;&#x6280;&#x672F;&#xFF0C;&#x6765;&#x5B8C;&#x6210;&#x5411;&#x6709;&#x6CDB;&#x578B;&#x7EA6;&#x675F;&#x7684;&#x96C6;&#x5408;&#x4E2D;&#xFF0C;&#x6DFB;&#x52A0;&#x4EFB;&#x610F;&#x7C7B;&#x578B;&#x7684;&#x5143;&#x7D20;<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> cn.cuzz;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.lang.reflect.Method;</span><br><span class="line"><span class="keyword">import</span> java.util.ArrayList;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Test7</span> </span>{</span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> Exception, SecurityException </span>{</span><br><span class="line">ArrayList&lt;String&gt; list = <span class="keyword">new</span> ArrayList&lt;String&gt;();</span><br><span class="line"></span><br><span class="line"><span class="comment">// &#x6DFB;&#x52A0;&#x5143;&#x7D20;</span></span><br><span class="line">list.add(<span class="string">&quot;cuzz&quot;</span>);</span><br><span class="line"><span class="comment">// list.add(23);  &#x62A5;&#x9519;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// &#x901A;&#x8FC7;&#x53CD;&#x5C04;&#x6280;&#x672F;&#xFF0C;&#x5B9E;&#x73B0;&#x6DFB;&#x52A0;&#x4EFB;&#x610F;&#x7C7B;&#x578B;&#x7684;&#x5143;&#x7D20;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// &#x83B7;&#x53D6;&#x5B57;&#x8282;&#x7801;&#x6587;&#x4EF6;&#x5BF9;&#x8C61;</span></span><br><span class="line">Class c = Class.forName(<span class="string">&quot;java.util.ArrayList&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// &#x627E;&#x5230;add()&#x65B9;&#x6CD5;</span></span><br><span class="line">Method addMethod = c.getMethod(<span class="string">&quot;add&quot;</span>, Object.class);</span><br><span class="line"></span><br><span class="line"><span class="comment">// &#x6267;&#x884C;add()&#x65B9;&#x6CD5;</span></span><br><span class="line">addMethod.invoke(list, <span class="number">23</span>);</span><br><span class="line"></span><br><span class="line">System.out.println(list); <span class="comment">//[cuzz, 23]</span></span><br><span class="line">}</span><br><span class="line">}</span><br></pre></td></tr></table></figure></p><h3 id="&#x53CD;&#x5C04;&#x914D;&#x7F6E;&#x6587;&#x4EF6;"><a href="#&#x53CD;&#x5C04;&#x914D;&#x7F6E;&#x6587;&#x4EF6;" class="headerlink" title="&#x53CD;&#x5C04;&#x914D;&#x7F6E;&#x6587;&#x4EF6;"></a>&#x53CD;&#x5C04;&#x914D;&#x7F6E;&#x6587;&#x4EF6;</h3><p>&#x901A;&#x8FC7;&#x914D;&#x7F6E;&#x6587;&#x4EF6;&#x5F97;&#x5230;&#x7C7B;&#x540D;&#x548C;&#x8981;&#x8FD0;&#x884C;&#x7684;&#x65B9;&#x6CD5;&#x540D;,&#x7528;&#x53CD;&#x5C04;&#x7684;&#x64CD;&#x4F5C;&#x7C7B;&#x540D;&#x5F97;&#x5230;&#x5BF9;&#x8C61;&#x548C;&#x8C03;&#x7528;&#x65B9;&#x6CD5;</p><p> &#x5B9E;&#x73B0;&#x6B65;&#x9AA4;:</p><ul><li>&#x51C6;&#x5907;&#x914D;&#x7F6E;&#x6587;&#x4EF6;,&#x952E;&#x503C;&#x5BF9;</li><li>IO&#x6D41;&#x8BFB;&#x53D6;&#x914D;&#x7F6E;&#x6587;&#x4EF6;  Reader</li><li>&#x6587;&#x4EF6;&#x4E2D;&#x7684;&#x952E;&#x503C;&#x5BF9;&#x5B58;&#x50A8;&#x5230;&#x96C6;&#x5408;&#x4E2D; Properties<br>&#x96C6;&#x5408;&#x4FDD;&#x5B58;&#x7684;&#x952E;&#x503C;&#x5BF9;,&#x5C31;&#x662F;&#x7C7B;&#x540D;&#x548C;&#x65B9;&#x6CD5;&#x540D;</li><li>&#x53CD;&#x5C04;&#x83B7;&#x53D6;&#x6307;&#x5B9A;&#x7C7B;&#x7684;class&#x6587;&#x4EF6;&#x5BF9;&#x8C61;</li><li>class&#x6587;&#x4EF6;&#x5BF9;&#x8C61;,&#x83B7;&#x53D6;&#x6307;&#x5B9A;&#x7684;&#x65B9;&#x6CD5;</li><li>&#x8FD0;&#x884C;&#x65B9;&#x6CD5;<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Test8</span> </span>{</span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> Exception</span>{</span><br><span class="line"><span class="comment">// IO&#x6D41;&#x8BFB;&#x53D6;&#x914D;&#x7F6E;&#x6587;&#x4EF6;</span></span><br><span class="line">FileReader r = <span class="keyword">new</span> FileReader(<span class="string">&quot;config.properties&quot;</span>);</span><br><span class="line"><span class="comment">// &#x521B;&#x5EFA;&#x96C6;&#x5408;&#x5BF9;&#x8C61;</span></span><br><span class="line">Properties pro = <span class="keyword">new</span> Properties();</span><br><span class="line"><span class="comment">// &#x8C03;&#x7528;&#x96C6;&#x5408;&#x65B9;&#x6CD5;load,&#x4F20;&#x9012;&#x6D41;&#x5BF9;&#x8C61;</span></span><br><span class="line">pro.load(r);</span><br><span class="line">r.close();</span><br><span class="line"><span class="comment">// &#x901A;&#x8FC7;&#x952E;&#x83B7;&#x53D6;&#x503C;</span></span><br><span class="line">String className = pro.getProperty(<span class="string">&quot;className&quot;</span>);</span><br><span class="line">String methodName = pro.getProperty(<span class="string">&quot;methodName&quot;</span>);</span><br><span class="line"><span class="comment">// &#x53CD;&#x5C04;&#x83B7;&#x53D6;&#x6307;&#x5B9A;&#x7C7B;&#x7684;class&#x6587;&#x4EF6;&#x5BF9;&#x8C61;</span></span><br><span class="line">Class c = Class.forName(className);</span><br><span class="line">Object obj = c.newInstance();</span><br><span class="line"><span class="comment">// &#x83B7;&#x53D6;&#x6307;&#x5B9A;&#x7684;&#x65B9;&#x6CD5;&#x540D;</span></span><br><span class="line">Method method = c.getMethod(methodName);</span><br><span class="line">method.invoke(obj);</span><br><span class="line">}</span><br><span class="line">}</span><br></pre></td></tr></table></figure></li></ul><p>&#x914D;&#x7F6E;&#x6587;&#x4EF6;<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"># className=cn.cuzz.Student</span><br><span class="line"># methodName=study</span><br><span class="line">className=cn.cuzz.Teacher</span><br><span class="line">methodName=teach</span><br><span class="line"># className=cn.cuzz.Worker</span><br><span class="line"># methodName=work</span><br></pre></td></tr></table></figure></p>]]></content>
    
    <summary type="html">
    
      &lt;h2 id=&quot;&amp;#x7C7B;&amp;#x52A0;&amp;#x8F7D;&amp;#x5668;&quot;&gt;&lt;a href=&quot;#&amp;#x7C7B;&amp;#x52A0;&amp;#x8F7D;&amp;#x5668;&quot; class=&quot;headerlink&quot; title=&quot;&amp;#x7C7B;&amp;#x52A0;&amp;#x8F7D;&amp;#x5668;&quot;&gt;&lt;/a&gt;&amp;#x7C7B;&amp;#x52A0;&amp;#x8F7D;&amp;#x5668;&lt;/h2&gt;&lt;p&gt;&amp;#x5F53;&amp;#x7A0B;&amp;#x5E8F;&amp;#x6709;&amp;#x4F7F;&amp;#x7528;&amp;#x67D0;&amp;#x4E2A;&amp;#x7C7B;&amp;#x65F6;&amp;#xFF0C;&amp;#x5982;&amp;#x679C;&amp;#x8BE5;&amp;#x7C7B;&amp;#x8FD8;&amp;#x6CA1;&amp;#x6709;&amp;#x88AB;&amp;#x52A0;&amp;#x8F7D;&amp;#x5230;&amp;#x5185;&amp;#x5B58;&amp;#x4E2D;&amp;#xFF0C;&amp;#x5219;&amp;#x7CFB;&amp;#x7EDF;&amp;#x4F1A;&amp;#x901A;&amp;#x8FC7;&amp;#x52A0;&amp;#x8F7D;&amp;#xFF0C;&amp;#x8FDE;&amp;#x63A5;&amp;#xFF0C;&amp;#x521D;&amp;#x59CB;&amp;#x5316;&amp;#x4E09;&amp;#x6B65;&amp;#x6765;&amp;#x5B9E;&amp;#x73B0;&amp;#x5BF9;&amp;#x8FD9;&amp;#x4E2A;&amp;#x7C7B;&amp;#x8FDB;&amp;#x884C;&amp;#x521D;&amp;#x59CB;&amp;#x5316;&lt;/p&gt;
    
    </summary>
    
      <category term="Java 基础" scheme="http://blog.cuzz.site/categories/Java-%E5%9F%BA%E7%A1%80/"/>
    
    
      <category term="反射" scheme="http://blog.cuzz.site/tags/%E5%8F%8D%E5%B0%84/"/>
    
  </entry>
  
  <entry>
    <title>Spring注解驱动开发（四）</title>
    <link href="http://blog.cuzz.site/2019/02/10/Spring%E6%B3%A8%E8%A7%A3%E9%A9%B1%E5%8A%A8%E5%BC%80%E5%8F%91%EF%BC%88%E5%9B%9B%EF%BC%89/"/>
    <id>http://blog.cuzz.site/2019/02/10/Spring注解驱动开发（四）/</id>
    <published>2019-02-10T14:14:29.000Z</published>
    <updated>2019-07-16T11:43:31.318Z</updated>
    
    <content type="html"><![CDATA[<h2 id="AOP&#x9762;&#x5411;&#x5207;&#x9762;&#x7F16;&#x7A0B;"><a href="#AOP&#x9762;&#x5411;&#x5207;&#x9762;&#x7F16;&#x7A0B;" class="headerlink" title="AOP&#x9762;&#x5411;&#x5207;&#x9762;&#x7F16;&#x7A0B;"></a>AOP&#x9762;&#x5411;&#x5207;&#x9762;&#x7F16;&#x7A0B;</h2><p>AOP&#xFF08;Aspect Oriented Programming&#xFF09;&#xFF0C;&#x5373;&#x9762;&#x5411;&#x5207;&#x9762;&#x7F16;&#x7A0B;&#xFF0C;&#x53EF;&#x4EE5;&#x8BF4;&#x662F;OOP&#xFF08;Object Oriented Programming&#xFF0C;&#x9762;&#x5411;&#x5BF9;&#x8C61;&#x7F16;&#x7A0B;&#xFF09;&#x7684;&#x8865;&#x5145;&#x548C;&#x5B8C;&#x5584;&#x3002;OOP&#x5F15;&#x5165;&#x5C01;&#x88C5;&#x3001;&#x7EE7;&#x627F;&#x3001;&#x591A;&#x6001;&#x7B49;&#x6982;&#x5FF5;&#x6765;&#x5EFA;&#x7ACB;&#x4E00;&#x79CD;&#x5BF9;&#x8C61;&#x5C42;&#x6B21;&#x7ED3;&#x6784;&#xFF0C;&#x7528;&#x4E8E;&#x6A21;&#x62DF;&#x516C;&#x5171;&#x884C;&#x4E3A;&#x7684;&#x4E00;&#x4E2A;&#x96C6;&#x5408;&#x3002;&#x4E0D;&#x8FC7;OOP&#x5141;&#x8BB8;&#x5F00;&#x53D1;&#x8005;&#x5B9A;&#x4E49;&#x7EB5;&#x5411;&#x7684;&#x5173;&#x7CFB;&#xFF0C;&#x4F46;&#x5E76;&#x4E0D;&#x9002;&#x5408;&#x5B9A;&#x4E49;&#x6A2A;&#x5411;&#x7684;&#x5173;&#x7CFB;&#xFF0C;&#x4F8B;&#x5982;&#x65E5;&#x5FD7;&#x529F;&#x80FD;&#x3002;&#x65E5;&#x5FD7;&#x4EE3;&#x7801;&#x5F80;&#x5F80;&#x6A2A;&#x5411;&#x5730;&#x6563;&#x5E03;&#x5728;&#x6240;&#x6709;&#x5BF9;&#x8C61;&#x5C42;&#x6B21;&#x4E2D;&#xFF0C;&#x800C;&#x4E0E;&#x5B83;&#x5BF9;&#x5E94;&#x7684;&#x5BF9;&#x8C61;&#x7684;&#x6838;&#x5FC3;&#x529F;&#x80FD;&#x6BEB;&#x65E0;&#x5173;&#x7CFB;&#x5BF9;&#x4E8E;&#x5176;&#x4ED6;&#x7C7B;&#x578B;&#x7684;&#x4EE3;&#x7801;&#xFF0C;&#x5982;&#x5B89;&#x5168;&#x6027;&#x3001;&#x5F02;&#x5E38;&#x5904;&#x7406;&#x548C;&#x900F;&#x660E;&#x7684;&#x6301;&#x7EED;&#x6027;&#x4E5F;&#x90FD;&#x662F;&#x5982;&#x6B64;&#xFF0C;&#x8FD9;&#x79CD;&#x6563;&#x5E03;&#x5728;&#x5404;&#x5904;&#x7684;&#x65E0;&#x5173;&#x7684;&#x4EE3;&#x7801;&#x88AB;&#x79F0;&#x4E3A;&#x6A2A;&#x5207;&#xFF08;cross cutting&#xFF09;&#xFF0C;&#x5728;OOP&#x8BBE;&#x8BA1;&#x4E2D;&#xFF0C;&#x5B83;&#x5BFC;&#x81F4;&#x4E86;&#x5927;&#x91CF;&#x4EE3;&#x7801;&#x7684;&#x91CD;&#x590D;&#xFF0C;&#x800C;&#x4E0D;&#x5229;&#x4E8E;&#x5404;&#x4E2A;&#x6A21;&#x5757;&#x7684;&#x91CD;&#x7528;&#x3002;</p><a id="more"></a><h3 id="&#x5E95;&#x5C42;&#x5B9E;&#x73B0;"><a href="#&#x5E95;&#x5C42;&#x5B9E;&#x73B0;" class="headerlink" title="&#x5E95;&#x5C42;&#x5B9E;&#x73B0;"></a>&#x5E95;&#x5C42;&#x5B9E;&#x73B0;</h3><p>Spring &#x7684; AOP &#x7684;&#x5E95;&#x5C42;&#x7528;&#x5230;&#x4E24;&#x79CD;&#x4EE3;&#x7406;&#x673A;&#x5236;&#xFF1A;</p><ul><li>JDK &#x7684;&#x52A8;&#x6001;&#x4EE3;&#x7406; &#xFF1A;&#x7C7B;&#x5FC5;&#x987B;&#x5B9E;&#x73B0;&#x63A5;&#x53E3;&#xFF0C;&#x6240;&#x4EE5;&#x662F;&#x9488;&#x5BF9;&#x5B9E;&#x73B0;&#x4E86;&#x63A5;&#x53E3;&#x7684;&#x7C7B;&#x4EA7;&#x751F;&#x4EE3;&#x7406;.</li><li>Cglib &#x7684;&#x52A8;&#x6001;&#x4EE3;&#x7406;&#xFF1A;&#x9488;&#x5BF9;&#x6CA1;&#x6709;&#x5B9E;&#x73B0;&#x63A5;&#x53E3;&#x7684;&#x7C7B;&#x4EA7;&#x751F;&#x4EE3;&#x7406;&#xFF0C;&#x5E94;&#x7528;&#x7684;&#x662F;&#x5E95;&#x5C42;&#x7684;&#x5B57;&#x8282;&#x7801;&#x589E;&#x5F3A;&#x7684;&#x6280;&#x672F;&#x751F;&#x6210;&#x5F53;&#x524D;&#x7C7B;&#x7684;&#x5B50;&#x7C7B;&#x5BF9;&#x8C61;</li></ul><h3 id="JDK-&#x7684;&#x52A8;&#x6001;&#x4EE3;&#x7406;"><a href="#JDK-&#x7684;&#x52A8;&#x6001;&#x4EE3;&#x7406;" class="headerlink" title="JDK &#x7684;&#x52A8;&#x6001;&#x4EE3;&#x7406;"></a>JDK &#x7684;&#x52A8;&#x6001;&#x4EE3;&#x7406;</h3><ul><li><code>UserService</code>&#x63A5;&#x53E3;&#xFF0C;&#x5B9E;&#x73B0;&#x589E;&#x5220;&#x6539;&#x67E5;&#x7684;&#x529F;&#x80FD;</li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.cuzz.service;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">UserService</span> </span>{</span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">add</span><span class="params">()</span></span>;</span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">delete</span><span class="params">()</span></span>;</span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">update</span><span class="params">()</span></span>;</span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">get</span><span class="params">()</span></span>;</span><br><span class="line">}</span><br></pre></td></tr></table></figure><ul><li><code>UserService</code>&#x63A5;&#x53E3;&#x7684;&#x5B9E;&#x73B0;&#x7684;&#x7C7B;</li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">UserServiceImpl</span> <span class="keyword">implements</span> <span class="title">UserService</span> </span>{</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">add</span><span class="params">()</span> </span>{</span><br><span class="line">        System.out.println(<span class="string">&quot;&#x6DFB;&#x52A0;&#x4E00;&#x4E2A;user&quot;</span>);</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">delete</span><span class="params">()</span> </span>{</span><br><span class="line">        System.out.println(<span class="string">&quot;&#x5220;&#x9664;&#x4E00;&#x4E2A;user&quot;</span>);</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">update</span><span class="params">()</span> </span>{</span><br><span class="line">        System.out.println(<span class="string">&quot;&#x66F4;&#x65B0;&#x4E00;&#x4E2A;user&quot;</span>);</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">get</span><span class="params">()</span> </span>{</span><br><span class="line">        System.out.println(<span class="string">&quot;&#x67E5;&#x8BE2;&#x4E00;&#x4E2A;user&quot;</span>);</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></table></figure><ul><li>&#x5B9E;&#x73B0;&#x52A8;&#x6001;&#x4EE3;&#x7406;</li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.cuzz.service;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.lang.reflect.InvocationHandler;</span><br><span class="line"><span class="keyword">import</span> java.lang.reflect.Method;</span><br><span class="line"><span class="keyword">import</span> java.lang.reflect.Proxy;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">UserServiceProxyFactory</span> <span class="keyword">implements</span> <span class="title">InvocationHandler</span></span>{</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">private</span> UserService us;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">UserServiceProxyFactory</span><span class="params">(UserService us)</span> </span>{</span><br><span class="line">        <span class="keyword">super</span>();</span><br><span class="line">        <span class="keyword">this</span>.us = us;</span><br><span class="line">    }</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// &#x83B7;&#x5F97;&#x52A8;&#x6001;&#x4EE3;&#x7406;</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> UserService <span class="title">getUserServiceProxy</span><span class="params">()</span> </span>{</span><br><span class="line">        <span class="comment">// &#x751F;&#x6210;&#x52A8;&#x6001;&#x4EE3;&#x7406;</span></span><br><span class="line">        UserService usProxy = (UserService) Proxy.newProxyInstance(UserServiceProxyFactory.class.getClassLoader(),</span><br><span class="line">                UserServiceImpl.class.getInterfaces(), </span><br><span class="line">                <span class="keyword">this</span>); <span class="comment">// &#x8FD9;&#x4E2A; this &#x5C31;&#x662F;&#x5B9E;&#x73B0; InvocationHandler &#x7684;&#x5BF9;&#x8C61;</span></span><br><span class="line">        <span class="keyword">return</span> usProxy;</span><br><span class="line">    }</span><br><span class="line">    </span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> Object <span class="title">invoke</span><span class="params">(Object arg0, Method method, Object[] arg2)</span></span></span><br><span class="line"><span class="function">            <span class="keyword">throws</span> Throwable </span>{</span><br><span class="line">        System.out.println(<span class="string">&quot;&#x6253;&#x5F00;&#x4E8B;&#x52A1;!&quot;</span>);</span><br><span class="line">        Object invoke = method.invoke(us, arg2);</span><br><span class="line">        System.out.println(<span class="string">&quot;&#x63D0;&#x4EA4;&#x4E8B;&#x52A1;!&quot;</span>);</span><br><span class="line">        <span class="keyword">return</span> invoke;</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></table></figure><ul><li>&#x6D4B;&#x8BD5;</li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">TestDemo</span> </span>{    </span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">test01</span><span class="params">()</span></span>{</span><br><span class="line">        UserService us = <span class="keyword">new</span> UserServiceImpl();       </span><br><span class="line">        UserServiceProxyFactory factory = <span class="keyword">new</span> UserServiceProxyFactory(us);        </span><br><span class="line">        UserService usProxy = factory.getUserServiceProxy();     </span><br><span class="line">        usProxy.add();   </span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></table></figure><ul><li>&#x8F93;&#x51FA;</li></ul><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&#x6253;&#x5F00;&#x4E8B;&#x52A1;!</span><br><span class="line">&#x6DFB;&#x52A0;&#x4E00;&#x4E2A;user</span><br><span class="line">&#x63D0;&#x4EA4;&#x4E8B;&#x52A1;!</span><br></pre></td></tr></table></figure><h3 id="Cglib-&#x7684;&#x52A8;&#x6001;&#x4EE3;&#x7406;"><a href="#Cglib-&#x7684;&#x52A8;&#x6001;&#x4EE3;&#x7406;" class="headerlink" title="Cglib &#x7684;&#x52A8;&#x6001;&#x4EE3;&#x7406;"></a>Cglib &#x7684;&#x52A8;&#x6001;&#x4EE3;&#x7406;</h3><ul><li>Cglib &#x7684;&#x52A8;&#x6001;&#x4EE3;&#x7406;&#x7684;&#x4EE3;&#x7801;&#x5B9E;&#x73B0;</li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.cuzz.service;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.lang.reflect.Method;</span><br><span class="line"><span class="keyword">import</span> org.springframework.cglib.proxy.Enhancer;</span><br><span class="line"><span class="keyword">import</span> org.springframework.cglib.proxy.MethodInterceptor;</span><br><span class="line"><span class="keyword">import</span> org.springframework.cglib.proxy.MethodProxy;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">UserServiceProxyFactory2</span> <span class="keyword">implements</span> <span class="title">MethodInterceptor</span> </span>{</span><br><span class="line">    </span><br><span class="line">    <span class="function"><span class="keyword">public</span> UserService <span class="title">getUserServiceProxy</span><span class="params">()</span></span>{</span><br><span class="line">        <span class="comment">// &#x5E2E;&#x6211;&#x4EEC;&#x751F;&#x6210;&#x4EE3;&#x7406;&#x5BF9;&#x8C61;</span></span><br><span class="line">        Enhancer en = <span class="keyword">new</span> Enhancer();</span><br><span class="line">        <span class="comment">// &#x8BBE;&#x7F6E;&#x5BF9;&#x8C01;&#x8FDB;&#x884C;&#x4EE3;&#x7406;</span></span><br><span class="line">        en.setSuperclass(UserServiceImpl.class);</span><br><span class="line">        <span class="comment">// &#x4EE3;&#x7406;&#x8981;&#x505A;&#x4EC0;&#x4E48;</span></span><br><span class="line">        en.setCallback(<span class="keyword">this</span>);</span><br><span class="line">        <span class="comment">// &#x521B;&#x5EFA;&#x4EE3;&#x7406;&#x5BF9;&#x8C61;</span></span><br><span class="line">        UserService us = (UserService) en.create();</span><br><span class="line">        <span class="keyword">return</span> us;</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> Object <span class="title">intercept</span><span class="params">(Object prxoyobj, Method method, Object[] arg, MethodProxy methodProxy)</span> <span class="keyword">throws</span> Throwable </span>{</span><br><span class="line">        <span class="comment">// &#x6253;&#x5F00;&#x4E8B;&#x52A1;</span></span><br><span class="line">        System.out.println(<span class="string">&quot;&#x6253;&#x5F00;&#x4E8B;&#x52A1;!&quot;</span>);</span><br><span class="line">        <span class="comment">// &#x8C03;&#x7528;&#x539F;&#x6709;&#x65B9;&#x6CD5;</span></span><br><span class="line">        Object returnValue = methodProxy.invokeSuper(prxoyobj, arg);</span><br><span class="line">        <span class="comment">// &#x63D0;&#x4EA4;&#x4E8B;&#x52A1;</span></span><br><span class="line">        System.out.println(<span class="string">&quot;&#x63D0;&#x4EA4;&#x4E8B;&#x52A1;!&quot;</span>);</span><br><span class="line">        </span><br><span class="line">        <span class="keyword">return</span> returnValue;</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></table></figure><ul><li>&#x6D4B;&#x8BD5;</li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">test02</span><span class="params">()</span> </span>{    </span><br><span class="line">    UserServiceProxyFactory2 factory = <span class="keyword">new</span> UserServiceProxyFactory2();  </span><br><span class="line">    UserService usProxy = factory.getUserServiceProxy();</span><br><span class="line">    usProxy.add();</span><br><span class="line">}</span><br></pre></td></tr></table></figure><h3 id="Spring&#x7684;AOP&#x5F00;&#x53D1;-&#x57FA;&#x4E8E;AspectJ"><a href="#Spring&#x7684;AOP&#x5F00;&#x53D1;-&#x57FA;&#x4E8E;AspectJ" class="headerlink" title="Spring&#x7684;AOP&#x5F00;&#x53D1;(&#x57FA;&#x4E8E;AspectJ)"></a>Spring&#x7684;AOP&#x5F00;&#x53D1;(&#x57FA;&#x4E8E;AspectJ)</h3><h4 id="AOP&#x7684;&#x5F00;&#x53D1;&#x4E2D;&#x7684;&#x76F8;&#x5173;&#x672F;&#x8BED;&#xFF1A;"><a href="#AOP&#x7684;&#x5F00;&#x53D1;&#x4E2D;&#x7684;&#x76F8;&#x5173;&#x672F;&#x8BED;&#xFF1A;" class="headerlink" title="AOP&#x7684;&#x5F00;&#x53D1;&#x4E2D;&#x7684;&#x76F8;&#x5173;&#x672F;&#x8BED;&#xFF1A;"></a>AOP&#x7684;&#x5F00;&#x53D1;&#x4E2D;&#x7684;&#x76F8;&#x5173;&#x672F;&#x8BED;&#xFF1A;</h4><ul><li><code>Joinpoint</code>(&#x8FDE;&#x63A5;&#x70B9;)&#xFF1A;&#x6240;&#x8C13;&#x8FDE;&#x63A5;&#x70B9;&#x662F;&#x6307;&#x90A3;&#x4E9B;&#x88AB;&#x62E6;&#x622A;&#x5230;&#x7684;&#x70B9;&#xFF0C;&#x5728; spring &#x4E2D;&#x8FD9;&#x4E9B;&#x70B9;&#x6307;&#x7684;&#x662F;&#x65B9;&#x6CD5;&#xFF0C;&#x56E0;&#x4E3A; spring &#x53EA;&#x652F;&#x6301;&#x65B9;&#x6CD5;&#x7C7B;&#x578B;&#x7684;&#x8FDE;&#x63A5;&#x70B9;</li><li><code>Pointcut</code>(&#x5207;&#x5165;&#x70B9;)&#xFF1A;&#x6240;&#x8C13;&#x5207;&#x5165;&#x70B9;&#x662F;&#x6307;&#x6211;&#x4EEC;&#x8981;&#x5BF9;&#x54EA;&#x4E9B; Joinpoint &#x8FDB;&#x884C;&#x62E6;&#x622A;&#x7684;&#x5B9A;&#x4E49;</li><li><code>Advice</code>(&#x901A;&#x77E5;/&#x589E;&#x5F3A;)&#xFF1A;&#x6240;&#x8C13;&#x901A;&#x77E5;&#x662F;&#x6307;&#x62E6;&#x622A;&#x5230; Joinpoint &#x4E4B;&#x540E;&#x6240;&#x8981;&#x505A;&#x7684;&#x4E8B;&#x60C5;&#x5C31;&#x662F;&#x901A;&#x77E5;.&#x901A;&#x77E5;&#x5206;&#x4E3A;&#x524D;&#x7F6E;&#x901A;&#x77E5;,&#x540E;&#x7F6E;&#x901A;&#x77E5;,&#x5F02;&#x5E38;&#x901A;&#x77E5;,&#x6700;&#x7EC8;&#x901A;&#x77E5;,&#x73AF;&#x7ED5;&#x901A;&#x77E5;(&#x5207;&#x9762;&#x8981;&#x5B8C;&#x6210;&#x7684;&#x529F;&#x80FD;)</li><li><code>Introduction</code>(&#x5F15;&#x4ECB;)&#xFF1A;&#x5F15;&#x4ECB;&#x662F;&#x4E00;&#x79CD;&#x7279;&#x6B8A;&#x7684;&#x901A;&#x77E5;&#x5728;&#x4E0D;&#x4FEE;&#x6539;&#x7C7B;&#x4EE3;&#x7801;&#x7684;&#x524D;&#x63D0;&#x4E0B;, Introduction &#x53EF;&#x4EE5;&#x5728;&#x8FD0;&#x884C;&#x671F;&#x4E3A;&#x7C7B;&#x52A8;&#x6001;&#x5730;&#x6DFB;&#x52A0;&#x4E00;&#x4E9B;&#x65B9;&#x6CD5;&#x6216; Field</li><li><code>Target</code>(&#x76EE;&#x6807;&#x5BF9;&#x8C61;)&#xFF1A;&#x4EE3;&#x7406;&#x7684;&#x76EE;&#x6807;&#x5BF9;&#x8C61;</li><li><code>Weaving</code>(&#x7EC7;&#x5165;)&#xFF1A;&#x662F;&#x6307;&#x628A;&#x589E;&#x5F3A;&#x5E94;&#x7528;&#x5230;&#x76EE;&#x6807;&#x5BF9;&#x8C61;&#x6765;&#x521B;&#x5EFA;&#x65B0;&#x7684;&#x4EE3;&#x7406;&#x5BF9;&#x8C61;&#x7684;&#x8FC7;&#x7A0B;&#xFF0C;spring &#x91C7;&#x7528;&#x52A8;&#x6001;&#x4EE3;&#x7406;&#x7EC7;&#x5165;&#xFF0C;&#x800C; AspectJ &#x91C7;&#x7528;&#x7F16;&#x8BD1;&#x671F;&#x7EC7;&#x5165;&#x548C;&#x7C7B;&#x88C5;&#x5728;&#x671F;&#x7EC7;&#x5165;</li><li><code>Proxy</code>&#xFF08;&#x4EE3;&#x7406;&#xFF09;&#xFF1A;&#x4E00;&#x4E2A;&#x7C7B;&#x88AB; AOP &#x7EC7;&#x5165;&#x589E;&#x5F3A;&#x540E;&#xFF0C;&#x5C31;&#x4EA7;&#x751F;&#x4E00;&#x4E2A;&#x7ED3;&#x679C;&#x4EE3;&#x7406;&#x7C7B;</li><li><code>Aspect</code>(&#x5207;&#x9762;)&#xFF1A;&#x662F;&#x5207;&#x5165;&#x70B9;&#x548C;&#x901A;&#x77E5;&#xFF08;&#x5F15;&#x4ECB;&#xFF09;&#x7684;&#x7ED3;&#x5408;</li></ul><h4 id="&#x901A;&#x77E5;&#x7C7B;&#x578B;"><a href="#&#x901A;&#x77E5;&#x7C7B;&#x578B;" class="headerlink" title="&#x901A;&#x77E5;&#x7C7B;&#x578B;"></a>&#x901A;&#x77E5;&#x7C7B;&#x578B;</h4><ul><li>&#x524D;&#x7F6E;&#x901A;&#x77E5; &#xFF1A;&#x5728;&#x76EE;&#x6807;&#x65B9;&#x6CD5;&#x6267;&#x884C;&#x4E4B;&#x524D;&#x6267;&#x884C;</li><li>&#x540E;&#x7F6E;&#x901A;&#x77E5; &#xFF1A;&#x5728;&#x76EE;&#x6807;&#x65B9;&#x6CD5;&#x6267;&#x884C;&#x4E4B;&#x540E;&#x6267;&#x884C;</li><li>&#x73AF;&#x7ED5;&#x901A;&#x77E5; &#xFF1A;&#x5728;&#x76EE;&#x6807;&#x65B9;&#x6CD5;&#x6267;&#x884C;&#x524D;&#x548C;&#x6267;&#x884C;&#x540E;&#x6267;&#x884C;</li><li>&#x5F02;&#x5E38;&#x629B;&#x51FA;&#x901A;&#x77E5;&#xFF1A;&#x5728;&#x76EE;&#x6807;&#x65B9;&#x6CD5;&#x6267;&#x884C;&#x51FA;&#x73B0;&#x5F02;&#x5E38;&#x7684;&#x65F6;&#x5019;&#x6267;&#x884C;</li><li>&#x6700;&#x7EC8;&#x901A;&#x77E5; &#xFF1A;&#x65E0;&#x8BBA;&#x76EE;&#x6807;&#x65B9;&#x6CD5;&#x662F;&#x5426;&#x51FA;&#x73B0;&#x5F02;&#x5E38; &#x6700;&#x7EC8;&#x901A;&#x77E5;&#x90FD;&#x4F1A;&#x6267;&#x884C;</li></ul><h4 id="&#x4EE3;&#x7801;&#x6F14;&#x793A;"><a href="#&#x4EE3;&#x7801;&#x6F14;&#x793A;" class="headerlink" title="&#x4EE3;&#x7801;&#x6F14;&#x793A;"></a>&#x4EE3;&#x7801;&#x6F14;&#x793A;</h4><p>&#x901A;&#x77E5;&#x7C7B;&#xFF0C;&#x7ED9;&#x5207;&#x9762;&#x7684;&#x76EE;&#x6807;&#x65B9;&#x6CD5;&#x6807;&#x6CE8;&#x4F55;&#x65F6;&#x5730;&#x8FD0;&#x884C;&#xFF0C;&#x5FC5;&#x987B;&#x544A;&#x8BC9; Spring &#x54EA;&#x4E2A;&#x7C7B;&#x662F;&#x5207;&#x9762;&#x7C7B;&#xFF0C;&#x6DFB;&#x52A0;&#x6CE8;&#x89E3; @Aspect</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Aspect</span>  <span class="comment">// &#x8868;&#x793A;&#x8BE5;&#x7C7B;&#x662F;&#x4E00;&#x4E2A;&#x901A;&#x77E5;&#x7C7B;</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MyAdvice</span> </span>{</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// &#x524D;&#x7F6E;&#x901A;&#x77E5;</span></span><br><span class="line">    <span class="meta">@Before</span>(<span class="string">&quot;execution(* com.cuzz.service..*ServiceImpl.*(..))&quot;</span>)</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">before</span><span class="params">()</span></span>{</span><br><span class="line">        System.out.println(<span class="string">&quot;&#x8FD9;&#x662F;&#x524D;&#x7F6E;&#x901A;&#x77E5;!!&quot;</span>);</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="comment">// &#x540E;&#x7F6E;&#x901A;&#x77E5;</span></span><br><span class="line">    <span class="meta">@AfterReturning</span>(<span class="string">&quot;execution(* com.cuzz.service..*ServiceImpl.*(..))&quot;</span>)</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">afterReturning</span><span class="params">()</span></span>{</span><br><span class="line">        System.out.println(<span class="string">&quot;&#x8FD9;&#x662F;&#x540E;&#x7F6E;&#x901A;&#x77E5;(&#x5982;&#x679C;&#x51FA;&#x73B0;&#x5F02;&#x5E38;&#x4E0D;&#x4F1A;&#x8C03;&#x7528;)!!&quot;</span>);</span><br><span class="line">    }</span><br><span class="line">    <span class="comment">// &#x73AF;&#x7ED5;&#x901A;&#x77E5;</span></span><br><span class="line">    <span class="meta">@Around</span>(<span class="string">&quot;execution(* com.cuzz.service..*ServiceImpl.*(..))&quot;</span>)</span><br><span class="line">    <span class="function"><span class="keyword">public</span> Object <span class="title">around</span><span class="params">(ProceedingJoinPoint pjp)</span> <span class="keyword">throws</span> Throwable </span>{</span><br><span class="line">        System.out.println(<span class="string">&quot;&#x8FD9;&#x662F;&#x73AF;&#x7ED5;&#x901A;&#x77E5;&#x4E4B;&#x524D;&#x7684;&#x90E8;&#x5206;!!&quot;</span>);</span><br><span class="line">        <span class="comment">// &#x8C03;&#x7528;&#x76EE;&#x6807;&#x65B9;&#x6CD5;</span></span><br><span class="line">        Object proceed = pjp.proceed();</span><br><span class="line">        System.out.println(<span class="string">&quot;&#x8FD9;&#x662F;&#x73AF;&#x7ED5;&#x901A;&#x77E5;&#x4E4B;&#x540E;&#x7684;&#x90E8;&#x5206;!!&quot;</span>);</span><br><span class="line">        <span class="keyword">return</span> proceed;</span><br><span class="line">    }</span><br><span class="line">    <span class="comment">// &#x5F02;&#x5E38;&#x901A;&#x77E5;</span></span><br><span class="line">    <span class="meta">@AfterThrowing</span>(<span class="string">&quot;execution(* com.cuzz.service..*ServiceImpl.*(..))&quot;</span>)</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">afterException</span><span class="params">()</span></span>{</span><br><span class="line">        System.out.println(<span class="string">&quot;&#x51FA;&#x4E8B;&#x5566;!&#x51FA;&#x73B0;&#x5F02;&#x5E38;&#x4E86;!!&quot;</span>);</span><br><span class="line">    }</span><br><span class="line">    <span class="comment">// &#x540E;&#x7F6E;&#x901A;&#x77E5;</span></span><br><span class="line">    <span class="meta">@After</span>(<span class="string">&quot;execution(* com.cuzz.service..*ServiceImpl.*(..))&quot;</span>)</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">after</span><span class="params">()</span></span>{</span><br><span class="line">        System.out.println(<span class="string">&quot;&#x8FD9;&#x662F;&#x540E;&#x7F6E;&#x901A;&#x77E5;(&#x51FA;&#x73B0;&#x5F02;&#x5E38;&#x4E5F;&#x4F1A;&#x8C03;&#x7528;)!!&quot;</span>);</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></table></figure><p>&#x914D;&#x7F6E;&#x7C7B;&#xFF0C;&#x5C06;&#x5207;&#x9762;&#x7C7B;&#x548C;&#x4E1A;&#x52A1;&#x903B;&#x8F91;&#x7C7B;&#x90FD;&#x52A0;&#x5165;&#x5230;&#x5BB9;&#x5668;&#x4E2D;&#xFF0C;&#x7ED9;&#x914D;&#x7F6E;&#x7C7B;&#x52A0; @EnableAspectJAutoProxy  &#x6CE8;&#x89E3;</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Author</span>: cuzz</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Date</span>: 2019/2/10 20:43</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Description</span>:</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@Configuration</span></span><br><span class="line"><span class="meta">@EnableAspectJAutoProxy</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MainConfigOfAOP</span> </span>{</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Bean</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> UserService <span class="title">userService</span><span class="params">()</span> </span>{</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> UserServiceImpl();</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Bean</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> MyAdvice <span class="title">myAdvice</span><span class="params">()</span> </span>{</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> MyAdvice();</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></table></figure><p>&#x6D4B;&#x8BD5;</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">test03</span><span class="params">()</span> </span>{</span><br><span class="line">    AnnotationConfigApplicationContext applicationContext = <span class="keyword">new</span> AnnotationConfigApplicationContext(MainConfigOfAOP.class);</span><br><span class="line"></span><br><span class="line">    UserService userService = (UserService) applicationContext.getBean(<span class="string">&quot;userService&quot;</span>);</span><br><span class="line">    userService.add();</span><br><span class="line">    userService.delete();</span><br><span class="line">    userService.update();</span><br><span class="line">    userService.get();</span><br><span class="line">}</span><br></pre></td></tr></table></figure><p>&#x5982;&#x679C;&#x62A5;&#x9519;&#x6DFB;&#x52A0;&#x4F9D;&#x8D56;</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&lt;dependency&gt;</span><br><span class="line">  &lt;groupId&gt;org.aspectj&lt;/groupId&gt;</span><br><span class="line">  &lt;artifactId&gt;aspectjweaver&lt;/artifactId&gt;</span><br><span class="line">  &lt;version&gt;1.8.4&lt;/version&gt;</span><br><span class="line"> &lt;/dependency&gt;</span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      &lt;h2 id=&quot;AOP&amp;#x9762;&amp;#x5411;&amp;#x5207;&amp;#x9762;&amp;#x7F16;&amp;#x7A0B;&quot;&gt;&lt;a href=&quot;#AOP&amp;#x9762;&amp;#x5411;&amp;#x5207;&amp;#x9762;&amp;#x7F16;&amp;#x7A0B;&quot; class=&quot;headerlink&quot; title=&quot;AOP&amp;#x9762;&amp;#x5411;&amp;#x5207;&amp;#x9762;&amp;#x7F16;&amp;#x7A0B;&quot;&gt;&lt;/a&gt;AOP&amp;#x9762;&amp;#x5411;&amp;#x5207;&amp;#x9762;&amp;#x7F16;&amp;#x7A0B;&lt;/h2&gt;&lt;p&gt;AOP&amp;#xFF08;Aspect Oriented Programming&amp;#xFF09;&amp;#xFF0C;&amp;#x5373;&amp;#x9762;&amp;#x5411;&amp;#x5207;&amp;#x9762;&amp;#x7F16;&amp;#x7A0B;&amp;#xFF0C;&amp;#x53EF;&amp;#x4EE5;&amp;#x8BF4;&amp;#x662F;OOP&amp;#xFF08;Object Oriented Programming&amp;#xFF0C;&amp;#x9762;&amp;#x5411;&amp;#x5BF9;&amp;#x8C61;&amp;#x7F16;&amp;#x7A0B;&amp;#xFF09;&amp;#x7684;&amp;#x8865;&amp;#x5145;&amp;#x548C;&amp;#x5B8C;&amp;#x5584;&amp;#x3002;OOP&amp;#x5F15;&amp;#x5165;&amp;#x5C01;&amp;#x88C5;&amp;#x3001;&amp;#x7EE7;&amp;#x627F;&amp;#x3001;&amp;#x591A;&amp;#x6001;&amp;#x7B49;&amp;#x6982;&amp;#x5FF5;&amp;#x6765;&amp;#x5EFA;&amp;#x7ACB;&amp;#x4E00;&amp;#x79CD;&amp;#x5BF9;&amp;#x8C61;&amp;#x5C42;&amp;#x6B21;&amp;#x7ED3;&amp;#x6784;&amp;#xFF0C;&amp;#x7528;&amp;#x4E8E;&amp;#x6A21;&amp;#x62DF;&amp;#x516C;&amp;#x5171;&amp;#x884C;&amp;#x4E3A;&amp;#x7684;&amp;#x4E00;&amp;#x4E2A;&amp;#x96C6;&amp;#x5408;&amp;#x3002;&amp;#x4E0D;&amp;#x8FC7;OOP&amp;#x5141;&amp;#x8BB8;&amp;#x5F00;&amp;#x53D1;&amp;#x8005;&amp;#x5B9A;&amp;#x4E49;&amp;#x7EB5;&amp;#x5411;&amp;#x7684;&amp;#x5173;&amp;#x7CFB;&amp;#xFF0C;&amp;#x4F46;&amp;#x5E76;&amp;#x4E0D;&amp;#x9002;&amp;#x5408;&amp;#x5B9A;&amp;#x4E49;&amp;#x6A2A;&amp;#x5411;&amp;#x7684;&amp;#x5173;&amp;#x7CFB;&amp;#xFF0C;&amp;#x4F8B;&amp;#x5982;&amp;#x65E5;&amp;#x5FD7;&amp;#x529F;&amp;#x80FD;&amp;#x3002;&amp;#x65E5;&amp;#x5FD7;&amp;#x4EE3;&amp;#x7801;&amp;#x5F80;&amp;#x5F80;&amp;#x6A2A;&amp;#x5411;&amp;#x5730;&amp;#x6563;&amp;#x5E03;&amp;#x5728;&amp;#x6240;&amp;#x6709;&amp;#x5BF9;&amp;#x8C61;&amp;#x5C42;&amp;#x6B21;&amp;#x4E2D;&amp;#xFF0C;&amp;#x800C;&amp;#x4E0E;&amp;#x5B83;&amp;#x5BF9;&amp;#x5E94;&amp;#x7684;&amp;#x5BF9;&amp;#x8C61;&amp;#x7684;&amp;#x6838;&amp;#x5FC3;&amp;#x529F;&amp;#x80FD;&amp;#x6BEB;&amp;#x65E0;&amp;#x5173;&amp;#x7CFB;&amp;#x5BF9;&amp;#x4E8E;&amp;#x5176;&amp;#x4ED6;&amp;#x7C7B;&amp;#x578B;&amp;#x7684;&amp;#x4EE3;&amp;#x7801;&amp;#xFF0C;&amp;#x5982;&amp;#x5B89;&amp;#x5168;&amp;#x6027;&amp;#x3001;&amp;#x5F02;&amp;#x5E38;&amp;#x5904;&amp;#x7406;&amp;#x548C;&amp;#x900F;&amp;#x660E;&amp;#x7684;&amp;#x6301;&amp;#x7EED;&amp;#x6027;&amp;#x4E5F;&amp;#x90FD;&amp;#x662F;&amp;#x5982;&amp;#x6B64;&amp;#xFF0C;&amp;#x8FD9;&amp;#x79CD;&amp;#x6563;&amp;#x5E03;&amp;#x5728;&amp;#x5404;&amp;#x5904;&amp;#x7684;&amp;#x65E0;&amp;#x5173;&amp;#x7684;&amp;#x4EE3;&amp;#x7801;&amp;#x88AB;&amp;#x79F0;&amp;#x4E3A;&amp;#x6A2A;&amp;#x5207;&amp;#xFF08;cross cutting&amp;#xFF09;&amp;#xFF0C;&amp;#x5728;OOP&amp;#x8BBE;&amp;#x8BA1;&amp;#x4E2D;&amp;#xFF0C;&amp;#x5B83;&amp;#x5BFC;&amp;#x81F4;&amp;#x4E86;&amp;#x5927;&amp;#x91CF;&amp;#x4EE3;&amp;#x7801;&amp;#x7684;&amp;#x91CD;&amp;#x590D;&amp;#xFF0C;&amp;#x800C;&amp;#x4E0D;&amp;#x5229;&amp;#x4E8E;&amp;#x5404;&amp;#x4E2A;&amp;#x6A21;&amp;#x5757;&amp;#x7684;&amp;#x91CD;&amp;#x7528;&amp;#x3002;&lt;/p&gt;
    
    </summary>
    
      <category term="Spring" scheme="http://blog.cuzz.site/categories/Spring/"/>
    
    
      <category term="Spring" scheme="http://blog.cuzz.site/tags/Spring/"/>
    
      <category term="注解" scheme="http://blog.cuzz.site/tags/%E6%B3%A8%E8%A7%A3/"/>
    
      <category term="源码" scheme="http://blog.cuzz.site/tags/%E6%BA%90%E7%A0%81/"/>
    
  </entry>
  
  <entry>
    <title>深入理解Java虚拟机（三）</title>
    <link href="http://blog.cuzz.site/2019/02/06/%E6%B7%B1%E5%85%A5%E7%90%86%E8%A7%A3Java%E8%99%9A%E6%8B%9F%E6%9C%BA%EF%BC%88%E4%B8%89%EF%BC%89/"/>
    <id>http://blog.cuzz.site/2019/02/06/深入理解Java虚拟机（三）/</id>
    <published>2019-02-06T15:59:59.000Z</published>
    <updated>2019-11-01T06:52:53.334Z</updated>
    
    <content type="html"><![CDATA[<h3 id="Java-&#x5B57;&#x8282;&#x7801;"><a href="#Java-&#x5B57;&#x8282;&#x7801;" class="headerlink" title="Java &#x5B57;&#x8282;&#x7801;"></a>Java &#x5B57;&#x8282;&#x7801;</h3><p>&#x4EE3;&#x7801;&#x7F16;&#x8BD1;&#x7ED3;&#x679C;&#x4ECE;&#x672C;&#x5730;&#x673A;&#x5668;&#x7801;&#x8F6C;&#x53D8;&#x4E3A;&#x5B57;&#x8282;&#x7801;&#xFF0C;&#x662F;&#x5B58;&#x50A8;&#x683C;&#x5F0F;&#x53D1;&#x5C55;&#x7684;&#x4E00;&#x5C0F;&#x6B65;&#xFF0C;&#x786E;&#x662F;&#x7F16;&#x7A0B;&#x8BED;&#x8A00;&#x53D1;&#x5C55;&#x7684;&#x4E00;&#x5927;&#x6B65;&#x3002;</p><a id="more"></a><h3 id="&#x5B57;&#x8282;&#x7801;&#x6587;&#x4EF6;&#x5256;&#x6790;"><a href="#&#x5B57;&#x8282;&#x7801;&#x6587;&#x4EF6;&#x5256;&#x6790;" class="headerlink" title="&#x5B57;&#x8282;&#x7801;&#x6587;&#x4EF6;&#x5256;&#x6790;"></a>&#x5B57;&#x8282;&#x7801;&#x6587;&#x4EF6;&#x5256;&#x6790;</h3><p>&#x6211;&#x4EEC;&#x4ECE;&#x4E00;&#x6BB5;&#x7B80;&#x5355;&#x7684;&#x4EE3;&#x7801;&#x6765;&#x5165;&#x624B;</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">public class MyTest01 {</span><br><span class="line"></span><br><span class="line">    private int a = 0;</span><br><span class="line"></span><br><span class="line">    public int getA() {</span><br><span class="line">        return a;</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    public void setA(int a) {</span><br><span class="line">        this.a = a;</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></table></figure><p>&#x6211;&#x8981;&#x8981;&#x770B;&#x4E00;&#x4E0B; java &#x6587;&#x4EF6;&#x5BF9;&#x5E94;&#x7684; class &#x6587;&#x4EF6;&#x7684;&#x7ED3;&#x6784;&#xFF0C;&#x5B9A;&#x4F4D;&#x5230;&#x5DE5;&#x7A0B;&#x7684; out\production\classes &#x4E0B;&#x8FB9;&#x6267;&#x884C;&#xFF1A; </p><p>javap -c com.cuzz.jvm.bytecode.Mytest01</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">&#x8B66;&#x544A;: &#x4E8C;&#x8FDB;&#x5236;&#x6587;&#x4EF6;com.cuzz.jvm.bytecode.Mytest01&#x5305;&#x542B;com.cuzz.jvm.bytecode.MyTest01</span><br><span class="line">Compiled from &quot;MyTest01.java&quot;</span><br><span class="line">public class com.cuzz.jvm.bytecode.MyTest01 {</span><br><span class="line">  public com.cuzz.jvm.bytecode.MyTest01();</span><br><span class="line">    Code:</span><br><span class="line">       0: aload_0</span><br><span class="line">       1: invokespecial #1                  // Method java/lang/Object.&quot;&lt;init&gt;&quot;:()V</span><br><span class="line">       4: aload_0</span><br><span class="line">       5: iconst_0</span><br><span class="line">       6: putfield      #2                  // Field a:I</span><br><span class="line">       9: return</span><br><span class="line"></span><br><span class="line">  public int getA();</span><br><span class="line">    Code:</span><br><span class="line">       0: aload_0</span><br><span class="line">       1: getfield      #2                  // Field a:I</span><br><span class="line">       4: ireturn</span><br><span class="line"></span><br><span class="line">  public void setA(int);</span><br><span class="line">    Code:</span><br><span class="line">       0: aload_0</span><br><span class="line">       1: iload_1</span><br><span class="line">       2: putfield      #2                  // Field a:I</span><br><span class="line">       5: return</span><br><span class="line">}</span><br></pre></td></tr></table></figure><p>&#x6211;&#x4EEC;&#x5982;&#x679C;&#x9700;&#x8981;&#x83B7;&#x5F97;&#x66F4;&#x591A;&#x4FE1;&#x606F;&#x53EF;&#x4EE5;&#x4F7F;&#x7528;&#x5982;&#x4E0B;&#x547D;&#x4EE4;&#xFF1A;</p><p>javap -verbose com.cuzz.jvm.bytecode.Mytest01</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br></pre></td><td class="code"><pre><span class="line">&#x8B66;&#x544A;: &#x4E8C;&#x8FDB;&#x5236;&#x6587;&#x4EF6;com.cuzz.jvm.bytecode.Mytest01&#x5305;&#x542B;com.cuzz.jvm.bytecode.MyTest01</span><br><span class="line">Classfile /E:/project/learn-demo/demo-10-jvm-lecture/out/production/classes/com/cuzz/jvm/bytecode/Mytest01.class</span><br><span class="line">  Last modified 2019-2-3; size 492 bytes</span><br><span class="line">  MD5 checksum cceeac51ae7b6fc46c60faf834de5932</span><br><span class="line">  Compiled from &quot;MyTest01.java&quot;</span><br><span class="line">public class com.cuzz.jvm.bytecode.MyTest01</span><br><span class="line">  minor version: 0</span><br><span class="line">  major version: 52</span><br><span class="line">  flags: ACC_PUBLIC, ACC_SUPER</span><br><span class="line">Constant pool:</span><br><span class="line">   #1 = Methodref          #4.#20         // java/lang/Object.&quot;&lt;init&gt;&quot;:()V</span><br><span class="line">   #2 = Fieldref           #3.#21         // com/cuzz/jvm/bytecode/MyTest01.a:I</span><br><span class="line">   #3 = Class              #22            // com/cuzz/jvm/bytecode/MyTest01</span><br><span class="line">   #4 = Class              #23            // java/lang/Object</span><br><span class="line">   #5 = Utf8               a</span><br><span class="line">   #6 = Utf8               I</span><br><span class="line">   #7 = Utf8               &lt;init&gt;</span><br><span class="line">   #8 = Utf8               ()V</span><br><span class="line">   #9 = Utf8               Code</span><br><span class="line">  #10 = Utf8               LineNumberTable</span><br><span class="line">  #11 = Utf8               LocalVariableTable</span><br><span class="line">  #12 = Utf8               this</span><br><span class="line">  #13 = Utf8               Lcom/cuzz/jvm/bytecode/MyTest01;</span><br><span class="line">  #14 = Utf8               getA</span><br><span class="line">  #15 = Utf8               ()I</span><br><span class="line">  #16 = Utf8               setA</span><br><span class="line">  #17 = Utf8               (I)V</span><br><span class="line">  #18 = Utf8               SourceFile</span><br><span class="line">  #19 = Utf8               MyTest01.java</span><br><span class="line">  #20 = NameAndType        #7:#8          // &quot;&lt;init&gt;&quot;:()V</span><br><span class="line">  #21 = NameAndType        #5:#6          // a:I</span><br><span class="line">  #22 = Utf8               com/cuzz/jvm/bytecode/MyTest01</span><br><span class="line">  #23 = Utf8               java/lang/Object</span><br><span class="line">{</span><br><span class="line">  public com.cuzz.jvm.bytecode.MyTest01();</span><br><span class="line">    descriptor: ()V</span><br><span class="line">    flags: ACC_PUBLIC</span><br><span class="line">    Code:</span><br><span class="line">      stack=2, locals=1, args_size=1</span><br><span class="line">         0: aload_0</span><br><span class="line">         1: invokespecial #1                  // Method java/lang/Object.&quot;&lt;init&gt;&quot;:()V</span><br><span class="line">         4: aload_0</span><br><span class="line">         5: iconst_0</span><br><span class="line">         6: putfield      #2                  // Field a:I</span><br><span class="line">         9: return</span><br><span class="line">      LineNumberTable:</span><br><span class="line">        line 8: 0</span><br><span class="line">        line 10: 4</span><br><span class="line">      LocalVariableTable:</span><br><span class="line">        Start  Length  Slot  Name   Signature</span><br><span class="line">            0      10     0  this   Lcom/cuzz/jvm/bytecode/MyTest01;</span><br><span class="line"></span><br><span class="line">  public int getA();</span><br><span class="line">    descriptor: ()I</span><br><span class="line">    flags: ACC_PUBLIC</span><br><span class="line">    Code:</span><br><span class="line">      stack=1, locals=1, args_size=1</span><br><span class="line">         0: aload_0</span><br><span class="line">         1: getfield      #2                  // Field a:I</span><br><span class="line">         4: ireturn</span><br><span class="line">      LineNumberTable:</span><br><span class="line">        line 13: 0</span><br><span class="line">      LocalVariableTable:</span><br><span class="line">        Start  Length  Slot  Name   Signature</span><br><span class="line">            0       5     0  this   Lcom/cuzz/jvm/bytecode/MyTest01;</span><br><span class="line"></span><br><span class="line">  public void setA(int);</span><br><span class="line">    descriptor: (I)V</span><br><span class="line">    flags: ACC_PUBLIC</span><br><span class="line">    Code:</span><br><span class="line">      stack=2, locals=2, args_size=2</span><br><span class="line">         0: aload_0</span><br><span class="line">         1: iload_1</span><br><span class="line">         2: putfield      #2                  // Field a:I</span><br><span class="line">         5: return</span><br><span class="line">      LineNumberTable:</span><br><span class="line">        line 17: 0</span><br><span class="line">        line 18: 5</span><br><span class="line">      LocalVariableTable:</span><br><span class="line">        Start  Length  Slot  Name   Signature</span><br><span class="line">            0       6     0  this   Lcom/cuzz/jvm/bytecode/MyTest01;</span><br><span class="line">            0       6     1     a   I</span><br><span class="line">}</span><br><span class="line">SourceFile: &quot;MyTest01.java&quot;</span><br></pre></td></tr></table></figure><p>&#x6211;&#x4EEC;&#x4E5F;&#x53EF;&#x4EE5;&#x4F7F;&#x7528;&#x4E8C;&#x8FDB;&#x5236;&#x6587;&#x4EF6;<a href="https://www.baidu.com/s?wd=%E6%9F%A5%E7%9C%8B%E5%99%A8&amp;tn=24004469_oem_dg&amp;rsv_dl=gh_pl_sl_csd" target="_blank" rel="noopener">&#x67E5;&#x770B;&#x5668;</a>&#x67E5;&#x770B;class&#x6587;&#x4EF6;&#x7684;16&#x8FDB;&#x5236;&#x4FE1;&#x606F;&#xFF08;<a href="http://www.x-ways.net/winhex.zip" target="_blank" rel="noopener">winhex&#x4E0B;&#x8F7D;</a>&#xFF09;&#xFF1A; </p><p><img src="/2019/02/06/&#x6DF1;&#x5165;&#x7406;&#x89E3;Java&#x865A;&#x62DF;&#x673A;&#xFF08;&#x4E09;&#xFF09;/&#x6DF1;&#x5165;&#x7406;&#x89E3;Java&#x865A;&#x62DF;&#x673A;(&#x4E09;" alt="1549161558276">/1549161558276.png)</p><p>16&#x6587;&#x4EF6;&#x67E5;&#x770B;&#x5668;&#x91CC;&#x8FB9;&#x7B2C;&#x4E00;&#x884C;&#x7684;CA &#x5C31;&#x662F;&#x4E00;&#x4E2A;&#x5B57;&#x8282;&#x7684;&#x5BB9;&#x91CF;&#xFF08;8&#x4F4D;bit&#xFF09;: </p><p>&#x4F7F;&#x7528; javap -verbos &#x547D;&#x4EE4;&#x5206;&#x6790;&#x4E00;&#x4E2A;&#x5B57;&#x8282;&#x7801;&#x6587;&#x4EF6;&#x65F6;&#xFF0C;&#x5C06;&#x4F1A;&#x5206;&#x6790;&#x8BE5;&#x5B57;&#x8282;&#x7801;&#x6587;&#x4EF6;&#x7684;&#x9B54;&#x6570;&#x3001;&#x7248;&#x672C;&#x53F7;&#x3001;&#x5E38;&#x91CF;&#x6C60;&#x3001;&#x7C7B;&#x4FE1;&#x606F;&#x3001;&#x7C7B;&#x7684;&#x6784;&#x9020;&#x65B9;&#x6CD5;&#x4FE1;&#x606F;&#x3001;&#x7C7B;&#x53D8;&#x91CF;&#x4E0E;&#x6210;&#x5458;&#x53D8;&#x91CF;&#x7B49;&#x4FE1;&#x606F;&#x3002; </p><p>&#x9B54;&#x6570;&#xFF1A;&#x6240;&#x6709;&#x7684;.class&#x5B57;&#x8282;&#x7801;&#x6587;&#x4EF6;&#x7684;&#x524D;4&#x4E2A;&#x5B57;&#x8282;&#x90FD;&#x662F;&#x9B54;&#x6570;&#xFF0C;&#x9B54;&#x6570;&#x503C;&#x4E3A;&#x56FA;&#x5B9A;&#x503C;&#xFF1A;0xCAFEBABE (&#x8A79;&#x59C6;&#x65AF;.&#x9AD8;&#x65AF;&#x6797;&#x8BBE;&#x8BA1;&#x7684;&#xFF0C;&#x8574;&#x610F;&#xFF1A;&#x5496;&#x5561;&#x5B9D;&#x8D1D;&#xFF0C;java &#x7684;&#x56FE;&#x6807;&#x662F;&#x5496;&#x5561;&#x3002; </p><p>&#x9B54;&#x6570;&#x4E4B;&#x540E;&#x7684;4&#x4E2A;&#x5B57;&#x8282;&#x4E3A;&#x7248;&#x672C;&#x4FE1;&#x606F;&#xFF0C;&#x524D;2&#x4E2A;&#x5B57;&#x8282;&#x8868;&#x793A; minor versio&#xFF08;&#x6B21;&#x7248;&#x672C;&#x53F7;&#xFF09;&#xFF0C;&#x540E;&#x4E24;&#x4E2A;&#x5B57;&#x8282;&#x8868;&#x793A; major version&#xFF08;&#x4E3B;&#x7248;&#x672C;&#x53F7;&#xFF09;&#x3002; &#x8FD9;&#x91CC;&#x7684;&#x7248;&#x672C;&#x53F7;&#x4E3A; 00 00 00 34&#xFF0C;&#x6362;&#x7B97;&#x6210;&#x5341;&#x8FDB;&#x5236;&#xFF0C;&#x8868;&#x793A;&#x6B21;&#x7248;&#x672C;&#x53F7;&#x4E3A;0&#xFF0C;&#x4E3B;&#x7248;&#x672C;&#x53F7;&#x4E3A;52&#x3002;</p><h3 id="&#x5B57;&#x8282;&#x5E38;&#x91CF;&#x6C60;&#x5256;&#x6790;"><a href="#&#x5B57;&#x8282;&#x5E38;&#x91CF;&#x6C60;&#x5256;&#x6790;" class="headerlink" title="&#x5B57;&#x8282;&#x5E38;&#x91CF;&#x6C60;&#x5256;&#x6790;"></a>&#x5B57;&#x8282;&#x5E38;&#x91CF;&#x6C60;&#x5256;&#x6790;</h3><p>&#x5E38;&#x91CF;&#x6C60;&#xFF08;constant pool&#xFF09;&#xFF1A;&#x7D27;&#x63A5;&#x7740;&#x4E3B;&#x7248;&#x672C;&#x53F7;&#x4E4B;&#x540E;&#x7684;&#x5C31;&#x662F;&#x5E38;&#x91CF;&#x6C60;&#x5165;&#x53E3;&#x3002;&#x4E00;&#x4E2A; Java &#x7C7B;&#x4E2D;&#x5B9A;&#x4E49;&#x7684;&#x5F88;&#x591A;&#x4FE1;&#x606F;&#x90FD;&#x662F;&#x7531;&#x5E38;&#x91CF;&#x6C60;&#x6765;&#x7EF4;&#x62A4;&#x548C;&#x63CF;&#x8FF0;&#x7684;&#xFF0C;&#x53EF;&#x4EE5;&#x5C06;&#x5E38;&#x91CF;&#x6C60;&#x770B;&#x4F5C;&#x662F; Class &#x6587;&#x4EF6;&#x7684;&#x8D44;&#x6E90;&#x4ED3;&#x5E93;&#xFF0C;&#x6BD4;&#x5982;&#x8BF4; Java &#x7C7B;&#x4E2D;&#x5B9A;&#x4E49;&#x7684;&#x65B9;&#x6CD5;&#x4E0E;&#x53D8;&#x91CF;&#x4FE1;&#x606F;&#xFF0C;&#x90FD;&#x662F;&#x5B58;&#x50A8;&#x5728;&#x5E38;&#x91CF;&#x6C60;&#x4E2D;&#x3002;&#x5E38;&#x91CF;&#x6C60;&#x4E2D;&#x7684;&#x4E3B;&#x8981;&#x50A8;&#x5B58;&#x4E24;&#x7C7B;&#x5E38;&#x91CF;&#xFF1A;&#x5B57;&#x9762;&#x91CF;&#x4E0E;&#x7B26;&#x53F7;&#x5F15;&#x7528;&#x3002;&#x5B57;&#x9762;&#x91CF;&#x5982;&#x6587;&#x672C;&#x5B57;&#x7B26;&#x4E32;&#xFF0C;Java &#x4E2D;&#x58F0;&#x660E;&#x4E3A; final &#x7684;&#x5E38;&#x91CF;&#x503C;&#x7B49;&#xFF0C;&#x800C;&#x7B26;&#x53F7;&#x5F15;&#x7528;&#x5982;&#x7C7B;&#x548C;&#x63A5;&#x53E3;&#x7684;&#x5168;&#x5C40;&#x9650;&#x5B9A;&#x540D;&#xFF0C;&#x5B57;&#x6BB5;&#x7684;&#x540D;&#x79F0;&#x548C;&#x63CF;&#x8FF0;&#x7B26;&#xFF0C;&#x65B9;&#x6CD5;&#x7684;&#x540D;&#x79F0;&#x548C;&#x63CF;&#x8FF0;&#x7B26;&#x7B49;&#x3002;</p><p>&#x5E38;&#x91CF;&#x6C60;&#x7684;&#x603B;&#x4F53;&#x7ED3;&#x6784;&#xFF1A;Java &#x7C7B;&#x6240;&#x5BF9;&#x5E94;&#x7684;&#x5E38;&#x91CF;&#x6C60;&#x4E3B;&#x8981;&#x7531;&#x5E38;&#x91CF;&#x6C60;&#x6570;&#x91CF;&#x4E0E;&#x5E38;&#x91CF;&#x6C60;&#x6570;&#x7EC4;&#xFF08;&#x5E38;&#x91CF;&#x8868;&#xFF09;&#x8FD9;&#x4E24;&#x90E8;&#x5206;&#x5171;&#x540C;&#x6784;&#x6210;&#x3002;&#x5E38;&#x91CF;&#x6C60;&#x6570;&#x91CF;&#x7D27;&#x8DDF;&#x5728;&#x4E3B;&#x7248;&#x672C;&#x53F7;&#x540E;&#x9762;&#xFF0C;&#x5360;&#x636E; 2 &#x4E2A;&#x5B57;&#x8282;&#xFF1B;&#x5E38;&#x91CF;&#x6C60;&#x6570;&#x7EC4;&#x7D27;&#x8DDF;&#x5728;&#x5E38;&#x91CF;&#x6C60;&#x6570;&#x91CF;&#x4E4B;&#x540E;&#x3002;&#x5E38;&#x91CF;&#x6C60;&#x6570;&#x7EC4;&#x4E0E;&#x4E00;&#x822C;&#x7684;&#x6570;&#x7EC4;&#x4E0D;&#x540C;&#x7684;&#x662F;&#xFF0C;&#x5E38;&#x91CF;&#x6C60;&#x6570;&#x7EC4;&#x4E2D;&#x4E0D;&#x540C;&#x7684;&#x5143;&#x7D20;&#x7C7B;&#x578B;&#x3001;&#x7ED3;&#x6784;&#x90FD;&#x662F;&#x4E0D;&#x540C;&#x7684;&#xFF0C;&#x957F;&#x5EA6;&#x5F53;&#x7136;&#x4E5F;&#x5C31;&#x4E0D;&#x540C;&#xFF1B;&#x4F46;&#x662F;&#xFF0C;&#x6BCF;&#x4E00;&#x79CD;&#x5143;&#x7D20;&#x7684;&#x7B2C;&#x4E00;&#x4E2A;&#x6570;&#x636E;&#x90FD;&#x662F;&#x4E00;&#x4E2A; u1 &#x7C7B;&#x578B;&#xFF0C;&#x8BE5;&#x5B57;&#x8282;&#x662F;&#x4E00;&#x4E2A;&#x6807;&#x5FD7;&#x4F4D;&#xFF0C;&#x5360;&#x636E; 1 &#x4E2A;&#x5B57;&#x8282;&#x3002;JVM &#x5728;&#x89E3;&#x6790;&#x5E38;&#x91CF;&#x6C60;&#x65F6;&#xFF0C;&#x4F1A;&#x6839;&#x636E;&#x8FD9;&#x4E2A; u1 &#x7C7B;&#x578B;&#x6765;&#x83B7;&#x53D6;&#x5143;&#x7D20;&#x7684;&#x5177;&#x4F53;&#x7C7B;&#x578B;&#x3002;</p><p>&#x503C;&#x5F97;&#x6CE8;&#x610F;&#x7684;&#x662F;&#xFF0C;&#x5E38;&#x91CF;&#x6C60;&#x6570;&#x7EC4;&#x4E2D;&#x5143;&#x7D20;&#x7684;&#x4E2A;&#x6570;  = &#x5E38;&#x91CF;&#x6C60;&#x6570; - 1 &#xFF08;&#x5176;&#x4E2D;0&#x6682;&#x65F6;&#x4E0D;&#x4F7F;&#x7528;&#xFF09;&#x3002;&#x5BF9;&#x5E94;&#x7684;&#x662F; 00 18  &#x8F6C;&#x5316;&#x4E3A;&#x5341;&#x8FDB;&#x5236;&#x4E3A;24&#x4E2A;&#x5E38;&#x91CF;&#xFF0C;&#x800C;&#x6211;&#x4EEC;&#x770B;&#x5230;&#x53EA;&#x6709;23&#x4E2A;&#x3002;&#x76EE;&#x7684;&#x662F;&#x6EE1;&#x8DB3;&#x67D0;&#x4E9B;&#x5E38;&#x91CF;&#x6C60;&#x7D22;&#x5F15;&#x503C;&#x7684;&#x6570;&#x636E;&#x5728;&#x7279;&#x5B9A;&#x60C5;&#x51B5;&#x4E0B;&#x9700;&#x8981;&#x8868;&#x8FBE;&#x201C;&#x4E0D;&#x5F15;&#x7528;&#x4EFB;&#x4F55;&#x4E00;&#x4E2A;&#x5E38;&#x91CF;&#x201D;&#x7684;&#x542B;&#x4E49;&#xFF1B;&#x6839;&#x672C;&#x539F;&#x56E0;&#x5728;&#x4E8E;&#xFF0C;&#x7D22;&#x5F15; 0 &#x4E5F;&#x662F;&#x4E00;&#x4E2A;&#x5E38;&#x91CF;&#xFF08;&#x4FDD;&#x7559;&#x5E38;&#x91CF;&#xFF09;&#xFF0C;&#x53EA;&#x4E0D;&#x8FC7;&#x5B83;&#x4E0D;&#x4F4D;&#x4E8E;&#x5E38;&#x91CF;&#x8868;&#x4E2D;&#xFF0C;&#x8FD9;&#x4E2A;&#x5E38;&#x91CF;&#x5C31;&#x5BF9;&#x5E94; null &#x503C;&#xFF0C;&#x6240;&#x4EE5;&#xFF0C;&#x5E38;&#x91CF;&#x6C60;&#x7684;&#x7D22;&#x5F15;&#x4ECE; 1 &#x5F00;&#x59CB;&#x800C;&#x4E0D;&#x662F; 0 &#x3002;</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">Constant pool:</span><br><span class="line">   #1 = Methodref          #4.#20         // java/lang/Object.&quot;&lt;init&gt;&quot;:()V</span><br><span class="line">   #2 = Fieldref           #3.#21         // com/cuzz/jvm/bytecode/MyTest01.a:I</span><br><span class="line">   #3 = Class              #22            // com/cuzz/jvm/bytecode/MyTest01</span><br><span class="line">   #4 = Class              #23            // java/lang/Object</span><br><span class="line">   #5 = Utf8               a</span><br><span class="line">   #6 = Utf8               I</span><br><span class="line">   #7 = Utf8               &lt;init&gt;</span><br><span class="line">   #8 = Utf8               ()V</span><br><span class="line">   #9 = Utf8               Code</span><br><span class="line">  #10 = Utf8               LineNumberTable</span><br><span class="line">  #11 = Utf8               LocalVariableTable</span><br><span class="line">  #12 = Utf8               this</span><br><span class="line">  #13 = Utf8               Lcom/cuzz/jvm/bytecode/MyTest01;</span><br><span class="line">  #14 = Utf8               getA</span><br><span class="line">  #15 = Utf8               ()I</span><br><span class="line">  #16 = Utf8               setA</span><br><span class="line">  #17 = Utf8               (I)V</span><br><span class="line">  #18 = Utf8               SourceFile</span><br><span class="line">  #19 = Utf8               MyTest01.java</span><br><span class="line">  #20 = NameAndType        #7:#8          // &quot;&lt;init&gt;&quot;:()V</span><br><span class="line">  #21 = NameAndType        #5:#6          // a:I</span><br><span class="line">  #22 = Utf8               com/cuzz/jvm/bytecode/MyTest01</span><br><span class="line">  #23 = Utf8               java/lang/Object</span><br></pre></td></tr></table></figure><p>Class &#x6587;&#x4EF6;&#x7ED3;&#x6784;&#x4E2D;&#x5E38;&#x91CF;&#x6C60;&#x6570;&#x636E;&#x7C7B;&#x578B;&#x7684;&#x7ED3;&#x6784;&#x8868;</p><p><img src="/2019/02/06/&#x6DF1;&#x5165;&#x7406;&#x89E3;Java&#x865A;&#x62DF;&#x673A;&#xFF08;&#x4E09;&#xFF09;/&#x6DF1;&#x5165;&#x7406;&#x89E3;Java&#x865A;&#x62DF;&#x673A;(&#x4E09;" alt="c717816f04e3fee14c9745e06356247a">/c717816f04e3fee14c9745e06356247a.jpg)</p><p>&#x5728; JVM &#x89C4;&#x8303;&#x4E2D;&#xFF0C;&#x6BCF;&#x4E00;&#x4E2A;&#x53D8;&#x91CF;/&#x5B57;&#x6BB5;&#x90FD;&#x6709;&#x63CF;&#x8FF0;&#x4FE1;&#x606F;&#xFF0C;&#x63CF;&#x8FF0;&#x4FE1;&#x606F;&#x4E3B;&#x8981;&#x7684;&#x4F5C;&#x7528;&#x662F;&#x63CF;&#x8FF0;&#x5B57;&#x6BB5;&#x7684;&#x6570;&#x636E;&#x7C7B;&#x578B;&#x3001;&#x65B9;&#x6CD5;&#x7684;&#x53C2;&#x6570;&#x5217;&#x8868;&#xFF08;&#x5305;&#x62EC;&#x6570;&#x91CF;&#x3001;&#x7C7B;&#x578B;&#x4E0E;&#x987A;&#x5E8F;&#xFF09;&#x4E0E;&#x8FD4;&#x56DE;&#x503C;&#x3002;&#x6839;&#x636E;&#x63CF;&#x8FF0;&#x7B26;&#x89C4;&#x5219;&#xFF0C;&#x57FA;&#x672C;&#x6570;&#x636E;&#x7C7B;&#x578B;&#x548C;&#x4EE3;&#x8868;&#x65E0;&#x8FD4;&#x56DE;&#x7684; void &#x7C7B;&#x578B;&#x90FD;&#x662F;&#x7528;&#x4E00;&#x4E2A;&#x5927;&#x5199;&#x5B57;&#x7B26;&#x6765;&#x8868;&#x793A;&#xFF0C;&#x5BF9;&#x8C61;&#x7C7B;&#x578B;&#x5219;&#x4F7F;&#x7528;&#x5B57;&#x7B26; L &#x52A0;&#x5BF9;&#x8C61;&#x7684;&#x5168;&#x9650;&#x5B9A;&#x540D;&#x79F0;&#x6765;&#x8868;&#x793A;&#x3002;&#x4E3A;&#x4E86;&#x538B;&#x7F29;&#x5B57;&#x8282;&#x7801;&#x6587;&#x4EF6;&#x7684;&#x4F53;&#x79EF;&#xFF0C;&#x5BF9;&#x4E8E;&#x57FA;&#x672C;&#x6570;&#x636E;&#x7C7B;&#x578B;&#xFF0C;JVM &#x90FD;&#x53EA;&#x4F7F;&#x7528;&#x4E00;&#x4E2A;&#x5927;&#x5199;&#x5B57;&#x6BCD;&#x6765;&#x8868;&#x793A;&#xFF0C;&#x5982;&#x4E0B;&#x6240;&#x793A;&#xFF1A;B - byte&#xFF0C;C - char&#xFF0C;D - double&#xFF0C;F  - float&#xFF0C;I - int&#xFF0C;J - long&#xFF0C;S - short&#xFF0C;Z - boolean&#xFF0C;V - void&#xFF0C;L - &#x5BF9;&#x8C61;&#x7C7B;&#x578B;&#xFF0C;&#x5982; <code>Ljava/lang/String;</code>&#x3002;</p><p>&#x5BF9;&#x4E8E;&#x6570;&#x7EC4;&#x7C7B;&#x578B;&#x6765;&#x8BF4;&#xFF0C;&#x6CA1;&#x4E00;&#x4E2A;&#x7EF4;&#x5EA6;&#x4F7F;&#x7528;&#x524D;&#x7F6E; [ &#x6765;&#x8868;&#x793A;&#xFF0C;&#x5982; <code>int []</code> &#x88AB;&#x8BB0;&#x5F55;&#x4E3A; [I &#xFF0C;<code>String[][]</code>  &#x88AB;&#x8BB0;&#x5F55;&#x4E3A; <code>[[Ljava/lang/String;</code>&#x3002;</p><p>&#x7528;&#x63CF;&#x8FF0;&#x7B26;&#x63CF;&#x8FF0;&#x65B9;&#x6CD5;&#x65F6;&#xFF0C;&#x6309;&#x7167;&#x5148;&#x53C2;&#x6570;&#x5217;&#x8868;&#xFF0C;&#x540E;&#x8FD4;&#x56DE;&#x503C;&#x7684;&#x987A;&#x5E8F;&#x6765;&#x63CF;&#x8FF0;&#x3002;&#x53C2;&#x6570;&#x5217;&#x8868;&#x6309;&#x7167;&#x53C2;&#x6570;&#x7684;&#x4E25;&#x683C;&#x987A;&#x5E8F;&#x653E;&#x5728;&#x4E00;&#x7EC4;&#x62EC;&#x53F7;&#x5185;&#xFF0C;&#x5982;&#x65B9;&#x6CD5;&#xFF1A;<code>String getRealNameByIdAndNickName(int id, String name)</code> &#x7684;&#x63CF;&#x8FF0;&#x7B26;&#x4E3A;&#xFF1A;<code>(I, Ljava/lang/String;) Ljava/lang/String;</code></p><p>&#x6211;&#x4EEC;&#x6765;&#x5206;&#x6790;&#x524D;&#x9762;&#x51E0;&#x4E2A;&#x5E38;&#x91CF;&#xFF0C;&#x5982;&#x56FE;&#xFF1A;</p><p><img src="/2019/02/06/&#x6DF1;&#x5165;&#x7406;&#x89E3;Java&#x865A;&#x62DF;&#x673A;&#xFF08;&#x4E09;&#xFF09;/&#x6DF1;&#x5165;&#x7406;&#x89E3;Java&#x865A;&#x62DF;&#x673A;(&#x4E09;" alt="1549183205091">/1549183205091.png)</p><p>&#x6211;&#x53CD;&#x7F16;&#x8BD1;&#x51FA;&#x6765;&#x7684;&#x6587;&#x4EF6;&#x5BF9;&#x6BD4;&#xFF1A;</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">Constant pool:</span><br><span class="line"> #1 = Methodref          #4.#20         // java/lang/Object.&quot;&lt;init&gt;&quot;:()V</span><br><span class="line"> #2 = Fieldref           #3.#21         // com/cuzz/jvm/bytecode/MyTest01.a:I</span><br><span class="line"> #3 = Class              #22            // com/cuzz/jvm/bytecode/MyTest01</span><br><span class="line"> #4 = Class              #23            // java/lang/Object</span><br><span class="line"> #5 = Utf8               a</span><br><span class="line"> #6 = Utf8               I</span><br><span class="line"> #7 = Utf8               &lt;init&gt;</span><br><span class="line"> #8 = Utf8               ()V</span><br><span class="line"> #9 = Utf8               Code</span><br><span class="line">#10 = Utf8               LineNumberTable</span><br><span class="line">#11 = Utf8               LocalVariableTable</span><br><span class="line">#12 = Utf8               this</span><br><span class="line">#13 = Utf8               Lcom/cuzz/jvm/bytecode/MyTest01;</span><br><span class="line">#14 = Utf8               getA</span><br><span class="line">#15 = Utf8               ()I</span><br><span class="line">#16 = Utf8               setA</span><br><span class="line">#17 = Utf8               (I)V</span><br><span class="line">#18 = Utf8               SourceFile</span><br><span class="line">#19 = Utf8               MyTest01.java</span><br><span class="line">#20 = NameAndType        #7:#8          // &quot;&lt;init&gt;&quot;:()V</span><br><span class="line">#21 = NameAndType        #5:#6          // a:I</span><br><span class="line">#22 = Utf8               com/cuzz/jvm/bytecode/MyTest01</span><br><span class="line">#23 = Utf8               java/lang/Object</span><br></pre></td></tr></table></figure><ol><li><code>0A 00 04 00 14</code>&#xFF0C;&#x5982;&#x56FE;&#x4E2D;&#x7684;&#x6807;&#x6CE8;&#x51FA;&#x6765;&#xFF0C;0A &#x5BF9;&#x5E94;&#x503C;&#x4E3A;10&#xFF0C;&#x5728;&#x4E0A;&#x8868;&#x7684;&#x5E38;&#x91CF;&#x4E2D; CONSTANT_Methodref_info &#x4E2D;&#xFF0C;&#x90A3;&#x4E48;&#x540E;&#x8FB9;&#x7684;2&#x4E2A;&#x5B57;&#x8282; 00 04 &#xFF08;&#x5341;&#x8FDB;&#x5236;4&#xFF09;&#x5C31;&#x662F; U2&#xFF08;&#x7B2C;&#x4E00;&#x4E2A;index&#xFF09;&#xFF0C;&#x5373;&#x6307;&#x5411;&#x58F0;&#x660E;&#x65B9;&#x6CD5;&#x7684;&#x7C7B;&#x63CF;&#x8FF0;&#x7B26; CONSTANT_Class_info &#x7684;&#x7D22;&#x5F15;&#x9879;&#xFF0C;&#x800C;&#x7B2C;&#x4E8C;&#x4E2A;&#x7D22;&#x5F15;&#xFF08;&#x7B2C;&#x4E8C;&#x4E2A;index&#xFF09;00 14&#xFF08;&#x5341;&#x8FDB;&#x5236;20&#xFF09; &#x6307;&#x5411;&#x540D;&#x79F0;&#x53CA;&#x7C7B;&#x578B;&#x63CF;&#x8FF0;&#x7B26; CONSTANT_NameAndType_info &#x7684;&#x7D22;&#x5F15;&#x9879;&#x3002;&#x7C7B;&#x63CF;&#x8FF0;&#x6307;&#x5411; #4 &#xFF0C;#4 &#x53C8;&#x6307;&#x5411; #23&#xFF0C;&#x6240;&#x4EE5;&#x63CF;&#x8FF0;&#x4E3A; java/lang/Object&#xFF0C;&#x800C;&#x540D;&#x79F0;&#x4EE5;&#x53CA;&#x7C7B;&#x578B;&#x63CF;&#x8FF0;&#x7B26;&#x6307;&#x5411; #20&#xFF0C;#20 &#x6709;&#x6307;&#x5411; #7 &#x548C; #8&#xFF0C;<code>&quot;&lt;init&gt;&quot;:()V</code> &#x8868;&#x793A;&#x4E3A;&#x6784;&#x9020;&#x65B9;&#x6CD5;&#x3002;</li><li><code>09 00 03 00 15</code> &#xFF0C;09 &#x662F;&#x6807;&#x5FD7;&#x4F4D;&#x5BF9;&#x7528;&#x7684;&#x662F; CONSTANT_Fieldref_info&#xFF0C;&#x7B2C;&#x4E00;&#x4E2A;&#x7D22;&#x5F15;&#x6307;&#x5411;&#x7684;&#x662F;&#x58F0;&#x660E;&#x5B57;&#x6BB5;&#x7684;&#x7C7B;&#x6216;&#x63A5;&#x53E3;&#x63CF;&#x8FF0;&#x7B26;&#xFF0C;CONSTANT_Class_info &#x7684;&#x7D22;&#x5F15;&#x9879;&#xFF0C;&#x6839;&#x4E0A;&#x9762;&#x4E00;&#x6837;&#x5206;&#x6790;&#x3002;</li><li><code>07 00 16</code> &#xFF0C; 00 16 &#x5341;&#x8FDB;&#x5236;&#x662F;22 &#xFF0C;07&#x662F;&#x5E38;&#x91CF; CONSTANT_CLass_info&#xFF0C;&#x53EA;&#x6709;&#x4E00;&#x4E2A;index&#xFF0C;&#x6307;&#x5411;&#x7684;&#x662F;&#x6307;&#x5B9A;&#x6743;&#x9650;&#x5B9A;&#x540D;&#x5E38;&#x91CF;&#x9879;&#x7684;&#x7D22;&#x5F15;&#xFF0C; 00 16 &#x662F;&#x5341;&#x8FDB;&#x5236;22&#x3002;</li><li><code>07 00 17</code> &#xFF0C;07&#x662F;&#x5E38;&#x91CF; CONSTANT_CLass_info&#xFF0C;&#x53EA;&#x6709;&#x4E00;&#x4E2A;index&#xFF0C;&#x6307;&#x5411;&#x7684;&#x662F;&#x6307;&#x5B9A;&#x6743;&#x9650;&#x5B9A;&#x540D;&#x5E38;&#x91CF;&#x9879;&#x7684;&#x7D22;&#x5F15;&#xFF0C;00 17 &#x5341;&#x8FDB;&#x5236;&#x662F;23&#x3002;</li><li><code>01 00 01 61</code>&#xFF0C;01 &#x662F; CONSTANT_Utf8_info&#xFF0C;&#x540E;&#x9762; 00 01 &#x8FD9;&#x4E24;&#x4E2A;&#x5B57;&#x8282;&#x8868;&#x793A;&#x957F;&#x5EA6;&#xFF0C;&#x6700;&#x540E; 61 &#xFF08;&#x5341;&#x8FDB;&#x5236;&#x4E3A;97&#xFF09;&#x7684;&#x8868;&#x793A; ASCII &#x4E2D;&#x5E26;&#x7D22;&#x5F15;&#xFF0C;&#x5728; ASCII &#x4E2D;&#x4E3A;&#x5B57;&#x6BCD; a&#x3002;</li><li><code>01 00 01</code>  &#x4E3A; I&#x3002;</li><li>&#x7B49;&#x7B49;</li></ol><h3 id="Java-&#x5B57;&#x8282;&#x7801;&#x7ED3;&#x6784;"><a href="#Java-&#x5B57;&#x8282;&#x7801;&#x7ED3;&#x6784;" class="headerlink" title="Java &#x5B57;&#x8282;&#x7801;&#x7ED3;&#x6784;"></a>Java &#x5B57;&#x8282;&#x7801;&#x7ED3;&#x6784;</h3><p><img src="/2019/02/06/&#x6DF1;&#x5165;&#x7406;&#x89E3;Java&#x865A;&#x62DF;&#x673A;&#xFF08;&#x4E09;&#xFF09;/&#x6DF1;&#x5165;&#x7406;&#x89E3;Java&#x865A;&#x62DF;&#x673A;(&#x4E09;" alt="class-structure">/class-structure.jpg)</p><p>Class &#x5B57;&#x8282;&#x7801;&#x4E2D;&#x6709;&#x4E24;&#x79CD;&#x6570;&#x636E;&#x7C7B;&#x578B;</p><ul><li>&#x5B57;&#x8282;&#x6570;&#x636E;&#x76F4;&#x63A5;&#x91CF;&#xFF1A;&#x8FD9;&#x662F;&#x57FA;&#x672C;&#x7684;&#x6570;&#x636E;&#x7C7B;&#x578B;&#xFF0C;&#x5171;&#x7EC6;&#x5206;&#x4E3A; u1&#x3001;u2&#x3001;u4&#x3001;u8 &#x8FD9;&#x56DB;&#x79CD;&#xFF0C;&#x5206;&#x522B;&#x4EE3;&#x8868;&#x8FDE;&#x7EED;&#x7684; 1 &#x4E2A;&#x5B57;&#x8282;&#x3001;2 &#x4E2A;&#x5B57;&#x8282;&#x3001;4 &#x4E2A;&#x5B57;&#x8282;&#x548C;8 &#x4E2A;&#x5B57;&#x8282;&#x3002;</li><li>&#x8868;&#xFF08;&#x6570;&#x7EC4;&#xFF09;&#xFF1A;&#x8868;&#x793A;&#x6709;&#x591A;&#x4E2A;&#x57FA;&#x672C;&#x6570;&#x636E;&#x6216;&#x5176;&#x4ED6;&#x8868;&#xFF0C;&#x6309;&#x7167;&#x65E2;&#x5B9A;&#x987A;&#x5E8F;&#x7EC4;&#x6210;&#x7684;&#x5927;&#x7684;&#x6570;&#x636E;&#x96C6;&#x5408;&#x3002;&#x8868;&#x793A;&#x6709;&#x7ED3;&#x6784;&#x7684;&#xFF0C;&#x5B83;&#x7684;&#x7ED3;&#x6784;&#x4F53;&#x73B0;&#x5728;&#xFF0C;&#x7EC4;&#x6210;&#x8868;&#x7684;&#x6210;&#x5206;&#x6240;&#x5728;&#x7684;&#x4F4D;&#x7F6E;&#x548C;&#x987A;&#x5E8F;&#x90FD;&#x5DF2;&#x7ECF;&#x4E25;&#x683C;&#x5B9A;&#x4E49;&#x597D;&#x7684;&#x3002;</li></ul><h3 id="&#x8BBF;&#x95EE;&#x6807;&#x5FD7;"><a href="#&#x8BBF;&#x95EE;&#x6807;&#x5FD7;" class="headerlink" title="&#x8BBF;&#x95EE;&#x6807;&#x5FD7;"></a>&#x8BBF;&#x95EE;&#x6807;&#x5FD7;</h3><p>&#x8BBF;&#x95EE;&#x6807;&#x5FD7;&#xFF08;Access_Flag&#xFF09;&#x4FE1;&#x606F;&#x5305;&#x62EC;&#x8BE5; Class &#x6587;&#x4EF6;&#x662F;&#x7C7B;&#x8FD8;&#x662F;&#x63A5;&#x53E3;&#xFF0C;&#x662F;&#x5426;&#x88AB;&#x5B9A;&#x4E49;&#x6210; public&#xFF0C;&#x662F;&#x5426;&#x662F; abstract&#xFF0C;&#x5982;&#x679C;&#x662F;&#x7C7B;&#xFF0C;&#x662F;&#x5426;&#x88AB;&#x58F0;&#x660E;&#x6210; final&#x3002;&#x901A;&#x8FC7;&#x4E0A;&#x9762;&#x7684;&#x6E90;&#x4EE3;&#x7801;&#xFF0C;&#x6211;&#x4EEC;&#x53EF;&#x4EE5;&#x77E5;&#x9053;&#x8BE5;&#x6587;&#x4EF6;&#x662F;&#x7C7B;&#x5E76;&#x4E14;&#x662F; public&#x3002;</p><p><img src="/2019/02/06/&#x6DF1;&#x5165;&#x7406;&#x89E3;Java&#x865A;&#x62DF;&#x673A;&#xFF08;&#x4E09;&#xFF09;/&#x6DF1;&#x5165;&#x7406;&#x89E3;Java&#x865A;&#x62DF;&#x673A;(&#x4E09;" alt="access-flag">/access-flag.jpg)</p><p>&#x5E38;&#x91CF;&#x6C60;&#x4E4B;&#x540E;&#x4E24;&#x4E2A;&#x5B57;&#x8282;&#x5C31;&#x662F;&#x8BBF;&#x95EE;&#x6807;&#x5FD7;&#xFF0C;&#x6211;&#x4EEC;&#x8FD9;&#x4E2A;&#x7C7B;&#x4E2D;&#x662F; <code>0x 00 21</code> &#xFF0C;&#x4ECE;&#x4E0A;&#x9762;&#x6765;&#x770B;&#x5E76;&#x6CA1;&#x6709;&#xFF0C;&#x539F;&#x6765;&#x5B83;&#x662F; <code>0x 00 20</code> &#x548C; <code>0x 00 01</code> &#x7684;&#x5E76;&#x96C6;&#xFF0C;&#x8868;&#x793A; ACC_PUBLIC &#x4E0E; ACC_SUPER&#x3002;</p><h3 id="&#x7C7B;&#x7D22;&#x5F15;&#x3001;&#x7236;&#x7C7B;&#x7D22;&#x5F15;&#x4E0E;&#x63A5;&#x53E3;&#x7D22;&#x5F15;"><a href="#&#x7C7B;&#x7D22;&#x5F15;&#x3001;&#x7236;&#x7C7B;&#x7D22;&#x5F15;&#x4E0E;&#x63A5;&#x53E3;&#x7D22;&#x5F15;" class="headerlink" title="&#x7C7B;&#x7D22;&#x5F15;&#x3001;&#x7236;&#x7C7B;&#x7D22;&#x5F15;&#x4E0E;&#x63A5;&#x53E3;&#x7D22;&#x5F15;"></a>&#x7C7B;&#x7D22;&#x5F15;&#x3001;&#x7236;&#x7C7B;&#x7D22;&#x5F15;&#x4E0E;&#x63A5;&#x53E3;&#x7D22;&#x5F15;</h3><p><img src="/2019/02/06/&#x6DF1;&#x5165;&#x7406;&#x89E3;Java&#x865A;&#x62DF;&#x673A;&#xFF08;&#x4E09;&#xFF09;/&#x6DF1;&#x5165;&#x7406;&#x89E3;Java&#x865A;&#x62DF;&#x673A;(&#x4E09;" alt="1549250272126">/1549250272126.png)</p><ul><li><code>00 03</code> &#x662F;&#x7C7B;&#x7D22;&#x5F15;&#xFF0C;&#x6307;&#x5411; #3 &#x8868;&#x793A;&#x662F;&#x4E00;&#x4E2A;&#x7C7B;&#xFF0C;&#x5176;&#x540D;&#x5B57;&#x4E3A; com/cuzz/jvm/bytecode/MyTest01</li><li><code>00 04</code> &#x662F;&#x7236;&#x4EB2;&#x7D22;&#x5F15;&#xFF0C;&#x6307;&#x5411; #4 &#x8868;&#x793A;&#x662F;&#x4E00;&#x4E2A;&#x7C7B;&#xFF0C;&#x5176;&#x540D;&#x5B57;&#x662F; java/lang/Object</li><li><code>00 00</code> &#x662F;&#x63A5;&#x53E3;&#xFF0C;&#x8868;&#x793A;&#x6CA1;&#x6709;&#x63A5;&#x53E3;</li></ul><h3 id="&#x5B57;&#x6BB5;&#x8868;&#x96C6;&#x5408;"><a href="#&#x5B57;&#x6BB5;&#x8868;&#x96C6;&#x5408;" class="headerlink" title="&#x5B57;&#x6BB5;&#x8868;&#x96C6;&#x5408;"></a>&#x5B57;&#x6BB5;&#x8868;&#x96C6;&#x5408;</h3><p>&#x5B57;&#x6BB5;&#x8868;&#x7528;&#x4E8E;&#x63CF;&#x8FF0;&#x7C7B;&#x548C;&#x63A5;&#x53E3;&#x4E2D;&#x58F0;&#x660E;&#x7684;&#x53D8;&#x91CF;&#x3002;&#x8FD9;&#x91CC;&#x7684;&#x5B57;&#x6BB5;&#x5305;&#x542B;&#x4E86;&#x7C7B;&#x7EA7;&#x522B;&#x53D8;&#x91CF;&#x4EE5;&#x53CA;&#x5B9E;&#x4F8B;&#x53D8;&#x91CF;&#xFF0C;&#x4F46;&#x4E0D;&#x5305;&#x62EC;&#x65B9;&#x6CD5;&#x5185;&#x90E8;&#x58F0;&#x660E;&#x7684;&#x5C40;&#x90E8;&#x53D8;&#x91CF;&#x3002;</p><p><img src="/2019/02/06/&#x6DF1;&#x5165;&#x7406;&#x89E3;Java&#x865A;&#x62DF;&#x673A;&#xFF08;&#x4E09;&#xFF09;/&#x6DF1;&#x5165;&#x7406;&#x89E3;Java&#x865A;&#x62DF;&#x673A;(&#x4E09;" alt="1549339719719">/1549339719719.png)</p><p>&#x5982;&#x4E0B;&#x56FE;</p><p><img src="/2019/02/06/&#x6DF1;&#x5165;&#x7406;&#x89E3;Java&#x865A;&#x62DF;&#x673A;&#xFF08;&#x4E09;&#xFF09;/&#x6DF1;&#x5165;&#x7406;&#x89E3;Java&#x865A;&#x62DF;&#x673A;(&#x4E09;" alt="1549340431752">/1549340431752.png)</p><p>00 01 &#x662F;&#x6210;&#x5458;&#x53D8;&#x91CF;&#x7684;&#x6570;&#x91CF;&#xFF0C;&#x540E;&#x9762;&#x63A5;&#x7740;&#x5C31;&#x662F; field_info &#x6210;&#x5458;&#x53D8;&#x91CF;&#x4FE1;&#x606F;</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">field_info {</span><br><span class="line">    u2 access_flags; // 0002 &#x8868;&#x793A;&#x79C1;&#x6709; private</span><br><span class="line">    u2 name_index; // 0005 &#x8868;&#x793A; a</span><br><span class="line">    u2 descriptor_index; // 0006 &#x8868;&#x793A; I</span><br><span class="line">    u2 attributes_count; // 0000 &#x6CA1;&#x6709;</span><br><span class="line">    attribute_info attributes[attributes_count];</span><br><span class="line">}</span><br></pre></td></tr></table></figure><h3 id="&#x65B9;&#x6CD5;&#x8868;"><a href="#&#x65B9;&#x6CD5;&#x8868;" class="headerlink" title="&#x65B9;&#x6CD5;&#x8868;"></a>&#x65B9;&#x6CD5;&#x8868;</h3><p>&#x521A;&#x5F00;&#x59CB;&#x7684; 00 03 &#x8868;&#x793A;&#x6709;&#x4E09;&#x4E2A;&#x65B9;&#x6CD5;&#xFF0C;&#x9664;&#x4E86;getter/setter &#x8FD8;&#x6709;&#x9ED8;&#x8BA4;&#x6784;&#x9020;&#x65B9;&#x6CD5;</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">methods_count {</span><br><span class="line">    u2 access_flags; // 0001 &#x8868;&#x793A; public</span><br><span class="line">    u2 name_index; // 0007 &#x6307;&#x5411;&#x5E38;&#x91CF;&#x6C60;&#x4E2D; #7 &#x7684;&#x5E38;&#x91CF;&#x4E3A; &lt;init&gt;</span><br><span class="line">    u2 descriptor_index; // 0008 &#x6307;&#x5411;&#x5E38;&#x91CF;&#x6C60;&#x4E2D; #8 &#x7684;&#x5E38;&#x91CF;&#x4E3A; ()V</span><br><span class="line">    u2 attributes_count; // 0001 &#x8868;&#x793A;&#x4E00;&#x4E2A;&#x5C5E;&#x6027;</span><br><span class="line">    attribute_info attributes[attributes_count];</span><br><span class="line">}</span><br></pre></td></tr></table></figure><p>&#x65B9;&#x6CD5;&#x4E2D;&#x7684;&#x5C5E;&#x6027;&#x7ED3;&#x6784;</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">attribute_info {</span><br><span class="line">    u2 attribute_name_index; // 0009 &#x6307;&#x5411;&#x5E38;&#x91CF;&#x6C60;&#x4E2D; #9 &#x4E3A; Code</span><br><span class="line">    u4 attribute_length; // 0000 0038 &#x8868;&#x793A;&#x957F;&#x5EA6;&#x4E3A; 0x38 &#x4E3A; 56 &#x957F;&#x5EA6;&#x7684;&#x5B57;&#x8282;</span><br><span class="line">    u1 info[attribute_length];</span><br><span class="line">}</span><br></pre></td></tr></table></figure><h3 id="Code-&#x7ED3;&#x6784;"><a href="#Code-&#x7ED3;&#x6784;" class="headerlink" title="Code &#x7ED3;&#x6784;"></a>Code &#x7ED3;&#x6784;</h3><p>Code attribute &#x7684;&#x4F5C;&#x7528;&#x662F;&#x4FDD;&#x5B58;&#x8BE5;&#x65B9;&#x6CD5;&#x7684;&#x7ED3;&#x6784;&#xFF0C;&#x5982;&#x6240;&#x5BF9;&#x5E94;&#x7684;&#x5B57;&#x8282;&#x7801;</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">Code_attribute {</span><br><span class="line">    u2 attribute_name_index;</span><br><span class="line">    u4 attribute_length;</span><br><span class="line">    u2 max_stack;</span><br><span class="line">    u2 max_locals;</span><br><span class="line">    u4 code_length;</span><br><span class="line">    u1 code[code_length];</span><br><span class="line">    u2 exception_table_length;</span><br><span class="line">    {</span><br><span class="line">        u2 start_pc;</span><br><span class="line">        u2 end_pc;</span><br><span class="line">        u2 handler_pc;</span><br><span class="line">        u2 catch_type;</span><br><span class="line">    } exception_table[exception_table_length];</span><br><span class="line">    u2 attributes_count;</span><br><span class="line">    attribute_info attributes[attributes_count];</span><br><span class="line">}</span><br></pre></td></tr></table></figure><ul><li>attribute_length &#x8868;&#x793A; attribute &#x6240;&#x5305;&#x542B;&#x7684;&#x5B57;&#x8282;&#x6570;&#xFF0C;&#x4E0D;&#x5305;&#x542B; attribute_name_index &#x548C; attribute_length &#x5B57;&#x6BB5;</li><li>max_stack &#x8868;&#x793A;&#x8FD9;&#x4E2A;&#x65B9;&#x6CD5;&#x8FD0;&#x884C;&#x7684;&#x4EFB;&#x4F55;&#x65F6;&#x523B;&#x6240;&#x80FD;&#x8FBE;&#x5230;&#x7684;&#x64CD;&#x4F5C;&#x6570;&#x6808;&#x7684;&#x6700;&#x5927;&#x6DF1;&#x5EA6;</li><li>max_locals &#x8868;&#x793A;&#x65B9;&#x6CD5;&#x6267;&#x884C;&#x671F;&#x95F4;&#x521B;&#x5EFA;&#x7684;&#x5C40;&#x90E8;&#x53D8;&#x91CF;&#x7684;&#x6570;&#x76EE;&#xFF0C;&#x5305;&#x542B;&#x7528;&#x6765;&#x8868;&#x793A;&#x4F20;&#x5165;&#x7684;&#x53C2;&#x6570;&#x7684;&#x5C40;&#x90E8;&#x53D8;&#x91CF;</li><li>code_length &#x8868;&#x793A;&#x8BE5;&#x65B9;&#x6CD5;&#x6240;&#x5305;&#x542B;&#x7684;&#x5B57;&#x8282;&#x7801;&#x7684;&#x5B57;&#x8282;&#x6570;&#x4EE5;&#x53CA;&#x5177;&#x4F53;&#x7684;&#x6307;&#x4EE4;&#x7801;&#xFF0C;&#x5177;&#x4F53;&#x5B57;&#x8282;&#x7801;&#x5373;&#x662F;&#x8BE5;&#x65B9;&#x6CD5;&#x88AB;&#x8C03;&#x7528;&#x65F6;&#xFF0C;&#x865A;&#x62DF;&#x673A;&#x6240;&#x6267;&#x884C;&#x7684;&#x5B57;&#x8282;&#x7801;</li><li>exception_table &#x8868;&#x793A;&#x5B58;&#x653E;&#x7684;&#x662F;&#x5904;&#x7406;&#x5F02;&#x5E38;&#x7684;&#x4FE1;&#x606F;<ul><li>&#x6BCF;&#x4E2A; exception_table &#x8868;&#x7531; start_pc&#xFF0C;end_pc&#xFF0C;handler_pc&#xFF0C;catch_type &#x7EC4;&#x6210;</li><li>start_pc &#x548C; end_pc &#x8868;&#x793A;&#x5728; code &#x6570;&#x7EC4;&#x4E2D;&#x7684;&#x4ECE; start_pc &#x5230; end_pc &#x5904;&#xFF08;&#x5305;&#x542B; start_pc&#xFF0C;&#x4E0D;&#x5305;&#x542B; end_pc&#xFF09;&#x7684;&#x6307;&#x4EE4;&#x629B;&#x51FA;&#x7684;&#x5F02;&#x5E38;&#x4F1A;&#x7531;&#x8FD9;&#x4E2A;&#x8868;&#x9879;&#x6765;&#x5904;&#x7406;</li><li>handler_pc &#x8868;&#x793A;&#x5904;&#x7406;&#x5F02;&#x5E38;&#x7684;&#x4EE3;&#x7801;&#x7684;&#x5F00;&#x59CB;&#x5904;&#xFF0C;catch_type &#x8868;&#x793A;&#x4F1A;&#x88AB;&#x5904;&#x7406;&#x7684;&#x5F02;&#x5E38;&#x7C7B;&#x578B;&#xFF0C;&#x5B83;&#x6307;&#x5411;&#x5E38;&#x91CF;&#x6C60;&#x4E2D;&#x7684;&#x4E00;&#x4E2A;&#x5F02;&#x5E38;&#x7C7B;&#xFF0C;&#x5F53; catch_type &#x4E3A; 0 &#x65F6;&#xFF0C;&#x8868;&#x793A;&#x5904;&#x7406;&#x6240;&#x6709;&#x7684;&#x5F02;&#x5E38;</li></ul></li></ul><h3 id="&#x5B57;&#x8282;&#x7801;&#x67E5;&#x770B;&#x5DE5;&#x5177;"><a href="#&#x5B57;&#x8282;&#x7801;&#x67E5;&#x770B;&#x5DE5;&#x5177;" class="headerlink" title="&#x5B57;&#x8282;&#x7801;&#x67E5;&#x770B;&#x5DE5;&#x5177;"></a>&#x5B57;&#x8282;&#x7801;&#x67E5;&#x770B;&#x5DE5;&#x5177;</h3><p><a href="https://github.com/ingokegel/jclasslib" target="_blank" rel="noopener">https://github.com/ingokegel/jclasslib</a></p>]]></content>
    
    <summary type="html">
    
      &lt;h3 id=&quot;Java-&amp;#x5B57;&amp;#x8282;&amp;#x7801;&quot;&gt;&lt;a href=&quot;#Java-&amp;#x5B57;&amp;#x8282;&amp;#x7801;&quot; class=&quot;headerlink&quot; title=&quot;Java &amp;#x5B57;&amp;#x8282;&amp;#x7801;&quot;&gt;&lt;/a&gt;Java &amp;#x5B57;&amp;#x8282;&amp;#x7801;&lt;/h3&gt;&lt;p&gt;&amp;#x4EE3;&amp;#x7801;&amp;#x7F16;&amp;#x8BD1;&amp;#x7ED3;&amp;#x679C;&amp;#x4ECE;&amp;#x672C;&amp;#x5730;&amp;#x673A;&amp;#x5668;&amp;#x7801;&amp;#x8F6C;&amp;#x53D8;&amp;#x4E3A;&amp;#x5B57;&amp;#x8282;&amp;#x7801;&amp;#xFF0C;&amp;#x662F;&amp;#x5B58;&amp;#x50A8;&amp;#x683C;&amp;#x5F0F;&amp;#x53D1;&amp;#x5C55;&amp;#x7684;&amp;#x4E00;&amp;#x5C0F;&amp;#x6B65;&amp;#xFF0C;&amp;#x786E;&amp;#x662F;&amp;#x7F16;&amp;#x7A0B;&amp;#x8BED;&amp;#x8A00;&amp;#x53D1;&amp;#x5C55;&amp;#x7684;&amp;#x4E00;&amp;#x5927;&amp;#x6B65;&amp;#x3002;&lt;/p&gt;
    
    </summary>
    
      <category term="深入理解Java虚拟机" scheme="http://blog.cuzz.site/categories/%E6%B7%B1%E5%85%A5%E7%90%86%E8%A7%A3Java%E8%99%9A%E6%8B%9F%E6%9C%BA/"/>
    
    
      <category term="JVM" scheme="http://blog.cuzz.site/tags/JVM/"/>
    
  </entry>
  
</feed>
